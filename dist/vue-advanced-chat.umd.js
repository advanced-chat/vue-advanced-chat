(function(an,ln){typeof exports=="object"&&typeof module!="undefined"?ln(exports):typeof define=="function"&&define.amd?define(["exports"],ln):(an=typeof globalThis!="undefined"?globalThis:an||self,ln(an["vue-advanced-chat"]={}))})(this,function(an){"use strict";function ln(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?o=>!!n[o.toLowerCase()]:o=>!!n[o]}const td=ln("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Js(e){return!!e||e===""}function Le(e){if(be(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=Je(r)?od(r):Le(r);if(o)for(const i in o)t[i]=o[i]}return t}else{if(Je(e))return e;if(Xe(e))return e}}const nd=/;(?![^(]*\))/g,rd=/:(.+)/;function od(e){const t={};return e.split(nd).forEach(n=>{if(n){const r=n.split(rd);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Ae(e){let t="";if(Je(e))t=e;else if(be(e))for(let n=0;n<e.length;n++){const r=Ae(e[n]);r&&(t+=r+" ")}else if(Xe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Be(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Je(t)&&(e.class=Ae(t)),n&&(e.style=Le(n)),e}const we=e=>Je(e)?e:e==null?"":be(e)||Xe(e)&&(e.toString===na||!Ee(e.toString))?JSON.stringify(e,$s,2):String(e),$s=(e,t)=>t&&t.__v_isRef?$s(e,t.value):Pn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,o])=>(n[`${r} =>`]=o,n),{})}:ea(t)?{[`Set(${t.size})`]:[...t.values()]}:Xe(t)&&!be(t)&&!ra(t)?String(t):t,qe={},Mn=[],xt=()=>{},id=()=>!1,sd=/^on[^a-z]/,zr=e=>sd.test(e),ti=e=>e.startsWith("onUpdate:"),Ze=Object.assign,ni=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},ad=Object.prototype.hasOwnProperty,Me=(e,t)=>ad.call(e,t),be=Array.isArray,Pn=e=>Wr(e)==="[object Map]",ea=e=>Wr(e)==="[object Set]",Ee=e=>typeof e=="function",Je=e=>typeof e=="string",ri=e=>typeof e=="symbol",Xe=e=>e!==null&&typeof e=="object",ta=e=>Xe(e)&&Ee(e.then)&&Ee(e.catch),na=Object.prototype.toString,Wr=e=>na.call(e),ld=e=>Wr(e).slice(8,-1),ra=e=>Wr(e)==="[object Object]",oi=e=>Je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Vr=ln(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kr=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},cd=/-(\w)/g,pt=Kr(e=>e.replace(cd,(t,n)=>n?n.toUpperCase():"")),ud=/\B([A-Z])/g,Tt=Kr(e=>e.replace(ud,"-$1").toLowerCase()),Gr=Kr(e=>e.charAt(0).toUpperCase()+e.slice(1)),ii=Kr(e=>e?`on${Gr(e)}`:""),Xn=(e,t)=>!Object.is(e,t),si=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Yr=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},Qr=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let oa;const dd=()=>oa||(oa=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Rt;class fd{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Rt&&(this.parent=Rt,this.index=(Rt.scopes||(Rt.scopes=[])).push(this)-1)}run(t){if(this.active){const n=Rt;try{return Rt=this,t()}finally{Rt=n}}}on(){Rt=this}off(){Rt=this.parent}stop(t){if(this.active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(this.parent&&!t){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.active=!1}}}function hd(e,t=Rt){t&&t.active&&t.effects.push(e)}const ai=e=>{const t=new Set(e);return t.w=0,t.n=0,t},ia=e=>(e.w&Gt)>0,sa=e=>(e.n&Gt)>0,md=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Gt},gd=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const o=t[r];ia(o)&&!sa(o)?o.delete(e):t[n++]=o,o.w&=~Gt,o.n&=~Gt}t.length=n}},li=new WeakMap;let Zn=0,Gt=1;const ci=30;let _t;const cn=Symbol(""),ui=Symbol("");class di{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,hd(this,r)}run(){if(!this.active)return this.fn();let t=_t,n=Yt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=_t,_t=this,Yt=!0,Gt=1<<++Zn,Zn<=ci?md(this):aa(this),this.fn()}finally{Zn<=ci&&gd(this),Gt=1<<--Zn,_t=this.parent,Yt=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){_t===this?this.deferStop=!0:this.active&&(aa(this),this.onStop&&this.onStop(),this.active=!1)}}function aa(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let Yt=!0;const la=[];function In(){la.push(Yt),Yt=!1}function Ln(){const e=la.pop();Yt=e===void 0?!0:e}function ht(e,t,n){if(Yt&&_t){let r=li.get(e);r||li.set(e,r=new Map);let o=r.get(n);o||r.set(n,o=ai()),ca(o)}}function ca(e,t){let n=!1;Zn<=ci?sa(e)||(e.n|=Gt,n=!ia(e)):n=!e.has(_t),n&&(e.add(_t),_t.deps.push(e))}function Ft(e,t,n,r,o,i){const a=li.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(n==="length"&&be(e))a.forEach((c,l)=>{(l==="length"||l>=r)&&s.push(c)});else switch(n!==void 0&&s.push(a.get(n)),t){case"add":be(e)?oi(n)&&s.push(a.get("length")):(s.push(a.get(cn)),Pn(e)&&s.push(a.get(ui)));break;case"delete":be(e)||(s.push(a.get(cn)),Pn(e)&&s.push(a.get(ui)));break;case"set":Pn(e)&&s.push(a.get(cn));break}if(s.length===1)s[0]&&fi(s[0]);else{const c=[];for(const l of s)l&&c.push(...l);fi(ai(c))}}function fi(e,t){const n=be(e)?e:[...e];for(const r of n)r.computed&&ua(r);for(const r of n)r.computed||ua(r)}function ua(e,t){(e!==_t||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const pd=ln("__proto__,__v_isRef,__isVue"),da=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ri)),vd=hi(),yd=hi(!1,!0),bd=hi(!0),fa=wd();function wd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Ie(this);for(let i=0,a=this.length;i<a;i++)ht(r,"get",i+"");const o=r[t](...n);return o===-1||o===!1?r[t](...n.map(Ie)):o}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){In();const r=Ie(this)[t].apply(this,n);return Ln(),r}}),e}function hi(e=!1,t=!1){return function(r,o,i){if(o==="__v_isReactive")return!e;if(o==="__v_isReadonly")return e;if(o==="__v_isShallow")return t;if(o==="__v_raw"&&i===(e?t?Nd:ka:t?wa:ba).get(r))return r;const a=be(r);if(!e&&a&&Me(fa,o))return Reflect.get(fa,o,i);const s=Reflect.get(r,o,i);return(ri(o)?da.has(o):pd(o))||(e||ht(r,"get",o),t)?s:tt(s)?a&&oi(o)?s:s.value:Xe(s)?e?xa(s):pi(s):s}}const kd=ha(),xd=ha(!0);function ha(e=!1){return function(n,r,o,i){let a=n[r];if(Jn(a)&&tt(a)&&!tt(o))return!1;if(!e&&!Jn(o)&&(yi(o)||(o=Ie(o),a=Ie(a)),!be(n)&&tt(a)&&!tt(o)))return a.value=o,!0;const s=be(n)&&oi(r)?Number(r)<n.length:Me(n,r),c=Reflect.set(n,r,o,i);return n===Ie(i)&&(s?Xn(o,a)&&Ft(n,"set",r,o):Ft(n,"add",r,o)),c}}function _d(e,t){const n=Me(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Ft(e,"delete",t,void 0),r}function Ad(e,t){const n=Reflect.has(e,t);return(!ri(t)||!da.has(t))&&ht(e,"has",t),n}function Ed(e){return ht(e,"iterate",be(e)?"length":cn),Reflect.ownKeys(e)}const ma={get:vd,set:kd,deleteProperty:_d,has:Ad,ownKeys:Ed},Cd={get:bd,set(e,t){return!0},deleteProperty(e,t){return!0}},Od=Ze({},ma,{get:yd,set:xd}),mi=e=>e,Xr=e=>Reflect.getPrototypeOf(e);function Zr(e,t,n=!1,r=!1){e=e.__v_raw;const o=Ie(e),i=Ie(t);n||(t!==i&&ht(o,"get",t),ht(o,"get",i));const{has:a}=Xr(o),s=r?mi:n?bi:$n;if(a.call(o,t))return s(e.get(t));if(a.call(o,i))return s(e.get(i));e!==o&&e.get(t)}function Jr(e,t=!1){const n=this.__v_raw,r=Ie(n),o=Ie(e);return t||(e!==o&&ht(r,"has",e),ht(r,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function $r(e,t=!1){return e=e.__v_raw,!t&&ht(Ie(e),"iterate",cn),Reflect.get(e,"size",e)}function ga(e){e=Ie(e);const t=Ie(this);return Xr(t).has.call(t,e)||(t.add(e),Ft(t,"add",e,e)),this}function pa(e,t){t=Ie(t);const n=Ie(this),{has:r,get:o}=Xr(n);let i=r.call(n,e);i||(e=Ie(e),i=r.call(n,e));const a=o.call(n,e);return n.set(e,t),i?Xn(t,a)&&Ft(n,"set",e,t):Ft(n,"add",e,t),this}function va(e){const t=Ie(this),{has:n,get:r}=Xr(t);let o=n.call(t,e);o||(e=Ie(e),o=n.call(t,e)),r&&r.call(t,e);const i=t.delete(e);return o&&Ft(t,"delete",e,void 0),i}function ya(){const e=Ie(this),t=e.size!==0,n=e.clear();return t&&Ft(e,"clear",void 0,void 0),n}function eo(e,t){return function(r,o){const i=this,a=i.__v_raw,s=Ie(a),c=t?mi:e?bi:$n;return!e&&ht(s,"iterate",cn),a.forEach((l,d)=>r.call(o,c(l),c(d),i))}}function to(e,t,n){return function(...r){const o=this.__v_raw,i=Ie(o),a=Pn(i),s=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,l=o[e](...r),d=n?mi:t?bi:$n;return!t&&ht(i,"iterate",c?ui:cn),{next(){const{value:f,done:g}=l.next();return g?{value:f,done:g}:{value:s?[d(f[0]),d(f[1])]:d(f),done:g}},[Symbol.iterator](){return this}}}}function Qt(e){return function(...t){return e==="delete"?!1:this}}function Sd(){const e={get(i){return Zr(this,i)},get size(){return $r(this)},has:Jr,add:ga,set:pa,delete:va,clear:ya,forEach:eo(!1,!1)},t={get(i){return Zr(this,i,!1,!0)},get size(){return $r(this)},has:Jr,add:ga,set:pa,delete:va,clear:ya,forEach:eo(!1,!0)},n={get(i){return Zr(this,i,!0)},get size(){return $r(this,!0)},has(i){return Jr.call(this,i,!0)},add:Qt("add"),set:Qt("set"),delete:Qt("delete"),clear:Qt("clear"),forEach:eo(!0,!1)},r={get(i){return Zr(this,i,!0,!0)},get size(){return $r(this,!0)},has(i){return Jr.call(this,i,!0)},add:Qt("add"),set:Qt("set"),delete:Qt("delete"),clear:Qt("clear"),forEach:eo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=to(i,!1,!1),n[i]=to(i,!0,!1),t[i]=to(i,!1,!0),r[i]=to(i,!0,!0)}),[e,n,t,r]}const[Td,Rd,Md,Pd]=Sd();function gi(e,t){const n=t?e?Pd:Md:e?Rd:Td;return(r,o,i)=>o==="__v_isReactive"?!e:o==="__v_isReadonly"?e:o==="__v_raw"?r:Reflect.get(Me(n,o)&&o in r?n:r,o,i)}const Id={get:gi(!1,!1)},Ld={get:gi(!1,!0)},jd={get:gi(!0,!1)},ba=new WeakMap,wa=new WeakMap,ka=new WeakMap,Nd=new WeakMap;function Dd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bd(e){return e.__v_skip||!Object.isExtensible(e)?0:Dd(ld(e))}function pi(e){return Jn(e)?e:vi(e,!1,ma,Id,ba)}function Fd(e){return vi(e,!1,Od,Ld,wa)}function xa(e){return vi(e,!0,Cd,jd,ka)}function vi(e,t,n,r,o){if(!Xe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=o.get(e);if(i)return i;const a=Bd(e);if(a===0)return e;const s=new Proxy(e,a===2?r:n);return o.set(e,s),s}function jn(e){return Jn(e)?jn(e.__v_raw):!!(e&&e.__v_isReactive)}function Jn(e){return!!(e&&e.__v_isReadonly)}function yi(e){return!!(e&&e.__v_isShallow)}function _a(e){return jn(e)||Jn(e)}function Ie(e){const t=e&&e.__v_raw;return t?Ie(t):e}function Aa(e){return Yr(e,"__v_skip",!0),e}const $n=e=>Xe(e)?pi(e):e,bi=e=>Xe(e)?xa(e):e;function Ea(e){Yt&&_t&&(e=Ie(e),ca(e.dep||(e.dep=ai())))}function Ca(e,t){e=Ie(e),e.dep&&fi(e.dep)}function tt(e){return!!(e&&e.__v_isRef===!0)}function un(e){return Ud(e,!1)}function Ud(e,t){return tt(e)?e:new Hd(e,t)}class Hd{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Ie(t),this._value=n?t:$n(t)}get value(){return Ea(this),this._value}set value(t){t=this.__v_isShallow?t:Ie(t),Xn(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:$n(t),Ca(this))}}function dn(e){return tt(e)?e.value:e}const qd={get:(e,t,n)=>dn(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return tt(o)&&!tt(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function Oa(e){return jn(e)?e:new Proxy(e,qd)}class zd{constructor(t,n,r,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new di(t,()=>{this._dirty||(this._dirty=!0,Ca(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=r}get value(){const t=Ie(this);return Ea(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Wd(e,t,n=!1){let r,o;const i=Ee(e);return i?(r=e,o=xt):(r=e.get,o=e.set),new zd(r,o,i||!o,n)}function Xt(e,t,n,r){let o;try{o=r?e(...r):e()}catch(i){no(i,t,n)}return o}function vt(e,t,n,r){if(Ee(e)){const i=Xt(e,t,n,r);return i&&ta(i)&&i.catch(a=>{no(a,t,n)}),i}const o=[];for(let i=0;i<e.length;i++)o.push(vt(e[i],t,n,r));return o}function no(e,t,n,r=!0){const o=t?t.vnode:null;if(t){let i=t.parent;const a=t.proxy,s=n;for(;i;){const l=i.ec;if(l){for(let d=0;d<l.length;d++)if(l[d](e,a,s)===!1)return}i=i.parent}const c=t.appContext.config.errorHandler;if(c){Xt(c,null,10,[e,a,s]);return}}Vd(e,n,o,r)}function Vd(e,t,n,r=!0){console.error(e)}let ro=!1,wi=!1;const mt=[];let Ut=0;const er=[];let tr=null,Nn=0;const nr=[];let Zt=null,Dn=0;const Sa=Promise.resolve();let ki=null,xi=null;function Ta(e){const t=ki||Sa;return e?t.then(this?e.bind(this):e):t}function Kd(e){let t=Ut+1,n=mt.length;for(;t<n;){const r=t+n>>>1;rr(mt[r])<e?t=r+1:n=r}return t}function Ra(e){(!mt.length||!mt.includes(e,ro&&e.allowRecurse?Ut+1:Ut))&&e!==xi&&(e.id==null?mt.push(e):mt.splice(Kd(e.id),0,e),Ma())}function Ma(){!ro&&!wi&&(wi=!0,ki=Sa.then(La))}function Gd(e){const t=mt.indexOf(e);t>Ut&&mt.splice(t,1)}function Pa(e,t,n,r){be(e)?n.push(...e):(!t||!t.includes(e,e.allowRecurse?r+1:r))&&n.push(e),Ma()}function Yd(e){Pa(e,tr,er,Nn)}function Qd(e){Pa(e,Zt,nr,Dn)}function oo(e,t=null){if(er.length){for(xi=t,tr=[...new Set(er)],er.length=0,Nn=0;Nn<tr.length;Nn++)tr[Nn]();tr=null,Nn=0,xi=null,oo(e,t)}}function Ia(e){if(oo(),nr.length){const t=[...new Set(nr)];if(nr.length=0,Zt){Zt.push(...t);return}for(Zt=t,Zt.sort((n,r)=>rr(n)-rr(r)),Dn=0;Dn<Zt.length;Dn++)Zt[Dn]();Zt=null,Dn=0}}const rr=e=>e.id==null?1/0:e.id;function La(e){wi=!1,ro=!0,oo(e),mt.sort((n,r)=>rr(n)-rr(r));const t=xt;try{for(Ut=0;Ut<mt.length;Ut++){const n=mt[Ut];n&&n.active!==!1&&Xt(n,null,14)}}finally{Ut=0,mt.length=0,Ia(),ro=!1,ki=null,(mt.length||er.length||nr.length)&&La(e)}}function Xd(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||qe;let o=n;const i=t.startsWith("update:"),a=i&&t.slice(7);if(a&&a in r){const d=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:g}=r[d]||qe;g&&(o=n.map(y=>y.trim())),f&&(o=n.map(Qr))}let s,c=r[s=ii(t)]||r[s=ii(pt(t))];!c&&i&&(c=r[s=ii(Tt(t))]),c&&vt(c,e,6,o);const l=r[s+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,vt(l,e,6,o)}}function ja(e,t,n=!1){const r=t.emitsCache,o=r.get(e);if(o!==void 0)return o;const i=e.emits;let a={},s=!1;if(!Ee(e)){const c=l=>{const d=ja(l,t,!0);d&&(s=!0,Ze(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!s?(r.set(e,null),null):(be(i)?i.forEach(c=>a[c]=null):Ze(a,i),r.set(e,a),a)}function io(e,t){return!e||!zr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Me(e,t[0].toLowerCase()+t.slice(1))||Me(e,Tt(t))||Me(e,t))}let nt=null,Na=null;function so(e){const t=nt;return nt=e,Na=e&&e.type.__scopeId||null,t}function ve(e,t=nt,n){if(!t||e._n)return e;const r=(...o)=>{r._d&&dl(-1);const i=so(t),a=e(...o);return so(i),r._d&&dl(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function Qw(){}function _i(e){const{type:t,vnode:n,proxy:r,withProxy:o,props:i,propsOptions:[a],slots:s,attrs:c,emit:l,render:d,renderCache:f,data:g,setupState:y,ctx:_,inheritAttrs:A}=e;let w,T;const O=so(e);try{if(n.shapeFlag&4){const K=o||r;w=Pt(d.call(K,K,f,i,y,g,_)),T=c}else{const K=t;w=Pt(K.length>1?K(i,{attrs:c,slots:s,emit:l}):K(i,null)),T=t.props?c:Zd(c)}}catch(K){ar.length=0,no(K,e,1),w=ie(bt)}let I=w;if(T&&A!==!1){const K=Object.keys(T),{shapeFlag:Q}=I;K.length&&Q&7&&(a&&K.some(ti)&&(T=Jd(T,a)),I=Jt(I,T))}return n.dirs&&(I=Jt(I),I.dirs=I.dirs?I.dirs.concat(n.dirs):n.dirs),n.transition&&(I.transition=n.transition),w=I,so(O),w}const Zd=e=>{let t;for(const n in e)(n==="class"||n==="style"||zr(n))&&((t||(t={}))[n]=e[n]);return t},Jd=(e,t)=>{const n={};for(const r in e)(!ti(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function $d(e,t,n){const{props:r,children:o,component:i}=e,{props:a,children:s,patchFlag:c}=t,l=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Da(r,a,l):!!a;if(c&8){const d=t.dynamicProps;for(let f=0;f<d.length;f++){const g=d[f];if(a[g]!==r[g]&&!io(l,g))return!0}}}else return(o||s)&&(!s||!s.$stable)?!0:r===a?!1:r?a?Da(r,a,l):!0:!!a;return!1}function Da(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const i=r[o];if(t[i]!==e[i]&&!io(n,i))return!0}return!1}function ef({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const tf=e=>e.__isSuspense;function nf(e,t){t&&t.pendingBranch?be(e)?t.effects.push(...e):t.effects.push(e):Qd(e)}function rf(e,t){if($e){let n=$e.provides;const r=$e.parent&&$e.parent.provides;r===n&&(n=$e.provides=Object.create(r)),n[e]=t}}function Ai(e,t,n=!1){const r=$e||nt;if(r){const o=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(o&&e in o)return o[e];if(arguments.length>1)return n&&Ee(t)?t.call(r.proxy):t}}function of(e,t){return Ci(e,null,{flush:"post"})}const Ba={};function Ei(e,t,n){return Ci(e,t,n)}function Ci(e,t,{immediate:n,deep:r,flush:o,onTrack:i,onTrigger:a}=qe){const s=$e;let c,l=!1,d=!1;if(tt(e)?(c=()=>e.value,l=yi(e)):jn(e)?(c=()=>e,r=!0):be(e)?(d=!0,l=e.some(T=>jn(T)||yi(T)),c=()=>e.map(T=>{if(tt(T))return T.value;if(jn(T))return fn(T);if(Ee(T))return Xt(T,s,2)})):Ee(e)?t?c=()=>Xt(e,s,2):c=()=>{if(!(s&&s.isUnmounted))return f&&f(),vt(e,s,3,[g])}:c=xt,t&&r){const T=c;c=()=>fn(T())}let f,g=T=>{f=w.onStop=()=>{Xt(T,s,4)}};if(cr)return g=xt,t?n&&vt(t,s,3,[c(),d?[]:void 0,g]):c(),xt;let y=d?[]:Ba;const _=()=>{if(!!w.active)if(t){const T=w.run();(r||l||(d?T.some((O,I)=>Xn(O,y[I])):Xn(T,y)))&&(f&&f(),vt(t,s,3,[T,y===Ba?void 0:y,g]),y=T)}else w.run()};_.allowRecurse=!!t;let A;o==="sync"?A=_:o==="post"?A=()=>ut(_,s&&s.suspense):A=()=>Yd(_);const w=new di(c,A);return t?n?_():y=w.run():o==="post"?ut(w.run.bind(w),s&&s.suspense):w.run(),()=>{w.stop(),s&&s.scope&&ni(s.scope.effects,w)}}function sf(e,t,n){const r=this.proxy,o=Je(e)?e.includes(".")?Fa(r,e):()=>r[e]:e.bind(r,r);let i;Ee(t)?i=t:(i=t.handler,n=t);const a=$e;Bn(this);const s=Ci(o,i.bind(r),n);return a?Bn(a):vn(),s}function Fa(e,t){const n=t.split(".");return()=>{let r=e;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}function fn(e,t){if(!Xe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),tt(e))fn(e.value,t);else if(be(e))for(let n=0;n<e.length;n++)fn(e[n],t);else if(ea(e)||Pn(e))e.forEach(n=>{fn(n,t)});else if(ra(e))for(const n in e)fn(e[n],t);return e}function Ua(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return co(()=>{e.isMounted=!0}),Ka(()=>{e.isUnmounting=!0}),e}const yt=[Function,Array],Ha={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:yt,onEnter:yt,onAfterEnter:yt,onEnterCancelled:yt,onBeforeLeave:yt,onLeave:yt,onAfterLeave:yt,onLeaveCancelled:yt,onBeforeAppear:yt,onAppear:yt,onAfterAppear:yt,onAppearCancelled:yt},setup(e,{slots:t}){const n=qi(),r=Ua();let o;return()=>{const i=t.default&&Si(t.default(),!0);if(!i||!i.length)return;let a=i[0];if(i.length>1){for(const A of i)if(A.type!==bt){a=A;break}}const s=Ie(e),{mode:c}=s;if(r.isLeaving)return Oi(a);const l=za(a);if(!l)return Oi(a);const d=or(l,s,r,n);ir(l,d);const f=n.subTree,g=f&&za(f);let y=!1;const{getTransitionKey:_}=l.type;if(_){const A=_();o===void 0?o=A:A!==o&&(o=A,y=!0)}if(g&&g.type!==bt&&(!pn(l,g)||y)){const A=or(g,s,r,n);if(ir(g,A),c==="out-in")return r.isLeaving=!0,A.afterLeave=()=>{r.isLeaving=!1,n.update()},Oi(a);c==="in-out"&&l.type!==bt&&(A.delayLeave=(w,T,O)=>{const I=qa(r,g);I[String(g.key)]=g,w._leaveCb=()=>{T(),w._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=O})}return a}}};function qa(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function or(e,t,n,r){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:l,onEnterCancelled:d,onBeforeLeave:f,onLeave:g,onAfterLeave:y,onLeaveCancelled:_,onBeforeAppear:A,onAppear:w,onAfterAppear:T,onAppearCancelled:O}=t,I=String(e.key),K=qa(n,e),Q=(M,N)=>{M&&vt(M,r,9,N)},D=(M,N)=>{const H=N[1];Q(M,N),be(M)?M.every(P=>P.length<=1)&&H():M.length<=1&&H()},j={mode:i,persisted:a,beforeEnter(M){let N=s;if(!n.isMounted)if(o)N=A||s;else return;M._leaveCb&&M._leaveCb(!0);const H=K[I];H&&pn(e,H)&&H.el._leaveCb&&H.el._leaveCb(),Q(N,[M])},enter(M){let N=c,H=l,P=d;if(!n.isMounted)if(o)N=w||c,H=T||l,P=O||d;else return;let h=!1;const k=M._enterCb=R=>{h||(h=!0,R?Q(P,[M]):Q(H,[M]),j.delayedLeave&&j.delayedLeave(),M._enterCb=void 0)};N?D(N,[M,k]):k()},leave(M,N){const H=String(e.key);if(M._enterCb&&M._enterCb(!0),n.isUnmounting)return N();Q(f,[M]);let P=!1;const h=M._leaveCb=k=>{P||(P=!0,N(),k?Q(_,[M]):Q(y,[M]),M._leaveCb=void 0,K[H]===e&&delete K[H])};K[H]=e,g?D(g,[M,h]):h()},clone(M){return or(M,t,n,r)}};return j}function Oi(e){if(ao(e))return e=Jt(e),e.children=null,e}function za(e){return ao(e)?e.children?e.children[0]:void 0:e}function ir(e,t){e.shapeFlag&6&&e.component?ir(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Si(e,t=!1,n){let r=[],o=0;for(let i=0;i<e.length;i++){let a=e[i];const s=n==null?a.key:String(n)+String(a.key!=null?a.key:i);a.type===Pe?(a.patchFlag&128&&o++,r=r.concat(Si(a.children,t,s))):(t||a.type!==bt)&&r.push(s!=null?Jt(a,{key:s}):a)}if(o>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}function Ti(e){return Ee(e)?{setup:e,name:e.name}:e}const sr=e=>!!e.type.__asyncLoader,ao=e=>e.type.__isKeepAlive;function af(e,t){Wa(e,"a",t)}function lf(e,t){Wa(e,"da",t)}function Wa(e,t,n=$e){const r=e.__wdc||(e.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return e()});if(lo(t,r,n),n){let o=n.parent;for(;o&&o.parent;)ao(o.parent.vnode)&&cf(r,t,n,o),o=o.parent}}function cf(e,t,n,r){const o=lo(t,e,r,!0);Ri(()=>{ni(r[t],o)},n)}function lo(e,t,n=$e,r=!1){if(n){const o=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;In(),Bn(n);const s=vt(t,n,e,a);return vn(),Ln(),s});return r?o.unshift(i):o.push(i),i}}const Ht=e=>(t,n=$e)=>(!cr||e==="sp")&&lo(e,t,n),uf=Ht("bm"),co=Ht("m"),df=Ht("bu"),Va=Ht("u"),Ka=Ht("bum"),Ri=Ht("um"),ff=Ht("sp"),hf=Ht("rtg"),mf=Ht("rtc");function gf(e,t=$e){lo("ec",e,t)}function qt(e,t){const n=nt;if(n===null)return e;const r=yo(n)||n.proxy,o=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[a,s,c,l=qe]=t[i];Ee(a)&&(a={mounted:a,updated:a}),a.deep&&fn(s),o.push({dir:a,instance:r,value:s,oldValue:void 0,arg:c,modifiers:l})}return e}function hn(e,t,n,r){const o=e.dirs,i=t&&t.dirs;for(let a=0;a<o.length;a++){const s=o[a];i&&(s.oldValue=i[a].value);let c=s.dir[r];c&&(In(),vt(c,n,8,[e.el,s,e,t]),Ln())}}const Mi="components",pf="directives";function pe(e,t){return Pi(Mi,e,!0,t)||e}const Ga=Symbol();function vf(e){return Je(e)?Pi(Mi,e,!1)||e:e||Ga}function uo(e){return Pi(pf,e)}function Pi(e,t,n=!0,r=!1){const o=nt||$e;if(o){const i=o.type;if(e===Mi){const s=Wf(i,!1);if(s&&(s===t||s===pt(t)||s===Gr(pt(t))))return i}const a=Ya(o[e]||i[e],t)||Ya(o.appContext[e],t);return!a&&r?i:a}}function Ya(e,t){return e&&(e[t]||e[pt(t)]||e[Gr(pt(t))])}function _e(e,t,n,r){let o;const i=n&&n[r];if(be(e)||Je(e)){o=new Array(e.length);for(let a=0,s=e.length;a<s;a++)o[a]=t(e[a],a,void 0,i&&i[a])}else if(typeof e=="number"){o=new Array(e);for(let a=0;a<e;a++)o[a]=t(a+1,a,void 0,i&&i[a])}else if(Xe(e))if(e[Symbol.iterator])o=Array.from(e,(a,s)=>t(a,s,void 0,i&&i[s]));else{const a=Object.keys(e);o=new Array(a.length);for(let s=0,c=a.length;s<c;s++){const l=a[s];o[s]=t(e[l],l,s,i&&i[s])}}else o=[];return n&&(n[r]=o),o}function Fe(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(be(r))for(let o=0;o<r.length;o++)e[r[o].name]=r[o].fn;else r&&(e[r.name]=r.fn)}return e}function oe(e,t,n={},r,o){if(nt.isCE||nt.parent&&sr(nt.parent)&&nt.parent.isCE)return ie("slot",t==="default"?null:{name:t},r&&r());let i=e[t];i&&i._c&&(i._d=!1),L();const a=i&&Qa(i(n)),s=je(Pe,{key:n.key||`_${t}`},a||(r?r():[]),a&&e._===1?64:-2);return!o&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),i&&i._c&&(i._d=!0),s}function Qa(e){return e.some(t=>go(t)?!(t.type===bt||t.type===Pe&&!Qa(t.children)):!0)?e:null}const Ii=e=>e?ml(e)?yo(e)||e.proxy:Ii(e.parent):null,fo=Ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ii(e.parent),$root:e=>Ii(e.root),$emit:e=>e.emit,$options:e=>Ja(e),$forceUpdate:e=>e.f||(e.f=()=>Ra(e.update)),$nextTick:e=>e.n||(e.n=Ta.bind(e.proxy)),$watch:e=>sf.bind(e)}),yf={get({_:e},t){const{ctx:n,setupState:r,data:o,props:i,accessCache:a,type:s,appContext:c}=e;let l;if(t[0]!=="$"){const y=a[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return o[t];case 4:return n[t];case 3:return i[t]}else{if(r!==qe&&Me(r,t))return a[t]=1,r[t];if(o!==qe&&Me(o,t))return a[t]=2,o[t];if((l=e.propsOptions[0])&&Me(l,t))return a[t]=3,i[t];if(n!==qe&&Me(n,t))return a[t]=4,n[t];Li&&(a[t]=0)}}const d=fo[t];let f,g;if(d)return t==="$attrs"&&ht(e,"get",t),d(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(n!==qe&&Me(n,t))return a[t]=4,n[t];if(g=c.config.globalProperties,Me(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:o,ctx:i}=e;return o!==qe&&Me(o,t)?(o[t]=n,!0):r!==qe&&Me(r,t)?(r[t]=n,!0):Me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:o,propsOptions:i}},a){let s;return!!n[a]||e!==qe&&Me(e,a)||t!==qe&&Me(t,a)||(s=i[0])&&Me(s,a)||Me(r,a)||Me(fo,a)||Me(o.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Me(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Li=!0;function bf(e){const t=Ja(e),n=e.proxy,r=e.ctx;Li=!1,t.beforeCreate&&Xa(t.beforeCreate,e,"bc");const{data:o,computed:i,methods:a,watch:s,provide:c,inject:l,created:d,beforeMount:f,mounted:g,beforeUpdate:y,updated:_,activated:A,deactivated:w,beforeDestroy:T,beforeUnmount:O,destroyed:I,unmounted:K,render:Q,renderTracked:D,renderTriggered:j,errorCaptured:M,serverPrefetch:N,expose:H,inheritAttrs:P,components:h,directives:k,filters:R}=t;if(l&&wf(l,r,null,e.appContext.config.unwrapInjectedRef),a)for(const E in a){const b=a[E];Ee(b)&&(r[E]=b.bind(n))}if(o){const E=o.call(n,n);Xe(E)&&(e.data=pi(E))}if(Li=!0,i)for(const E in i){const b=i[E],u=Ee(b)?b.bind(n,n):Ee(b.get)?b.get.bind(n,n):xt,v=!Ee(b)&&Ee(b.set)?b.set.bind(n):xt,S=yl({get:u,set:v});Object.defineProperty(r,E,{enumerable:!0,configurable:!0,get:()=>S.value,set:W=>S.value=W})}if(s)for(const E in s)Za(s[E],r,n,E);if(c){const E=Ee(c)?c.call(n):c;Reflect.ownKeys(E).forEach(b=>{rf(b,E[b])})}d&&Xa(d,e,"c");function m(E,b){be(b)?b.forEach(u=>E(u.bind(n))):b&&E(b.bind(n))}if(m(uf,f),m(co,g),m(df,y),m(Va,_),m(af,A),m(lf,w),m(gf,M),m(mf,D),m(hf,j),m(Ka,O),m(Ri,K),m(ff,N),be(H))if(H.length){const E=e.exposed||(e.exposed={});H.forEach(b=>{Object.defineProperty(E,b,{get:()=>n[b],set:u=>n[b]=u})})}else e.exposed||(e.exposed={});Q&&e.render===xt&&(e.render=Q),P!=null&&(e.inheritAttrs=P),h&&(e.components=h),k&&(e.directives=k)}function wf(e,t,n=xt,r=!1){be(e)&&(e=ji(e));for(const o in e){const i=e[o];let a;Xe(i)?"default"in i?a=Ai(i.from||o,i.default,!0):a=Ai(i.from||o):a=Ai(i),tt(a)&&r?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[o]=a}}function Xa(e,t,n){vt(be(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Za(e,t,n,r){const o=r.includes(".")?Fa(n,r):()=>n[r];if(Je(e)){const i=t[e];Ee(i)&&Ei(o,i)}else if(Ee(e))Ei(o,e.bind(n));else if(Xe(e))if(be(e))e.forEach(i=>Za(i,t,n,r));else{const i=Ee(e.handler)?e.handler.bind(n):t[e.handler];Ee(i)&&Ei(o,i,e)}}function Ja(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,s=i.get(t);let c;return s?c=s:!o.length&&!n&&!r?c=t:(c={},o.length&&o.forEach(l=>ho(c,l,a,!0)),ho(c,t,a)),i.set(t,c),c}function ho(e,t,n,r=!1){const{mixins:o,extends:i}=t;i&&ho(e,i,n,!0),o&&o.forEach(a=>ho(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const s=kf[a]||n&&n[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const kf={data:$a,props:mn,emits:mn,methods:mn,computed:mn,beforeCreate:at,created:at,beforeMount:at,mounted:at,beforeUpdate:at,updated:at,beforeDestroy:at,beforeUnmount:at,destroyed:at,unmounted:at,activated:at,deactivated:at,errorCaptured:at,serverPrefetch:at,components:mn,directives:mn,watch:_f,provide:$a,inject:xf};function $a(e,t){return t?e?function(){return Ze(Ee(e)?e.call(this,this):e,Ee(t)?t.call(this,this):t)}:t:e}function xf(e,t){return mn(ji(e),ji(t))}function ji(e){if(be(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function at(e,t){return e?[...new Set([].concat(e,t))]:t}function mn(e,t){return e?Ze(Ze(Object.create(null),e),t):t}function _f(e,t){if(!e)return t;if(!t)return e;const n=Ze(Object.create(null),e);for(const r in t)n[r]=at(e[r],t[r]);return n}function Af(e,t,n,r=!1){const o={},i={};Yr(i,po,1),e.propsDefaults=Object.create(null),el(e,t,o,i);for(const a in e.propsOptions[0])a in o||(o[a]=void 0);n?e.props=r?o:Fd(o):e.type.props?e.props=o:e.props=i,e.attrs=i}function Ef(e,t,n,r){const{props:o,attrs:i,vnode:{patchFlag:a}}=e,s=Ie(o),[c]=e.propsOptions;let l=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let f=0;f<d.length;f++){let g=d[f];if(io(e.emitsOptions,g))continue;const y=t[g];if(c)if(Me(i,g))y!==i[g]&&(i[g]=y,l=!0);else{const _=pt(g);o[_]=Ni(c,s,_,y,e,!1)}else y!==i[g]&&(i[g]=y,l=!0)}}}else{el(e,t,o,i)&&(l=!0);let d;for(const f in s)(!t||!Me(t,f)&&((d=Tt(f))===f||!Me(t,d)))&&(c?n&&(n[f]!==void 0||n[d]!==void 0)&&(o[f]=Ni(c,s,f,void 0,e,!0)):delete o[f]);if(i!==s)for(const f in i)(!t||!Me(t,f)&&!0)&&(delete i[f],l=!0)}l&&Ft(e,"set","$attrs")}function el(e,t,n,r){const[o,i]=e.propsOptions;let a=!1,s;if(t)for(let c in t){if(Vr(c))continue;const l=t[c];let d;o&&Me(o,d=pt(c))?!i||!i.includes(d)?n[d]=l:(s||(s={}))[d]=l:io(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,a=!0)}if(i){const c=Ie(n),l=s||qe;for(let d=0;d<i.length;d++){const f=i[d];n[f]=Ni(o,c,f,l[f],e,!Me(l,f))}}return a}function Ni(e,t,n,r,o,i){const a=e[n];if(a!=null){const s=Me(a,"default");if(s&&r===void 0){const c=a.default;if(a.type!==Function&&Ee(c)){const{propsDefaults:l}=o;n in l?r=l[n]:(Bn(o),r=l[n]=c.call(null,t),vn())}else r=c}a[0]&&(i&&!s?r=!1:a[1]&&(r===""||r===Tt(n))&&(r=!0))}return r}function tl(e,t,n=!1){const r=t.propsCache,o=r.get(e);if(o)return o;const i=e.props,a={},s=[];let c=!1;if(!Ee(e)){const d=f=>{c=!0;const[g,y]=tl(f,t,!0);Ze(a,g),y&&s.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return r.set(e,Mn),Mn;if(be(i))for(let d=0;d<i.length;d++){const f=pt(i[d]);nl(f)&&(a[f]=qe)}else if(i)for(const d in i){const f=pt(d);if(nl(f)){const g=i[d],y=a[f]=be(g)||Ee(g)?{type:g}:g;if(y){const _=il(Boolean,y.type),A=il(String,y.type);y[0]=_>-1,y[1]=A<0||_<A,(_>-1||Me(y,"default"))&&s.push(f)}}}const l=[a,s];return r.set(e,l),l}function nl(e){return e[0]!=="$"}function rl(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function ol(e,t){return rl(e)===rl(t)}function il(e,t){return be(t)?t.findIndex(n=>ol(n,e)):Ee(t)&&ol(t,e)?0:-1}const sl=e=>e[0]==="_"||e==="$stable",Di=e=>be(e)?e.map(Pt):[Pt(e)],Cf=(e,t,n)=>{if(t._n)return t;const r=ve((...o)=>Di(t(...o)),n);return r._c=!1,r},al=(e,t,n)=>{const r=e._ctx;for(const o in e){if(sl(o))continue;const i=e[o];if(Ee(i))t[o]=Cf(o,i,r);else if(i!=null){const a=Di(i);t[o]=()=>a}}},ll=(e,t)=>{const n=Di(t);e.slots.default=()=>n},Of=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Ie(t),Yr(t,"_",n)):al(t,e.slots={})}else e.slots={},t&&ll(e,t);Yr(e.slots,po,1)},Sf=(e,t,n)=>{const{vnode:r,slots:o}=e;let i=!0,a=qe;if(r.shapeFlag&32){const s=t._;s?n&&s===1?i=!1:(Ze(o,t),!n&&s===1&&delete o._):(i=!t.$stable,al(t,o)),a=t}else t&&(ll(e,t),a={default:1});if(i)for(const s in o)!sl(s)&&!(s in a)&&delete o[s]};function cl(){return{app:null,config:{isNativeTag:id,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Tf=0;function Rf(e,t){return function(r,o=null){Ee(r)||(r=Object.assign({},r)),o!=null&&!Xe(o)&&(o=null);const i=cl(),a=new Set;let s=!1;const c=i.app={_uid:Tf++,_component:r,_props:o,_container:null,_context:i,_instance:null,version:Kf,get config(){return i.config},set config(l){},use(l,...d){return a.has(l)||(l&&Ee(l.install)?(a.add(l),l.install(c,...d)):Ee(l)&&(a.add(l),l(c,...d))),c},mixin(l){return i.mixins.includes(l)||i.mixins.push(l),c},component(l,d){return d?(i.components[l]=d,c):i.components[l]},directive(l,d){return d?(i.directives[l]=d,c):i.directives[l]},mount(l,d,f){if(!s){const g=ie(r,o);return g.appContext=i,d&&t?t(g,l):e(g,l,f),s=!0,c._container=l,l.__vue_app__=c,yo(g.component)||g.component.proxy}},unmount(){s&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,d){return i.provides[l]=d,c}};return c}}function Bi(e,t,n,r,o=!1){if(be(e)){e.forEach((g,y)=>Bi(g,t&&(be(t)?t[y]:t),n,r,o));return}if(sr(r)&&!o)return;const i=r.shapeFlag&4?yo(r.component)||r.component.proxy:r.el,a=o?null:i,{i:s,r:c}=e,l=t&&t.r,d=s.refs===qe?s.refs={}:s.refs,f=s.setupState;if(l!=null&&l!==c&&(Je(l)?(d[l]=null,Me(f,l)&&(f[l]=null)):tt(l)&&(l.value=null)),Ee(c))Xt(c,s,12,[a,d]);else{const g=Je(c),y=tt(c);if(g||y){const _=()=>{if(e.f){const A=g?d[c]:c.value;o?be(A)&&ni(A,i):be(A)?A.includes(i)||A.push(i):g?(d[c]=[i],Me(f,c)&&(f[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else g?(d[c]=a,Me(f,c)&&(f[c]=a)):y&&(c.value=a,e.k&&(d[e.k]=a))};a?(_.id=-1,ut(_,n)):_()}}}const ut=nf;function Mf(e){return Pf(e)}function Pf(e,t){const n=dd();n.__VUE__=!0;const{insert:r,remove:o,patchProp:i,createElement:a,createText:s,createComment:c,setText:l,setElementText:d,parentNode:f,nextSibling:g,setScopeId:y=xt,cloneNode:_,insertStaticContent:A}=e,w=(x,C,q,G=null,Y=null,te=null,ae=!1,ee=null,se=!!C.dynamicChildren)=>{if(x===C)return;x&&!pn(x,C)&&(G=Ce(x),F(x,Y,te,!0),x=null),C.patchFlag===-2&&(se=!1,C.dynamicChildren=null);const{type:Z,ref:he,shapeFlag:de}=C;switch(Z){case Fi:T(x,C,q,G);break;case bt:O(x,C,q,G);break;case mo:x==null&&I(C,q,G,ae);break;case Pe:k(x,C,q,G,Y,te,ae,ee,se);break;default:de&1?D(x,C,q,G,Y,te,ae,ee,se):de&6?R(x,C,q,G,Y,te,ae,ee,se):(de&64||de&128)&&Z.process(x,C,q,G,Y,te,ae,ee,se,Ne)}he!=null&&Y&&Bi(he,x&&x.ref,te,C||x,!C)},T=(x,C,q,G)=>{if(x==null)r(C.el=s(C.children),q,G);else{const Y=C.el=x.el;C.children!==x.children&&l(Y,C.children)}},O=(x,C,q,G)=>{x==null?r(C.el=c(C.children||""),q,G):C.el=x.el},I=(x,C,q,G)=>{[x.el,x.anchor]=A(x.children,C,q,G,x.el,x.anchor)},K=({el:x,anchor:C},q,G)=>{let Y;for(;x&&x!==C;)Y=g(x),r(x,q,G),x=Y;r(C,q,G)},Q=({el:x,anchor:C})=>{let q;for(;x&&x!==C;)q=g(x),o(x),x=q;o(C)},D=(x,C,q,G,Y,te,ae,ee,se)=>{ae=ae||C.type==="svg",x==null?j(C,q,G,Y,te,ae,ee,se):H(x,C,Y,te,ae,ee,se)},j=(x,C,q,G,Y,te,ae,ee)=>{let se,Z;const{type:he,props:de,shapeFlag:me,transition:ye,patchFlag:Te,dirs:V}=x;if(x.el&&_!==void 0&&Te===-1)se=x.el=_(x.el);else{if(se=x.el=a(x.type,te,de&&de.is,de),me&8?d(se,x.children):me&16&&N(x.children,se,null,G,Y,te&&he!=="foreignObject",ae,ee),V&&hn(x,null,G,"created"),de){for(const B in de)B!=="value"&&!Vr(B)&&i(se,B,null,de[B],te,x.children,G,Y,ge);"value"in de&&i(se,"value",null,de.value),(Z=de.onVnodeBeforeMount)&&It(Z,G,x)}M(se,x,x.scopeId,ae,G)}V&&hn(x,null,G,"beforeMount");const J=(!Y||Y&&!Y.pendingBranch)&&ye&&!ye.persisted;J&&ye.beforeEnter(se),r(se,C,q),((Z=de&&de.onVnodeMounted)||J||V)&&ut(()=>{Z&&It(Z,G,x),J&&ye.enter(se),V&&hn(x,null,G,"mounted")},Y)},M=(x,C,q,G,Y)=>{if(q&&y(x,q),G)for(let te=0;te<G.length;te++)y(x,G[te]);if(Y){let te=Y.subTree;if(C===te){const ae=Y.vnode;M(x,ae,ae.scopeId,ae.slotScopeIds,Y.parent)}}},N=(x,C,q,G,Y,te,ae,ee,se=0)=>{for(let Z=se;Z<x.length;Z++){const he=x[Z]=ee?$t(x[Z]):Pt(x[Z]);w(null,he,C,q,G,Y,te,ae,ee)}},H=(x,C,q,G,Y,te,ae)=>{const ee=C.el=x.el;let{patchFlag:se,dynamicChildren:Z,dirs:he}=C;se|=x.patchFlag&16;const de=x.props||qe,me=C.props||qe;let ye;q&&gn(q,!1),(ye=me.onVnodeBeforeUpdate)&&It(ye,q,C,x),he&&hn(C,x,q,"beforeUpdate"),q&&gn(q,!0);const Te=Y&&C.type!=="foreignObject";if(Z?P(x.dynamicChildren,Z,ee,q,G,Te,te):ae||u(x,C,ee,null,q,G,Te,te,!1),se>0){if(se&16)h(ee,C,de,me,q,G,Y);else if(se&2&&de.class!==me.class&&i(ee,"class",null,me.class,Y),se&4&&i(ee,"style",de.style,me.style,Y),se&8){const V=C.dynamicProps;for(let J=0;J<V.length;J++){const B=V[J],ce=de[B],ke=me[B];(ke!==ce||B==="value")&&i(ee,B,ce,ke,Y,x.children,q,G,ge)}}se&1&&x.children!==C.children&&d(ee,C.children)}else!ae&&Z==null&&h(ee,C,de,me,q,G,Y);((ye=me.onVnodeUpdated)||he)&&ut(()=>{ye&&It(ye,q,C,x),he&&hn(C,x,q,"updated")},G)},P=(x,C,q,G,Y,te,ae)=>{for(let ee=0;ee<C.length;ee++){const se=x[ee],Z=C[ee],he=se.el&&(se.type===Pe||!pn(se,Z)||se.shapeFlag&70)?f(se.el):q;w(se,Z,he,null,G,Y,te,ae,!0)}},h=(x,C,q,G,Y,te,ae)=>{if(q!==G){for(const ee in G){if(Vr(ee))continue;const se=G[ee],Z=q[ee];se!==Z&&ee!=="value"&&i(x,ee,Z,se,ae,C.children,Y,te,ge)}if(q!==qe)for(const ee in q)!Vr(ee)&&!(ee in G)&&i(x,ee,q[ee],null,ae,C.children,Y,te,ge);"value"in G&&i(x,"value",q.value,G.value)}},k=(x,C,q,G,Y,te,ae,ee,se)=>{const Z=C.el=x?x.el:s(""),he=C.anchor=x?x.anchor:s("");let{patchFlag:de,dynamicChildren:me,slotScopeIds:ye}=C;ye&&(ee=ee?ee.concat(ye):ye),x==null?(r(Z,q,G),r(he,q,G),N(C.children,q,he,Y,te,ae,ee,se)):de>0&&de&64&&me&&x.dynamicChildren?(P(x.dynamicChildren,me,q,Y,te,ae,ee),(C.key!=null||Y&&C===Y.subTree)&&ul(x,C,!0)):u(x,C,q,he,Y,te,ae,ee,se)},R=(x,C,q,G,Y,te,ae,ee,se)=>{C.slotScopeIds=ee,x==null?C.shapeFlag&512?Y.ctx.activate(C,q,G,ae,se):p(C,q,G,Y,te,ae,se):m(x,C,se)},p=(x,C,q,G,Y,te,ae)=>{const ee=x.component=Ff(x,G,Y);if(ao(x)&&(ee.ctx.renderer=Ne),Uf(ee),ee.asyncDep){if(Y&&Y.registerDep(ee,E),!x.el){const se=ee.subTree=ie(bt);O(null,se,C,q)}return}E(ee,x,C,q,Y,te,ae)},m=(x,C,q)=>{const G=C.component=x.component;if($d(x,C,q))if(G.asyncDep&&!G.asyncResolved){b(G,C,q);return}else G.next=C,Gd(G.update),G.update();else C.el=x.el,G.vnode=C},E=(x,C,q,G,Y,te,ae)=>{const ee=()=>{if(x.isMounted){let{next:he,bu:de,u:me,parent:ye,vnode:Te}=x,V=he,J;gn(x,!1),he?(he.el=Te.el,b(x,he,ae)):he=Te,de&&si(de),(J=he.props&&he.props.onVnodeBeforeUpdate)&&It(J,ye,he,Te),gn(x,!0);const B=_i(x),ce=x.subTree;x.subTree=B,w(ce,B,f(ce.el),Ce(ce),x,Y,te),he.el=B.el,V===null&&ef(x,B.el),me&&ut(me,Y),(J=he.props&&he.props.onVnodeUpdated)&&ut(()=>It(J,ye,he,Te),Y)}else{let he;const{el:de,props:me}=C,{bm:ye,m:Te,parent:V}=x,J=sr(C);if(gn(x,!1),ye&&si(ye),!J&&(he=me&&me.onVnodeBeforeMount)&&It(he,V,C),gn(x,!0),de&&Ke){const B=()=>{x.subTree=_i(x),Ke(de,x.subTree,x,Y,null)};J?C.type.__asyncLoader().then(()=>!x.isUnmounted&&B()):B()}else{const B=x.subTree=_i(x);w(null,B,q,G,x,Y,te),C.el=B.el}if(Te&&ut(Te,Y),!J&&(he=me&&me.onVnodeMounted)){const B=C;ut(()=>It(he,V,B),Y)}(C.shapeFlag&256||V&&sr(V.vnode)&&V.vnode.shapeFlag&256)&&x.a&&ut(x.a,Y),x.isMounted=!0,C=q=G=null}},se=x.effect=new di(ee,()=>Ra(Z),x.scope),Z=x.update=()=>se.run();Z.id=x.uid,gn(x,!0),Z()},b=(x,C,q)=>{C.component=x;const G=x.vnode.props;x.vnode=C,x.next=null,Ef(x,C.props,G,q),Sf(x,C.children,q),In(),oo(void 0,x.update),Ln()},u=(x,C,q,G,Y,te,ae,ee,se=!1)=>{const Z=x&&x.children,he=x?x.shapeFlag:0,de=C.children,{patchFlag:me,shapeFlag:ye}=C;if(me>0){if(me&128){S(Z,de,q,G,Y,te,ae,ee,se);return}else if(me&256){v(Z,de,q,G,Y,te,ae,ee,se);return}}ye&8?(he&16&&ge(Z,Y,te),de!==Z&&d(q,de)):he&16?ye&16?S(Z,de,q,G,Y,te,ae,ee,se):ge(Z,Y,te,!0):(he&8&&d(q,""),ye&16&&N(de,q,G,Y,te,ae,ee,se))},v=(x,C,q,G,Y,te,ae,ee,se)=>{x=x||Mn,C=C||Mn;const Z=x.length,he=C.length,de=Math.min(Z,he);let me;for(me=0;me<de;me++){const ye=C[me]=se?$t(C[me]):Pt(C[me]);w(x[me],ye,q,null,Y,te,ae,ee,se)}Z>he?ge(x,Y,te,!0,!1,de):N(C,q,G,Y,te,ae,ee,se,de)},S=(x,C,q,G,Y,te,ae,ee,se)=>{let Z=0;const he=C.length;let de=x.length-1,me=he-1;for(;Z<=de&&Z<=me;){const ye=x[Z],Te=C[Z]=se?$t(C[Z]):Pt(C[Z]);if(pn(ye,Te))w(ye,Te,q,null,Y,te,ae,ee,se);else break;Z++}for(;Z<=de&&Z<=me;){const ye=x[de],Te=C[me]=se?$t(C[me]):Pt(C[me]);if(pn(ye,Te))w(ye,Te,q,null,Y,te,ae,ee,se);else break;de--,me--}if(Z>de){if(Z<=me){const ye=me+1,Te=ye<he?C[ye].el:G;for(;Z<=me;)w(null,C[Z]=se?$t(C[Z]):Pt(C[Z]),q,Te,Y,te,ae,ee,se),Z++}}else if(Z>me)for(;Z<=de;)F(x[Z],Y,te,!0),Z++;else{const ye=Z,Te=Z,V=new Map;for(Z=Te;Z<=me;Z++){const ct=C[Z]=se?$t(C[Z]):Pt(C[Z]);ct.key!=null&&V.set(ct.key,Z)}let J,B=0;const ce=me-Te+1;let ke=!1,Ge=0;const et=new Array(ce);for(Z=0;Z<ce;Z++)et[Z]=0;for(Z=ye;Z<=de;Z++){const ct=x[Z];if(B>=ce){F(ct,Y,te,!0);continue}let Bt;if(ct.key!=null)Bt=V.get(ct.key);else for(J=Te;J<=me;J++)if(et[J-Te]===0&&pn(ct,C[J])){Bt=J;break}Bt===void 0?F(ct,Y,te,!0):(et[Bt-Te]=Z+1,Bt>=Ge?Ge=Bt:ke=!0,w(ct,C[Bt],q,null,Y,te,ae,ee,se),B++)}const Zs=ke?If(et):Mn;for(J=Zs.length-1,Z=ce-1;Z>=0;Z--){const ct=Te+Z,Bt=C[ct],ed=ct+1<he?C[ct+1].el:G;et[Z]===0?w(null,Bt,q,ed,Y,te,ae,ee,se):ke&&(J<0||Z!==Zs[J]?W(Bt,q,ed,2):J--)}}},W=(x,C,q,G,Y=null)=>{const{el:te,type:ae,transition:ee,children:se,shapeFlag:Z}=x;if(Z&6){W(x.component.subTree,C,q,G);return}if(Z&128){x.suspense.move(C,q,G);return}if(Z&64){ae.move(x,C,q,Ne);return}if(ae===Pe){r(te,C,q);for(let de=0;de<se.length;de++)W(se[de],C,q,G);r(x.anchor,C,q);return}if(ae===mo){K(x,C,q);return}if(G!==2&&Z&1&&ee)if(G===0)ee.beforeEnter(te),r(te,C,q),ut(()=>ee.enter(te),Y);else{const{leave:de,delayLeave:me,afterLeave:ye}=ee,Te=()=>r(te,C,q),V=()=>{de(te,()=>{Te(),ye&&ye()})};me?me(te,Te,V):V()}else r(te,C,q)},F=(x,C,q,G=!1,Y=!1)=>{const{type:te,props:ae,ref:ee,children:se,dynamicChildren:Z,shapeFlag:he,patchFlag:de,dirs:me}=x;if(ee!=null&&Bi(ee,null,q,x,!0),he&256){C.ctx.deactivate(x);return}const ye=he&1&&me,Te=!sr(x);let V;if(Te&&(V=ae&&ae.onVnodeBeforeUnmount)&&It(V,C,x),he&6)le(x.component,q,G);else{if(he&128){x.suspense.unmount(q,G);return}ye&&hn(x,null,C,"beforeUnmount"),he&64?x.type.remove(x,C,q,Y,Ne,G):Z&&(te!==Pe||de>0&&de&64)?ge(Z,C,q,!1,!0):(te===Pe&&de&384||!Y&&he&16)&&ge(se,C,q),G&&re(x)}(Te&&(V=ae&&ae.onVnodeUnmounted)||ye)&&ut(()=>{V&&It(V,C,x),ye&&hn(x,null,C,"unmounted")},q)},re=x=>{const{type:C,el:q,anchor:G,transition:Y}=x;if(C===Pe){ue(q,G);return}if(C===mo){Q(x);return}const te=()=>{o(q),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(x.shapeFlag&1&&Y&&!Y.persisted){const{leave:ae,delayLeave:ee}=Y,se=()=>ae(q,te);ee?ee(x.el,te,se):se()}else te()},ue=(x,C)=>{let q;for(;x!==C;)q=g(x),o(x),x=q;o(C)},le=(x,C,q)=>{const{bum:G,scope:Y,update:te,subTree:ae,um:ee}=x;G&&si(G),Y.stop(),te&&(te.active=!1,F(ae,x,C,q)),ee&&ut(ee,C),ut(()=>{x.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&x.asyncDep&&!x.asyncResolved&&x.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},ge=(x,C,q,G=!1,Y=!1,te=0)=>{for(let ae=te;ae<x.length;ae++)F(x[ae],C,q,G,Y)},Ce=x=>x.shapeFlag&6?Ce(x.component.subTree):x.shapeFlag&128?x.suspense.next():g(x.anchor||x.el),Se=(x,C,q)=>{x==null?C._vnode&&F(C._vnode,null,null,!0):w(C._vnode||null,x,C,null,null,null,q),Ia(),C._vnode=x},Ne={p:w,um:F,m:W,r:re,mt:p,mc:N,pc:u,pbc:P,n:Ce,o:e};let xe,Ke;return t&&([xe,Ke]=t(Ne)),{render:Se,hydrate:xe,createApp:Rf(Se,xe)}}function gn({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function ul(e,t,n=!1){const r=e.children,o=t.children;if(be(r)&&be(o))for(let i=0;i<r.length;i++){const a=r[i];let s=o[i];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=o[i]=$t(o[i]),s.el=a.el),n||ul(a,s))}}function If(e){const t=e.slice(),n=[0];let r,o,i,a,s;const c=e.length;for(r=0;r<c;r++){const l=e[r];if(l!==0){if(o=n[n.length-1],e[o]<l){t[r]=o,n.push(r);continue}for(i=0,a=n.length-1;i<a;)s=i+a>>1,e[n[s]]<l?i=s+1:a=s;l<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}const Lf=e=>e.__isTeleport,Pe=Symbol(void 0),Fi=Symbol(void 0),bt=Symbol(void 0),mo=Symbol(void 0),ar=[];let At=null;function L(e=!1){ar.push(At=e?null:[])}function jf(){ar.pop(),At=ar[ar.length-1]||null}let lr=1;function dl(e){lr+=e}function fl(e){return e.dynamicChildren=lr>0?At||Mn:null,jf(),lr>0&&At&&At.push(e),e}function z(e,t,n,r,o,i){return fl(X(e,t,n,r,o,i,!0))}function je(e,t,n,r,o){return fl(ie(e,t,n,r,o,!0))}function go(e){return e?e.__v_isVNode===!0:!1}function pn(e,t){return e.type===t.type&&e.key===t.key}const po="__vInternal",hl=({key:e})=>e!=null?e:null,vo=({ref:e,ref_key:t,ref_for:n})=>e!=null?Je(e)||tt(e)||Ee(e)?{i:nt,r:e,k:t,f:!!n}:e:null;function X(e,t=null,n=null,r=0,o=null,i=e===Pe?0:1,a=!1,s=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&hl(t),ref:t&&vo(t),scopeId:Na,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null};return s?(Ui(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Je(n)?8:16),lr>0&&!a&&At&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&At.push(c),c}const ie=Nf;function Nf(e,t=null,n=null,r=0,o=null,i=!1){if((!e||e===Ga)&&(e=bt),go(e)){const s=Jt(e,t,!0);return n&&Ui(s,n),lr>0&&!i&&At&&(s.shapeFlag&6?At[At.indexOf(e)]=s:At.push(s)),s.patchFlag|=-2,s}if(Vf(e)&&(e=e.__vccOpts),t){t=De(t);let{class:s,style:c}=t;s&&!Je(s)&&(t.class=Ae(s)),Xe(c)&&(_a(c)&&!be(c)&&(c=Ze({},c)),t.style=Le(c))}const a=Je(e)?1:tf(e)?128:Lf(e)?64:Xe(e)?4:Ee(e)?2:0;return X(e,t,n,r,o,a,i,!0)}function De(e){return e?_a(e)||po in e?Ze({},e):e:null}function Jt(e,t,n=!1){const{props:r,ref:o,patchFlag:i,children:a}=e,s=t?Hi(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&hl(s),ref:t&&t.ref?n&&o?be(o)?o.concat(vo(t)):[o,vo(t)]:vo(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jt(e.ssContent),ssFallback:e.ssFallback&&Jt(e.ssFallback),el:e.el,anchor:e.anchor}}function Mt(e=" ",t=0){return ie(Fi,null,e,t)}function ne(e="",t=!1){return t?(L(),je(bt,null,e)):ie(bt,null,e)}function Pt(e){return e==null||typeof e=="boolean"?ie(bt):be(e)?ie(Pe,null,e.slice()):typeof e=="object"?$t(e):ie(Fi,null,String(e))}function $t(e){return e.el===null||e.memo?e:Jt(e)}function Ui(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(be(t))n=16;else if(typeof t=="object")if(r&65){const o=t.default;o&&(o._c&&(o._d=!1),Ui(e,o()),o._c&&(o._d=!0));return}else{n=32;const o=t._;!o&&!(po in t)?t._ctx=nt:o===3&&nt&&(nt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ee(t)?(t={default:t,_ctx:nt},n=32):(t=String(t),r&64?(n=16,t=[Mt(t)]):n=8);e.children=t,e.shapeFlag|=n}function Hi(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const o in r)if(o==="class")t.class!==r.class&&(t.class=Ae([t.class,r.class]));else if(o==="style")t.style=Le([t.style,r.style]);else if(zr(o)){const i=t[o],a=r[o];a&&i!==a&&!(be(i)&&i.includes(a))&&(t[o]=i?[].concat(i,a):a)}else o!==""&&(t[o]=r[o])}return t}function It(e,t,n,r=null){vt(e,t,7,[n,r])}const Df=cl();let Bf=0;function Ff(e,t,n){const r=e.type,o=(t?t.appContext:e.appContext)||Df,i={uid:Bf++,vnode:e,type:r,parent:t,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new fd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:tl(r,o),emitsOptions:ja(r,o),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:r.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Xd.bind(null,i),e.ce&&e.ce(i),i}let $e=null;const qi=()=>$e||nt,Bn=e=>{$e=e,e.scope.on()},vn=()=>{$e&&$e.scope.off(),$e=null};function ml(e){return e.vnode.shapeFlag&4}let cr=!1;function Uf(e,t=!1){cr=t;const{props:n,children:r}=e.vnode,o=ml(e);Af(e,n,o,t),Of(e,r);const i=o?Hf(e,t):void 0;return cr=!1,i}function Hf(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=Aa(new Proxy(e.ctx,yf));const{setup:r}=n;if(r){const o=e.setupContext=r.length>1?zf(e):null;Bn(e),In();const i=Xt(r,e,0,[e.props,o]);if(Ln(),vn(),ta(i)){if(i.then(vn,vn),t)return i.then(a=>{gl(e,a,t)}).catch(a=>{no(a,e,0)});e.asyncDep=i}else gl(e,i,t)}else vl(e,t)}function gl(e,t,n){Ee(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Xe(t)&&(e.setupState=Oa(t)),vl(e,n)}let pl;function vl(e,t,n){const r=e.type;if(!e.render){if(!t&&pl&&!r.render){const o=r.template;if(o){const{isCustomElement:i,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:c}=r,l=Ze(Ze({isCustomElement:i,delimiters:s},a),c);r.render=pl(o,l)}}e.render=r.render||xt}Bn(e),In(),bf(e),Ln(),vn()}function qf(e){return new Proxy(e.attrs,{get(t,n){return ht(e,"get","$attrs"),t[n]}})}function zf(e){const t=r=>{e.exposed=r||{}};let n;return{get attrs(){return n||(n=qf(e))},slots:e.slots,emit:e.emit,expose:t}}function yo(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Oa(Aa(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in fo)return fo[n](e)}}))}function Wf(e,t=!0){return Ee(e)?e.displayName||e.name:e.name||t&&e.__name}function Vf(e){return Ee(e)&&"__vccOpts"in e}const yl=(e,t)=>Wd(e,t,cr);function zi(e,t,n){const r=arguments.length;return r===2?Xe(t)&&!be(t)?go(t)?ie(e,null,[t]):ie(e,t):ie(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&go(n)&&(n=[n]),ie(e,t,n))}const Kf="3.2.37",Gf="http://www.w3.org/2000/svg",yn=typeof document!="undefined"?document:null,bl=yn&&yn.createElement("template"),Yf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t?yn.createElementNS(Gf,e):yn.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:e=>yn.createTextNode(e),createComment:e=>yn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>yn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,o,i){const a=n?n.previousSibling:t.lastChild;if(o&&(o===i||o.nextSibling))for(;t.insertBefore(o.cloneNode(!0),n),!(o===i||!(o=o.nextSibling)););else{bl.innerHTML=r?`<svg>${e}</svg>`:e;const s=bl.content;if(r){const c=s.firstChild;for(;c.firstChild;)s.appendChild(c.firstChild);s.removeChild(c)}t.insertBefore(s,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function Qf(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function Xf(e,t,n){const r=e.style,o=Je(n);if(n&&!o){for(const i in n)Wi(r,i,n[i]);if(t&&!Je(t))for(const i in t)n[i]==null&&Wi(r,i,"")}else{const i=r.display;o?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=i)}}const wl=/\s*!important$/;function Wi(e,t,n){if(be(n))n.forEach(r=>Wi(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Zf(e,t);wl.test(n)?e.setProperty(Tt(r),n.replace(wl,""),"important"):e[r]=n}}const kl=["Webkit","Moz","ms"],Vi={};function Zf(e,t){const n=Vi[t];if(n)return n;let r=pt(t);if(r!=="filter"&&r in e)return Vi[t]=r;r=Gr(r);for(let o=0;o<kl.length;o++){const i=kl[o]+r;if(i in e)return Vi[t]=i}return t}const xl="http://www.w3.org/1999/xlink";function Jf(e,t,n,r,o){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(xl,t.slice(6,t.length)):e.setAttributeNS(xl,t,n);else{const i=td(t);n==null||i&&!Js(n)?e.removeAttribute(t):e.setAttribute(t,i?"":n)}}function $f(e,t,n,r,o,i,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,o,i),e[t]=n==null?"":n;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=n;const c=n==null?"":n;(e.value!==c||e.tagName==="OPTION")&&(e.value=c),n==null&&e.removeAttribute(t);return}let s=!1;if(n===""||n==null){const c=typeof e[t];c==="boolean"?n=Js(n):n==null&&c==="string"?(n="",s=!0):c==="number"&&(n=0,s=!0)}try{e[t]=n}catch{}s&&e.removeAttribute(t)}const[_l,eh]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let Ki=0;const th=Promise.resolve(),nh=()=>{Ki=0},rh=()=>Ki||(th.then(nh),Ki=_l());function oh(e,t,n,r){e.addEventListener(t,n,r)}function ih(e,t,n,r){e.removeEventListener(t,n,r)}function sh(e,t,n,r,o=null){const i=e._vei||(e._vei={}),a=i[t];if(r&&a)a.value=r;else{const[s,c]=ah(t);if(r){const l=i[t]=lh(r,o);oh(e,s,l,c)}else a&&(ih(e,s,a,c),i[t]=void 0)}}const Al=/(?:Once|Passive|Capture)$/;function ah(e){let t;if(Al.test(e)){t={};let n;for(;n=e.match(Al);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[Tt(e.slice(2)),t]}function lh(e,t){const n=r=>{const o=r.timeStamp||_l();(eh||o>=n.attached-1)&&vt(ch(r,n.value),t,5,[r])};return n.value=e,n.attached=rh(),n}function ch(e,t){if(be(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>o=>!o._stopped&&r&&r(o))}else return t}const El=/^on[a-z]/,uh=(e,t,n,r,o=!1,i,a,s,c)=>{t==="class"?Qf(e,r,o):t==="style"?Xf(e,n,r):zr(t)?ti(t)||sh(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):dh(e,t,r,o))?$f(e,t,r,i,a,s,c):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Jf(e,t,r,o))};function dh(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&El.test(t)&&Ee(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||El.test(t)&&Je(n)?!1:t in e}function fh(e,t){const n=Ti(e);class r extends Gi{constructor(i){super(n,i,t)}}return r.def=n,r}const hh=typeof HTMLElement!="undefined"?HTMLElement:class{};class Gi extends hh{constructor(t,n={},r){super(),this._def=t,this._props=n,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,Ta(()=>{this._connected||(Fl(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const o of r)this._setAttr(o.attributeName)}).observe(this,{attributes:!0});const t=r=>{const{props:o,styles:i}=r,a=!be(o),s=o?a?Object.keys(o):o:[];let c;if(a)for(const l in this._props){const d=o[l];(d===Number||d&&d.type===Number)&&(this._props[l]=Qr(this._props[l]),(c||(c=Object.create(null)))[l]=!0)}this._numberProps=c;for(const l of Object.keys(this))l[0]!=="_"&&this._setProp(l,this[l],!0,!1);for(const l of s.map(pt))Object.defineProperty(this,l,{get(){return this._getProp(l)},set(d){this._setProp(l,d)}});this._applyStyles(i),this._update()},n=this._def.__asyncLoader;n?n().then(t):t(this._def)}_setAttr(t){let n=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(n=Qr(n)),this._setProp(pt(t),n,!1)}_getProp(t){return this._props[t]}_setProp(t,n,r=!0,o=!0){n!==this._props[t]&&(this._props[t]=n,o&&this._instance&&this._update(),r&&(n===!0?this.setAttribute(Tt(t),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Tt(t),n+""):n||this.removeAttribute(Tt(t))))}_update(){Fl(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ie(this._def,Ze({},this._props));return this._instance||(t.ce=n=>{this._instance=n,n.isCE=!0,n.emit=(o,...i)=>{this.dispatchEvent(new CustomEvent(o,{detail:i}))};let r=this;for(;r=r&&(r.parentNode||r.host);)if(r instanceof Gi){n.parent=r._instance;break}}),t}_applyStyles(t){t&&t.forEach(n=>{const r=document.createElement("style");r.textContent=n,this.shadowRoot.appendChild(r)})}}function mh(e){const t=qi();if(!t)return;const n=()=>Yi(t.subTree,e(t.proxy));of(n),co(()=>{const r=new MutationObserver(n);r.observe(t.subTree.el.parentNode,{childList:!0}),Ri(()=>r.disconnect())})}function Yi(e,t){if(e.shapeFlag&128){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Yi(n.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Cl(e.el,t);else if(e.type===Pe)e.children.forEach(n=>Yi(n,t));else if(e.type===mo){let{el:n,anchor:r}=e;for(;n&&(Cl(n,t),n!==r);)n=n.nextSibling}}function Cl(e,t){if(e.nodeType===1){const n=e.style;for(const r in t)n.setProperty(`--${r}`,t[r])}}const en="transition",ur="animation",Qe=(e,{slots:t})=>zi(Ha,Tl(e),t);Qe.displayName="Transition";const Ol={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gh=Qe.props=Ze({},Ha.props,Ol),bn=(e,t=[])=>{be(e)?e.forEach(n=>n(...t)):e&&e(...t)},Sl=e=>e?be(e)?e.some(t=>t.length>1):e.length>1:!1;function Tl(e){const t={};for(const h in e)h in Ol||(t[h]=e[h]);if(e.css===!1)return t;const{name:n="v",type:r,duration:o,enterFromClass:i=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:c=i,appearActiveClass:l=a,appearToClass:d=s,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:y=`${n}-leave-to`}=e,_=ph(o),A=_&&_[0],w=_&&_[1],{onBeforeEnter:T,onEnter:O,onEnterCancelled:I,onLeave:K,onLeaveCancelled:Q,onBeforeAppear:D=T,onAppear:j=O,onAppearCancelled:M=I}=t,N=(h,k,R)=>{tn(h,k?d:s),tn(h,k?l:a),R&&R()},H=(h,k)=>{h._isLeaving=!1,tn(h,f),tn(h,y),tn(h,g),k&&k()},P=h=>(k,R)=>{const p=h?j:O,m=()=>N(k,h,R);bn(p,[k,m]),Rl(()=>{tn(k,h?c:i),zt(k,h?d:s),Sl(p)||Ml(k,r,A,m)})};return Ze(t,{onBeforeEnter(h){bn(T,[h]),zt(h,i),zt(h,a)},onBeforeAppear(h){bn(D,[h]),zt(h,c),zt(h,l)},onEnter:P(!1),onAppear:P(!0),onLeave(h,k){h._isLeaving=!0;const R=()=>H(h,k);zt(h,f),jl(),zt(h,g),Rl(()=>{!h._isLeaving||(tn(h,f),zt(h,y),Sl(K)||Ml(h,r,w,R))}),bn(K,[h,R])},onEnterCancelled(h){N(h,!1),bn(I,[h])},onAppearCancelled(h){N(h,!0),bn(M,[h])},onLeaveCancelled(h){H(h),bn(Q,[h])}})}function ph(e){if(e==null)return null;if(Xe(e))return[Qi(e.enter),Qi(e.leave)];{const t=Qi(e);return[t,t]}}function Qi(e){return Qr(e)}function zt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e._vtc||(e._vtc=new Set)).add(t)}function tn(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.remove(r));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function Rl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let vh=0;function Ml(e,t,n,r){const o=e._endId=++vh,i=()=>{o===e._endId&&r()};if(n)return setTimeout(i,n);const{type:a,timeout:s,propCount:c}=Pl(e,t);if(!a)return r();const l=a+"end";let d=0;const f=()=>{e.removeEventListener(l,g),i()},g=y=>{y.target===e&&++d>=c&&f()};setTimeout(()=>{d<c&&f()},s+1),e.addEventListener(l,g)}function Pl(e,t){const n=window.getComputedStyle(e),r=_=>(n[_]||"").split(", "),o=r(en+"Delay"),i=r(en+"Duration"),a=Il(o,i),s=r(ur+"Delay"),c=r(ur+"Duration"),l=Il(s,c);let d=null,f=0,g=0;t===en?a>0&&(d=en,f=a,g=i.length):t===ur?l>0&&(d=ur,f=l,g=c.length):(f=Math.max(a,l),d=f>0?a>l?en:ur:null,g=d?d===en?i.length:c.length:0);const y=d===en&&/\b(transform|all)(,|$)/.test(n[en+"Property"]);return{type:d,timeout:f,propCount:g,hasTransform:y}}function Il(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,r)=>Ll(n)+Ll(e[r])))}function Ll(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function jl(){return document.body.offsetHeight}const Nl=new WeakMap,Dl=new WeakMap,Xi={name:"TransitionGroup",props:Ze({},gh,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=qi(),r=Ua();let o,i;return Va(()=>{if(!o.length)return;const a=e.moveClass||`${e.name||"v"}-move`;if(!kh(o[0].el,n.vnode.el,a))return;o.forEach(yh),o.forEach(bh);const s=o.filter(wh);jl(),s.forEach(c=>{const l=c.el,d=l.style;zt(l,a),d.transform=d.webkitTransform=d.transitionDuration="";const f=l._moveCb=g=>{g&&g.target!==l||(!g||/transform$/.test(g.propertyName))&&(l.removeEventListener("transitionend",f),l._moveCb=null,tn(l,a))};l.addEventListener("transitionend",f)})}),()=>{const a=Ie(e),s=Tl(a);let c=a.tag||Pe;o=i,i=t.default?Si(t.default()):[];for(let l=0;l<i.length;l++){const d=i[l];d.key!=null&&ir(d,or(d,s,r,n))}if(o)for(let l=0;l<o.length;l++){const d=o[l];ir(d,or(d,s,r,n)),Nl.set(d,d.el.getBoundingClientRect())}return ie(c,null,i)}}};function yh(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function bh(e){Dl.set(e,e.el.getBoundingClientRect())}function wh(e){const t=Nl.get(e),n=Dl.get(e),r=t.left-n.left,o=t.top-n.top;if(r||o){const i=e.el.style;return i.transform=i.webkitTransform=`translate(${r}px,${o}px)`,i.transitionDuration="0s",e}}function kh(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach(a=>{a.split(/\s+/).forEach(s=>s&&r.classList.remove(s))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const o=t.nodeType===1?t:t.parentNode;o.appendChild(r);const{hasTransform:i}=Pl(r);return o.removeChild(r),i}const xh=["ctrl","shift","alt","meta"],_h={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xh.some(n=>e[`${n}Key`]&&!t.includes(n))},wt=(e,t)=>(n,...r)=>{for(let o=0;o<t.length;o++){const i=_h[t[o]];if(i&&i(n,t))return}return e(n,...r)},Ah={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wt=(e,t)=>n=>{if(!("key"in n))return;const r=Tt(n.key);if(t.some(o=>o===r||Ah[o]===r))return e(n)},bo={beforeMount(e,{value:t},{transition:n}){e._vod=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):dr(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),dr(e,!0),r.enter(e)):r.leave(e,()=>{dr(e,!1)}):dr(e,t))},beforeUnmount(e,{value:t}){dr(e,t)}};function dr(e,t){e.style.display=t?e._vod:"none"}const Eh=Ze({patchProp:uh},Yf);let Bl;function Ch(){return Bl||(Bl=Mf(Eh))}const Fl=(...e)=>{Ch().render(...e)};var ze=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n};const Oh={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},Sh=X("div",{id:"vac-circle"},null,-1),Th=X("div",{id:"vac-circle"},null,-1),Rh=X("div",{id:"vac-circle"},null,-1),Mh=X("div",{id:"vac-circle"},null,-1),Ph=X("div",{id:"vac-circle"},null,-1),Ih=X("div",{id:"vac-circle"},null,-1);function Lh(e,t,n,r,o,i){return L(),je(Qe,{name:"vac-fade-spinner",appear:""},{default:ve(()=>[n.show?(L(),z("div",{key:0,class:Ae(["vac-loader-wrapper",{"vac-container-center":!n.infinite,"vac-container-top":n.infinite}])},[n.type==="rooms"?oe(e.$slots,"spinner-icon-rooms",{key:0},()=>[Sh]):ne("",!0),n.type==="infinite-rooms"?oe(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[Th]):ne("",!0),n.type==="message-file"?oe(e.$slots,"spinner-icon-message-file_"+n.messageId,{key:2},()=>[Rh]):ne("",!0),n.type==="room-file"?oe(e.$slots,"spinner-icon-room-file",{key:3},()=>[Mh]):ne("",!0),n.type==="messages"?oe(e.$slots,"spinner-icon-messages",{key:4},()=>[Ph]):ne("",!0),n.type==="infinite-messages"?oe(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[Ih]):ne("",!0)],2)):ne("",!0)]),_:3})}var wo=ze(Oh,[["render",Lh]]);const jh={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},Nh=["viewBox"],Dh=["id","d"],Bh=["id","d"];function Fh(e,t,n,r,o,i){return L(),z("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${i.size} ${i.size}`},[X("path",{id:i.svgId,d:o.svgItem[n.name].path},null,8,Dh),o.svgItem[n.name].path2?(L(),z("path",{key:0,id:i.svgId,d:o.svgItem[n.name].path2},null,8,Bh)):ne("",!0)],8,Nh)}var rt=ze(jh,[["render",Fh]]);const Uh={name:"RoomsSearch",components:{SvgIcon:rt},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},Hh={key:0,class:"vac-icon-search"},qh=["placeholder"];function zh(e,t,n,r,o,i){const a=pe("svg-icon");return L(),z("div",{class:Ae({"vac-box-search":i.showSearchBar,"vac-box-empty":!i.showSearchBar})},[n.showSearch?(L(),z(Pe,{key:0},[!n.loadingRooms&&n.rooms.length?(L(),z("div",Hh,[oe(e.$slots,"search-icon",{},()=>[ie(a,{name:"search"})])])):ne("",!0),!n.loadingRooms&&n.rooms.length?(L(),z("input",{key:1,type:"search",placeholder:n.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=s=>e.$emit("search-room",s))},null,40,qh)):ne("",!0)],64)):ne("",!0),n.showAddRoom?(L(),z("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=s=>e.$emit("add-room"))},[oe(e.$slots,"add-icon",{},()=>[ie(a,{name:"add"})])])):ne("",!0)],2)}var Wh=ze(Uh,[["render",zh]]);function Ul(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ot={},Fn={};Fn.__esModule=!0,Fn.inherits=Vh;function Vh(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r.constructor=t,t.prototype=r,t}var fr={};fr.__esModule=!0;var Kh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt={defaultProtocol:"http",events:null,format:ql,formatHref:ql,nl2br:!1,tagName:"a",target:Yh,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};fr.defaults=gt,fr.Options=Hl,fr.contains=Gh;function Hl(e){e=e||{},this.defaultProtocol=e.hasOwnProperty("defaultProtocol")?e.defaultProtocol:gt.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:gt.events,this.format=e.hasOwnProperty("format")?e.format:gt.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:gt.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:gt.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:gt.tagName,this.target=e.hasOwnProperty("target")?e.target:gt.target,this.validate=e.hasOwnProperty("validate")?e.validate:gt.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||gt.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||gt.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:gt.ignoreTags,n=0;n<t.length;n++)this.ignoreTags.push(t[n].toUpperCase())}Hl.prototype={resolve:function(t){var n=t.toHref(this.defaultProtocol);return{formatted:this.get("format",t.toString(),t),formattedHref:this.get("formatHref",n,t),tagName:this.get("tagName",n,t),className:this.get("className",n,t),target:this.get("target",n,t),events:this.getObject("events",n,t),attributes:this.getObject("attributes",n,t)}},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,n,r){var o=void 0,i=this[t];if(!i)return i;switch(typeof i=="undefined"?"undefined":Kh(i)){case"function":return i(n,r.type);case"object":return o=i.hasOwnProperty(r.type)?i[r.type]:gt[t],typeof o=="function"?o(n,r.type):o}return i},getObject:function(t,n,r){var o=this[t];return typeof o=="function"?o(n,r.type):o}};function Gh(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}function ql(e){return e}function Yh(e,t){return t==="url"?"_blank":null}var Lt={},Vt={};Vt.__esModule=!0,Vt.stateify=Vt.TokenState=Vt.CharacterState=void 0;var zl=Fn;function Zi(){return function(e){this.j=[],this.T=e||null}}var Ji=Zi();Ji.prototype={defaultTransition:!1,on:function(t,n){if(t instanceof Array){for(var r=0;r<t.length;r++)this.j.push([t[r],n]);return this}return this.j.push([t,n]),this},next:function(t){for(var n=0;n<this.j.length;n++){var r=this.j[n],o=r[0],i=r[1];if(this.test(t,o))return i}return this.defaultTransition},accepts:function(){return!!this.T},test:function(t,n){return t===n},emit:function(){return this.T}};var $i=(0,zl.inherits)(Ji,Zi(),{test:function(t,n){return t===n||n instanceof RegExp&&n.test(t)}}),Qh=(0,zl.inherits)(Ji,Zi(),{jump:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=this.next(new t(""));return r===this.defaultTransition?(r=new this.constructor(n),this.on(t,r)):n&&(r.T=n),r},test:function(t,n){return t instanceof n}});function Xh(e,t,n,r){for(var o=0,i=e.length,a=t,s=[],c=void 0;o<i&&(c=a.next(e[o]));)a=c,o++;if(o>=i)return[];for(;o<i-1;)c=new $i(r),s.push(c),a.on(e[o],c),a=c,o++;return c=new $i(n),s.push(c),a.on(e[i-1],c),s}Vt.CharacterState=$i,Vt.TokenState=Qh,Vt.stateify=Xh;var fe={},ko={};ko.__esModule=!0;function Zh(){return function(e){e&&(this.v=e)}}ko.createTokenClass=Zh,fe.__esModule=!0,fe.AMPERSAND=fe.CLOSEPAREN=fe.CLOSEANGLEBRACKET=fe.CLOSEBRACKET=fe.CLOSEBRACE=fe.OPENPAREN=fe.OPENANGLEBRACKET=fe.OPENBRACKET=fe.OPENBRACE=fe.WS=fe.TLD=fe.SYM=fe.UNDERSCORE=fe.SLASH=fe.MAILTO=fe.PROTOCOL=fe.QUERY=fe.POUND=fe.PLUS=fe.NUM=fe.NL=fe.LOCALHOST=fe.PUNCTUATION=fe.DOT=fe.COLON=fe.AT=fe.DOMAIN=fe.Base=void 0;var Wl=ko,Jh=Fn,es=(0,Wl.createTokenClass)();es.prototype={toString:function(){return this.v+""}};function We(e){var t=e?{v:e}:{};return(0,Jh.inherits)(es,(0,Wl.createTokenClass)(),t)}var $h=We(),em=We("@"),tm=We(":"),nm=We("."),rm=We(),om=We(),im=We(`
`),sm=We(),am=We("+"),lm=We("#"),cm=We(),um=We("mailto:"),dm=We("?"),fm=We("/"),hm=We("_"),mm=We(),gm=We(),pm=We(),vm=We("{"),ym=We("["),bm=We("<"),wm=We("("),km=We("}"),xm=We("]"),_m=We(">"),Am=We(")"),Em=We("&");fe.Base=es,fe.DOMAIN=$h,fe.AT=em,fe.COLON=tm,fe.DOT=nm,fe.PUNCTUATION=rm,fe.LOCALHOST=om,fe.NL=im,fe.NUM=sm,fe.PLUS=am,fe.POUND=lm,fe.QUERY=dm,fe.PROTOCOL=cm,fe.MAILTO=um,fe.SLASH=fm,fe.UNDERSCORE=hm,fe.SYM=mm,fe.TLD=gm,fe.WS=pm,fe.OPENBRACE=vm,fe.OPENBRACKET=ym,fe.OPENANGLEBRACKET=bm,fe.OPENPAREN=wm,fe.CLOSEBRACE=km,fe.CLOSEBRACKET=xm,fe.CLOSEANGLEBRACKET=_m,fe.CLOSEPAREN=Am,fe.AMPERSAND=Em,Lt.__esModule=!0,Lt.start=Lt.run=Lt.TOKENS=Lt.State=void 0;var nn=Vt,Oe=fe,Cm=Om(Oe);function Om(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var Vl="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),ts="0123456789".split(""),xo="0123456789abcdefghijklmnopqrstuvwxyz".split(""),Kl=[" ","\f","\r","	","\v","\xA0","\u1680","\u180E"],lt=[],Ue=function(t){return new nn.CharacterState(t)},kt=Ue(),ns=Ue(Oe.NUM),Un=Ue(Oe.DOMAIN),hr=Ue(),rs=Ue(Oe.WS);kt.on("@",Ue(Oe.AT)).on(".",Ue(Oe.DOT)).on("+",Ue(Oe.PLUS)).on("#",Ue(Oe.POUND)).on("?",Ue(Oe.QUERY)).on("/",Ue(Oe.SLASH)).on("_",Ue(Oe.UNDERSCORE)).on(":",Ue(Oe.COLON)).on("{",Ue(Oe.OPENBRACE)).on("[",Ue(Oe.OPENBRACKET)).on("<",Ue(Oe.OPENANGLEBRACKET)).on("(",Ue(Oe.OPENPAREN)).on("}",Ue(Oe.CLOSEBRACE)).on("]",Ue(Oe.CLOSEBRACKET)).on(">",Ue(Oe.CLOSEANGLEBRACKET)).on(")",Ue(Oe.CLOSEPAREN)).on("&",Ue(Oe.AMPERSAND)).on([",",";","!",'"',"'"],Ue(Oe.PUNCTUATION)),kt.on(`
`,Ue(Oe.NL)).on(Kl,rs),rs.on(Kl,rs);for(var os=0;os<Vl.length;os++){var Sm=(0,nn.stateify)(Vl[os],kt,Oe.TLD,Oe.DOMAIN);lt.push.apply(lt,Sm)}var Gl=(0,nn.stateify)("file",kt,Oe.DOMAIN,Oe.DOMAIN),Yl=(0,nn.stateify)("ftp",kt,Oe.DOMAIN,Oe.DOMAIN),Ql=(0,nn.stateify)("http",kt,Oe.DOMAIN,Oe.DOMAIN),Xl=(0,nn.stateify)("mailto",kt,Oe.DOMAIN,Oe.DOMAIN);lt.push.apply(lt,Gl),lt.push.apply(lt,Yl),lt.push.apply(lt,Ql),lt.push.apply(lt,Xl);var Tm=Gl.pop(),Rm=Yl.pop(),Mm=Ql.pop(),Pm=Xl.pop(),_o=Ue(Oe.DOMAIN),Ao=Ue(Oe.PROTOCOL),Im=Ue(Oe.MAILTO);Rm.on("s",_o).on(":",Ao),Mm.on("s",_o).on(":",Ao),lt.push(_o),Tm.on(":",Ao),_o.on(":",Ao),Pm.on(":",Im);var Lm=(0,nn.stateify)("localhost",kt,Oe.LOCALHOST,Oe.DOMAIN);lt.push.apply(lt,Lm),kt.on(ts,ns),ns.on("-",hr).on(ts,ns).on(xo,Un),Un.on("-",hr).on(xo,Un);for(var is=0;is<lt.length;is++)lt[is].on("-",hr).on(xo,Un);hr.on("-",hr).on(ts,Un).on(xo,Un),kt.defaultTransition=Ue(Oe.SYM);var jm=function(t){for(var n=t.replace(/[A-Z]/g,function(g){return g.toLowerCase()}),r=t.length,o=[],i=0;i<r;){for(var a=kt,s=null,c=0,l=null,d=-1;i<r&&(s=a.next(n[i]));)a=s,a.accepts()?(d=0,l=a):d>=0&&d++,c++,i++;if(!(d<0)){i-=d,c-=d;var f=l.emit();o.push(new f(t.substr(i-c,c)))}}return o},Nm=kt;Lt.State=nn.CharacterState,Lt.TOKENS=Cm,Lt.run=jm,Lt.start=Nm;var jt={},dt={};dt.__esModule=!0,dt.URL=dt.TEXT=dt.NL=dt.EMAIL=dt.MAILTOEMAIL=dt.Base=void 0;var Hn=ko,mr=Fn,gr=fe;function Dm(e){return e instanceof gr.DOMAIN||e instanceof gr.TLD}var wn=(0,Hn.createTokenClass)();wn.prototype={type:"token",isLink:!1,toString:function(){for(var t=[],n=0;n<this.v.length;n++)t.push(this.v[n].toString());return t.join("")},toHref:function(){return this.toString()},toObject:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(t)}}};var Bm=(0,mr.inherits)(wn,(0,Hn.createTokenClass)(),{type:"email",isLink:!0}),Fm=(0,mr.inherits)(wn,(0,Hn.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Um=(0,mr.inherits)(wn,(0,Hn.createTokenClass)(),{type:"text"}),Hm=(0,mr.inherits)(wn,(0,Hn.createTokenClass)(),{type:"nl"}),qm=(0,mr.inherits)(wn,(0,Hn.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",n=!1,r=!1,o=this.v,i=[],a=0;o[a]instanceof gr.PROTOCOL;)n=!0,i.push(o[a].toString().toLowerCase()),a++;for(;o[a]instanceof gr.SLASH;)r=!0,i.push(o[a].toString()),a++;for(;Dm(o[a]);)i.push(o[a].toString().toLowerCase()),a++;for(;a<o.length;a++)i.push(o[a].toString());return i=i.join(""),n||r||(i=t+"://"+i),i},hasProtocol:function(){return this.v[0]instanceof gr.PROTOCOL}});dt.Base=wn,dt.MAILTOEMAIL=Bm,dt.EMAIL=Fm,dt.NL=Hm,dt.TEXT=Um,dt.URL=qm,jt.__esModule=!0,jt.start=jt.run=jt.TOKENS=jt.State=void 0;var Zl=Vt,ft=dt,zm=Wm(ft),$=fe;function Wm(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var Re=function(t){return new Zl.TokenState(t)},Eo=Re(),Jl=Re(),$l=Re(),ss=Re(),ec=Re(),rn=Re(),Co=Re(),pr=Re(ft.URL),tc=Re(),nc=Re(ft.URL),Ye=Re(ft.URL),vr=Re(),yr=Re(),br=Re(),wr=Re(),kr=Re(),kn=Re(ft.URL),xn=Re(ft.URL),_n=Re(ft.URL),An=Re(ft.URL),xr=Re(),_r=Re(),Ar=Re(),Er=Re(),qn=Re(),as=Re(),Oo=Re(ft.EMAIL),rc=Re(),Vm=Re(ft.EMAIL),En=Re(ft.MAILTOEMAIL),ls=Re(),zn=Re(),So=Re(),oc=Re(),Km=Re(ft.NL);Eo.on($.NL,Km).on($.PROTOCOL,Jl).on($.MAILTO,$l).on($.SLASH,ss),Jl.on($.SLASH,ss),ss.on($.SLASH,ec),Eo.on($.TLD,rn).on($.DOMAIN,rn).on($.LOCALHOST,pr).on($.NUM,rn),ec.on($.TLD,Ye).on($.DOMAIN,Ye).on($.NUM,Ye).on($.LOCALHOST,Ye),rn.on($.DOT,Co),qn.on($.DOT,as),Co.on($.TLD,pr).on($.DOMAIN,rn).on($.NUM,rn).on($.LOCALHOST,rn),as.on($.TLD,Oo).on($.DOMAIN,qn).on($.NUM,qn).on($.LOCALHOST,qn),pr.on($.DOT,Co),Oo.on($.DOT,as),pr.on($.COLON,tc).on($.SLASH,Ye),tc.on($.NUM,nc),nc.on($.SLASH,Ye),Oo.on($.COLON,rc),rc.on($.NUM,Vm);var it=[$.DOMAIN,$.AT,$.LOCALHOST,$.NUM,$.PLUS,$.POUND,$.PROTOCOL,$.SLASH,$.TLD,$.UNDERSCORE,$.SYM,$.AMPERSAND],st=[$.COLON,$.DOT,$.QUERY,$.PUNCTUATION,$.CLOSEBRACE,$.CLOSEBRACKET,$.CLOSEANGLEBRACKET,$.CLOSEPAREN,$.OPENBRACE,$.OPENBRACKET,$.OPENANGLEBRACKET,$.OPENPAREN];Ye.on($.OPENBRACE,yr).on($.OPENBRACKET,br).on($.OPENANGLEBRACKET,wr).on($.OPENPAREN,kr),vr.on($.OPENBRACE,yr).on($.OPENBRACKET,br).on($.OPENANGLEBRACKET,wr).on($.OPENPAREN,kr),yr.on($.CLOSEBRACE,Ye),br.on($.CLOSEBRACKET,Ye),wr.on($.CLOSEANGLEBRACKET,Ye),kr.on($.CLOSEPAREN,Ye),kn.on($.CLOSEBRACE,Ye),xn.on($.CLOSEBRACKET,Ye),_n.on($.CLOSEANGLEBRACKET,Ye),An.on($.CLOSEPAREN,Ye),xr.on($.CLOSEBRACE,Ye),_r.on($.CLOSEBRACKET,Ye),Ar.on($.CLOSEANGLEBRACKET,Ye),Er.on($.CLOSEPAREN,Ye),yr.on(it,kn),br.on(it,xn),wr.on(it,_n),kr.on(it,An),yr.on(st,xr),br.on(st,_r),wr.on(st,Ar),kr.on(st,Er),kn.on(it,kn),xn.on(it,xn),_n.on(it,_n),An.on(it,An),kn.on(st,kn),xn.on(st,xn),_n.on(st,_n),An.on(st,An),xr.on(it,kn),_r.on(it,xn),Ar.on(it,_n),Er.on(it,An),xr.on(st,xr),_r.on(st,_r),Ar.on(st,Ar),Er.on(st,Er),Ye.on(it,Ye),vr.on(it,Ye),Ye.on(st,vr),vr.on(st,vr),$l.on($.TLD,En).on($.DOMAIN,En).on($.NUM,En).on($.LOCALHOST,En),En.on(it,En).on(st,ls),ls.on(it,En).on(st,ls);var Cr=[$.DOMAIN,$.NUM,$.PLUS,$.POUND,$.QUERY,$.UNDERSCORE,$.SYM,$.AMPERSAND,$.TLD];rn.on(Cr,zn).on($.AT,So),pr.on(Cr,zn).on($.AT,So),Co.on(Cr,zn),zn.on(Cr,zn).on($.AT,So).on($.DOT,oc),oc.on(Cr,zn),So.on($.TLD,qn).on($.DOMAIN,qn).on($.LOCALHOST,Oo);var Gm=function(t){for(var n=t.length,r=0,o=[],i=[];r<n;){for(var a=Eo,s=null,c=null,l=0,d=null,f=-1;r<n&&!(s=a.next(t[r]));)i.push(t[r++]);for(;r<n&&(c=s||a.next(t[r]));)s=null,a=c,a.accepts()?(f=0,d=a):f>=0&&f++,r++,l++;if(f<0)for(var g=r-l;g<r;g++)i.push(t[g]);else{i.length>0&&(o.push(new ft.TEXT(i)),i=[]),r-=f,l-=f;var y=d.emit();o.push(new y(t.slice(r-l,r)))}}return i.length>0&&o.push(new ft.TEXT(i)),o};jt.State=Zl.TokenState,jt.TOKENS=zm,jt.run=Gm,jt.start=Eo,ot.__esModule=!0,ot.tokenize=ot.test=ot.scanner=ot.parser=ot.options=ot.inherits=ot.find=void 0;var Ym=Fn,Qm=fr,Xm=cs(Qm),Zm=Lt,ic=cs(Zm),Jm=jt,sc=cs(Jm);function cs(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"});var us=function(t){return sc.run(ic.run(t))},$m=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=us(t),o=[],i=0;i<r.length;i++){var a=r[i];a.isLink&&(!n||a.type===n)&&o.push(a.toObject())}return o},eg=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,r=us(t);return r.length===1&&r[0].isLink&&(!n||r[0].type===n)};ot.find=$m,ot.inherits=Ym.inherits,ot.options=Xm,ot.parser=sc,ot.scanner=ic,ot.test=eg,ot.tokenize=us;var ac=ot,tg=(e,t,n)=>{const r={bold:n.bold,italic:n.italic,strike:n.strike,underline:n.underline,multilineCode:n.multilineCode,inlineCode:n.inlineCode},o={[r.bold]:{end:"\\"+r.bold,allowed_chars:".",type:"bold"},[r.italic]:{end:r.italic,allowed_chars:".",type:"italic"},[r.strike]:{end:r.strike,allowed_chars:".",type:"strike"},[r.underline]:{end:r.underline,allowed_chars:".",type:"underline"},[r.multilineCode]:{end:r.multilineCode,allowed_chars:`(.|
)`,type:"multiline-code"},[r.inlineCode]:{end:r.inlineCode,allowed_chars:".",type:"inline-code"},"<usertag>":{allowed_chars:".",end:"</usertag>",type:"tag"}},i=To(e,o),a=ng(i,o),s=[].concat.apply([],a);return t&&og(s),s};function To(e,t){let n=[],r=-1,o=null,i=ac.find(e),a=!1;if(i.length>0&&(r=e.indexOf(i[0].value),a=!0),Object.keys(t).forEach(s=>{const c=e.indexOf(s);c>=0&&(r<0||c<r)&&(r=c,o=s,a=!1)}),a&&o!==-1){let s=e.substr(0,r),c=e.substr(r,i[0].value.length),l=e.substr(r+i[0].value.length);return n.push(s),n.push(c),n=n.concat(To(l,t)),n}if(o){let s=e.substr(0,r);const c=o;let l=e.substr(r+c.length);if(e.replace(/\s/g,"").length===c.length*2)return[e];const d=l.match(new RegExp("^("+(t[c].allowed_chars||".")+"*"+(t[c].end?"?":"")+")"+(t[c].end?"("+t[c].end+")":""),"m"));if(!d||!d[1])s=s+c,n.push(s);else{s&&n.push(s);const f={start:c,content:To(d[1],t),end:d[2],type:t[c].type};n.push(f),l=l.substr(d[0].length)}return n=n.concat(To(l,t)),n}else return e?[e]:[]}function ng(e,t){const n=[];return e.forEach(r=>{typeof r=="string"?n.push({types:[],value:r}):t[r.start]&&n.push(rg(r))}),n}function rg(e){const t=[];return lc(e,t,[]),t}function lc(e,t,n){e.content.forEach(r=>{typeof r=="string"?t.push({types:cc(n.concat([e.type])),value:r}):lc(r,t,cc([r.type].concat([e.type]).concat(n)))})}function cc(e){return[...new Set(e)]}function og(e){const t=[];return e.forEach(n=>{const r=ac.find(n.value);if(r.length){const o=n.value.replace(r[0].value,"");t.push({types:n.types,value:o}),n.types=["url"].concat(n.types),n.href=r[0].href,n.value=r[0].value}t.push(n)}),t}const ds=["png","jpg","jpeg","webp","svg","gif"],uc=["mp4","video/ogg","webm","quicktime"],ig=["mp3","audio/ogg","wav","mpeg"],sg={name:"FormatMessage",components:{SvgIcon:rt},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{linkifiedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];const e=tg(this.formatTags(this.content),this.linkify&&!this.linkOptions.disabled,this.textFormatting);return e.forEach(t=>{t.url=this.checkType(t,"url"),t.bold=this.checkType(t,"bold"),t.italic=this.checkType(t,"italic"),t.strike=this.checkType(t,"strike"),t.underline=this.checkType(t,"underline"),t.inline=this.checkType(t,"inline-code"),t.multiline=this.checkType(t,"multiline-code"),t.tag=this.checkType(t,"tag"),t.image=this.checkImageType(t),t.value=this.replaceEmojiByElement(t.value)}),e},formattedContent(){return this.deleted?this.textMessages.MESSAGE_DELETED:this.formatTags(this.content)}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const r=e.value.substring(t+1,e.value.length),o=t>0&&ds.some(i=>r.toLowerCase().includes(i));return o&&this.setImageSize(e),o},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",n);function n(r){const o=r.path[0].width/150;e.height=Math.round(r.path[0].height/o)+"px",t.removeEventListener("load",n)}},formatTags(e){const t="<usertag>",n="</usertag>",r=[...e.matchAll(new RegExp(t,"gi"))].map(i=>i.index),o=e;return r.forEach(i=>{const a=o.substring(i+t.length,o.indexOf(n,i)),s=this.users.find(c=>c._id===a);e=e.replaceAll(a,`@${(s==null?void 0:s.username)||"unknown"}`)}),e},openTag(e){if(!this.singleLine&&this.checkType(e,"tag")){const t=this.users.find(n=>e.value.indexOf(n.username)!==-1);this.$emit("open-user-tag",t)}},replaceEmojiByElement(e){let t;return this.singleLine?t=16:t=this.containsOnlyEmojis()?28:20,e.replaceAll(/[\p{Extended_Pictographic}\u{1F3FB}-\u{1F3FF}\u{1F9B0}-\u{1F9B3}]/gu,n=>`<span style="font-size: ${t}px">${n}</span>`)},containsOnlyEmojis(){const e=this.content.replace(new RegExp("[\0-\u1EEFf]","g"),""),t=this.content.replace(new RegExp(`[
\rs]+|( )+`,"g"),"");return e.length===t.length}}},ag={class:"vac-image-link-container"},lg={class:"vac-image-link-message"},cg=["innerHTML"],ug=["innerHTML"];function dg(e,t,n,r,o,i){const a=pe("svg-icon");return L(),z("div",{class:Ae(["vac-format-message-wrapper",{"vac-text-ellipsis":n.singleLine}])},[n.textFormatting.disabled?(L(),z("div",{key:1,innerHTML:i.formattedContent},null,8,ug)):(L(),z("div",{key:0,class:Ae({"vac-text-ellipsis":n.singleLine})},[(L(!0),z(Pe,null,_e(i.linkifiedMessage,(s,c)=>(L(),z("div",{key:c,class:"vac-format-container"},[(L(),je(vf(s.url?"a":"span"),{class:Ae({"vac-text-ellipsis":n.singleLine,"vac-text-bold":s.bold,"vac-text-italic":n.deleted||s.italic,"vac-text-strike":s.strike,"vac-text-underline":s.underline,"vac-text-inline-code":!n.singleLine&&s.inline,"vac-text-multiline-code":!n.singleLine&&s.multiline,"vac-text-tag":!n.singleLine&&!n.reply&&s.tag}),href:s.href,target:s.href?n.linkOptions.target:null,rel:s.href?n.linkOptions.rel:null,onClick:l=>i.openTag(s)},{default:ve(()=>[n.deleted?(L(),z(Pe,{key:0},[oe(e.$slots,n.roomList?"deleted-icon-room_"+n.roomId:"deleted-icon_"+n.messageId,{},()=>[ie(a,{name:"deleted",class:Ae(["vac-icon-deleted",{"vac-icon-deleted-room":n.roomList}])},null,8,["class"])]),Mt(" "+we(n.textMessages.MESSAGE_DELETED),1)],64)):s.url&&s.image?(L(),z(Pe,{key:1},[X("div",ag,[X("div",{class:"vac-image-link",style:Le({"background-image":`url('${s.value}')`,height:s.height})},null,4)]),X("div",lg,[X("span",null,we(s.value),1)])],64)):(L(),z("span",{key:2,innerHTML:s.value},null,8,cg))]),_:2},1032,["class","href","target","rel","onClick"]))]))),128))],2))],2)}var Or=ze(sg,[["render",dg]]);const Cn="__v-click-outside",dc=typeof window!="undefined",fg=typeof navigator!="undefined",hg=dc&&("ontouchstart"in window||fg&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],mg=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(n=>n),events:e.events||hg,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:Boolean(e.capture)}},fc=({event:e,handler:t,middleware:n})=>{n(e)&&t(e)},gg=({el:e,event:t,handler:n,middleware:r})=>{setTimeout(()=>{const{activeElement:o}=document;o&&o.tagName==="IFRAME"&&!e.contains(o)&&fc({event:t,handler:n,middleware:r})},0)},pg=({el:e,event:t,handler:n,middleware:r})=>{const o=t.path||t.composedPath&&t.composedPath();(o?o.indexOf(e)<0:!e.contains(t.target))&&fc({event:t,handler:n,middleware:r})},hc=(e,{value:t})=>{const{events:n,handler:r,middleware:o,isActive:i,detectIframe:a,capture:s}=mg(t);if(!!i){if(e[Cn]=n.map(c=>({event:c,srcTarget:document.documentElement,handler:l=>pg({el:e,event:l,handler:r,middleware:o}),capture:s})),a){const c={event:"blur",srcTarget:window,handler:l=>gg({el:e,event:l,handler:r,middleware:o}),capture:s};e[Cn]=[...e[Cn],c]}e[Cn].forEach(({event:c,srcTarget:l,handler:d})=>setTimeout(()=>{!e[Cn]||l.addEventListener(c,d,s)},0))}},mc=e=>{(e[Cn]||[]).forEach(({event:n,srcTarget:r,handler:o,capture:i})=>r.removeEventListener(n,o,i)),delete e[Cn]};var Ro=dc?{beforeMount:hc,updated:(e,{value:t,oldValue:n})=>{JSON.stringify(t)!==JSON.stringify(n)&&(mc(e),hc(e,{value:t}))},unmounted:mc}:{},gc=(e,t,n)=>{if(e.typingUsers&&e.typingUsers.length){const r=e.users.filter(o=>{if(o._id!==t&&e.typingUsers.indexOf(o._id)!==-1&&!(o.status&&o.status.state==="offline"))return!0});return r.length?e.users.length===2?n.IS_TYPING:r.map(o=>o.username).join(", ")+" "+n.IS_TYPING:void 0}};function Sr(e,t){if(!(!t||!t.type))return e.some(n=>t.type.toLowerCase().includes(n))}function Wn(e){return Sr(ds,e)}function Tr(e){var t;return!((t=e.type)!=null&&t.toLowerCase().startsWith("audio/"))&&Sr(uc,e)}function pc(e){return Sr(ds,e)||Sr(uc,e)}function Mo(e){var t;return((t=e==null?void 0:e.type)==null?void 0:t.toLowerCase().startsWith("audio/"))||Sr(ig,e)}const Rr=/^[a-z0-9]+(-[a-z0-9]+)*$/,Po=(e,t,n,r="")=>{const o=e.split(":");if(e.slice(0,1)==="@"){if(o.length<2||o.length>3)return null;r=o.shift().slice(1)}if(o.length>3||!o.length)return null;if(o.length>1){const s=o.pop(),c=o.pop(),l={provider:o.length>0?o[0]:r,prefix:c,name:s};return t&&!Io(l)?null:l}const i=o[0],a=i.split("-");if(a.length>1){const s={provider:r,prefix:a.shift(),name:a.join("-")};return t&&!Io(s)?null:s}if(n&&r===""){const s={provider:r,prefix:"",name:i};return t&&!Io(s,n)?null:s}return null},Io=(e,t)=>e?!!((e.provider===""||e.provider.match(Rr))&&(t&&e.prefix===""||e.prefix.match(Rr))&&e.name.match(Rr)):!1,vc=Object.freeze({left:0,top:0,width:16,height:16}),Lo=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),jo=Object.freeze({...vc,...Lo}),fs=Object.freeze({...jo,body:"",hidden:!1});function vg(e,t){const n={};!e.hFlip!=!t.hFlip&&(n.hFlip=!0),!e.vFlip!=!t.vFlip&&(n.vFlip=!0);const r=((e.rotate||0)+(t.rotate||0))%4;return r&&(n.rotate=r),n}function yc(e,t){const n=vg(e,t);for(const r in fs)r in Lo?r in e&&!(r in n)&&(n[r]=Lo[r]):r in t?n[r]=t[r]:r in e&&(n[r]=e[r]);return n}function yg(e,t){const n=e.icons,r=e.aliases||Object.create(null),o=Object.create(null);function i(a){if(n[a])return o[a]=[];if(!(a in o)){o[a]=null;const s=r[a]&&r[a].parent,c=s&&i(s);c&&(o[a]=[s].concat(c))}return o[a]}return(t||Object.keys(n).concat(Object.keys(r))).forEach(i),o}function bg(e,t,n){const r=e.icons,o=e.aliases||Object.create(null);let i={};function a(s){i=yc(r[s]||o[s],i)}return a(t),n.forEach(a),yc(e,i)}function bc(e,t){const n=[];if(typeof e!="object"||typeof e.icons!="object")return n;e.not_found instanceof Array&&e.not_found.forEach(o=>{t(o,null),n.push(o)});const r=yg(e);for(const o in r){const i=r[o];i&&(t(o,bg(e,o,i)),n.push(o))}return n}const wg={provider:"",aliases:{},not_found:{},...vc};function hs(e,t){for(const n in t)if(n in e&&typeof e[n]!=typeof t[n])return!1;return!0}function wc(e){if(typeof e!="object"||e===null)return null;const t=e;if(typeof t.prefix!="string"||!e.icons||typeof e.icons!="object"||!hs(e,wg))return null;const n=t.icons;for(const o in n){const i=n[o];if(!o.match(Rr)||typeof i.body!="string"||!hs(i,fs))return null}const r=t.aliases||Object.create(null);for(const o in r){const i=r[o],a=i.parent;if(!o.match(Rr)||typeof a!="string"||!n[a]&&!r[a]||!hs(i,fs))return null}return t}const kc=Object.create(null);function kg(e,t){return{provider:e,prefix:t,icons:Object.create(null),missing:new Set}}function On(e,t){const n=kc[e]||(kc[e]=Object.create(null));return n[t]||(n[t]=kg(e,t))}function ms(e,t){return wc(t)?bc(t,(n,r)=>{r?e.icons[n]=r:e.missing.add(n)}):[]}function xg(e,t,n){try{if(typeof n.body=="string")return e.icons[t]={...n},!0}catch{}return!1}let Mr=!1;function xc(e){return typeof e=="boolean"&&(Mr=e),Mr}function _g(e){const t=typeof e=="string"?Po(e,!0,Mr):e;if(t){const n=On(t.provider,t.prefix),r=t.name;return n.icons[r]||(n.missing.has(r)?null:void 0)}}function Ag(e,t){const n=Po(e,!0,Mr);if(!n)return!1;const r=On(n.provider,n.prefix);return xg(r,n.name,t)}function Eg(e,t){if(typeof e!="object")return!1;if(typeof t!="string"&&(t=e.provider||""),Mr&&!t&&!e.prefix){let o=!1;return wc(e)&&(e.prefix="",bc(e,(i,a)=>{a&&Ag(i,a)&&(o=!0)})),o}const n=e.prefix;if(!Io({provider:t,prefix:n,name:"a"}))return!1;const r=On(t,n);return!!ms(r,e)}const _c=Object.freeze({width:null,height:null}),Ac=Object.freeze({..._c,...Lo}),Cg=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Og=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Ec(e,t,n){if(t===1)return e;if(n=n||100,typeof e=="number")return Math.ceil(e*t*n)/n;if(typeof e!="string")return e;const r=e.split(Cg);if(r===null||!r.length)return e;const o=[];let i=r.shift(),a=Og.test(i);for(;;){if(a){const s=parseFloat(i);isNaN(s)?o.push(i):o.push(Math.ceil(s*t*n)/n)}else o.push(i);if(i=r.shift(),i===void 0)return o.join("");a=!a}}const Sg=e=>e==="unset"||e==="undefined"||e==="none";function Tg(e,t){const n={...jo,...e},r={...Ac,...t},o={left:n.left,top:n.top,width:n.width,height:n.height};let i=n.body;[n,r].forEach(_=>{const A=[],w=_.hFlip,T=_.vFlip;let O=_.rotate;w?T?O+=2:(A.push("translate("+(o.width+o.left).toString()+" "+(0-o.top).toString()+")"),A.push("scale(-1 1)"),o.top=o.left=0):T&&(A.push("translate("+(0-o.left).toString()+" "+(o.height+o.top).toString()+")"),A.push("scale(1 -1)"),o.top=o.left=0);let I;switch(O<0&&(O-=Math.floor(O/4)*4),O=O%4,O){case 1:I=o.height/2+o.top,A.unshift("rotate(90 "+I.toString()+" "+I.toString()+")");break;case 2:A.unshift("rotate(180 "+(o.width/2+o.left).toString()+" "+(o.height/2+o.top).toString()+")");break;case 3:I=o.width/2+o.left,A.unshift("rotate(-90 "+I.toString()+" "+I.toString()+")");break}O%2===1&&(o.left!==o.top&&(I=o.left,o.left=o.top,o.top=I),o.width!==o.height&&(I=o.width,o.width=o.height,o.height=I)),A.length&&(i='<g transform="'+A.join(" ")+'">'+i+"</g>")});const a=r.width,s=r.height,c=o.width,l=o.height;let d,f;a===null?(f=s===null?"1em":s==="auto"?l:s,d=Ec(f,c/l)):(d=a==="auto"?c:a,f=s===null?Ec(d,l/c):s==="auto"?l:s);const g={},y=(_,A)=>{Sg(A)||(g[_]=A.toString())};return y("width",d),y("height",f),g.viewBox=o.left.toString()+" "+o.top.toString()+" "+c.toString()+" "+l.toString(),{attributes:g,body:i}}const Rg=/\sid="(\S+)"/g,Mg="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let Pg=0;function Ig(e,t=Mg){const n=[];let r;for(;r=Rg.exec(e);)n.push(r[1]);if(!n.length)return e;const o="suffix"+(Math.random()*16777216|Date.now()).toString(16);return n.forEach(i=>{const a=typeof t=="function"?t(i):t+(Pg++).toString(),s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+s+')([")]|\\.[a-z])',"g"),"$1"+a+o+"$3")}),e=e.replace(new RegExp(o,"g"),""),e}const gs=Object.create(null);function Lg(e,t){gs[e]=t}function ps(e){return gs[e]||gs[""]}function vs(e){let t;if(typeof e.resources=="string")t=[e.resources];else if(t=e.resources,!(t instanceof Array)||!t.length)return null;return{resources:t,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const ys=Object.create(null),Pr=["https://api.simplesvg.com","https://api.unisvg.com"],No=[];for(;Pr.length>0;)Pr.length===1||Math.random()>.5?No.push(Pr.shift()):No.push(Pr.pop());ys[""]=vs({resources:["https://api.iconify.design"].concat(No)});function jg(e,t){const n=vs(t);return n===null?!1:(ys[e]=n,!0)}function bs(e){return ys[e]}let Cc=(()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}})();function Ng(e,t){const n=bs(e);if(!n)return 0;let r;if(!n.maxURL)r=0;else{let o=0;n.resources.forEach(a=>{o=Math.max(o,a.length)});const i=t+".json?icons=";r=n.maxURL-o-n.path.length-i.length}return r}function Dg(e){return e===404}const Bg=(e,t,n)=>{const r=[],o=Ng(e,t),i="icons";let a={type:i,provider:e,prefix:t,icons:[]},s=0;return n.forEach((c,l)=>{s+=c.length+1,s>=o&&l>0&&(r.push(a),a={type:i,provider:e,prefix:t,icons:[]},s=c.length),a.icons.push(c)}),r.push(a),r};function Fg(e){if(typeof e=="string"){const t=bs(e);if(t)return t.path}return"/"}const Ug={prepare:Bg,send:(e,t,n)=>{if(!Cc){n("abort",424);return}let r=Fg(t.provider);switch(t.type){case"icons":{const i=t.prefix,s=t.icons.join(","),c=new URLSearchParams({icons:s});r+=i+".json?"+c.toString();break}case"custom":{const i=t.uri;r+=i.slice(0,1)==="/"?i.slice(1):i;break}default:n("abort",400);return}let o=503;Cc(e+r).then(i=>{const a=i.status;if(a!==200){setTimeout(()=>{n(Dg(a)?"abort":"next",a)});return}return o=501,i.json()}).then(i=>{if(typeof i!="object"||i===null){setTimeout(()=>{i===404?n("abort",i):n("next",o)});return}setTimeout(()=>{n("success",i)})}).catch(()=>{n("next",o)})}};function Hg(e){const t={loaded:[],missing:[],pending:[]},n=Object.create(null);e.sort((o,i)=>o.provider!==i.provider?o.provider.localeCompare(i.provider):o.prefix!==i.prefix?o.prefix.localeCompare(i.prefix):o.name.localeCompare(i.name));let r={provider:"",prefix:"",name:""};return e.forEach(o=>{if(r.name===o.name&&r.prefix===o.prefix&&r.provider===o.provider)return;r=o;const i=o.provider,a=o.prefix,s=o.name,c=n[i]||(n[i]=Object.create(null)),l=c[a]||(c[a]=On(i,a));let d;s in l.icons?d=t.loaded:a===""||l.missing.has(s)?d=t.missing:d=t.pending;const f={provider:i,prefix:a,name:s};d.push(f)}),t}function Oc(e,t){e.forEach(n=>{const r=n.loaderCallbacks;r&&(n.loaderCallbacks=r.filter(o=>o.id!==t))})}function qg(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const t=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!t.length)return;let n=!1;const r=e.provider,o=e.prefix;t.forEach(i=>{const a=i.icons,s=a.pending.length;a.pending=a.pending.filter(c=>{if(c.prefix!==o)return!0;const l=c.name;if(e.icons[l])a.loaded.push({provider:r,prefix:o,name:l});else if(e.missing.has(l))a.missing.push({provider:r,prefix:o,name:l});else return n=!0,!0;return!1}),a.pending.length!==s&&(n||Oc([e],i.id),i.callback(a.loaded.slice(0),a.missing.slice(0),a.pending.slice(0),i.abort))})}))}let zg=0;function Wg(e,t,n){const r=zg++,o=Oc.bind(null,n,r);if(!t.pending.length)return o;const i={id:r,icons:t,callback:e,abort:o};return n.forEach(a=>{(a.loaderCallbacks||(a.loaderCallbacks=[])).push(i)}),o}function Vg(e,t=!0,n=!1){const r=[];return e.forEach(o=>{const i=typeof o=="string"?Po(o,t,n):o;i&&r.push(i)}),r}var Kg={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function Gg(e,t,n,r){const o=e.resources.length,i=e.random?Math.floor(Math.random()*o):e.index;let a;if(e.random){let D=e.resources.slice(0);for(a=[];D.length>1;){const j=Math.floor(Math.random()*D.length);a.push(D[j]),D=D.slice(0,j).concat(D.slice(j+1))}a=a.concat(D)}else a=e.resources.slice(i).concat(e.resources.slice(0,i));const s=Date.now();let c="pending",l=0,d,f=null,g=[],y=[];typeof r=="function"&&y.push(r);function _(){f&&(clearTimeout(f),f=null)}function A(){c==="pending"&&(c="aborted"),_(),g.forEach(D=>{D.status==="pending"&&(D.status="aborted")}),g=[]}function w(D,j){j&&(y=[]),typeof D=="function"&&y.push(D)}function T(){return{startTime:s,payload:t,status:c,queriesSent:l,queriesPending:g.length,subscribe:w,abort:A}}function O(){c="failed",y.forEach(D=>{D(void 0,d)})}function I(){g.forEach(D=>{D.status==="pending"&&(D.status="aborted")}),g=[]}function K(D,j,M){const N=j!=="success";switch(g=g.filter(H=>H!==D),c){case"pending":break;case"failed":if(N||!e.dataAfterTimeout)return;break;default:return}if(j==="abort"){d=M,O();return}if(N){d=M,g.length||(a.length?Q():O());return}if(_(),I(),!e.random){const H=e.resources.indexOf(D.resource);H!==-1&&H!==e.index&&(e.index=H)}c="completed",y.forEach(H=>{H(M)})}function Q(){if(c!=="pending")return;_();const D=a.shift();if(D===void 0){if(g.length){f=setTimeout(()=>{_(),c==="pending"&&(I(),O())},e.timeout);return}O();return}const j={status:"pending",resource:D,callback:(M,N)=>{K(j,M,N)}};g.push(j),l++,f=setTimeout(Q,e.rotate),n(D,t,j.callback)}return setTimeout(Q),T}function Sc(e){const t={...Kg,...e};let n=[];function r(){n=n.filter(s=>s().status==="pending")}function o(s,c,l){const d=Gg(t,s,c,(f,g)=>{r(),l&&l(f,g)});return n.push(d),d}function i(s){return n.find(c=>s(c))||null}return{query:o,find:i,setIndex:s=>{t.index=s},getIndex:()=>t.index,cleanup:r}}function Tc(){}const ws=Object.create(null);function Yg(e){if(!ws[e]){const t=bs(e);if(!t)return;const n=Sc(t),r={config:t,redundancy:n};ws[e]=r}return ws[e]}function Qg(e,t,n){let r,o;if(typeof e=="string"){const i=ps(e);if(!i)return n(void 0,424),Tc;o=i.send;const a=Yg(e);a&&(r=a.redundancy)}else{const i=vs(e);if(i){r=Sc(i);const a=e.resources?e.resources[0]:"",s=ps(a);s&&(o=s.send)}}return!r||!o?(n(void 0,424),Tc):r.query(t,o,n)().abort}const Rc="iconify2",Ir="iconify",Mc=Ir+"-count",Pc=Ir+"-version",Ic=36e5,Xg=168;function ks(e,t){try{return e.getItem(t)}catch{}}function xs(e,t,n){try{return e.setItem(t,n),!0}catch{}}function Lc(e,t){try{e.removeItem(t)}catch{}}function _s(e,t){return xs(e,Mc,t.toString())}function As(e){return parseInt(ks(e,Mc))||0}const Do={local:!0,session:!0},jc={local:new Set,session:new Set};let Es=!1;function Zg(e){Es=e}let Bo=typeof window=="undefined"?{}:window;function Nc(e){const t=e+"Storage";try{if(Bo&&Bo[t]&&typeof Bo[t].length=="number")return Bo[t]}catch{}Do[e]=!1}function Dc(e,t){const n=Nc(e);if(!n)return;const r=ks(n,Pc);if(r!==Rc){if(r){const s=As(n);for(let c=0;c<s;c++)Lc(n,Ir+c.toString())}xs(n,Pc,Rc),_s(n,0);return}const o=Math.floor(Date.now()/Ic)-Xg,i=s=>{const c=Ir+s.toString(),l=ks(n,c);if(typeof l=="string"){try{const d=JSON.parse(l);if(typeof d=="object"&&typeof d.cached=="number"&&d.cached>o&&typeof d.provider=="string"&&typeof d.data=="object"&&typeof d.data.prefix=="string"&&t(d,s))return!0}catch{}Lc(n,c)}};let a=As(n);for(let s=a-1;s>=0;s--)i(s)||(s===a-1?(a--,_s(n,a)):jc[e].add(s))}function Bc(){if(!Es){Zg(!0);for(const e in Do)Dc(e,t=>{const n=t.data,r=t.provider,o=n.prefix,i=On(r,o);if(!ms(i,n).length)return!1;const a=n.lastModified||-1;return i.lastModifiedCached=i.lastModifiedCached?Math.min(i.lastModifiedCached,a):a,!0})}}function Jg(e,t){const n=e.lastModifiedCached;if(n&&n>=t)return n===t;if(e.lastModifiedCached=t,n)for(const r in Do)Dc(r,o=>{const i=o.data;return o.provider!==e.provider||i.prefix!==e.prefix||i.lastModified===t});return!0}function $g(e,t){Es||Bc();function n(r){let o;if(!Do[r]||!(o=Nc(r)))return;const i=jc[r];let a;if(i.size)i.delete(a=Array.from(i).shift());else if(a=As(o),!_s(o,a+1))return;const s={cached:Math.floor(Date.now()/Ic),provider:e.provider,data:t};return xs(o,Ir+a.toString(),JSON.stringify(s))}t.lastModified&&!Jg(e,t.lastModified)||!Object.keys(t.icons).length||(t.not_found&&(t=Object.assign({},t),delete t.not_found),n("local")||n("session"))}function Fc(){}function ep(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,qg(e)}))}function tp(e,t){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(t).sort():e.iconsToLoad=t,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:n,prefix:r}=e,o=e.iconsToLoad;delete e.iconsToLoad;let i;if(!o||!(i=ps(n)))return;i.prepare(n,r,o).forEach(s=>{Qg(n,s,c=>{if(typeof c!="object")s.icons.forEach(l=>{e.missing.add(l)});else try{const l=ms(e,c);if(!l.length)return;const d=e.pendingIcons;d&&l.forEach(f=>{d.delete(f)}),$g(e,c)}catch(l){console.error(l)}ep(e)})})}))}const np=(e,t)=>{const n=Vg(e,!0,xc()),r=Hg(n);if(!r.pending.length){let c=!0;return t&&setTimeout(()=>{c&&t(r.loaded,r.missing,r.pending,Fc)}),()=>{c=!1}}const o=Object.create(null),i=[];let a,s;return r.pending.forEach(c=>{const{provider:l,prefix:d}=c;if(d===s&&l===a)return;a=l,s=d,i.push(On(l,d));const f=o[l]||(o[l]=Object.create(null));f[d]||(f[d]=[])}),r.pending.forEach(c=>{const{provider:l,prefix:d,name:f}=c,g=On(l,d),y=g.pendingIcons||(g.pendingIcons=new Set);y.has(f)||(y.add(f),o[l][d].push(f))}),i.forEach(c=>{const{provider:l,prefix:d}=c;o[l][d].length&&tp(c,o[l][d])}),t?Wg(t,r,i):Fc};function rp(e,t){const n={...e};for(const r in t){const o=t[r],i=typeof o;r in _c?(o===null||o&&(i==="string"||i==="number"))&&(n[r]=o):i===typeof n[r]&&(n[r]=r==="rotate"?o%4:o)}return n}const op=/[\s,]+/;function ip(e,t){t.split(op).forEach(n=>{switch(n.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function sp(e,t=0){const n=e.replace(/^-?[0-9.]*/,"");function r(o){for(;o<0;)o+=4;return o%4}if(n===""){const o=parseInt(e);return isNaN(o)?0:r(o)}else if(n!==e){let o=0;switch(n){case"%":o=25;break;case"deg":o=90}if(o){let i=parseFloat(e.slice(0,e.length-n.length));return isNaN(i)?0:(i=i/o,i%1===0?r(i):0)}}return t}function ap(e,t){let n=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const r in t)n+=" "+r+'="'+t[r]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+e+"</svg>"}function lp(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function cp(e){return'url("data:image/svg+xml,'+lp(e)+'")'}const Uc={...Ac,inline:!1},up={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},dp={display:"inline-block"},Cs={backgroundColor:"currentColor"},Hc={backgroundColor:"transparent"},qc={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},zc={webkitMask:Cs,mask:Cs,background:Hc};for(const e in zc){const t=zc[e];for(const n in qc)t[e+n]=qc[n]}const Fo={};["horizontal","vertical"].forEach(e=>{const t=e.slice(0,1)+"Flip";Fo[e+"-flip"]=t,Fo[e.slice(0,1)+"-flip"]=t,Fo[e+"Flip"]=t});function Wc(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const Vc=(e,t)=>{const n=rp(Uc,t),r={...up},o=t.mode||"svg",i={},a=t.style,s=typeof a=="object"&&!(a instanceof Array)?a:{};for(let A in t){const w=t[A];if(w!==void 0)switch(A){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":n[A]=w===!0||w==="true"||w===1;break;case"flip":typeof w=="string"&&ip(n,w);break;case"color":i.color=w;break;case"rotate":typeof w=="string"?n[A]=sp(w):typeof w=="number"&&(n[A]=w);break;case"ariaHidden":case"aria-hidden":w!==!0&&w!=="true"&&delete r["aria-hidden"];break;default:{const T=Fo[A];T?(w===!0||w==="true"||w===1)&&(n[T]=!0):Uc[A]===void 0&&(r[A]=w)}}}const c=Tg(e,n),l=c.attributes;if(n.inline&&(i.verticalAlign="-0.125em"),o==="svg"){r.style={...i,...s},Object.assign(r,l);let A=0,w=t.id;return typeof w=="string"&&(w=w.replace(/-/g,"_")),r.innerHTML=Ig(c.body,w?()=>w+"ID"+A++:"iconifyVue"),zi("svg",r)}const{body:d,width:f,height:g}=e,y=o==="mask"||(o==="bg"?!1:d.indexOf("currentColor")!==-1),_=ap(d,{...l,width:f+"",height:g+""});return r.style={...i,"--svg":cp(_),width:Wc(l.width),height:Wc(l.height),...dp,...y?Cs:Hc,...s},zi("span",r)};if(xc(!0),Lg("",Ug),typeof document!="undefined"&&typeof window!="undefined"){Bc();const e=window;if(e.IconifyPreload!==void 0){const t=e.IconifyPreload,n="Invalid IconifyPreload syntax.";typeof t=="object"&&t!==null&&(t instanceof Array?t:[t]).forEach(r=>{try{(typeof r!="object"||r===null||r instanceof Array||typeof r.icons!="object"||typeof r.prefix!="string"||!Eg(r))&&console.error(n)}catch{console.error(n)}})}if(e.IconifyProviders!==void 0){const t=e.IconifyProviders;if(typeof t=="object"&&t!==null)for(let n in t){const r="IconifyProviders["+n+"] is invalid.";try{const o=t[n];if(typeof o!="object"||!o||o.resources===void 0)continue;jg(n,o)||console.error(r)}catch{console.error(r)}}}}const fp={...jo,body:""},Uo=Ti({inheritAttrs:!1,data(){return{iconMounted:!1,counter:0}},mounted(){this._name="",this._loadingIcon=null,this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(e,t){if(typeof e=="object"&&e!==null&&typeof e.body=="string")return this._name="",this.abortLoading(),{data:e};let n;if(typeof e!="string"||(n=Po(e,!1,!0))===null)return this.abortLoading(),null;const r=_g(n);if(!r)return(!this._loadingIcon||this._loadingIcon.name!==e)&&(this.abortLoading(),this._name="",r!==null&&(this._loadingIcon={name:e,abort:np([n],()=>{this.counter++})})),null;this.abortLoading(),this._name!==e&&(this._name=e,t&&t(e));const o=["iconify"];return n.prefix!==""&&o.push("iconify--"+n.prefix),n.provider!==""&&o.push("iconify--"+n.provider),{data:r,classes:o}}},render(){this.counter;const e=this.$attrs,t=this.iconMounted?this.getIcon(e.icon,e.onLoad):null;if(!t)return Vc(fp,e);let n=e;return t.classes&&(n={...e,class:(typeof e.class=="string"?e.class+" ":"")+t.classes.join(" ")}),Vc({...jo,...t.data},n)}}),Kc={width:24,height:24,body:'<path fill="currentColor" d="m8.6 22.5l-1.9-3.2l-3.6-.8l.35-3.7L1 12l2.45-2.8l-.35-3.7l3.6-.8l1.9-3.2L12 2.95l3.4-1.45l1.9 3.2l3.6.8l-.35 3.7L23 12l-2.45 2.8l.35 3.7l-3.6.8l-1.9 3.2l-3.4-1.45Zm2.35-6.95L16.6 9.9l-1.4-1.45l-4.25 4.25l-2.15-2.1L7.4 12Z"/>'},hp={name:"RoomsContent",components:{SvgIcon:rt,FormatMessage:Or,Icon:Uo},directives:{clickOutside:Ro},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null,icons:{verifiedIcon:Kc}}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const n=this.room.users.find(r=>r._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!n||n._id===this.currentUserId?t:`${n.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return gc(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var t,n;const e=(n=(t=this.room.lastMessage)==null?void 0:t.files)==null?void 0:n[0];if(e){if(!e.duration)return`${e.name}.${e.extension}`;let r=Math.floor(e.duration);return(r-(r%=60))/60+(r>9?":":":0")+r}return""},isAudio(){return this.room.lastMessage.files?Mo(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},mp={class:"vac-room-container"},gp={class:"vac-name-container vac-text-ellipsis"},pp={class:"vac-title-container"},vp={class:"vac-room-name vac-text-ellipsis"},yp={key:1,class:"vac-text-date"},bp={key:0},wp={key:1,class:"vac-text-ellipsis"},kp={key:3,class:"vac-text-ellipsis"},xp={class:"vac-room-options-container"},_p={key:0,class:"vac-badge-counter vac-room-badge"},Ap={key:0,class:"vac-menu-options"},Ep={class:"vac-menu-list"},Cp=["onClick"];function Op(e,t,n,r,o,i){const a=pe("Icon"),s=pe("svg-icon"),c=pe("format-message"),l=uo("click-outside");return L(),z("div",mp,[oe(e.$slots,"room-list-item_"+n.room.roomId,{},()=>[oe(e.$slots,"room-list-avatar_"+n.room.roomId,{},()=>[n.room.avatar?(L(),z("div",{key:0,class:"vac-avatar",style:Le({"background-image":`url('${n.room.avatar}')`})},null,4)):ne("",!0)]),X("div",gp,[X("div",pp,[i.userStatus?(L(),z("div",{key:0,class:Ae(["vac-state-circle",{"vac-state-online":i.userStatus==="online"}])},null,2)):ne("",!0),X("div",vp,[Mt(we(n.room.roomName)+" ",1),n.room.verified||n.room.official?(L(),je(a,{key:0,inline:!0,style:Le({color:`${n.room.official?"gold":"#2689d6"}`}),width:"14",icon:o.icons.verifiedIcon},null,8,["style","icon"])):ne("",!0)]),n.room.lastMessage?(L(),z("div",yp,we(n.room.lastMessage.timestamp),1)):ne("",!0)]),X("div",{class:Ae(["vac-text-last",{"vac-message-new":n.room.lastMessage&&n.room.lastMessage.new&&!i.typingUsers}])},[i.isMessageCheckmarkVisible?(L(),z("span",bp,[oe(e.$slots,"checkmark-icon_"+n.room.roomId,{},()=>[ie(s,{name:n.room.lastMessage.distributed?"double-checkmark":"checkmark",param:n.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):ne("",!0),n.room.lastMessage&&!n.room.lastMessage.deleted&&i.isAudio?(L(),z("div",wp,[oe(e.$slots,"microphone-icon_"+n.room.roomId,{},()=>[ie(s,{name:"microphone",class:"vac-icon-microphone"})]),Mt(" "+we(i.formattedDuration),1)])):n.room.lastMessage?(L(),je(c,{key:2,"message-id":n.room.lastMessage._id,"room-id":n.room.roomId,"room-list":!0,content:i.getLastMessage,deleted:!!n.room.lastMessage.deleted&&!i.typingUsers,users:n.room.users,"text-messages":n.textMessages,linkify:!1,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"single-line":!0},Fe({_:2},[_e(e.$slots,(d,f)=>({name:f,fn:ve(g=>[oe(e.$slots,f,Be(De(g)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):ne("",!0),!n.room.lastMessage&&i.typingUsers?(L(),z("div",kp,we(i.typingUsers),1)):ne("",!0),X("div",xp,[n.room.unreadCount?(L(),z("div",_p,we(n.room.unreadCount),1)):ne("",!0),oe(e.$slots,"room-list-options_"+n.room.roomId,{},()=>[n.roomActions.length?(L(),z("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=wt(d=>o.roomMenuOpened=n.room.roomId,["stop"]))},[oe(e.$slots,"room-list-options-icon_"+n.room.roomId,{},()=>[ie(s,{name:"dropdown",param:"room"})])])):ne("",!0),n.roomActions.length?(L(),je(Qe,{key:1,name:"vac-slide-left"},{default:ve(()=>[o.roomMenuOpened===n.room.roomId?qt((L(),z("div",Ap,[X("div",Ep,[(L(!0),z(Pe,null,_e(n.roomActions,d=>(L(),z("div",{key:d.name},[X("div",{class:"vac-menu-item",onClick:wt(f=>i.roomActionHandler(d),["stop"])},we(d.title),9,Cp)]))),128))])])),[[l,i.closeRoomMenu]]):ne("",!0)]),_:1})):ne("",!0)])])],2)])])])}var Sp=ze(hp,[["render",Op]]),Os=(e,t,n,r=!1)=>!n||n===""?e:e.filter(o=>r?Ho(o[t]).startsWith(Ho(n)):Ho(o[t]).includes(Ho(n)));function Ho(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const Tp={name:"RoomsList",components:{Loader:wo,RoomsSearch:Wh,RoomContent:Sp},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(e,t){this.filteredRooms=e,(e.length!==t.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("infinite-loader-rooms");if(e){const t={root:document.querySelector("vue-advanced-chat").shadowRoot.getElementById("rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.customSearchRoomEnabled?this.$emit("search-room",e.target.value):this.filteredRooms=Os(this.rooms,"roomName",e.target.value)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},Rp={key:0,class:"vac-rooms-empty"},Mp={key:1,id:"rooms-list",class:"vac-room-list"},Pp=["id","onClick"],Ip={key:0,id:"infinite-loader-rooms"};function Lp(e,t,n,r,o,i){const a=pe("rooms-search"),s=pe("loader"),c=pe("room-content");return qt((L(),z("div",{class:Ae(["vac-rooms-container",{"vac-rooms-container-full":n.isMobile,"vac-app-border-r":!n.isMobile}])},[oe(e.$slots,"rooms-header"),oe(e.$slots,"rooms-list-search",{},()=>[ie(a,{rooms:n.rooms,"loading-rooms":n.loadingRooms,"text-messages":n.textMessages,"show-search":n.showSearch,"show-add-room":n.showAddRoom,onSearchRoom:i.searchRoom,onAddRoom:t[0]||(t[0]=l=>e.$emit("add-room"))},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),ie(s,{show:n.loadingRooms,type:"rooms"},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["show"]),!n.loadingRooms&&!n.rooms.length?(L(),z("div",Rp,[oe(e.$slots,"rooms-empty",{},()=>[Mt(we(n.textMessages.ROOMS_EMPTY),1)])])):ne("",!0),n.loadingRooms?ne("",!0):(L(),z("div",Mp,[(L(!0),z(Pe,null,_e(o.filteredRooms,l=>(L(),z("div",{id:l.roomId,key:l.roomId,class:Ae(["vac-room-item",{"vac-room-selected":o.selectedRoomId===l.roomId}]),onClick:d=>i.openRoom(l)},[ie(c,{"current-user-id":n.currentUserId,room:l,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"text-messages":n.textMessages,"room-actions":n.roomActions,onRoomActionHandler:t[1]||(t[1]=d=>e.$emit("room-action-handler",d))},Fe({_:2},[_e(e.$slots,(d,f)=>({name:f,fn:ve(g=>[oe(e.$slots,f,Be(De(g)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,Pp))),128)),ie(Qe,{name:"vac-fade-message"},{default:ve(()=>[n.rooms.length&&!n.loadingRooms?(L(),z("div",Ip,[ie(s,{show:o.showLoader,infinite:!0,type:"infinite-rooms"},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["show"])])):ne("",!0)]),_:3})]))],2)),[[bo,n.showRoomsList]])}var jp=ze(Tp,[["render",Lp]]);const Np={name:"RoomHeader",components:{SvgIcon:rt,Icon:Uo},directives:{clickOutside:Ro},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0,icons:{verifiedIcon:Kc}}},computed:{typingUsers(){return gc(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(n=>n._id!==this.currentUserId);if(!e.status)return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},Dp={class:"vac-room-header vac-app-border-b"},Bp={class:"vac-room-wrapper"},Fp={key:0,class:"vac-room-selection"},Up=["id"],Hp=["onClick"],qp={class:"vac-selection-button-count"},zp={class:"vac-text-ellipsis"},Wp={class:"vac-room-name vac-text-ellipsis"},Vp={key:0,class:"vac-room-info vac-text-ellipsis"},Kp={key:1,class:"vac-room-info vac-text-ellipsis"},Gp={key:0,class:"vac-menu-options"},Yp={class:"vac-menu-list"},Qp=["onClick"];function Xp(e,t,n,r,o,i){const a=pe("svg-icon"),s=pe("Icon"),c=uo("click-outside");return L(),z("div",Dp,[oe(e.$slots,"room-header",{},()=>[X("div",Bp,[ie(Qe,{name:"vac-slide-up"},{default:ve(()=>[n.messageSelectionEnabled?(L(),z("div",Fp,[(L(!0),z(Pe,null,_e(n.messageSelectionActions,l=>(L(),z("div",{id:l.name,key:l.name},[X("div",{class:"vac-selection-button",onClick:d=>i.messageSelectionActionHandler(l)},[Mt(we(l.title)+" ",1),X("span",qp,we(n.selectedMessagesTotal),1)],8,Hp)],8,Up))),128)),X("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=l=>e.$emit("cancel-message-selection"))},we(n.textMessages.CANCEL_SELECT_MESSAGE),1)])):ne("",!0)]),_:1}),!n.messageSelectionEnabled&&o.messageSelectionAnimationEnded?(L(),z(Pe,{key:0},[n.singleRoom?ne("",!0):(L(),z("div",{key:0,class:Ae(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!n.isMobile,"vac-rotate-icon":!n.showRoomsList&&!n.isMobile}]),onClick:t[1]||(t[1]=l=>e.$emit("toggle-rooms-list"))},[oe(e.$slots,"toggle-icon",{},()=>[ie(a,{name:"toggle"})])],2)),X("div",{class:Ae(["vac-info-wrapper",{"vac-item-clickable":n.roomInfoEnabled}]),onClick:t[2]||(t[2]=l=>e.$emit("room-info"))},[oe(e.$slots,"room-header-avatar",{},()=>[n.room.avatar?(L(),z("div",{key:0,class:"vac-avatar",style:Le({"background-image":`url('${n.room.avatar}')`})},null,4)):ne("",!0)]),oe(e.$slots,"room-header-info",{},()=>[X("div",zp,[X("div",Wp,[Mt(we(n.room.roomName)+" ",1),n.room.verified||n.room.official?(L(),je(s,{key:0,inline:!0,style:Le({color:`${n.room.official?"gold":"#2689d6"}`}),width:"14",icon:o.icons.verifiedIcon},null,8,["style","icon"])):ne("",!0)]),i.typingUsers?(L(),z("div",Vp,we(i.typingUsers),1)):(L(),z("div",Kp,we(i.userStatus),1))])])],2),n.room.roomId?oe(e.$slots,"room-options",{key:1},()=>[n.menuActions.length?(L(),z("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=l=>o.menuOpened=!o.menuOpened)},[oe(e.$slots,"menu-icon",{},()=>[ie(a,{name:"menu"})])])):ne("",!0),n.menuActions.length?(L(),je(Qe,{key:1,name:"vac-slide-left"},{default:ve(()=>[o.menuOpened?qt((L(),z("div",Gp,[X("div",Yp,[(L(!0),z(Pe,null,_e(n.menuActions,l=>(L(),z("div",{key:l.name},[X("div",{class:"vac-menu-item",onClick:d=>i.menuActionHandler(l)},we(l.title),9,Qp)]))),128))])])),[[c,i.closeMenu]]):ne("",!0)]),_:1})):ne("",!0)]):ne("",!0)],64)):ne("",!0)])])])}var Zp=ze(Np,[["render",Xp]]);function qo(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function Ss(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const Jp=1,$p=1,Sn="emoji",Vn="keyvalue",Ts="favorites",ev="tokens",Gc="tokens",tv="unicode",Yc="count",nv="group",rv="order",Qc="group-order",Rs="eTag",zo="url",Xc="skinTone",Kn="readonly",Ms="readwrite",Zc="skinUnicodes",ov="skinUnicodes",iv="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",sv="en";function av(e,t){const n=new Set,r=[];for(const o of e){const i=t(o);n.has(i)||(n.add(i),r.push(o))}return r}function Jc(e){return av(e,t=>t.unicode)}function lv(e){function t(n,r,o){const i=r?e.createObjectStore(n,{keyPath:r}):e.createObjectStore(n);if(o)for(const[a,[s,c]]of Object.entries(o))i.createIndex(a,s,{multiEntry:c});return i}t(Vn),t(Sn,tv,{[Gc]:[ev,!0],[Qc]:[[nv,rv]],[Zc]:[ov,!0]}),t(Ts,void 0,{[Yc]:[""]})}const Ps={},Wo={},Vo={};function $c(e,t,n){n.onerror=()=>t(n.error),n.onblocked=()=>t(new Error("IDB blocked")),n.onsuccess=()=>e(n.result)}async function cv(e){const t=await new Promise((n,r)=>{const o=indexedDB.open(e,Jp);Ps[e]=o,o.onupgradeneeded=i=>{i.oldVersion<$p&&lv(o.result)},$c(n,r,o)});return t.onclose=()=>Is(e),t}function uv(e){return Wo[e]||(Wo[e]=cv(e)),Wo[e]}function Kt(e,t,n,r){return new Promise((o,i)=>{const a=e.transaction(t,n,{durability:"relaxed"}),s=typeof t=="string"?a.objectStore(t):t.map(l=>a.objectStore(l));let c;r(s,a,l=>{c=l}),a.oncomplete=()=>o(c),a.onerror=()=>i(a.error)})}function Is(e){const t=Ps[e],n=t&&t.result;if(n){n.close();const r=Vo[e];if(r)for(const o of r)o()}delete Ps[e],delete Wo[e],delete Vo[e]}function dv(e){return new Promise((t,n)=>{Is(e);const r=indexedDB.deleteDatabase(e);$c(t,n,r)})}function fv(e,t){let n=Vo[e];n||(n=Vo[e]=[]),n.push(t)}const hv=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Gn(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||hv.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase()).filter(Boolean)}const mv=2;function eu(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=mv)}function gv(e){return e.map(({annotation:n,emoticon:r,group:o,order:i,shortcodes:a,skins:s,tags:c,emoji:l,version:d})=>{const f=[...new Set(eu([...(a||[]).map(Gn).flat(),...c.map(Gn).flat(),...Gn(n),r]))].sort(),g={annotation:n,group:o,order:i,tags:c,tokens:f,unicode:l,version:d};if(r&&(g.emoticon=r),a&&(g.shortcodes=a),s){g.skinTones=[],g.skinUnicodes=[],g.skinVersions=[];for(const{tone:y,emoji:_,version:A}of s)g.skinTones.push(y),g.skinUnicodes.push(_),g.skinVersions.push(A)}return g})}function tu(e,t,n,r){e[t](n).onsuccess=o=>r&&r(o.target.result)}function Tn(e,t,n){tu(e,"get",t,n)}function nu(e,t,n){tu(e,"getAll",t,n)}function Ls(e){e.commit&&e.commit()}function pv(e,t){let n=e[0];for(let r=1;r<e.length;r++){const o=e[r];t(n)>t(o)&&(n=o)}return n}function ru(e,t){const n=pv(e,o=>o.length),r=[];for(const o of n)e.some(i=>i.findIndex(a=>t(a)===t(o))===-1)||r.push(o);return r}async function vv(e){return!await js(e,Vn,zo)}async function yv(e,t,n){const[r,o]=await Promise.all([Rs,zo].map(i=>js(e,Vn,i)));return r===n&&o===t}async function bv(e,t){return Kt(e,Sn,Kn,(r,o,i)=>{let a;const s=()=>{r.getAll(a&&IDBKeyRange.lowerBound(a,!0),50).onsuccess=c=>{const l=c.target.result;for(const d of l)if(a=d.unicode,t(d))return i(d);if(l.length<50)return i();s()}};s()})}async function ou(e,t,n,r){try{const o=gv(t);await Kt(e,[Sn,Vn],Ms,([i,a],s)=>{let c,l,d=0;function f(){++d===2&&g()}function g(){if(!(c===r&&l===n)){i.clear();for(const y of o)i.put(y);a.put(r,Rs),a.put(n,zo),Ls(s)}}Tn(a,Rs,y=>{c=y,f()}),Tn(a,zo,y=>{l=y,f()})})}finally{}}async function wv(e,t){return Kt(e,Sn,Kn,(n,r,o)=>{const i=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);nu(n.index(Qc),i,o)})}async function iu(e,t){const n=eu(Gn(t));return n.length?Kt(e,Sn,Kn,(r,o,i)=>{const a=[],s=()=>{a.length===n.length&&c()},c=()=>{const l=ru(a,d=>d.unicode);i(l.sort((d,f)=>d.order<f.order?-1:1))};for(let l=0;l<n.length;l++){const d=n[l],f=l===n.length-1?IDBKeyRange.bound(d,d+"\uFFFF",!1,!0):IDBKeyRange.only(d);nu(r.index(Gc),f,g=>{a.push(g),s()})}}):[]}async function kv(e,t){const n=await iu(e,t);return n.length?n.filter(r=>(r.shortcodes||[]).map(i=>i.toLowerCase()).includes(t.toLowerCase()))[0]||null:await bv(e,o=>(o.shortcodes||[]).includes(t.toLowerCase()))||null}async function xv(e,t){return Kt(e,Sn,Kn,(n,r,o)=>Tn(n,t,i=>{if(i)return o(i);Tn(n.index(Zc),t,a=>o(a||null))}))}function js(e,t,n){return Kt(e,t,Kn,(r,o,i)=>Tn(r,n,i))}function _v(e,t,n,r){return Kt(e,t,Ms,(o,i)=>{o.put(r,n),Ls(i)})}function Av(e,t){return Kt(e,Ts,Ms,(n,r)=>Tn(n,t,o=>{n.put((o||0)+1,t),Ls(r)}))}function Ev(e,t,n){return n===0?[]:Kt(e,[Ts,Sn],Kn,([r,o],i,a)=>{const s=[];r.index(Yc).openCursor(void 0,"prev").onsuccess=c=>{const l=c.target.result;if(!l)return a(s);function d(y){if(s.push(y),s.length===n)return a(s);l.continue()}const f=l.primaryKey,g=t.byName(f);if(g)return d(g);Tn(o,f,y=>{if(y)return d(y);l.continue()})}})}const Ko="";function Cv(e,t){const n=new Map;for(const o of e){const i=t(o);for(const a of i){let s=n;for(let l=0;l<a.length;l++){const d=a.charAt(l);let f=s.get(d);f||(f=new Map,s.set(d,f)),s=f}let c=s.get(Ko);c||(c=[],s.set(Ko,c)),c.push(o)}}return(o,i)=>{let a=n;for(let l=0;l<o.length;l++){const d=o.charAt(l),f=a.get(d);if(f)a=f;else return[]}if(i)return a.get(Ko)||[];const s=[],c=[a];for(;c.length;){const d=[...c.shift().entries()].sort((f,g)=>f[0]<g[0]?-1:1);for(const[f,g]of d)f===Ko?s.push(...g):c.push(g)}return s}}const Ov=["name","url"];function Sv(e){const t=e&&Array.isArray(e),n=t&&e.length&&(!e[0]||Ov.some(r=>!(r in e[0])));if(!t||n)throw new Error("Custom emojis are in the wrong format")}function su(e){Sv(e);const t=(g,y)=>g.name.toLowerCase()<y.name.toLowerCase()?-1:1,n=e.sort(t),o=Cv(e,g=>[...new Set((g.shortcodes||[]).map(y=>Gn(y)).flat())]),i=g=>o(g,!0),a=g=>o(g,!1),s=g=>{const y=Gn(g),_=y.map((A,w)=>(w<y.length-1?i:a)(A));return ru(_,A=>A.name).sort(t)},c=new Map,l=new Map;for(const g of e){l.set(g.name.toLowerCase(),g);for(const y of g.shortcodes||[])c.set(y.toLowerCase(),g)}return{all:n,search:s,byShortcode:g=>c.get(g.toLowerCase()),byName:g=>l.get(g.toLowerCase())}}function Lr(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let n=0;n<t;n++)e.skins[n]={tone:e.skinTones[n],unicode:e.skinUnicodes[n],version:e.skinVersions[n]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function au(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const Tv=["annotation","emoji","group","order","tags","version"];function Rv(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||Tv.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function lu(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function Mv(e){const t=await fetch(e,{method:"HEAD"});lu(t,e);const n=t.headers.get("etag");return au(n),n}async function Ns(e){const t=await fetch(e);lu(t,e);const n=t.headers.get("etag");au(n);const r=await t.json();return Rv(r),[n,r]}function Pv(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=-1;++o<r;)t+=String.fromCharCode(n[o]);return t}function Iv(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=-1;++o<t;)r[o]=e.charCodeAt(o);return n}async function cu(e){const t=JSON.stringify(e),n=Iv(t),r=await crypto.subtle.digest("SHA-1",n),o=Pv(r);return btoa(o)}async function Lv(e,t){let n,r=await Mv(t);if(!r){const o=await Ns(t);r=o[0],n=o[1],r||(r=await cu(n))}await yv(e,t,r)||(n||(n=(await Ns(t))[1]),await ou(e,n,t,r))}async function jv(e,t){let[n,r]=await Ns(t);n||(n=await cu(r)),await ou(e,r,t,n)}class uu{constructor({dataSource:t=iv,locale:n=sv,customEmoji:r=[]}={}){this.dataSource=t,this.locale=n,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=su(r),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await uv(this._dbName);fv(this._dbName,this._clear);const n=this.dataSource;await vv(t)?await jv(t,n):this._lazyUpdate=Lv(t,n)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return Ss(t),await this.ready(),Jc(await wv(this._db,t)).map(Lr)}async getEmojiBySearchQuery(t){qo(t),await this.ready();const n=this._custom.search(t),r=Jc(await iu(this._db,t)).map(Lr);return[...n,...r]}async getEmojiByShortcode(t){qo(t),await this.ready();const n=this._custom.byShortcode(t);return n||Lr(await kv(this._db,t))}async getEmojiByUnicodeOrName(t){qo(t),await this.ready();const n=this._custom.byName(t);return n||Lr(await xv(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await js(this._db,Vn,Xc)||0}async setPreferredSkinTone(t){return Ss(t),await this.ready(),_v(this._db,Vn,Xc,t)}async incrementFavoriteEmojiCount(t){return qo(t),await this.ready(),Av(this._db,t)}async getTopFavoriteEmoji(t){return Ss(t),await this.ready(),(await Ev(this._db,this._custom,t)).map(Lr)}set customEmoji(t){this._custom=su(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Is(this._dbName)}async delete(){await this._shutdown(),await dv(this._dbName)}}function jr(){}function du(e){return e()}function fu(){return Object.create(null)}function Nr(e){e.forEach(du)}function hu(e){return typeof e=="function"}function Nv(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Go;function Yo(e,t){return Go||(Go=document.createElement("a")),Go.href=t,e===Go.href}function Dv(e){return Object.keys(e).length===0}function Bv(e){return e&&hu(e.destroy)?e.destroy:jr}function Ve(e,t){e.appendChild(t)}function Et(e,t,n){e.insertBefore(t,n||null)}function Ct(e){e.parentNode.removeChild(e)}function He(e){return document.createElement(e)}function Nt(e){return document.createTextNode(e)}function Ot(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function U(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Dt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function mu(e,t){e.value=t==null?"":t}function on(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}let Ds;function Dr(e){Ds=e}const Br=[],Yn=[],Qo=[],gu=[],pu=Promise.resolve();let Bs=!1;function vu(){Bs||(Bs=!0,pu.then(yu))}function Fv(){return vu(),pu}function Fs(e){Qo.push(e)}const Us=new Set;let Xo=0;function yu(){const e=Ds;do{for(;Xo<Br.length;){const t=Br[Xo];Xo++,Dr(t),Uv(t.$$)}for(Dr(null),Br.length=0,Xo=0;Yn.length;)Yn.pop()();for(let t=0;t<Qo.length;t+=1){const n=Qo[t];Us.has(n)||(Us.add(n),n())}Qo.length=0}while(Br.length);for(;gu.length;)gu.pop()();Bs=!1,Us.clear(),Dr(e)}function Uv(e){if(e.fragment!==null){e.update(),Nr(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Fs)}}const Hv=new Set;function qv(e,t){e&&e.i&&(Hv.delete(e),e.i(t))}const zv=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Fr(e,t){e.d(1),t.delete(e.key)}function Ur(e,t,n,r,o,i,a,s,c,l,d,f){let g=e.length,y=i.length,_=g;const A={};for(;_--;)A[e[_].key]=_;const w=[],T=new Map,O=new Map;for(_=y;_--;){const D=f(o,i,_),j=n(D);let M=a.get(j);M?r&&M.p(D,t):(M=l(j,D),M.c()),T.set(j,w[_]=M),j in A&&O.set(j,Math.abs(_-A[j]))}const I=new Set,K=new Set;function Q(D){qv(D,1),D.m(s,d),a.set(D.key,D),d=D.first,y--}for(;g&&y;){const D=w[y-1],j=e[g-1],M=D.key,N=j.key;D===j?(d=D.first,g--,y--):T.has(N)?!a.has(M)||I.has(M)?Q(D):K.has(N)?g--:O.get(M)>O.get(N)?(K.add(M),Q(D)):(I.add(N),g--):(c(j,a),g--)}for(;g--;){const D=e[g];T.has(D.key)||c(D,a)}for(;y;)Q(w[y-1]);return w}function Wv(e,t,n,r){const{fragment:o,on_mount:i,on_destroy:a,after_update:s}=e.$$;o&&o.m(t,n),r||Fs(()=>{const c=i.map(du).filter(hu);a?a.push(...c):Nr(c),e.$$.on_mount=[]}),s.forEach(Fs)}function Vv(e,t){const n=e.$$;n.fragment!==null&&(Nr(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Kv(e,t){e.$$.dirty[0]===-1&&(Br.push(e),vu(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Gv(e,t,n,r,o,i,a,s=[-1]){const c=Ds;Dr(e);const l=e.$$={fragment:null,ctx:null,props:i,update:jr,not_equal:o,bound:fu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:fu(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};a&&a(l.root);let d=!1;l.ctx=n?n(e,t.props||{},(f,g,...y)=>{const _=y.length?y[0]:g;return l.ctx&&o(l.ctx[f],l.ctx[f]=_)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](_),d&&Kv(e,f)),g}):[],l.update(),d=!0,Nr(l.before_update),l.fragment=r?r(l.ctx):!1,t.target&&(l.fragment&&l.fragment.c(),Wv(e,t.target,void 0,void 0),yu()),Dr(c)}class Yv{$destroy(){Vv(this,1),this.$destroy=jr}$on(t,n){const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!Dv(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const bu=[[-1,"\u2728","custom"],[0,"\u{1F600}","smileys-emotion"],[1,"\u{1F44B}","people-body"],[3,"\u{1F431}","animals-nature"],[4,"\u{1F34E}","food-drink"],[5,"\u{1F3E0}\uFE0F","travel-places"],[6,"\u26BD","activities"],[7,"\u{1F4DD}","objects"],[8,"\u26D4\uFE0F","symbols"],[9,"\u{1F3C1}","flags"]].map(([e,t,n])=>({id:e,emoji:t,name:n})),Zo=bu.slice(1),Qv=bu[0],Xv=2,wu=6,ku=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function xu(e){return e.unicode.includes("\u200D")}const Zv={"\u{1FAE0}":14,"\u{1F972}":13.1,"\u{1F97B}":12.1,"\u{1F970}":11,"\u{1F929}":5,"\u{1F471}\u200D\u2640\uFE0F":4,"\u{1F923}":3,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F":2,"\u{1F600}":1,"\u{1F610}\uFE0F":.7,"\u{1F603}":.6},Jv=1e3,$v="\u{1F590}\uFE0F",ey=8,ty=["\u{1F60A}","\u{1F612}","\u2665\uFE0F","\u{1F44D}\uFE0F","\u{1F60D}","\u{1F602}","\u{1F62D}","\u263A\uFE0F","\u{1F614}","\u{1F629}","\u{1F60F}","\u{1F495}","\u{1F64C}","\u{1F618}"],_u='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',ny=(e,t)=>e<t?-1:e>t?1:0,Au=(e,t)=>{const n=document.createElement("canvas");n.width=n.height=1;const r=n.getContext("2d");return r.textBaseline="top",r.font=`100px ${_u}`,r.fillStyle=t,r.scale(.01,.01),r.fillText(e,0,0),r.getImageData(0,0,1,1).data},ry=(e,t)=>{const n=[...e].join(","),r=[...t].join(",");return n===r&&!n.startsWith("0,0,0,")};function oy(e){const t=Au(e,"#000"),n=Au(e,"#fff");return t&&n&&ry(t,n)}function iy(){const e=Object.entries(Zv);try{for(const[t,n]of e)if(oy(t))return n}catch{}finally{}return e[0][1]}const Hs=new Promise(e=>ku(()=>e(iy()))),qs=new Map,sy="\uFE0F",ay="\uD83C",ly="\u200D",cy=127995,uy=57339;function dy(e,t){if(t===0)return e;const n=e.indexOf(ly);return n!==-1?e.substring(0,n)+String.fromCodePoint(cy+t-1)+e.substring(n):(e.endsWith(sy)&&(e=e.substring(0,e.length-1)),e+ay+String.fromCodePoint(uy+t-1))}function sn(e){e.preventDefault(),e.stopPropagation()}function zs(e,t,n){return t+=e?-1:1,t<0?t=n.length-1:t>=n.length&&(t=0),t}function Eu(e,t){const n=new Set,r=[];for(const o of e){const i=t(o);n.has(i)||(n.add(i),r.push(o))}return r}function fy(e,t){const n=r=>{const o={};for(const i of r)typeof i.tone=="number"&&i.version<=t&&(o[i.tone]=i.unicode);return o};return e.map(({unicode:r,skins:o,shortcodes:i,url:a,name:s,category:c})=>({unicode:r,name:s,shortcodes:i,url:a,category:c,id:r||s,skins:o&&n(o),title:(i||[]).join(", ")}))}const Jo=requestAnimationFrame;let hy=typeof ResizeObserver=="function";function my(e,t){let n;return hy?(n=new ResizeObserver(r=>t(r[0].contentRect.width)),n.observe(e)):Jo(()=>t(e.getBoundingClientRect().width)),{destroy(){n&&n.disconnect()}}}function Cu(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let Ws;function gy(e,t,n){for(const r of e){const o=n(r),i=Cu(o);typeof Ws=="undefined"&&(Ws=Cu(t));const a=i/1.8<Ws;qs.set(r.unicode,a)}}function py(e){return Eu(e,t=>t)}const{Map:Hr}=zv;function Ou(e,t,n){const r=e.slice();return r[63]=t[n],r[65]=n,r}function Su(e,t,n){const r=e.slice();return r[66]=t[n],r[65]=n,r}function Tu(e,t,n){const r=e.slice();return r[63]=t[n],r[65]=n,r}function Ru(e,t,n){const r=e.slice();return r[69]=t[n],r}function Mu(e,t,n){const r=e.slice();return r[72]=t[n],r[65]=n,r}function Pu(e,t){let n,r=t[72]+"",o,i,a,s,c,l;return{key:e,first:null,c(){n=He("div"),o=Nt(r),U(n,"id",i="skintone-"+t[65]),U(n,"class",a="emoji hide-focus "+(t[65]===t[20]?"active":"")),U(n,"aria-selected",s=t[65]===t[20]),U(n,"role","option"),U(n,"title",c=t[0].skinTones[t[65]]),U(n,"tabindex","-1"),U(n,"aria-label",l=t[0].skinTones[t[65]]),this.first=n},m(d,f){Et(d,n,f),Ve(n,o)},p(d,f){t=d,f[0]&512&&r!==(r=t[72]+"")&&Dt(o,r),f[0]&512&&i!==(i="skintone-"+t[65])&&U(n,"id",i),f[0]&1049088&&a!==(a="emoji hide-focus "+(t[65]===t[20]?"active":""))&&U(n,"class",a),f[0]&1049088&&s!==(s=t[65]===t[20])&&U(n,"aria-selected",s),f[0]&513&&c!==(c=t[0].skinTones[t[65]])&&U(n,"title",c),f[0]&513&&l!==(l=t[0].skinTones[t[65]])&&U(n,"aria-label",l)},d(d){d&&Ct(n)}}}function Iu(e,t){let n,r,o=t[69].emoji+"",i,a,s,c,l,d,f;function g(){return t[49](t[69])}return{key:e,first:null,c(){n=He("button"),r=He("div"),i=Nt(o),U(r,"class","nav-emoji emoji"),U(n,"role","tab"),U(n,"class","nav-button"),U(n,"aria-controls",a="tab-"+t[69].id),U(n,"aria-label",s=t[0].categories[t[69].name]),U(n,"aria-selected",c=!t[4]&&t[13].id===t[69].id),U(n,"title",l=t[0].categories[t[69].name]),this.first=n},m(y,_){Et(y,n,_),Ve(n,r),Ve(r,i),d||(f=Ot(n,"click",g),d=!0)},p(y,_){t=y,_[0]&4096&&o!==(o=t[69].emoji+"")&&Dt(i,o),_[0]&4096&&a!==(a="tab-"+t[69].id)&&U(n,"aria-controls",a),_[0]&4097&&s!==(s=t[0].categories[t[69].name])&&U(n,"aria-label",s),_[0]&12304&&c!==(c=!t[4]&&t[13].id===t[69].id)&&U(n,"aria-selected",c),_[0]&4097&&l!==(l=t[0].categories[t[69].name])&&U(n,"title",l)},d(y){y&&Ct(n),d=!1,f()}}}function vy(e){let t,n;return{c(){t=He("img"),U(t,"class","custom-emoji"),Yo(t.src,n=e[63].url)||U(t,"src",n),U(t,"alt",""),U(t,"loading","lazy")},m(r,o){Et(r,t,o)},p(r,o){o[0]&32768&&!Yo(t.src,n=r[63].url)&&U(t,"src",n)},d(r){r&&Ct(t)}}}function yy(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Nt(t)},m(r,o){Et(r,n,o)},p(r,o){o[0]&33024&&t!==(t=r[27](r[63],r[8])+"")&&Dt(n,t)},d(r){r&&Ct(n)}}}function Lu(e,t){let n,r,o,i,a,s,c;function l(g,y){return g[63].unicode?yy:vy}let d=l(t),f=d(t);return{key:e,first:null,c(){n=He("button"),f.c(),U(n,"role",r=t[4]?"option":"menuitem"),U(n,"aria-selected",o=t[4]?t[65]==t[5]:""),U(n,"aria-label",i=t[28](t[63],t[8])),U(n,"title",a=t[63].title),U(n,"class",s="emoji "+(t[4]&&t[65]===t[5]?"active":"")),U(n,"id",c="emo-"+t[63].id),this.first=n},m(g,y){Et(g,n,y),f.m(n,null)},p(g,y){t=g,d===(d=l(t))&&f?f.p(t,y):(f.d(1),f=d(t),f&&(f.c(),f.m(n,null))),y[0]&16&&r!==(r=t[4]?"option":"menuitem")&&U(n,"role",r),y[0]&32816&&o!==(o=t[4]?t[65]==t[5]:"")&&U(n,"aria-selected",o),y[0]&33024&&i!==(i=t[28](t[63],t[8]))&&U(n,"aria-label",i),y[0]&32768&&a!==(a=t[63].title)&&U(n,"title",a),y[0]&32816&&s!==(s="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&U(n,"class",s),y[0]&32768&&c!==(c="emo-"+t[63].id)&&U(n,"id",c)},d(g){g&&Ct(n),f.d()}}}function ju(e,t){let n,r=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",o,i,a,s,c=[],l=new Hr,d,f,g,y=t[66].emojis;const _=A=>A[63].id;for(let A=0;A<y.length;A+=1){let w=Tu(t,y,A),T=_(w);l.set(T,c[A]=Lu(T,w))}return{key:e,first:null,c(){n=He("div"),o=Nt(r),s=He("div");for(let A=0;A<c.length;A+=1)c[A].c();U(n,"id",i="menu-label-"+t[65]),U(n,"class",a="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),U(n,"aria-hidden","true"),U(s,"class","emoji-menu"),U(s,"role",d=t[4]?"listbox":"menu"),U(s,"aria-labelledby",f="menu-label-"+t[65]),U(s,"id",g=t[4]?"search-results":""),this.first=n},m(A,w){Et(A,n,w),Ve(n,o),Et(A,s,w);for(let T=0;T<c.length;T+=1)c[T].m(s,null)},p(A,w){t=A,w[0]&40977&&r!==(r=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Dt(o,r),w[0]&32768&&i!==(i="menu-label-"+t[65])&&U(n,"id",i),w[0]&32768&&a!==(a="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&U(n,"class",a),w[0]&402686256&&(y=t[66].emojis,c=Ur(c,w,_,1,t,y,l,s,Fr,Lu,null,Tu)),w[0]&16&&d!==(d=t[4]?"listbox":"menu")&&U(s,"role",d),w[0]&32768&&f!==(f="menu-label-"+t[65])&&U(s,"aria-labelledby",f),w[0]&16&&g!==(g=t[4]?"search-results":"")&&U(s,"id",g)},d(A){A&&Ct(n),A&&Ct(s);for(let w=0;w<c.length;w+=1)c[w].d()}}}function by(e){let t,n;return{c(){t=He("img"),U(t,"class","custom-emoji"),Yo(t.src,n=e[63].url)||U(t,"src",n),U(t,"alt",""),U(t,"loading","lazy")},m(r,o){Et(r,t,o)},p(r,o){o[0]&1024&&!Yo(t.src,n=r[63].url)&&U(t,"src",n)},d(r){r&&Ct(t)}}}function wy(e){let t=e[27](e[63],e[8])+"",n;return{c(){n=Nt(t)},m(r,o){Et(r,n,o)},p(r,o){o[0]&1280&&t!==(t=r[27](r[63],r[8])+"")&&Dt(n,t)},d(r){r&&Ct(n)}}}function Nu(e,t){let n,r,o,i;function a(l,d){return l[63].unicode?wy:by}let s=a(t),c=s(t);return{key:e,first:null,c(){n=He("button"),c.c(),U(n,"role","menuitem"),U(n,"aria-label",r=t[28](t[63],t[8])),U(n,"title",o=t[63].title),U(n,"class","emoji"),U(n,"id",i="fav-"+t[63].id),this.first=n},m(l,d){Et(l,n,d),c.m(n,null)},p(l,d){t=l,s===(s=a(t))&&c?c.p(t,d):(c.d(1),c=s(t),c&&(c.c(),c.m(n,null))),d[0]&1280&&r!==(r=t[28](t[63],t[8]))&&U(n,"aria-label",r),d[0]&1024&&o!==(o=t[63].title)&&U(n,"title",o),d[0]&1024&&i!==(i="fav-"+t[63].id)&&U(n,"id",i)},d(l){l&&Ct(n),c.d()}}}function ky(e){let t,n,r,o,i,a,s,c,l,d=e[0].searchLabel+"",f,g,y=e[0].searchDescription+"",_,A,w,T,O,I,K,Q=e[0].skinToneDescription+"",D,j,M=[],N=new Hr,H,P,h,k,R,p=[],m=new Hr,E,b,u,v,S,W,F,re,ue=[],le=new Hr,ge,Ce,Se,Ne,xe,Ke=[],x=new Hr,C,q,G,Y,te,ae,ee=e[9];const se=V=>V[72];for(let V=0;V<ee.length;V+=1){let J=Mu(e,ee,V),B=se(J);N.set(B,M[V]=Pu(B,J))}let Z=e[12];const he=V=>V[69].id;for(let V=0;V<Z.length;V+=1){let J=Ru(e,Z,V),B=he(J);m.set(B,p[V]=Iu(B,J))}let de=e[15];const me=V=>V[66].category;for(let V=0;V<de.length;V+=1){let J=Su(e,de,V),B=me(J);le.set(B,ue[V]=ju(B,J))}let ye=e[10];const Te=V=>V[63].id;for(let V=0;V<ye.length;V+=1){let J=Ou(e,ye,V),B=Te(J);x.set(B,Ke[V]=Nu(B,J))}return{c(){t=He("section"),n=He("div"),r=He("div"),o=He("div"),i=He("input"),l=He("label"),f=Nt(d),g=He("span"),_=Nt(y),A=He("div"),w=He("button"),T=Nt(e[21]),K=He("span"),D=Nt(Q),j=He("div");for(let V=0;V<M.length;V+=1)M[V].c();R=He("div");for(let V=0;V<p.length;V+=1)p[V].c();b=He("div"),u=He("div"),v=He("div"),S=Nt(e[18]),F=He("div"),re=He("div");for(let V=0;V<ue.length;V+=1)ue[V].c();xe=He("div");for(let V=0;V<Ke.length;V+=1)Ke[V].c();G=He("button"),G.textContent="\u{1F600}",U(n,"class","pad-top"),U(i,"id","search"),U(i,"class","search"),U(i,"type","search"),U(i,"role","combobox"),U(i,"enterkeyhint","search"),U(i,"placeholder",a=e[0].searchLabel),U(i,"autocapitalize","none"),U(i,"autocomplete","off"),U(i,"spellcheck","true"),U(i,"aria-expanded",s=!!(e[4]&&e[1].length)),U(i,"aria-controls","search-results"),U(i,"aria-describedby","search-description"),U(i,"aria-autocomplete","list"),U(i,"aria-activedescendant",c=e[26]?`emo-${e[26]}`:""),U(l,"class","sr-only"),U(l,"for","search"),U(g,"id","search-description"),U(g,"class","sr-only"),U(o,"class","search-wrapper"),U(w,"id","skintone-button"),U(w,"class",O="emoji "+(e[6]?"hide-focus":"")),U(w,"aria-label",e[23]),U(w,"title",e[23]),U(w,"aria-describedby","skintone-description"),U(w,"aria-haspopup","listbox"),U(w,"aria-expanded",e[6]),U(w,"aria-controls","skintone-list"),U(A,"class",I="skintone-button-wrapper "+(e[19]?"expanded":"")),U(K,"id","skintone-description"),U(K,"class","sr-only"),U(j,"id","skintone-list"),U(j,"class",H="skintone-list "+(e[6]?"":"hidden no-animate")),on(j,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),U(j,"role","listbox"),U(j,"aria-label",P=e[0].skinTonesLabel),U(j,"aria-activedescendant",h="skintone-"+e[20]),U(j,"aria-hidden",k=!e[6]),U(r,"class","search-row"),U(R,"class","nav"),U(R,"role","tablist"),on(R,"grid-template-columns","repeat("+e[12].length+", 1fr)"),U(R,"aria-label",E=e[0].categoriesLabel),U(u,"class","indicator"),on(u,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),U(b,"class","indicator-wrapper"),U(v,"class",W="message "+(e[18]?"":"gone")),U(v,"role","alert"),U(v,"aria-live","polite"),U(F,"class",ge="tabpanel "+(!e[14]||e[18]?"gone":"")),U(F,"role",Ce=e[4]?"region":"tabpanel"),U(F,"aria-label",Se=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),U(F,"id",Ne=e[4]?"":`tab-${e[13].id}`),U(F,"tabindex","0"),U(xe,"class",C="favorites emoji-menu "+(e[18]?"gone":"")),U(xe,"role","menu"),U(xe,"aria-label",q=e[0].favoritesLabel),on(xe,"padding-inline-end",e[25]+"px"),U(G,"aria-hidden","true"),U(G,"tabindex","-1"),U(G,"class","abs-pos hidden emoji"),U(t,"class","picker"),U(t,"aria-label",Y=e[0].regionLabel),U(t,"style",e[22])},m(V,J){Et(V,t,J),Ve(t,n),Ve(t,r),Ve(r,o),Ve(o,i),mu(i,e[2]),Ve(o,l),Ve(l,f),Ve(o,g),Ve(g,_),Ve(r,A),Ve(A,w),Ve(w,T),Ve(r,K),Ve(K,D),Ve(r,j);for(let B=0;B<M.length;B+=1)M[B].m(j,null);e[48](j),Ve(t,R);for(let B=0;B<p.length;B+=1)p[B].m(R,null);Ve(t,b),Ve(b,u),Ve(t,v),Ve(v,S),Ve(t,F),Ve(F,re);for(let B=0;B<ue.length;B+=1)ue[B].m(re,null);e[50](F),Ve(t,xe);for(let B=0;B<Ke.length;B+=1)Ke[B].m(xe,null);Ve(t,G),e[51](G),e[52](t),te||(ae=[Ot(i,"input",e[47]),Ot(i,"keydown",e[30]),Ot(w,"click",e[35]),Ot(j,"focusout",e[38]),Ot(j,"click",e[34]),Ot(j,"keydown",e[36]),Ot(j,"keyup",e[37]),Ot(R,"keydown",e[32]),Bv(e[29].call(null,re)),Ot(F,"click",e[33]),Ot(xe,"click",e[33])],te=!0)},p(V,J){J[0]&1&&a!==(a=V[0].searchLabel)&&U(i,"placeholder",a),J[0]&18&&s!==(s=!!(V[4]&&V[1].length))&&U(i,"aria-expanded",s),J[0]&67108864&&c!==(c=V[26]?`emo-${V[26]}`:"")&&U(i,"aria-activedescendant",c),J[0]&4&&mu(i,V[2]),J[0]&1&&d!==(d=V[0].searchLabel+"")&&Dt(f,d),J[0]&1&&y!==(y=V[0].searchDescription+"")&&Dt(_,y),J[0]&2097152&&Dt(T,V[21]),J[0]&64&&O!==(O="emoji "+(V[6]?"hide-focus":""))&&U(w,"class",O),J[0]&8388608&&U(w,"aria-label",V[23]),J[0]&8388608&&U(w,"title",V[23]),J[0]&64&&U(w,"aria-expanded",V[6]),J[0]&524288&&I!==(I="skintone-button-wrapper "+(V[19]?"expanded":""))&&U(A,"class",I),J[0]&1&&Q!==(Q=V[0].skinToneDescription+"")&&Dt(D,Q),J[0]&1049089&&(ee=V[9],M=Ur(M,J,se,1,V,ee,N,j,Fr,Pu,null,Mu)),J[0]&64&&H!==(H="skintone-list "+(V[6]?"":"hidden no-animate"))&&U(j,"class",H),J[0]&64&&on(j,"transform","translateY("+(V[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),J[0]&1&&P!==(P=V[0].skinTonesLabel)&&U(j,"aria-label",P),J[0]&1048576&&h!==(h="skintone-"+V[20])&&U(j,"aria-activedescendant",h),J[0]&64&&k!==(k=!V[6])&&U(j,"aria-hidden",k),J[0]&12305|J[1]&1&&(Z=V[12],p=Ur(p,J,he,1,V,Z,m,R,Fr,Iu,null,Ru)),J[0]&4096&&on(R,"grid-template-columns","repeat("+V[12].length+", 1fr)"),J[0]&1&&E!==(E=V[0].categoriesLabel)&&U(R,"aria-label",E),J[0]&16779264&&on(u,"transform","translateX("+(V[24]?-1:1)*V[11]*100+"%)"),J[0]&262144&&Dt(S,V[18]),J[0]&262144&&W!==(W="message "+(V[18]?"":"gone"))&&U(v,"class",W),J[0]&402694449&&(de=V[15],ue=Ur(ue,J,me,1,V,de,le,re,Fr,ju,null,Su)),J[0]&278528&&ge!==(ge="tabpanel "+(!V[14]||V[18]?"gone":""))&&U(F,"class",ge),J[0]&16&&Ce!==(Ce=V[4]?"region":"tabpanel")&&U(F,"role",Ce),J[0]&8209&&Se!==(Se=V[4]?V[0].searchResultsLabel:V[0].categories[V[13].name])&&U(F,"aria-label",Se),J[0]&8208&&Ne!==(Ne=V[4]?"":`tab-${V[13].id}`)&&U(F,"id",Ne),J[0]&402654464&&(ye=V[10],Ke=Ur(Ke,J,Te,1,V,ye,x,xe,Fr,Nu,null,Ou)),J[0]&262144&&C!==(C="favorites emoji-menu "+(V[18]?"gone":""))&&U(xe,"class",C),J[0]&1&&q!==(q=V[0].favoritesLabel)&&U(xe,"aria-label",q),J[0]&33554432&&on(xe,"padding-inline-end",V[25]+"px"),J[0]&1&&Y!==(Y=V[0].regionLabel)&&U(t,"aria-label",Y),J[0]&4194304&&U(t,"style",V[22])},i:jr,o:jr,d(V){V&&Ct(t);for(let J=0;J<M.length;J+=1)M[J].d();e[48](null);for(let J=0;J<p.length;J+=1)p[J].d();for(let J=0;J<ue.length;J+=1)ue[J].d();e[50](null);for(let J=0;J<Ke.length;J+=1)Ke[J].d();e[51](null),e[52](null),te=!1,Nr(ae)}}}function xy(e,t,n){let{skinToneEmoji:r}=t,{i18n:o}=t,{database:i}=t,{customEmoji:a}=t,{customCategorySorting:s}=t,c=!0,l=[],d=[],f="",g="",y,_,A,w=!1,T=-1,O,I=!1,K=!1,Q,D=0,j=0,M,N,H="",P=[],h=[],k,R=ey,p=!1,m=0,E=0,b=Zo,u,v=!1,S;const W=B=>{y.getRootNode().getElementById(B).focus()},F=(B,ce)=>{y.dispatchEvent(new CustomEvent(B,{detail:ce,bubbles:!0,composed:!0}))},re=(B,ce)=>ce&&B.skins&&B.skins[ce]||B.unicode,ue=(B,ce)=>py([B.name||re(B,ce),...B.shortcodes||[]]).join(", "),le=B=>/^skintone-/.test(B.id);Hs.then(B=>{B||n(18,O=o.emojiUnsupportedMessage)});function ge(B){return my(B,ce=>{{const ke=getComputedStyle(y),Ge=parseInt(ke.getPropertyValue("--num-columns"),10),et=ke.getPropertyValue("direction")==="rtl",ct=B.parentElement.getBoundingClientRect().width-ce;n(46,R=Ge),n(25,m=ct),n(24,p=et)}})}function Ce(B){const ce=y.getRootNode();gy(B,_,Ge=>ce.getElementById(`emo-${Ge.id}`)),n(1,l=l)}function Se(B){return!B.unicode||!xu(B)||qs.get(B.unicode)}async function Ne(B){const ce=await Hs;return B.filter(({version:ke})=>!ke||ke<=ce)}async function xe(B){return fy(B,await Hs)}async function Ke(B){if(typeof B=="undefined")return[];const ce=B===-1?a:await i.getEmojiByGroup(B);return xe(await Ne(ce))}async function x(B){return xe(await Ne(await i.getEmojiBySearchQuery(B)))}function C(B){if(!w||!l.length)return;const ce=ke=>{sn(B),n(5,T=zs(ke,T,l))};switch(B.key){case"ArrowDown":return ce(!1);case"ArrowUp":return ce(!0);case"Enter":if(T!==-1)return sn(B),Y(l[T].id);l.length&&n(5,T=0)}}function q(B){n(2,f=""),n(44,g=""),n(5,T=-1),n(11,E=b.findIndex(ce=>ce.id===B.id))}function G(B){const{target:ce,key:ke}=B,Ge=et=>{et&&(sn(B),et.focus())};switch(ke){case"ArrowLeft":return Ge(ce.previousSibling);case"ArrowRight":return Ge(ce.nextSibling);case"Home":return Ge(ce.parentElement.firstChild);case"End":return Ge(ce.parentElement.lastChild)}}async function Y(B){const ce=await i.getEmojiByUnicodeOrName(B),ke=[...l,...h].find(et=>et.id===B),Ge=ke.unicode&&re(ke,D);await i.incrementFavoriteEmojiCount(B),F("emoji-click",{emoji:ce,skinTone:D,...Ge&&{unicode:Ge},...ke.name&&{name:ke.name}})}async function te(B){const{target:ce}=B;if(!ce.classList.contains("emoji"))return;sn(B);const ke=ce.id.substring(4);Y(ke)}async function ae(B){const{target:ce}=B;if(!le(ce))return;sn(B);const ke=parseInt(ce.id.slice(9),10);n(8,D=ke),n(6,I=!1),W("skintone-button"),F("skin-tone-change",{skinTone:ke}),i.setPreferredSkinTone(ke)}async function ee(B){n(6,I=!I),n(20,j=D),I&&(sn(B),Jo(()=>W(`skintone-${j}`)))}function se(B){if(!I)return;const ce=async ke=>{sn(B),n(20,j=ke),await Fv(),W(`skintone-${j}`)};switch(B.key){case"ArrowUp":return ce(zs(!0,j,P));case"ArrowDown":return ce(zs(!1,j,P));case"Home":return ce(0);case"End":return ce(P.length-1);case"Enter":return ae(B);case"Escape":return sn(B),n(6,I=!1),W("skintone-button")}}function Z(B){if(!!I)switch(B.key){case" ":return ae(B)}}async function he(B){const{relatedTarget:ce}=B;(!ce||!le(ce))&&n(6,I=!1)}function de(){f=this.value,n(2,f)}function me(B){Yn[B?"unshift":"push"](()=>{Q=B,n(7,Q)})}const ye=B=>q(B);function Te(B){Yn[B?"unshift":"push"](()=>{A=B,n(3,A)})}function V(B){Yn[B?"unshift":"push"](()=>{_=B,n(17,_)})}function J(B){Yn[B?"unshift":"push"](()=>{y=B,n(16,y)})}return e.$$set=B=>{"skinToneEmoji"in B&&n(40,r=B.skinToneEmoji),"i18n"in B&&n(0,o=B.i18n),"database"in B&&n(39,i=B.database),"customEmoji"in B&&n(41,a=B.customEmoji),"customCategorySorting"in B&&n(42,s=B.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&a&&i&&n(39,i.customEmoji=a,i),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function B(){let ce=!1;const ke=setTimeout(()=>{ce=!0,n(18,O=o.loadingMessage)},Jv);try{await i.ready(),n(14,v=!0)}catch(Ge){console.error(Ge),n(18,O=o.networkErrorMessage)}finally{clearTimeout(ke),ce&&(ce=!1,n(18,O=""))}}i&&B()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(a&&a.length?n(12,b=[Qv,...Zo]):b!==Zo&&(E&&n(11,E--,E),n(12,b=Zo))),e.$$.dirty[0]&4&&ku(()=>{n(44,g=(f||"").trim()),n(5,T=-1)}),e.$$.dirty[0]&6144&&n(13,u=b[E]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function B(){if(!v)n(1,l=[]),n(4,w=!1);else if(g.length>=Xv){const ce=g,ke=await x(ce);ce===g&&(n(1,l=ke),n(4,w=!0))}else if(u){const ce=u.id,ke=await Ke(ce);ce===u.id&&(n(1,l=ke),n(4,w=!1))}}B()}if(e.$$.dirty[0]&4112&&n(22,N=`
  --font-family: ${_u};
  --num-groups: ${b.length}; 
  --indicator-opacity: ${w?0:1}; 
  --num-skintones: ${wu};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function B(){v&&n(8,D=await i.getPreferredSkinTone())}B()}if(e.$$.dirty[1]&512&&n(9,P=Array(wu).fill().map((B,ce)=>dy(r,ce))),e.$$.dirty[0]&768&&n(21,M=P[D]),e.$$.dirty[0]&257&&n(23,H=o.skinToneLabel.replace("{skinTone}",o.skinTones[D])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function B(){n(45,k=(await Promise.all(ty.map(ce=>i.getEmojiByUnicodeOrName(ce)))).filter(Boolean))}v&&B()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function B(){const ce=await i.getTopFavoriteEmoji(R),ke=await xe(Eu([...ce,...k],Ge=>Ge.unicode||Ge.name).slice(0,R));n(10,h=ke)}v&&k&&B()}if(e.$$.dirty[0]&10){const B=l.filter(ce=>ce.unicode).filter(ce=>xu(ce)&&!qs.has(ce.unicode));B.length?Jo(()=>Ce(B)):(n(1,l=l.filter(Se)),Jo(()=>{(A||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&n(15,d=function(){if(w)return[{category:"",emojis:l}];const ce=new Map;for(const ke of l){const Ge=ke.category||"";let et=ce.get(Ge);et||(et=[],ce.set(Ge,et)),et.push(ke)}return[...ce.entries()].map(([ke,Ge])=>({category:ke,emojis:Ge})).sort((ke,Ge)=>s(ke.category,Ge.category))}()),e.$$.dirty[0]&34&&n(26,S=T!==-1&&l[T].id),e.$$.dirty[0]&192&&(I?Q.addEventListener("transitionend",()=>{n(19,K=!0)},{once:!0}):n(19,K=!1))},[o,l,f,A,w,T,I,Q,D,P,h,E,b,u,v,d,y,_,O,K,j,M,N,H,p,m,S,re,ue,ge,C,q,G,te,ae,ee,se,Z,he,i,r,a,s,c,g,k,R,de,me,ye,Te,V,J]}class _y extends Yv{constructor(t){super(),Gv(this,t,xy,ky,Nv,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const Ay="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Ey="en";var Cy={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const Du=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class Bu extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const n=document.createElement("style");n.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(n),this._ctx={locale:Ey,dataSource:Ay,skinToneEmoji:$v,customCategorySorting:ny,customEmoji:null,i18n:Cy,...t};for(const r of Du)r!=="database"&&Object.prototype.hasOwnProperty.call(this,r)&&(this._ctx[r]=this[r],delete this[r]);this._dbFlush()}connectedCallback(){this._cmp=new _y({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(n=>console.error(n))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,n,r){this._set(t.replace(/-([a-z])/g,(o,i)=>i.toUpperCase()),r)}_set(t,n){this._ctx[t]=n,this._cmp&&this._cmp.$set({[t]:n}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:n,database:r}=this._ctx;(!r||r.locale!==t||r.dataSource!==n)&&this._set("database",new uu({locale:t,dataSource:n}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const Fu={};for(const e of Du)Fu[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(Bu.prototype,Fu),customElements.get("emoji-picker")||customElements.define("emoji-picker",Bu);const Oy={name:"EmojiPickerContainer",components:{SvgIcon:rt},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,n=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,r=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,o=document.createElement("style");o.textContent=e+t+n+r,this.$refs.emojiPicker.shadowRoot.appendChild(o)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,n){const r=t<500||n<700,o=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer");if(!o){r&&(this.emojiPickerRight="-50px");return}r?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=n-200):(o.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},Sy={class:"vac-emoji-wrapper"},Ty={ref:"emojiPicker","v-if":"emojiOpened"};function Ry(e,t,n,r,o,i){const a=pe("svg-icon");return L(),z("div",Sy,[X("div",{class:Ae(["vac-svg-button",{"vac-emoji-reaction":n.emojiReaction}]),onClick:t[0]||(t[0]=(...s)=>i.openEmoji&&i.openEmoji(...s))},[oe(e.$slots,n.messageId?"emoji-picker-reaction-icon_"+n.messageId:"emoji-picker-icon",{},()=>[ie(a,{name:"emoji",param:n.emojiReaction?"reaction":""},null,8,["param"])])],2),n.emojiOpened?(L(),je(Qe,{key:0,name:"vac-slide-up",appear:""},{default:ve(()=>[X("div",{class:Ae(["vac-emoji-picker",{"vac-picker-reaction":n.emojiReaction}]),style:Le({height:`${o.emojiPickerHeight}px`,top:n.positionTop?o.emojiPickerHeight:`${o.emojiPickerTop}px`,right:o.emojiPickerRight,display:o.emojiPickerTop||!n.emojiReaction?"initial":"none"})},[X("emoji-picker",Ty,null,512)],6)]),_:1})):ne("",!0)])}var Uu=ze(Oy,[["render",Ry]]);const My={name:"RoomFiles",components:{Loader:wo,SvgIcon:rt},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return Wn(this.file)},isVideo(){return Tr(this.file)}}},Py={class:"vac-room-file-container"},Iy=["src"],Ly={class:"vac-text-ellipsis"},jy={key:0,class:"vac-text-ellipsis vac-text-extension"};function Ny(e,t,n,r,o,i){const a=pe("loader"),s=pe("svg-icon");return L(),z("div",Py,[ie(a,{show:n.file.loading,type:"room-file"},Fe({_:2},[_e(e.$slots,(c,l)=>({name:l,fn:ve(d=>[oe(e.$slots,l,Be(De(d)))])}))]),1032,["show"]),X("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=c=>e.$emit("remove-file",n.index))},[oe(e.$slots,"image-close-icon",{},()=>[ie(s,{name:"close",param:"image"})])]),i.isImage?(L(),z("div",{key:0,class:Ae(["vac-message-image",{"vac-blur-loading":n.file.loading}]),style:Le({"background-image":`url('${n.file.localUrl||n.file.url}')`})},null,6)):i.isVideo?(L(),z("video",{key:1,controls:"",class:Ae({"vac-blur-loading":n.file.loading})},[X("source",{src:n.file.localUrl||n.file.url},null,8,Iy)],2)):(L(),z("div",{key:2,class:Ae(["vac-file-container",{"vac-blur-loading":n.file.loading}])},[X("div",null,[oe(e.$slots,"file-icon",{},()=>[ie(s,{name:"file"})])]),X("div",Ly,we(n.file.name),1),n.file.extension?(L(),z("div",jy,we(n.file.extension),1)):ne("",!0)],2))])}var Dy=ze(My,[["render",Ny]]);const By={name:"RoomFiles",components:{SvgIcon:rt,RoomFile:Dy},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}}},Fy={class:"vac-files-box"},Uy={class:"vac-icon-close"};function Hy(e,t,n,r,o,i){const a=pe("room-file"),s=pe("svg-icon");return L(),je(Qe,{name:"vac-slide-up"},{default:ve(()=>[n.files.length?(L(),z("div",{key:0,class:"vac-room-files-container",style:Le({bottom:`${i.footerHeight}px`})},[X("div",Fy,[(L(!0),z(Pe,null,_e(n.files,(c,l)=>(L(),z("div",{key:l},[ie(a,{file:c,index:l,onRemoveFile:t[0]||(t[0]=d=>e.$emit("remove-file",d))},Fe({_:2},[_e(e.$slots,(d,f)=>({name:f,fn:ve(g=>[oe(e.$slots,f,Be(De(g)))])}))]),1032,["file","index"])]))),128))]),X("div",Uy,[X("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=c=>e.$emit("reset-message"))},[oe(e.$slots,"files-close-icon",{},()=>[ie(s,{name:"close-outline"})])])])],4)):ne("",!0)]),_:3})}var qy=ze(By,[["render",Hy]]);const zy={width:24,height:24,body:'<path fill="currentColor" d="M9.525 18.025q-.5.325-1.013.037Q8 17.775 8 17.175V6.825q0-.6.512-.888q.513-.287 1.013.038l8.15 5.175q.45.3.45.85t-.45.85Z"/>'},Wy={width:24,height:24,body:'<path fill="currentColor" d="M15 19q-.825 0-1.412-.587Q13 17.825 13 17V7q0-.825.588-1.412Q14.175 5 15 5h2q.825 0 1.413.588Q19 6.175 19 7v10q0 .825-.587 1.413Q17.825 19 17 19Zm-8 0q-.825 0-1.412-.587Q5 17.825 5 17V7q0-.825.588-1.412Q6.175 5 7 5h2q.825 0 1.413.588Q11 6.175 11 7v10q0 .825-.587 1.413Q9.825 19 9 19Z"/>'};var Hu={exports:{}};/*!
 * wavesurfer.js 6.4.0 (2022-11-05)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */(function(e,t){(function(r,o){e.exports=o()})(self,()=>(()=>{var n={"./src/drawer.canvasentry.js":(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var l=f(c("./src/util/style.js")),d=f(c("./src/util/get-id.js"));function f(w){return w&&w.__esModule?w:{default:w}}function g(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function y(w,T){for(var O=0;O<T.length;O++){var I=T[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(w,I.key,I)}}function _(w,T,O){return T&&y(w.prototype,T),O&&y(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}var A=function(){function w(){g(this,w),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,d.default)(typeof this.constructor.name!="undefined"?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}return _(w,[{key:"initWave",value:function(O){this.wave=O,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(O){this.progress=O,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(O,I,K,Q){this.start=this.wave.offsetLeft/I||0,this.end=this.start+O/I,this.wave.width=K,this.wave.height=Q;var D={width:O+"px"};(0,l.default)(this.wave,D),this.hasProgressCanvas&&(this.progress.width=K,this.progress.height=Q,(0,l.default)(this.progress,D))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(O,I){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,O),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,I))}},{key:"getFillStyle",value:function(O,I){if(typeof I=="string"||I instanceof CanvasGradient)return I;var K=O.createLinearGradient(0,0,0,O.canvas.height);return I.forEach(function(Q,D){return K.addColorStop(D/I.length,Q)}),K}},{key:"applyCanvasTransforms",value:function(O){O&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(O,I,K,Q,D){this.fillRectToContext(this.waveCtx,O,I,K,Q,D),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,O,I,K,Q,D)}},{key:"fillRectToContext",value:function(O,I,K,Q,D,j){!O||(j?this.drawRoundedRect(O,I,K,Q,D,j):O.fillRect(I,K,Q,D))}},{key:"drawRoundedRect",value:function(O,I,K,Q,D,j){D!==0&&(D<0&&(D*=-1,K-=D),O.beginPath(),O.moveTo(I+j,K),O.lineTo(I+Q-j,K),O.quadraticCurveTo(I+Q,K,I+Q,K+j),O.lineTo(I+Q,K+D-j),O.quadraticCurveTo(I+Q,K+D,I+Q-j,K+D),O.lineTo(I+j,K+D),O.quadraticCurveTo(I,K+D,I,K+D-j),O.lineTo(I,K+j),O.quadraticCurveTo(I,K,I+j,K),O.closePath(),O.fill())}},{key:"drawLines",value:function(O,I,K,Q,D,j){this.drawLineToContext(this.waveCtx,O,I,K,Q,D,j),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,O,I,K,Q,D,j)}},{key:"drawLineToContext",value:function(O,I,K,Q,D,j,M){if(!!O){var N=I.length/2,H=Math.round(N*this.start),P=Math.round(N*this.end)+1,h=H,k=P,R=this.wave.width/(k-h-1),p=Q+D,m=K/Q;O.beginPath(),O.moveTo((h-H)*R,p),O.lineTo((h-H)*R,p-Math.round((I[2*h]||0)/m));var E,b,u;for(E=h;E<k;E++)b=I[2*E]||0,u=Math.round(b/m),O.lineTo((E-H)*R+this.halfPixel,p-u);var v=k-1;for(v;v>=h;v--)b=I[2*v+1]||0,u=Math.round(b/m),O.lineTo((v-H)*R+this.halfPixel,p-u);O.lineTo((h-H)*R,p-Math.round((I[2*h+1]||0)/m)),O.closePath(),O.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(O,I,K){var Q=this;if(K==="blob")return new Promise(function(D){Q.wave.toBlob(D,O,I)});if(K==="dataURL")return this.wave.toDataURL(O,I)}}]),w}();s.default=A,a.exports=s.default},"./src/drawer.js":(a,s,c)=>{function l(M){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},l(M)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=g(c("./src/util/index.js"));function f(M){if(typeof WeakMap!="function")return null;var N=new WeakMap,H=new WeakMap;return(f=function(h){return h?H:N})(M)}function g(M,N){if(!N&&M&&M.__esModule)return M;if(M===null||l(M)!=="object"&&typeof M!="function")return{default:M};var H=f(N);if(H&&H.has(M))return H.get(M);var P={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in M)if(k!=="default"&&Object.prototype.hasOwnProperty.call(M,k)){var R=h?Object.getOwnPropertyDescriptor(M,k):null;R&&(R.get||R.set)?Object.defineProperty(P,k,R):P[k]=M[k]}return P.default=M,H&&H.set(M,P),P}function y(M,N){if(!(M instanceof N))throw new TypeError("Cannot call a class as a function")}function _(M,N){for(var H=0;H<N.length;H++){var P=N[H];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(M,P.key,P)}}function A(M,N,H){return N&&_(M.prototype,N),H&&_(M,H),Object.defineProperty(M,"prototype",{writable:!1}),M}function w(M,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(N&&N.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),N&&T(M,N)}function T(M,N){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(P,h){return P.__proto__=h,P},T(M,N)}function O(M){var N=Q();return function(){var P=D(M),h;if(N){var k=D(this).constructor;h=Reflect.construct(P,arguments,k)}else h=P.apply(this,arguments);return I(this,h)}}function I(M,N){if(N&&(l(N)==="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(M)}function K(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(M){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},D(M)}var j=function(M){w(H,M);var N=O(H);function H(P,h){var k;return y(this,H),k=N.call(this),k.container=d.withOrientation(P,h.vertical),k.params=h,k.width=0,k.height=h.height*k.params.pixelRatio,k.lastPos=0,k.wrapper=null,k}return A(H,[{key:"style",value:function(h,k){return d.style(h,k)}},{key:"createWrapper",value:function(){this.wrapper=d.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(h,k){!k&&h.preventDefault();var R=d.withOrientation(h.targetTouches?h.targetTouches[0]:h,this.params.vertical).clientX,p=this.wrapper.getBoundingClientRect(),m=this.width,E=this.getWidth(),b=this.getProgressPixels(p,R),u;return!this.params.fillParent&&m<E?u=b*(this.params.pixelRatio/m)||0:u=(b+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,d.clamp(u,0,1)}},{key:"getProgressPixels",value:function(h,k){return this.params.rtl?h.right-k:k-h.left}},{key:"setupWrapperEvents",value:function(){var h=this;this.wrapper.addEventListener("click",function(k){var R=d.withOrientation(k,h.params.vertical),p=h.wrapper.offsetHeight-h.wrapper.clientHeight;if(p!==0){var m=h.wrapper.getBoundingClientRect();if(R.clientY>=m.bottom-p)return}h.params.interact&&h.fireEvent("click",k,h.handleEvent(k))}),this.wrapper.addEventListener("dblclick",function(k){h.params.interact&&h.fireEvent("dblclick",k,h.handleEvent(k))}),this.wrapper.addEventListener("scroll",function(k){return h.fireEvent("scroll",k)})}},{key:"drawPeaks",value:function(h,k,R,p){this.setWidth(k)||this.clearWave(),this.params.barWidth?this.drawBars(h,0,R,p):this.drawWave(h,0,R,p)}},{key:"resetScroll",value:function(){this.wrapper!==null&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(h){var k=this.wrapper.scrollWidth*h;this.recenterOnPosition(k,!0)}},{key:"recenterOnPosition",value:function(h,k){var R=this.wrapper.scrollLeft,p=~~(this.wrapper.clientWidth/2),m=this.wrapper.scrollWidth-this.wrapper.clientWidth,E=h-p,b=E-R;if(m!=0){if(!k&&-p<=b&&b<p){var u=this.params.autoCenterRate;u/=p,u*=m,b=Math.max(-u,Math.min(u,b)),E=R+b}E=Math.max(0,Math.min(m,E)),E!=R&&(this.wrapper.scrollLeft=E)}}},{key:"getScrollX",value:function(){var h=0;if(this.wrapper){var k=this.params.pixelRatio;if(h=Math.round(this.wrapper.scrollLeft*k),this.params.scrollParent){var R=~~(this.wrapper.scrollWidth*k-this.getWidth());h=Math.min(R,Math.max(0,h))}}return h}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(h){if(this.width==h)return!1;if(this.width=h,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var k=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:k})}return this.updateSize(),!0}},{key:"setHeight",value:function(h){return h==this.height?!1:(this.height=h,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(h){var k=1/this.params.pixelRatio,R=Math.round(h*this.width)*k;if(R<this.lastPos||R-this.lastPos>=k){if(this.lastPos=R,this.params.scrollParent&&this.params.autoCenter){var p=~~(this.wrapper.scrollWidth*h);this.recenterOnPosition(p,this.params.autoCenterImmediately)}this.updateProgress(R)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(h,k,R,p){}},{key:"drawWave",value:function(h,k,R,p){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(h){}}]),H}(d.Observer);s.default=j,a.exports=s.default},"./src/drawer.multicanvas.js":(a,s,c)=>{function l(P){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(P)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=A(c("./src/drawer.js")),f=_(c("./src/util/index.js")),g=A(c("./src/drawer.canvasentry.js"));function y(P){if(typeof WeakMap!="function")return null;var h=new WeakMap,k=new WeakMap;return(y=function(p){return p?k:h})(P)}function _(P,h){if(!h&&P&&P.__esModule)return P;if(P===null||l(P)!=="object"&&typeof P!="function")return{default:P};var k=y(h);if(k&&k.has(P))return k.get(P);var R={},p=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var m in P)if(m!=="default"&&Object.prototype.hasOwnProperty.call(P,m)){var E=p?Object.getOwnPropertyDescriptor(P,m):null;E&&(E.get||E.set)?Object.defineProperty(R,m,E):R[m]=P[m]}return R.default=P,k&&k.set(P,R),R}function A(P){return P&&P.__esModule?P:{default:P}}function w(P,h){if(!(P instanceof h))throw new TypeError("Cannot call a class as a function")}function T(P,h){for(var k=0;k<h.length;k++){var R=h[k];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(P,R.key,R)}}function O(P,h,k){return h&&T(P.prototype,h),k&&T(P,k),Object.defineProperty(P,"prototype",{writable:!1}),P}function I(P,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(h&&h.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),Object.defineProperty(P,"prototype",{writable:!1}),h&&K(P,h)}function K(P,h){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(R,p){return R.__proto__=p,R},K(P,h)}function Q(P){var h=M();return function(){var R=N(P),p;if(h){var m=N(this).constructor;p=Reflect.construct(R,arguments,m)}else p=R.apply(this,arguments);return D(this,p)}}function D(P,h){if(h&&(l(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(P)}function j(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(P){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},N(P)}var H=function(P){I(k,P);var h=Q(k);function k(R,p){var m;return w(this,k),m=h.call(this,R,p),m.maxCanvasWidth=p.maxCanvasWidth,m.maxCanvasElementWidth=Math.round(p.maxCanvasWidth/p.pixelRatio),m.hasProgressCanvas=p.waveColor!=p.progressColor,m.halfPixel=.5/p.pixelRatio,m.canvases=[],m.progressWave=null,m.EntryClass=g.default,m.canvasContextAttributes=p.drawingContextAttributes,m.overlap=2*Math.ceil(p.pixelRatio/2),m.barRadius=p.barRadius||0,m.vertical=p.vertical,m}return O(k,[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=f.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var p=this,m=Math.round(this.width/this.params.pixelRatio),E=Math.ceil(m/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<E;)this.addCanvas();for(;this.canvases.length>E;)this.removeCanvas();var b=this.maxCanvasWidth+this.overlap,u=this.canvases.length-1;this.canvases.forEach(function(v,S){S==u&&(b=p.width-p.maxCanvasWidth*u),p.updateDimensions(v,b,p.height),v.clearWave()})}},{key:"addCanvas",value:function(){var p=new this.EntryClass;p.canvasContextAttributes=this.canvasContextAttributes,p.hasProgressCanvas=this.hasProgressCanvas,p.halfPixel=this.halfPixel;var m=this.maxCanvasElementWidth*this.canvases.length,E=f.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(E,{position:"absolute",zIndex:2,left:m+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),p.initWave(E),this.hasProgressCanvas){var b=f.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(b,{position:"absolute",left:m+"px",top:0,bottom:0,height:"100%"}),p.initProgress(b)}this.canvases.push(p)}},{key:"removeCanvas",value:function(){var p=this.canvases[this.canvases.length-1];p.wave.parentElement.removeChild(p.wave.domElement),this.hasProgressCanvas&&p.progress.parentElement.removeChild(p.progress.domElement),p&&(p.destroy(),p=null),this.canvases.pop()}},{key:"updateDimensions",value:function(p,m,E){var b=Math.round(m/this.params.pixelRatio),u=Math.round(this.width/this.params.pixelRatio);p.updateDimensions(b,u,m,E),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var p=this;f.frame(function(){p.canvases.forEach(function(m){return m.clearWave()})})()}},{key:"drawBars",value:function(p,m,E,b){var u=this;return this.prepareDraw(p,m,E,b,function(v){var S=v.absmax,W=v.hasMinVals;v.height;var F=v.offsetY,re=v.halfH,ue=v.peaks,le=v.channelIndex;if(E!==void 0){var ge=W?2:1,Ce=ue.length/ge,Se=u.params.barWidth*u.params.pixelRatio,Ne=u.params.barGap===null?Math.max(u.params.pixelRatio,~~(Se/2)):Math.max(u.params.pixelRatio,u.params.barGap*u.params.pixelRatio),xe=Se+Ne,Ke=Ce/u.width,x=E,C=b,q=x;for(q;q<C;q+=xe){var G=0,Y=Math.floor(q*Ke)*ge,te=Math.floor((q+xe)*Ke)*ge;do{var ae=Math.abs(ue[Y]);ae>G&&(G=ae),Y+=ge}while(Y<te);var ee=Math.round(G/S*re);u.params.barMinHeight&&(ee=Math.max(ee,u.params.barMinHeight)),u.fillRect(q+u.halfPixel,re-ee+F,Se+u.halfPixel,ee*2,u.barRadius,le)}}})}},{key:"drawWave",value:function(p,m,E,b){var u=this;return this.prepareDraw(p,m,E,b,function(v){var S=v.absmax,W=v.hasMinVals;v.height;var F=v.offsetY,re=v.halfH,ue=v.peaks,le=v.channelIndex;if(!W){var ge=[],Ce=ue.length,Se=0;for(Se;Se<Ce;Se++)ge[2*Se]=ue[Se],ge[2*Se+1]=-ue[Se];ue=ge}E!==void 0&&u.drawLine(ue,S,re,F,E,b,le),u.fillRect(0,re+F-u.halfPixel,u.width,u.halfPixel,u.barRadius,le)})}},{key:"drawLine",value:function(p,m,E,b,u,v,S){var W=this,F=this.params.splitChannelsOptions.channelColors[S]||{},re=F.waveColor,ue=F.progressColor;this.canvases.forEach(function(le,ge){W.setFillStyles(le,re,ue),W.applyCanvasTransforms(le,W.params.vertical),le.drawLines(p,m,E,b,u,v)})}},{key:"fillRect",value:function(p,m,E,b,u,v){var S=Math.floor(p/this.maxCanvasWidth),W=Math.min(Math.ceil((p+E)/this.maxCanvasWidth)+1,this.canvases.length),F=S;for(F;F<W;F++){var re=this.canvases[F],ue=F*this.maxCanvasWidth,le={x1:Math.max(p,F*this.maxCanvasWidth),y1:m,x2:Math.min(p+E,F*this.maxCanvasWidth+re.wave.width),y2:m+b};if(le.x1<le.x2){var ge=this.params.splitChannelsOptions.channelColors[v]||{},Ce=ge.waveColor,Se=ge.progressColor;this.setFillStyles(re,Ce,Se),this.applyCanvasTransforms(re,this.params.vertical),re.fillRects(le.x1-ue,le.y1,le.x2-le.x1,le.y2-le.y1,u)}}}},{key:"hideChannel",value:function(p){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(p)}},{key:"prepareDraw",value:function(p,m,E,b,u,v,S){var W=this;return f.frame(function(){if(p[0]instanceof Array){var F=p;if(W.params.splitChannels){var re=F.filter(function(xe,Ke){return!W.hideChannel(Ke)});W.params.splitChannelsOptions.overlay||W.setHeight(Math.max(re.length,1)*W.params.height*W.params.pixelRatio);var ue;return W.params.splitChannelsOptions&&W.params.splitChannelsOptions.relativeNormalization&&(ue=f.max(F.map(function(xe){return f.absMax(xe)}))),F.forEach(function(xe,Ke){return W.prepareDraw(xe,Ke,E,b,u,re.indexOf(xe),ue)})}p=F[0]}if(!W.hideChannel(m)){var le=1/W.params.barHeight;W.params.normalize&&(le=S===void 0?f.absMax(p):S);var ge=[].some.call(p,function(xe){return xe<0}),Ce=W.params.height*W.params.pixelRatio,Se=Ce/2,Ne=Ce*v||0;return W.params.splitChannelsOptions&&W.params.splitChannelsOptions.overlay&&(Ne=0),u({absmax:le,hasMinVals:ge,height:Ce,offsetY:Ne,halfH:Se,peaks:p,channelIndex:m})}})()}},{key:"setFillStyles",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.params.waveColor,E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.params.progressColor;p.setFillStyles(m,E)}},{key:"applyCanvasTransforms",value:function(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;p.applyCanvasTransforms(m)}},{key:"getImage",value:function(p,m,E){if(E==="blob")return Promise.all(this.canvases.map(function(u){return u.getImage(p,m,E)}));if(E==="dataURL"){var b=this.canvases.map(function(u){return u.getImage(p,m,E)});return b.length>1?b:b[0]}}},{key:"updateProgress",value:function(p){this.style(this.progressWave,{width:p+"px"})}}]),k}(d.default);s.default=H,a.exports=s.default},"./src/mediaelement-webaudio.js":(a,s,c)=>{function l(N){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},l(N)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=f(c("./src/mediaelement.js"));function f(N){return N&&N.__esModule?N:{default:N}}function g(N,H){if(!(N instanceof H))throw new TypeError("Cannot call a class as a function")}function y(N,H){for(var P=0;P<H.length;P++){var h=H[P];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(N,h.key,h)}}function _(N,H,P){return H&&y(N.prototype,H),P&&y(N,P),Object.defineProperty(N,"prototype",{writable:!1}),N}function A(){return typeof Reflect!="undefined"&&Reflect.get?A=Reflect.get.bind():A=function(H,P,h){var k=w(H,P);if(!!k){var R=Object.getOwnPropertyDescriptor(k,P);return R.get?R.get.call(arguments.length<3?H:h):R.value}},A.apply(this,arguments)}function w(N,H){for(;!Object.prototype.hasOwnProperty.call(N,H)&&(N=j(N),N!==null););return N}function T(N,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");N.prototype=Object.create(H&&H.prototype,{constructor:{value:N,writable:!0,configurable:!0}}),Object.defineProperty(N,"prototype",{writable:!1}),H&&O(N,H)}function O(N,H){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,k){return h.__proto__=k,h},O(N,H)}function I(N){var H=D();return function(){var h=j(N),k;if(H){var R=j(this).constructor;k=Reflect.construct(h,arguments,R)}else k=h.apply(this,arguments);return K(this,k)}}function K(N,H){if(H&&(l(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Q(N)}function Q(N){if(N===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function D(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function j(N){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(P){return P.__proto__||Object.getPrototypeOf(P)},j(N)}var M=function(N){T(P,N);var H=I(P);function P(h){var k;return g(this,P),k=H.call(this,h),k.params=h,k.sourceMediaElement=null,k}return _(P,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(k,R,p){A(j(P.prototype),"_load",this).call(this,k,R,p),this.createMediaElementSource(k)}},{key:"createMediaElementSource",value:function(k){this.sourceMediaElement=this.ac.createMediaElementSource(k),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(k,R){return this.resumeAudioContext(),A(j(P.prototype),"play",this).call(this,k,R)}},{key:"destroy",value:function(){A(j(P.prototype),"destroy",this).call(this),this.destroyWebAudio()}}]),P}(d.default);s.default=M,a.exports=s.default},"./src/mediaelement.js":(a,s,c)=>{function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},l(h)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=_(c("./src/webaudio.js")),f=y(c("./src/util/index.js"));function g(h){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(g=function(m){return m?R:k})(h)}function y(h,k){if(!k&&h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var R=g(k);if(R&&R.has(h))return R.get(h);var p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in h)if(E!=="default"&&Object.prototype.hasOwnProperty.call(h,E)){var b=m?Object.getOwnPropertyDescriptor(h,E):null;b&&(b.get||b.set)?Object.defineProperty(p,E,b):p[E]=h[E]}return p.default=h,R&&R.set(h,p),p}function _(h){return h&&h.__esModule?h:{default:h}}function A(h,k){if(!(h instanceof k))throw new TypeError("Cannot call a class as a function")}function w(h,k){for(var R=0;R<k.length;R++){var p=k[R];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}function T(h,k,R){return k&&w(h.prototype,k),R&&w(h,R),Object.defineProperty(h,"prototype",{writable:!1}),h}function O(){return typeof Reflect!="undefined"&&Reflect.get?O=Reflect.get.bind():O=function(k,R,p){var m=I(k,R);if(!!m){var E=Object.getOwnPropertyDescriptor(m,R);return E.get?E.get.call(arguments.length<3?k:p):E.value}},O.apply(this,arguments)}function I(h,k){for(;!Object.prototype.hasOwnProperty.call(h,k)&&(h=H(h),h!==null););return h}function K(h,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(k&&k.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),k&&Q(h,k)}function Q(h,k){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,m){return p.__proto__=m,p},Q(h,k)}function D(h){var k=N();return function(){var p=H(h),m;if(k){var E=H(this).constructor;m=Reflect.construct(p,arguments,E)}else m=p.apply(this,arguments);return j(this,m)}}function j(h,k){if(k&&(l(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(h)}function M(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function N(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function H(h){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)},H(h)}var P=function(h){K(R,h);var k=D(R);function R(p){var m;return A(this,R),m=k.call(this,p),m.params=p,m.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},m.mediaType=p.mediaType.toLowerCase(),m.elementPosition=p.elementPosition,m.peaks=null,m.playbackRate=1,m.volume=1,m.isMuted=!1,m.buffer=null,m.onPlayEnd=null,m.mediaListeners={},m}return T(R,[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var m=this;this.mediaListeners.error=function(){m.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){m.fireEvent("canplay")},this.mediaListeners.ended=function(){m.fireEvent("finish")},this.mediaListeners.play=function(){m.fireEvent("play")},this.mediaListeners.pause=function(){m.fireEvent("pause")},this.mediaListeners.seeked=function(E){m.fireEvent("seek")},this.mediaListeners.volumechange=function(E){m.isMuted=m.media.muted,m.isMuted?m.volume=0:m.volume=m.media.volume,m.fireEvent("volume")},Object.keys(this.mediaListeners).forEach(function(E){m.media.removeEventListener(E,m.mediaListeners[E]),m.media.addEventListener(E,m.mediaListeners[E])})}},{key:"createTimer",value:function(){var m=this,E=function b(){m.isPaused()||(m.fireEvent("audioprocess",m.getCurrentTime()),f.frame(b)())};this.on("play",E),this.on("pause",function(){m.fireEvent("audioprocess",m.getCurrentTime())})}},{key:"load",value:function(m,E,b,u){var v=document.createElement(this.mediaType);v.controls=this.params.mediaControls,v.autoplay=this.params.autoplay||!1,v.preload=u==null?"auto":u,v.src=m,v.style.width="100%";var S=E.querySelector(this.mediaType);S&&E.removeChild(S),E.appendChild(v),this._load(v,b,u)}},{key:"loadElt",value:function(m,E){m.controls=this.params.mediaControls,m.autoplay=this.params.autoplay||!1,this._load(m,E,m.preload)}},{key:"_load",value:function(m,E,b){if(!(m instanceof HTMLMediaElement)||typeof m.addEventListener=="undefined")throw new Error("media parameter is not a valid media element");typeof m.load=="function"&&!(E&&b=="none")&&m.load(),this.media=m,this._setupMediaListeners(),this.peaks=E,this.onPlayEnd=null,this.buffer=null,this.isMuted=m.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var m=(this.buffer||this.media).duration;return m>=1/0&&(m=this.media.seekable.end(0)),m}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(m){this.playbackRate=m||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(m){m!=null&&!isNaN(m)&&(this.media.currentTime=m),this.clearPlayEnd()}},{key:"play",value:function(m,E){this.seekTo(m);var b=this.media.play();return E&&this.setPlayEnd(E),b}},{key:"pause",value:function(){var m;return this.media&&(m=this.media.pause()),this.clearPlayEnd(),m}},{key:"setPlayEnd",value:function(m){var E=this;this.clearPlayEnd(),this._onPlayEnd=function(b){b>=m&&(E.pause(),E.seekTo(m))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(m,E,b){return this.buffer?O(H(R.prototype),"getPeaks",this).call(this,m,E,b):this.peaks||[]}},{key:"setSinkId",value:function(m){return m?this.media.setSinkId?this.media.setSinkId(m):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+m))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(m){this.volume=m,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(m){this.isMuted=this.media.muted=m}},{key:"destroy",value:function(){var m=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach(function(E){m.media&&m.media.removeEventListener(E,m.mediaListeners[E])}),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}]),R}(d.default);s.default=P,a.exports=s.default},"./src/peakcache.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function c(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function l(g,y){for(var _=0;_<y.length;_++){var A=y[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(g,A.key,A)}}function d(g,y,_){return y&&l(g.prototype,y),_&&l(g,_),Object.defineProperty(g,"prototype",{writable:!1}),g}var f=function(){function g(){c(this,g),this.clearPeakCache()}return d(g,[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(_,A,w){_!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=_);for(var T=[],O=0;O<this.peakCacheRanges.length&&this.peakCacheRanges[O]<A;)O++;for(O%2==0&&T.push(A);O<this.peakCacheRanges.length&&this.peakCacheRanges[O]<=w;)T.push(this.peakCacheRanges[O]),O++;O%2==0&&T.push(w),T=T.filter(function(K,Q,D){return Q==0?K!=D[Q+1]:Q==D.length-1?K!=D[Q-1]:K!=D[Q-1]&&K!=D[Q+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(T),this.peakCacheRanges=this.peakCacheRanges.sort(function(K,Q){return K-Q}).filter(function(K,Q,D){return Q==0?K!=D[Q+1]:Q==D.length-1?K!=D[Q-1]:K!=D[Q-1]&&K!=D[Q+1]});var I=[];for(O=0;O<T.length;O+=2)I.push([T[O],T[O+1]]);return I}},{key:"getCacheRanges",value:function(){var _=[],A;for(A=0;A<this.peakCacheRanges.length;A+=2)_.push([this.peakCacheRanges[A],this.peakCacheRanges[A+1]]);return _}}]),g}();s.default=f,a.exports=s.default},"./src/util/absMax.js":(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=g;var l=f(c("./src/util/max.js")),d=f(c("./src/util/min.js"));function f(y){return y&&y.__esModule?y:{default:y}}function g(y){var _=(0,l.default)(y),A=(0,d.default)(y);return-A>_?-A:_}a.exports=s.default},"./src/util/clamp.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;function c(l,d,f){return Math.min(Math.max(d,l),f)}a.exports=s.default},"./src/util/fetch.js":(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=A;var l=d(c("./src/util/observer.js"));function d(w){return w&&w.__esModule?w:{default:w}}function f(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function g(w,T){for(var O=0;O<T.length;O++){var I=T[O];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(w,I.key,I)}}function y(w,T,O){return T&&g(w.prototype,T),O&&g(w,O),Object.defineProperty(w,"prototype",{writable:!1}),w}var _=function(){function w(T,O,I){f(this,w),this.instance=T,this.instance._reader=I.body.getReader(),this.total=parseInt(O,10),this.loaded=0}return y(w,[{key:"start",value:function(O){var I=this,K=function Q(){I.instance._reader.read().then(function(D){var j=D.done,M=D.value;if(j){I.total===0&&I.instance.onProgress.call(I.instance,{loaded:I.loaded,total:I.total,lengthComputable:!1}),O.close();return}I.loaded+=M.byteLength,I.instance.onProgress.call(I.instance,{loaded:I.loaded,total:I.total,lengthComputable:I.total!==0}),O.enqueue(M),Q()}).catch(function(D){O.error(D)})};K()}}]),w}();function A(w){if(w){if(!w.url)throw new Error("fetch url missing")}else throw new Error("fetch options missing");var T=new l.default,O=new Headers,I=new Request(w.url);T.controller=new AbortController,w&&w.requestHeaders&&w.requestHeaders.forEach(function(D){O.append(D.key,D.value)});var K=w.responseType||"json",Q={method:w.method||"GET",headers:O,mode:w.mode||"cors",credentials:w.credentials||"same-origin",cache:w.cache||"default",redirect:w.redirect||"follow",referrer:w.referrer||"client",signal:T.controller.signal};return fetch(I,Q).then(function(D){T.response=D;var j=!0;D.body||(j=!1);var M=D.headers.get("content-length");return M===null&&(j=!1),j?(T.onProgress=function(N){T.fireEvent("progress",N)},new Response(new ReadableStream(new _(T,M,D)),Q)):D}).then(function(D){var j;if(D.ok)switch(K){case"arraybuffer":return D.arrayBuffer();case"json":return D.json();case"blob":return D.blob();case"text":return D.text();default:j="Unknown responseType: "+K;break}throw j||(j="HTTP error status: "+D.status),new Error(j)}).then(function(D){T.fireEvent("success",D)}).catch(function(D){T.fireEvent("error",D)}),T.fetchRequest=I,T}a.exports=s.default},"./src/util/frame.js":(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=f;var l=d(c("./src/util/request-animation-frame.js"));function d(g){return g&&g.__esModule?g:{default:g}}function f(g){return function(){for(var y=arguments.length,_=new Array(y),A=0;A<y;A++)_[A]=arguments[A];return(0,l.default)(function(){return g.apply(void 0,_)})}}a.exports=s.default},"./src/util/get-id.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;function c(l){return l===void 0&&(l="wavesurfer_"),l+Math.random().toString(32).substring(2)}a.exports=s.default},"./src/util/index.js":(a,s,c)=>{Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Observer",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(s,"absMax",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(s,"clamp",{enumerable:!0,get:function(){return K.default}}),Object.defineProperty(s,"debounce",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(s,"fetchFile",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(s,"frame",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(s,"getId",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(s,"ignoreSilenceMode",{enumerable:!0,get:function(){return D.default}}),Object.defineProperty(s,"max",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(s,"min",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(s,"preventClick",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(s,"requestAnimationFrame",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(s,"style",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(s,"withOrientation",{enumerable:!0,get:function(){return Q.default}});var l=j(c("./src/util/get-id.js")),d=j(c("./src/util/max.js")),f=j(c("./src/util/min.js")),g=j(c("./src/util/absMax.js")),y=j(c("./src/util/observer.js")),_=j(c("./src/util/style.js")),A=j(c("./src/util/request-animation-frame.js")),w=j(c("./src/util/frame.js")),T=j(c("./node_modules/debounce/index.js")),O=j(c("./src/util/prevent-click.js")),I=j(c("./src/util/fetch.js")),K=j(c("./src/util/clamp.js")),Q=j(c("./src/util/orientation.js")),D=j(c("./src/util/silence-mode.js"));function j(M){return M&&M.__esModule?M:{default:M}}},"./src/util/max.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;function c(l){var d=-1/0;return Object.keys(l).forEach(function(f){l[f]>d&&(d=l[f])}),d}a.exports=s.default},"./src/util/min.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;function c(l){var d=Number(1/0);return Object.keys(l).forEach(function(f){l[f]<d&&(d=l[f])}),d}a.exports=s.default},"./src/util/observer.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;function c(g,y){if(!(g instanceof y))throw new TypeError("Cannot call a class as a function")}function l(g,y){for(var _=0;_<y.length;_++){var A=y[_];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(g,A.key,A)}}function d(g,y,_){return y&&l(g.prototype,y),_&&l(g,_),Object.defineProperty(g,"prototype",{writable:!1}),g}var f=function(){function g(){c(this,g),this._disabledEventEmissions=[],this.handlers=null}return d(g,[{key:"on",value:function(_,A){var w=this;this.handlers||(this.handlers={});var T=this.handlers[_];return T||(T=this.handlers[_]=[]),T.push(A),{name:_,callback:A,un:function(I,K){return w.un(I,K)}}}},{key:"un",value:function(_,A){if(!!this.handlers){var w=this.handlers[_],T;if(w)if(A)for(T=w.length-1;T>=0;T--)w[T]==A&&w.splice(T,1);else w.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(_,A){var w=this,T=function O(){for(var I=arguments.length,K=new Array(I),Q=0;Q<I;Q++)K[Q]=arguments[Q];A.apply(w,K),setTimeout(function(){w.un(_,O)},0)};return this.on(_,T)}},{key:"setDisabledEventEmissions",value:function(_){this._disabledEventEmissions=_}},{key:"_isDisabledEventEmission",value:function(_){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(_)}},{key:"fireEvent",value:function(_){for(var A=arguments.length,w=new Array(A>1?A-1:0),T=1;T<A;T++)w[T-1]=arguments[T];if(!(!this.handlers||this._isDisabledEventEmission(_))){var O=this.handlers[_];O&&O.forEach(function(I){I.apply(void 0,w)})}}}]),g}();s.default=f,a.exports=s.default},"./src/util/orientation.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=f;var c={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function l(g,y){return Object.prototype.hasOwnProperty.call(c,g)&&y?c[g]:g}var d=Symbol("isProxy");function f(g,y){return g[d]?g:new Proxy(g,{get:function(A,w,T){if(w===d)return!0;if(w==="domElement")return A;if(w==="style")return f(A.style,y);if(w==="canvas")return f(A.canvas,y);if(w==="getBoundingClientRect")return function(){return f(A.getBoundingClientRect.apply(A,arguments),y)};if(w==="getContext")return function(){return f(A.getContext.apply(A,arguments),y)};var O=A[l(w,y)];return typeof O=="function"?O.bind(A):O},set:function(A,w,T){return A[l(w,y)]=T,!0}})}a.exports=s.default},"./src/util/prevent-click.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=l;function c(d){d.stopPropagation(),document.body.removeEventListener("click",c,!0)}function l(d){document.body.addEventListener("click",c,!0)}a.exports=s.default},"./src/util/request-animation-frame.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var c=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(l,d){return setTimeout(l,1e3/60)}).bind(window);s.default=c,a.exports=s.default},"./src/util/silence-mode.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;function c(){var l="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",d=document.createElement("div");d.innerHTML='<audio x-webkit-airplay="deny"></audio>';var f=d.children.item(0);f.src=l,f.preload="auto",f.type="audio/mpeg",f.disableRemotePlayback=!0,f.play(),f.remove(),d.remove()}a.exports=s.default},"./src/util/style.js":(a,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.default=c;function c(l,d){return Object.keys(d).forEach(function(f){l.style[f]!==d[f]&&(l.style[f]=d[f])}),l}a.exports=s.default},"./src/wavesurfer.js":(a,s,c)=>{function l(p){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},l(p)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=O(c("./src/util/index.js")),f=w(c("./src/drawer.multicanvas.js")),g=w(c("./src/webaudio.js")),y=w(c("./src/mediaelement.js")),_=w(c("./src/peakcache.js")),A=w(c("./src/mediaelement-webaudio.js"));function w(p){return p&&p.__esModule?p:{default:p}}function T(p){if(typeof WeakMap!="function")return null;var m=new WeakMap,E=new WeakMap;return(T=function(u){return u?E:m})(p)}function O(p,m){if(!m&&p&&p.__esModule)return p;if(p===null||l(p)!=="object"&&typeof p!="function")return{default:p};var E=T(m);if(E&&E.has(p))return E.get(p);var b={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in p)if(v!=="default"&&Object.prototype.hasOwnProperty.call(p,v)){var S=u?Object.getOwnPropertyDescriptor(p,v):null;S&&(S.get||S.set)?Object.defineProperty(b,v,S):b[v]=p[v]}return b.default=p,E&&E.set(p,b),b}function I(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),Object.defineProperty(p,"prototype",{writable:!1}),m&&K(p,m)}function K(p,m){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,u){return b.__proto__=u,b},K(p,m)}function Q(p){var m=M();return function(){var b=N(p),u;if(m){var v=N(this).constructor;u=Reflect.construct(b,arguments,v)}else u=b.apply(this,arguments);return D(this,u)}}function D(p,m){if(m&&(l(m)==="object"||typeof m=="function"))return m;if(m!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j(p)}function j(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function M(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(p){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},N(p)}function H(p,m,E){return m in p?Object.defineProperty(p,m,{value:E,enumerable:!0,configurable:!0,writable:!0}):p[m]=E,p}function P(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function h(p,m){for(var E=0;E<m.length;E++){var b=m[E];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(p,b.key,b)}}function k(p,m,E){return m&&h(p.prototype,m),E&&h(p,E),Object.defineProperty(p,"prototype",{writable:!1}),p}var R=function(p){I(E,p);var m=Q(E);function E(b){var u;if(P(this,E),u=m.call(this),H(j(u),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:f.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1,splitDragSelection:!1},vertical:!1,waveColor:"#999",xhr:{}}),H(j(u),"backends",{MediaElement:y.default,WebAudio:g.default,MediaElementWebAudio:A.default}),H(j(u),"util",d),u.params=Object.assign({},u.defaultParams,b),u.params.splitChannelsOptions=Object.assign({},u.defaultParams.splitChannelsOptions,b.splitChannelsOptions),u.container=typeof b.container=="string"?document.querySelector(u.params.container):u.params.container,!u.container)throw new Error("Container element not found");if(u.params.mediaContainer==null?u.mediaContainer=u.container:typeof u.params.mediaContainer=="string"?u.mediaContainer=document.querySelector(u.params.mediaContainer):u.mediaContainer=u.params.mediaContainer,!u.mediaContainer)throw new Error("Media Container element not found");if(u.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(u.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(u.params.rtl===!0&&(u.params.vertical===!0?d.style(u.container,{transform:"rotateX(180deg)"}):d.style(u.container,{transform:"rotateY(180deg)"})),u.params.backgroundColor&&u.setBackgroundColor(u.params.backgroundColor),u.savedVolume=0,u.isMuted=!1,u.tmpEvents=[],u.currentRequest=null,u.arraybuffer=null,u.drawer=null,u.backend=null,u.peakCache=null,typeof u.params.renderer!="function")throw new Error("Renderer parameter is invalid");u.Drawer=u.params.renderer,u.params.backend=="AudioElement"&&(u.params.backend="MediaElement"),(u.params.backend=="WebAudio"||u.params.backend==="MediaElementWebAudio")&&!g.default.prototype.supportsWebAudio.call(null)&&(u.params.backend="MediaElement"),u.Backend=u.backends[u.params.backend],u.initialisedPluginList={},u.isDestroyed=!1,u.isReady=!1;var v=0;return u._onResize=d.debounce(function(){u.drawer.wrapper&&v!=u.drawer.wrapper.clientWidth&&!u.params.scrollParent&&(v=u.drawer.wrapper.clientWidth,v&&u.drawer.fireEvent("redraw"))},typeof u.params.responsive=="number"?u.params.responsive:100),D(u,j(u))}return k(E,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(u){var v=this;return u.forEach(function(S){return v.addPlugin(S)}),u.forEach(function(S){S.deferInit||v.initPlugin(S.name)}),this.fireEvent("plugins-registered",u),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(u){var v=this;if(!u.name)throw new Error("Plugin does not have a name!");if(!u.instance)throw new Error("Plugin ".concat(u.name," does not have an instance property!"));u.staticProps&&Object.keys(u.staticProps).forEach(function(F){v[F]=u.staticProps[F]});var S=u.instance,W=Object.getOwnPropertyNames(d.Observer.prototype);return W.forEach(function(F){S.prototype[F]=d.Observer.prototype[F]}),this[u.name]=new S(u.params||{},this),this.fireEvent("plugin-added",u.name),this}},{key:"initPlugin",value:function(u){if(!this[u])throw new Error("Plugin ".concat(u," has not been added yet!"));return this.initialisedPluginList[u]&&this.destroyPlugin(u),this[u].init(),this.initialisedPluginList[u]=!0,this.fireEvent("plugin-initialised",u),this}},{key:"destroyPlugin",value:function(u){if(!this[u])throw new Error("Plugin ".concat(u," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[u])throw new Error("Plugin ".concat(u," is not active and cannot be destroyed!"));if(typeof this[u].destroy!="function")throw new Error("Plugin ".concat(u," does not have a destroy function!"));return this[u].destroy(),delete this.initialisedPluginList[u],this.fireEvent("plugin-destroyed",u),this}},{key:"destroyAllPlugins",value:function(){var u=this;Object.keys(this.initialisedPluginList).forEach(function(v){return u.destroyPlugin(v)})}},{key:"createDrawer",value:function(){var u=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),this.params.responsive!==!1&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",function(){u.drawBuffer(),u.drawer.progress(u.backend.getPlayedPercents())}),this.drawer.on("click",function(v,S){setTimeout(function(){return u.seekTo(S)},0)}),this.drawer.on("scroll",function(v){u.params.partialRender&&u.drawBuffer(),u.fireEvent("scroll",v)})}},{key:"createBackend",value:function(){var u=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",function(){u.drawer.progress(u.backend.getPlayedPercents()),u.fireEvent("finish")}),this.backend.on("play",function(){return u.fireEvent("play")}),this.backend.on("pause",function(){return u.fireEvent("pause")}),this.backend.on("audioprocess",function(v){u.drawer.progress(u.backend.getPlayedPercents()),u.fireEvent("audioprocess",v)}),(this.params.backend==="MediaElement"||this.params.backend==="MediaElementWebAudio")&&(this.backend.on("seek",function(){u.drawer.progress(u.backend.getPlayedPercents())}),this.backend.on("volume",function(){var v=u.getVolume();u.fireEvent("volume",v),u.backend.isMuted!==u.isMuted&&(u.isMuted=u.backend.isMuted,u.fireEvent("mute",u.isMuted))}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new _.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(u){u>=this.getDuration()?this.seekTo(1):this.seekTo(u/this.getDuration())}},{key:"play",value:function(u,v){var S=this;return this.params.ignoreSilenceMode&&d.ignoreSilenceMode(),this.fireEvent("interaction",function(){return S.play(u,v)}),this.backend.play(u,v)}},{key:"setPlayEnd",value:function(u){this.backend.setPlayEnd(u)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(u){this.skip(-u||-this.params.skipLength)}},{key:"skipForward",value:function(u){this.skip(u||this.params.skipLength)}},{key:"skip",value:function(u){var v=this.getDuration()||1,S=this.getCurrentTime()||0;S=Math.max(0,Math.min(v,S+(u||0))),this.seekAndCenter(S/v)}},{key:"seekAndCenter",value:function(u){this.seekTo(u),this.drawer.recenter(u)}},{key:"seekTo",value:function(u){var v=this;if(typeof u!="number"||!isFinite(u)||u<0||u>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",function(){return v.seekTo(u)});var S=this.params.backend==="WebAudio",W=this.backend.isPaused();S&&!W&&this.backend.pause();var F=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(u*this.getDuration()),this.drawer.progress(u),S&&!W&&this.backend.play(),this.params.scrollParent=F,this.fireEvent("seek",u)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(u){return this.backend.setSinkId(u)}},{key:"setVolume",value:function(u){this.backend.setVolume(u),this.fireEvent("volume",u)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(u){this.backend.setPlaybackRate(u)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(u){if(u===this.isMuted){this.fireEvent("mute",this.isMuted);return}this.backend.setMute?(this.backend.setMute(u),this.isMuted=u):u?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[u]?this.params.splitChannelsOptions.channelColors[u].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.params.splitChannelsOptions.channelColors[v]?this.params.splitChannelsOptions.channelColors[v].waveColor=u:this.params.waveColor=u,this.drawBuffer()}},{key:"getProgressColor",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[u]?this.params.splitChannelsOptions.channelColors[u].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(u,v){this.params.splitChannelsOptions.channelColors[v]?this.params.splitChannelsOptions.channelColors[v].progressColor=u:this.params.progressColor=u,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(u){this.params.backgroundColor=u,d.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(u){this.params.cursorColor=u,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(u){this.params.height=u,this.drawer.setHeight(u*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(u){this.params.splitChannelsOptions.filterChannels=u,this.drawBuffer()}},{key:"drawBuffer",value:function(){var u=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),v=this.drawer.getWidth(),S=u,W=0,F=Math.max(W+v,S);this.params.fillParent&&(!this.params.scrollParent||u<v)&&(S=v,W=0,F=S);var re;if(this.params.partialRender){var ue=this.peakCache.addRangeToPeakCache(S,W,F),le;for(le=0;le<ue.length;le++)re=this.backend.getPeaks(S,ue[le][0],ue[le][1]),this.drawer.drawPeaks(re,S,ue[le][0],ue[le][1])}else re=this.backend.getPeaks(S,W,F),this.drawer.drawPeaks(re,S,W,F);this.fireEvent("redraw",re,S)}},{key:"zoom",value:function(u){u?(this.params.minPxPerSec=u,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",u)}},{key:"loadArrayBuffer",value:function(u){var v=this;this.decodeArrayBuffer(u,function(S){v.isDestroyed||v.loadDecodedBuffer(S)})}},{key:"loadDecodedBuffer",value:function(u){this.backend.load(u),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(u){var v=this,S=new FileReader;S.addEventListener("progress",function(W){return v.onProgress(W)}),S.addEventListener("load",function(W){return v.loadArrayBuffer(W.target.result)}),S.addEventListener("error",function(){return v.fireEvent("error","Error reading file")}),S.readAsArrayBuffer(u),this.empty()}},{key:"load",value:function(u,v,S,W){if(!u)throw new Error("url parameter cannot be empty");if(this.empty(),S){var F={"Preload is not 'auto', 'none' or 'metadata'":["auto","metadata","none"].indexOf(S)===-1,"Peaks are not provided":!v,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend)===-1,"Url is not of type string":typeof u!="string"},re=Object.keys(F).filter(function(ue){return F[ue]});re.length&&(console.warn(`Preload parameter of wavesurfer.load will be ignored because:
	- `+re.join(`
	- `)),S=null)}switch(this.params.backend==="WebAudio"&&u instanceof HTMLMediaElement&&(u=u.src),this.params.backend){case"WebAudio":return this.loadBuffer(u,v,W);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(u,v,S,W)}}},{key:"loadBuffer",value:function(u,v,S){var W=this,F=function(ue){return ue&&W.tmpEvents.push(W.once("ready",ue)),W.getArrayBuffer(u,function(le){return W.loadArrayBuffer(le)})};if(v)this.backend.setPeaks(v,S),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",F));else return F()}},{key:"loadMediaElement",value:function(u,v,S,W){var F=this,re=u;if(typeof u=="string")this.backend.load(re,this.mediaContainer,v,S);else{var ue=u;this.backend.loadElt(ue,v),re=ue.src}this.tmpEvents.push(this.backend.once("canplay",function(){F.backend.destroyed||(F.drawBuffer(),F.isReady=!0,F.fireEvent("ready"))}),this.backend.once("error",function(le){return F.fireEvent("error",le)})),v&&(this.backend.setPeaks(v,W),this.drawBuffer(),this.fireEvent("waveform-ready")),(!v||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(re,function(le){F.decodeArrayBuffer(le,function(ge){F.backend.buffer=ge,F.backend.setPeaks(null),F.drawBuffer(),F.fireEvent("waveform-ready")})})}},{key:"decodeArrayBuffer",value:function(u,v){var S=this;this.isDestroyed||(this.arraybuffer=u,this.backend.decodeArrayBuffer(u,function(W){!S.isDestroyed&&S.arraybuffer==u&&(v(W),S.arraybuffer=null)},function(){return S.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(u,v){var S=this,W=Object.assign({url:u,responseType:"arraybuffer"},this.params.xhr),F=d.fetchFile(W);return this.currentRequest=F,this.tmpEvents.push(F.on("progress",function(re){S.onProgress(re)}),F.on("success",function(re){v(re),S.currentRequest=null}),F.on("error",function(re){S.fireEvent("error",re),S.currentRequest=null})),F}},{key:"onProgress",value:function(u){var v;u.lengthComputable?v=u.loaded/u.total:v=u.loaded/(u.loaded+1e6),this.fireEvent("loading",Math.round(v*100),u.target)}},{key:"exportPCM",value:function(u,v,S,W,F){u=u||1024,W=W||0,v=v||1e4,S=S||!1;var re=this.backend.getPeaks(u,W,F),ue=[].map.call(re,function(le){return Math.round(le*v)/v});return new Promise(function(le,ge){if(!S){var Ce=new Blob([JSON.stringify(ue)],{type:"application/json;charset=utf-8"}),Se=URL.createObjectURL(Ce);window.open(Se),URL.revokeObjectURL(Se)}le(ue)})}},{key:"exportImage",value:function(u,v,S){return u||(u="image/png"),v||(v=1),S||(S="dataURL"),this.drawer.getImage(u,v,S)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch(function(u){}),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach(function(u){return u.un()})}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.params.responsive!==!1&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],[{key:"create",value:function(u){var v=new E(u);return v.init()}}]),E}(d.Observer);s.default=R,H(R,"VERSION","6.4.0"),H(R,"util",d),a.exports=s.default},"./src/webaudio.js":(a,s,c)=>{function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(k){return typeof k}:function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},l(h)}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var d=g(c("./src/util/index.js"));function f(h){if(typeof WeakMap!="function")return null;var k=new WeakMap,R=new WeakMap;return(f=function(m){return m?R:k})(h)}function g(h,k){if(!k&&h&&h.__esModule)return h;if(h===null||l(h)!=="object"&&typeof h!="function")return{default:h};var R=f(k);if(R&&R.has(h))return R.get(h);var p={},m=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in h)if(E!=="default"&&Object.prototype.hasOwnProperty.call(h,E)){var b=m?Object.getOwnPropertyDescriptor(h,E):null;b&&(b.get||b.set)?Object.defineProperty(p,E,b):p[E]=h[E]}return p.default=h,R&&R.set(h,p),p}function y(h,k){if(!(h instanceof k))throw new TypeError("Cannot call a class as a function")}function _(h,k){for(var R=0;R<k.length;R++){var p=k[R];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(h,p.key,p)}}function A(h,k,R){return k&&_(h.prototype,k),R&&_(h,R),Object.defineProperty(h,"prototype",{writable:!1}),h}function w(h,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(k&&k.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),k&&T(h,k)}function T(h,k){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,m){return p.__proto__=m,p},T(h,k)}function O(h){var k=Q();return function(){var p=D(h),m;if(k){var E=D(this).constructor;m=Reflect.construct(p,arguments,E)}else m=p.apply(this,arguments);return I(this,m)}}function I(h,k){if(k&&(l(k)==="object"||typeof k=="function"))return k;if(k!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(h)}function K(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function Q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function D(h){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(R){return R.__proto__||Object.getPrototypeOf(R)},D(h)}function j(h,k,R){return k in h?Object.defineProperty(h,k,{value:R,enumerable:!0,configurable:!0,writable:!0}):h[k]=R,h}var M="playing",N="paused",H="finished",P=function(h){w(R,h);var k=O(R);function R(p){var m,E,b;return y(this,R),b=k.call(this),j(K(b),"audioContext",null),j(K(b),"offlineAudioContext",null),j(K(b),"stateBehaviors",(m={},j(m,M,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var v=this.getDuration();return this.getCurrentTime()/v||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),j(m,N,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var v=this.getDuration();return this.getCurrentTime()/v||0},getCurrentTime:function(){return this.startPosition}}),j(m,H,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),m)),b.params=p,b.ac=p.audioContext||(b.supportsWebAudio()?b.getAudioContext():{}),b.lastPlay=b.ac.currentTime,b.startPosition=0,b.scheduledPause=null,b.states=(E={},j(E,M,Object.create(b.stateBehaviors[M])),j(E,N,Object.create(b.stateBehaviors[N])),j(E,H,Object.create(b.stateBehaviors[H])),E),b.buffer=null,b.filters=[],b.gainNode=null,b.mergedPeaks=null,b.offlineAc=null,b.peaks=null,b.playbackRate=1,b.analyser=null,b.scriptNode=null,b.source=null,b.splitPeaks=[],b.state=null,b.explicitDuration=p.duration,b.sinkStreamDestination=null,b.sinkAudioElement=null,b.destroyed=!1,b}return A(R,[{key:"supportsWebAudio",value:function(){return!!(window.AudioContext||window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(m){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,m)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(N),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach(function(m){m&&m.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(m){this.state!==this.states[m]&&(this.state=this.states[m],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var m=arguments.length,E=new Array(m),b=0;b<m;b++)E[b]=arguments[b];this.setFilters(E)}},{key:"setFilters",value:function(m){this.disconnectFilters(),m&&m.length&&(this.filters=m,this.analyser.disconnect(),m.reduce(function(E,b){return E.connect(b),b},this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(R.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(R.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var m=this;this.scriptNode.onaudioprocess=function(){var E=m.getCurrentTime();E>=m.getDuration()?(m.setState(H),m.fireEvent("pause")):E>=m.scheduledPause?m.pause():m.state===m.states[M]&&m.fireEvent("audioprocess",E)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(m){return m?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(m)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+m))}},{key:"setVolume",value:function(m){this.gainNode.gain.setValueAtTime(m,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(m,E,b){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(m,function(u){return E(u)},b):this.offlineAc.decodeAudioData(m).then(function(u){return E(u)}).catch(function(u){return b(u)})}},{key:"setPeaks",value:function(m,E){E!=null&&(this.explicitDuration=E),this.peaks=m}},{key:"setLength",value:function(m){if(!(this.mergedPeaks&&m==2*this.mergedPeaks.length-1+2)){this.splitPeaks=[],this.mergedPeaks=[];var E=this.buffer?this.buffer.numberOfChannels:1,b;for(b=0;b<E;b++)this.splitPeaks[b]=[],this.splitPeaks[b][2*(m-1)]=0,this.splitPeaks[b][2*(m-1)+1]=0;this.mergedPeaks[2*(m-1)]=0,this.mergedPeaks[2*(m-1)+1]=0}}},{key:"getPeaks",value:function(m,E,b){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(E=E||0,b=b||m-1,this.setLength(m),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var u=this.createBuffer(1,4096,this.sampleRate);this.buffer=u.buffer}var v=this.buffer.length/m,S=~~(v/10)||1,W=this.buffer.numberOfChannels,F;for(F=0;F<W;F++){var re=this.splitPeaks[F],ue=this.buffer.getChannelData(F),le=void 0;for(le=E;le<=b;le++){var ge=~~(le*v),Ce=~~(ge+v),Se=ue[ge],Ne=Se,xe=void 0;for(xe=ge;xe<Ce;xe+=S){var Ke=ue[xe];Ke>Ne&&(Ne=Ke),Ke<Se&&(Se=Ke)}re[2*le]=Ne,re[2*le+1]=Se,(F==0||Ne>this.mergedPeaks[2*le])&&(this.mergedPeaks[2*le]=Ne),(F==0||Se<this.mergedPeaks[2*le+1])&&(this.mergedPeaks[2*le+1]=Se)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&(typeof this.ac.close=="function"&&this.ac.state!="closed"&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(m){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=m,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){this.ac.state=="suspended"&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states[M]}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(m,E){if(!!this.buffer)return this.scheduledPause=null,m==null&&(m=this.getCurrentTime(),m>=this.getDuration()&&(m=0)),E==null&&(E=this.getDuration()),this.startPosition=m,this.lastPlay=this.ac.currentTime,this.state===this.states[H]&&this.setState(N),{start:m,end:E}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(m,E){if(!!this.buffer){this.createSource();var b=this.seekTo(m,E);m=b.start,E=b.end,this.scheduledPause=E,this.source.start(0,m),this.resumeAudioContext(),this.setState(M),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch{}this.setState(N),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(m){this.playbackRate=m||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(m){this.scheduledPause=m}}]),R}(d.Observer);s.default=P,j(P,"scriptBufferSize",256),a.exports=s.default},"./node_modules/debounce/index.js":a=>{function s(c,l,d){var f,g,y,_,A;l==null&&(l=100);function w(){var O=Date.now()-_;O<l&&O>=0?f=setTimeout(w,l-O):(f=null,d||(A=c.apply(y,g),y=g=null))}var T=function(){y=this,g=arguments,_=Date.now();var O=d&&!f;return f||(f=setTimeout(w,l)),O&&(A=c.apply(y,g),y=g=null),A};return T.clear=function(){f&&(clearTimeout(f),f=null)},T.flush=function(){f&&(A=c.apply(y,g),y=g=null,clearTimeout(f),f=null)},T}s.debounce=s,a.exports=s}},r={};function o(a){var s=r[a];if(s!==void 0)return s.exports;var c=r[a]={exports:{}};return n[a](c,c.exports,o),c.exports}var i=o("./src/wavesurfer.js");return i})())})(Hu);var Vy=Ul(Hu.exports),Ky=`.animate[data-v-350f057a]{animation-name:expand-350f057a;animation-duration:.75s;animation-fill-mode:forwards;transform-origin:50% 50%}.btn[data-v-350f057a]{background-color:var(--04af2074);margin:5px;height:var(--d59a0578);border-top-left-radius:20%;border-bottom-left-radius:20%;color:red}.progress[data-v-350f057a]{width:50px;height:var(--d59a0578);display:flex;position:relative;align-items:center;margin-left:10px;min-width:50px;background-color:var(--04af2074);border-top-right-radius:5px;border-bottom-right-radius:5px}.play-pause-btn[data-v-350f057a]{animation-name:expand-350f057a;animation-duration:.5s;animation-fill-mode:forwards;transform-origin:100% 0%}.play-pause-btn .icon[data-v-350f057a]{animation-name:rotate-350f057a;animation-duration:.5s;animation-fill-mode:forwards;transform-origin:center}@keyframes rotate-350f057a{0%{transform:rotate(0);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes expand-350f057a{0%{transform:scaleX(0%)}33%{transform:scaleX(1.1)}66%{transform:scaleX(.9)}to{transform:scaleX(1)}}
`;const Gy={style:{width:"40px",height:"50px","text-align":"center"}},Yy={style:{width:"200px"}},Qy={class:"progress",style:{display:"none"}},Xy={style:{"justify-content":"center",display:"flex"}};var Zy=ze(Ti({__name:"WavePlayer",props:{url:{type:String,required:!0},duration:{type:Number,required:!1,default:0},backgroundColor:{type:String,default:"#3f87f7"},waveColor:{type:String,default:"#a2c4ff"},progressColor:{type:String,default:"white"},height:{type:Number,required:!1,default:25},animate:{type:Boolean,required:!1,default:!1},autoLoad:{type:Boolean,default:!0,required:!1}},emits:["hover-audio-progress","update-progress-time"],setup(e,{emit:t}){const n=e;mh(w=>({"04af2074":dn(r),d59a0578:e.height}));const r=n.backgroundColor;let o=un(),i=un(!1),a=un(!1);un(!1);let s=un(n.duration),c=un(0),l=null;un(`width: ${document.documentElement.clientWidth-100-20}px`);const d=yl(()=>{const w=Math.floor(c.value),T=Math.floor(w/60),O=w-T*60,I=`${T}:${O.toString().padStart(2,"0")}`;return t("update-progress-time",I),I});async function f(){n.autoLoad||l==null||l.load(n.url),await A(()=>l!=null&&l.isReady),l&&(i.value=!0,l.play())}async function g(){!l&&i.value||(i.value=!1,l.pause())}function y(w){i.value||f()}function _(){i.value=!1,a.value=!0}async function A(w,T=100){const O=I=>w()?I():setTimeout(()=>O(I),T);return new Promise(O)}return co(async()=>{l=Vy.create({container:o.value,barRadius:10,barWidth:4,mediaControls:!1,normalize:!1,barHeight:7,responsive:!0,cursorColor:"transparent",fillParent:!0,hideScrollbar:!0,minPxPerSec:10,height:n.height,waveColor:n.waveColor,progressColor:n.progressColor,backgroundColor:r,barMinHeight:1}),l.on("seek",y),l.on("finish",_),l.on("audioprocess",w=>c.value=w),n.autoLoad&&l.load(n.url),l.on("ready",()=>{s.value=l.getDuration()})}),(w,T)=>(L(),z("div",{style:{display:"flex",width:"250px","background-color":"v-bind(bg_color)"},class:Ae({animate:e.animate})},[X("div",Gy,[i.value?(L(),z("div",{key:1,class:"btn play-pause-btn",onClick:g},[ie(dn(Uo),{class:"icon",width:"22",icon:dn(Wy),inline:!0},null,8,["icon"])])):(L(),z("div",{key:0,class:"btn play-pause-btn",onClick:f},[ie(dn(Uo),{class:"icon",width:"26",icon:dn(zy),inline:!0},null,8,["icon"])]))]),X("div",Yy,[X("div",{id:"vue_waveplayer_container",ref_key:"vue_waveplayer_container",ref:o},null,512)]),X("div",Qy,[X("div",Xy,we(dn(d)),1)])],2))}}),[["styles",[Ky]],["__scopeId","data-v-350f057a"]]);const Jy={name:"AudioPlayer",components:{WavePlayer:Zy},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:null}},mounted(){},methods:{}},$y={class:"vac-audio-player"};function eb(e,t,n,r,o,i){const a=pe("wave-player");return L(),z("div",null,[X("div",$y,[ie(a,{id:i.playerUniqId,duration:e.duration,"onUpdate:duration":t[0]||(t[0]=s=>e.duration=s),"played-time":e.playedTime,"onUpdate:played-time":t[1]||(t[1]=s=>e.playedTime=s),style:{"padding-right":"25px","margin-bottom":"-20px"},onUpdateProgressTime:t[2]||(t[2]=s=>e.$emit("update-progress-time",s)),"background-color":"transparent","wave-color":"skyblue","progress-color":"white",height:25,animate:!1,url:i.audioSource},null,8,["id","duration","played-time","url"])])])}var Vs=ze(Jy,[["render",eb]]);const tb={name:"RoomMessageReply",components:{SvgIcon:rt,FormatMessage:Or,AudioPlayer:Vs},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight},firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return Wn(this.firstFile)},isVideo(){return Tr(this.firstFile)},isAudio(){return Mo(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},nb={class:"vac-reply-box"},rb={class:"vac-reply-info"},ob={class:"vac-reply-username"},ib={class:"vac-reply-content"},sb=["src"],ab={key:1,controls:"",class:"vac-image-reply"},lb=["src"],cb={key:3,class:"vac-image-reply vac-file-container"},ub={class:"vac-text-ellipsis"},db={key:0,class:"vac-text-ellipsis vac-text-extension"},fb={class:"vac-icon-reply"};function hb(e,t,n,r,o,i){const a=pe("format-message"),s=pe("audio-player"),c=pe("svg-icon");return L(),je(Qe,{name:"vac-slide-up"},{default:ve(()=>[n.messageReply?(L(),z("div",{key:0,class:"vac-reply-container",style:Le({bottom:`${i.footerHeight}px`})},[X("div",nb,[X("div",rb,[X("div",ob,we(n.messageReply.username),1),X("div",ib,[ie(a,{"message-id":n.messageReply._id,content:n.messageReply.content,users:n.room.users,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),i.isImage?(L(),z("img",{key:0,src:i.firstFile.url,class:"vac-image-reply"},null,8,sb)):i.isVideo?(L(),z("video",ab,[X("source",{src:i.firstFile.url},null,8,lb)])):i.isAudio?(L(),je(s,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["src"])):i.isOtherFile?(L(),z("div",cb,[X("div",null,[oe(e.$slots,"file-icon",{},()=>[ie(c,{name:"file"})])]),X("div",ub,we(i.firstFile.name),1),i.firstFile.extension?(L(),z("div",db,we(i.firstFile.extension),1)):ne("",!0)])):ne("",!0)]),X("div",fb,[X("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=l=>e.$emit("reset-message"))},[oe(e.$slots,"reply-close-icon",{},()=>[ie(c,{name:"close-outline"})])])])],4)):ne("",!0)]),_:3})}var mb=ze(tb,[["render",hb]]);const gb={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},pb=["onMouseover","onClick"],vb={class:"vac-tags-info"},yb={class:"vac-tags-username"};function bb(e,t,n,r,o,i){return L(),je(Qe,{name:"vac-slide-up"},{default:ve(()=>[n.filteredUsersTag.length?(L(),z("div",{key:0,class:"vac-tags-container",style:Le({bottom:`${i.footerHeight}px`})},[(L(!0),z(Pe,null,_e(n.filteredUsersTag,(a,s)=>(L(),z("div",{key:a._id,class:Ae(["vac-tags-box",{"vac-tags-box-active":s===o.activeItem}]),onMouseover:c=>o.activeItem=s,onClick:c=>e.$emit("select-user-tag",a)},[X("div",vb,[a.avatar?(L(),z("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Le({"background-image":`url('${a.avatar}')`})},null,4)):ne("",!0),X("div",yb,we(a.username),1)])],42,pb))),128))],4)):ne("",!0)]),_:1})}var wb=ze(gb,[["render",bb]]);const kb={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},xb=["onMouseover","onClick"];function _b(e,t,n,r,o,i){return L(),je(Qe,{name:"vac-slide-up"},{default:ve(()=>[n.filteredEmojis.length?(L(),z("div",{key:0,class:"vac-emojis-container",style:Le({bottom:`${i.footerHeight}px`})},[(L(!0),z(Pe,null,_e(n.filteredEmojis,(a,s)=>(L(),z("div",{key:a,class:Ae(["vac-emoji-element",{"vac-emoji-element-active":s===o.activeItem}]),onMouseover:c=>o.activeItem=s,onClick:c=>e.$emit("select-emoji",a)},we(a),43,xb))),128))],4)):ne("",!0)]),_:1})}var Ab=ze(kb,[["render",_b]]);const Eb={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},Cb=["onMouseover","onClick"],Ob={class:"vac-template-info"},Sb={class:"vac-template-tag"},Tb={class:"vac-template-text"};function Rb(e,t,n,r,o,i){return L(),je(Qe,{name:"vac-slide-up"},{default:ve(()=>[n.filteredTemplatesText.length?(L(),z("div",{key:0,class:"vac-template-container vac-app-box-shadow",style:Le({bottom:`${i.footerHeight}px`})},[(L(!0),z(Pe,null,_e(n.filteredTemplatesText,(a,s)=>(L(),z("div",{key:s,class:Ae(["vac-template-box",{"vac-template-active":s===o.activeItem}]),onMouseover:c=>o.activeItem=s,onClick:c=>e.$emit("select-template-text",a)},[X("div",Ob,[X("div",Sb," /"+we(a.tag),1),X("div",Tb,we(a.text),1)])],42,Cb))),128))],4)):ne("",!0)]),_:1})}var Mb=ze(Eb,[["render",Rb]]);/*! Capacitor: https://capacitorjs.com/ - MIT License */const Pb=e=>{const t=new Map;t.set("web",{name:"web"});const n=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},r=(i,a)=>{n.platforms.set(i,a)},o=i=>{n.platforms.has(i)&&(n.currentPlatform=n.platforms.get(i))};return n.addPlatform=r,n.setPlatform=o,n},qu=(e=>e.CapacitorPlatforms=Pb(e))(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});qu.addPlatform,qu.setPlatform;var Qn;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Qn||(Qn={}));class Ks extends Error{constructor(t,n,r){super(t),this.message=t,this.code=n,this.data=r}}const Ib=e=>{var t,n;return e!=null&&e.androidBridge?"android":!((n=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},Lb=e=>{var t,n,r,o,i;const a=e.CapacitorCustomPlatform||null,s=e.Capacitor||{},c=s.Plugins=s.Plugins||{},l=e.CapacitorPlatforms,d=()=>a!==null?a.name:Ib(e),f=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||d,g=()=>f()!=="web",y=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||g,_=j=>{const M=K.get(j);return!!(M!=null&&M.platforms.has(f())||T(j))},A=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||_,w=j=>{var M;return(M=s.PluginHeaders)===null||M===void 0?void 0:M.find(N=>N.name===j)},T=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.getPluginHeader)||w,O=j=>e.console.error(j),I=(j,M,N)=>Promise.reject(`${N} does not have an implementation of "${M}".`),K=new Map,Q=(j,M={})=>{const N=K.get(j);if(N)return console.warn(`Capacitor plugin "${j}" already registered. Cannot register plugins twice.`),N.proxy;const H=f(),P=T(j);let h;const k=async()=>(!h&&H in M?h=typeof M[H]=="function"?h=await M[H]():h=M[H]:a!==null&&!h&&"web"in M&&(h=typeof M.web=="function"?h=await M.web():h=M.web),h),R=(v,S)=>{var W,F;if(P){const re=P==null?void 0:P.methods.find(ue=>S===ue.name);if(re)return re.rtype==="promise"?ue=>s.nativePromise(j,S.toString(),ue):(ue,le)=>s.nativeCallback(j,S.toString(),ue,le);if(v)return(W=v[S])===null||W===void 0?void 0:W.bind(v)}else{if(v)return(F=v[S])===null||F===void 0?void 0:F.bind(v);throw new Ks(`"${j}" plugin is not implemented on ${H}`,Qn.Unimplemented)}},p=v=>{let S;const W=(...F)=>{const re=k().then(ue=>{const le=R(ue,v);if(le){const ge=le(...F);return S=ge==null?void 0:ge.remove,ge}else throw new Ks(`"${j}.${v}()" is not implemented on ${H}`,Qn.Unimplemented)});return v==="addListener"&&(re.remove=async()=>S()),re};return W.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(W,"name",{value:v,writable:!1,configurable:!1}),W},m=p("addListener"),E=p("removeListener"),b=(v,S)=>{const W=m({eventName:v},S),F=async()=>{const ue=await W;E({eventName:v,callbackId:ue},S)},re=new Promise(ue=>W.then(()=>ue({remove:F})));return re.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await F()},re},u=new Proxy({},{get(v,S){switch(S){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return P?b:m;case"removeListener":return E;default:return p(S)}}});return c[j]=u,K.set(j,{name:j,proxy:u,platforms:new Set([...Object.keys(M),...P?[H]:[]])}),u},D=((i=l==null?void 0:l.currentPlatform)===null||i===void 0?void 0:i.registerPlugin)||Q;return s.convertFileSrc||(s.convertFileSrc=j=>j),s.getPlatform=f,s.handleError=O,s.isNativePlatform=y,s.isPluginAvailable=A,s.pluginMethodNoop=I,s.registerPlugin=D,s.Exception=Ks,s.DEBUG=!!s.DEBUG,s.isLoggingEnabled=!!s.isLoggingEnabled,s.platform=s.getPlatform(),s.isNative=s.isNativePlatform(),s},$o=(e=>e.Capacitor=Lb(e))(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),Gs=$o.registerPlugin;$o.Plugins;class Ys{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(n);const o=this.windowListeners[t];o&&!o.registered&&this.addWindowListener(o);const i=async()=>this.removeListener(t,n),a=Promise.resolve({remove:i});return Object.defineProperty(a,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await i()}}),a}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,n){const r=this.listeners[t];r&&r.forEach(o=>o(n))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,n){this.windowListeners[n]={registered:!1,windowEventName:t,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(t="not implemented"){return new $o.Exception(t,Qn.Unimplemented)}unavailable(t="not available"){return new $o.Exception(t,Qn.Unavailable)}async removeListener(t,n){const r=this.listeners[t];if(!r)return;const o=r.indexOf(n);this.listeners[t].splice(o,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){!t||(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const zu=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class jb extends Ys{async setCookie(t){try{const n=zu(t.key),r=zu(t.value),o=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=","");document.cookie=`${n}=${r||""}${o}; path=${i}`}catch(n){return Promise.reject(n)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const n of t)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}Gs("CapacitorCookies",{web:()=>new jb});const Nb=async e=>new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const o=r.result;t(o.indexOf(",")>=0?o.split(",")[1]:o)},r.onerror=o=>n(o),r.readAsDataURL(e)}),Db=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(o=>o.toLocaleLowerCase()).reduce((o,i,a)=>(o[i]=e[t[a]],o),{})},Bb=(e,t=!0)=>e?Object.entries(e).reduce((r,o)=>{const[i,a]=o;let s,c;return Array.isArray(a)?(c="",a.forEach(l=>{s=t?encodeURIComponent(l):l,c+=`${i}=${s}&`}),c.slice(0,-1)):(s=t?encodeURIComponent(a):a,c=`${i}=${s}`),`${r}&${c}`},"").substr(1):null,Fb=(e,t={})=>{const n=Object.assign({method:e.method||"GET",headers:e.headers},t),o=Db(e.headers)["content-type"]||"";if(typeof e.data=="string")n.body=e.data;else if(o.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,s]of Object.entries(e.data||{}))i.set(a,s);n.body=i.toString()}else if(o.includes("multipart/form-data")){const i=new FormData;if(e.data instanceof FormData)e.data.forEach((s,c)=>{i.append(c,s)});else for(const s of Object.keys(e.data))i.append(s,e.data[s]);n.body=i;const a=new Headers(n.headers);a.delete("content-type"),n.headers=a}else(o.includes("application/json")||typeof e.data=="object")&&(n.body=JSON.stringify(e.data));return n};class Ub extends Ys{async request(t){const n=Fb(t,t.webFetchExtra),r=Bb(t.params,t.shouldEncodeUrlParams),o=r?`${t.url}?${r}`:t.url,i=await fetch(o,n),a=i.headers.get("content-type")||"";let{responseType:s="text"}=i.ok?t:{};a.includes("application/json")&&(s="json");let c,l;switch(s){case"arraybuffer":case"blob":l=await i.blob(),c=await Nb(l);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const d={};return i.headers.forEach((f,g)=>{d[g]=f}),{data:c,headers:d,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}Gs("CapacitorHttp",{web:()=>new Ub});const ei=Gs("VoiceRecorder",{web:()=>Promise.resolve().then(function(){return Gw}).then(e=>new e.VoiceRecorderWeb)});class Hb{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0,this.timerInterval=-1}startTimer(){this.timerInterval=setInterval(()=>this.duration++,1e3)}stopTimer(){clearInterval(this.timerInterval)}async start(){let t=await ei.canDeviceVoiceRecord();if(!t.value)return this._micError("No recording device available!");if(!(await ei.requestAudioRecordingPermission()).value)return this._micError("Recording permission not granted!");t=await ei.startRecording(),this.startTimer(),this.beforeRecording&&this.beforeRecording("start recording"),this.isPause=!1,this.isRecording=!0}b64toBlob(t,n="",r=512){const o=atob(t),i=[];for(let s=0;s<o.length;s+=r){const c=o.slice(s,s+r),l=new Array(c.length);for(let f=0;f<c.length;f++)l[f]=c.charCodeAt(f);const d=new Uint8Array(l);i.push(d)}return new Blob(i,{type:n})}async stop(){this.stopTimer();const t=await ei.stopRecording(),n=t.value.recordDataBase64,r=t.value.mimeType,o={blob:this.b64toBlob(n,r),duration:t.value.msDuration};this.records.push(o),console.log("added to recording"),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(o)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration*1e3,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration*1e3,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=n=>{const r=n.inputBuffer.getChannelData(0);let o=0;this.lameEncoder&&this.lameEncoder.encode(r);for(let i=0;i<r.length;++i)o+=r[i]*r[i];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(o/r.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}function Wu(){var e=qb(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function qb(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const zb={name:"RoomFooter",components:{SvgIcon:rt,EmojiPickerContainer:Uu,RoomFiles:qy,RoomMessageReply:mb,RoomUsersTag:wb,RoomEmojis:Ab,RoomTemplatesText:Mb},directives:{clickOutside:Ro},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"wav",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new uu,emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=Wu();let t=!0;this.getTextareaRef().addEventListener("keyup",n=>{n.key==="Enter"&&!n.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!n.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){Wu()&&e||!this.getTextareaRef()||(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{this.getTextareaRef().setSelectionRange(this.cursorRangePosition,this.cursorRangePosition),this.cursorRangePosition=null}))},onChangeInput(){var e,t,n;(((e=this.getTextareaRef())==null?void 0:e.value)||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(n=this.getTextareaRef())==null?void 0:n.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var n;const t=(n=e.clipboardData)==null?void 0:n.items;t&&Array.from(t).forEach(r=>{if(r.type.includes("image")){const o=r.getAsFile();this.onFileChange([o])}})},updateActiveUpOrDown(e){this.filteredEmojis.length?this.activeUpOrDownEmojis=e:this.filteredUsersTag.length?this.activeUpOrDownUsersTag=e:this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=e)},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:n}=this.getCharPosition("/"),r=this.message.substr(n,n).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+r+this.message.substr(n,this.message.length-1),this.cursorRangePosition=t+e.text.length+r.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const n=URL.createObjectURL(t),r=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,r),size:t.size,type:t.type,extension:t.name.substring(r+1),localUrl:n});const o=await fetch(n).then(a=>a.blob());let i=this.files.find(a=>a.localUrl===n);i&&(i.blob=o,i.loading=!1,delete i.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},async toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),10);else try{await this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var n;let e=this.message.trim();if(!this.files.length&&!e||this.isFileLoading)return;this.selectedUsersTag.forEach(r=>{e=e.replace(`@${r.username}`,`<usertag>${r._id}</usertag>`)});const t=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==e||((n=this.editedMessage.files)==null?void 0:n.length)||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:e,files:t,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:e,files:t,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const n=t,r="<usertag>",o="</usertag>";[...t.matchAll(new RegExp(r,"gi"))].map(a=>a.index).forEach(a=>{const s=n.substring(a+r.length,n.indexOf(o,a)),c=this.room.users.find(l=>l._id===s);t=t.replace(`${r}${s}${o}`,`@${(c==null?void 0:c.username)||"unknown"}`),this.selectUserTag(c,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let n=t;for(;n>0&&this.message.charAt(n-1)!==e&&(this.message.charAt(n-1)!==" "||e!==":");)n--;const r=this.message.charAt(n-2),o=!r.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(n-1)===e&&(!r||r===" "||o)){const i=this.message.substring(n,t);e===":"?this.updateEmojis(i):e==="@"?this.updateShowUsersTag(i):e==="/"&&this.updateShowTemplatesText(i)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=Os(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:n,endPosition:r}=this.getCharPosition("@"),o=this.message.substr(r,r).length?"":" ";this.message=this.message.substr(0,n)+e.username+o+this.message.substr(r,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=n+e.username.length+o.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=Os(this.templatesText,"tag",e,!0)},getCharPosition(e){let n=this.getTextareaRef().selectionStart;for(;n>0&&this.message.charAt(n-1)!==e;)n--;const r=this.getTextareaRef().selectionEnd;return{position:n,endPosition:r}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(n=>n.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new Hb({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},Wb={key:0,class:"vac-icon-textarea-left"},Vb=X("div",{class:"vac-dot-audio-record"},null,-1),Kb={class:"vac-dot-audio-record-time"},Gb=["placeholder"],Yb={class:"vac-icon-textarea"},Qb={key:1},Xb=["accept"];function Zb(e,t,n,r,o,i){const a=pe("room-emojis"),s=pe("room-users-tag"),c=pe("room-templates-text"),l=pe("room-message-reply"),d=pe("room-files"),f=pe("svg-icon"),g=pe("emoji-picker-container"),y=uo("click-outside");return qt((L(),z("div",{id:"room-footer",class:Ae(["vac-room-footer",{"vac-app-box-shadow":i.shadowFooter}])},[ie(a,{"filtered-emojis":o.filteredEmojis,"select-item":o.selectEmojiItem,"active-up-or-down":o.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=_=>i.selectEmoji(_)),onActivateItem:t[1]||(t[1]=_=>o.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),ie(s,{"filtered-users-tag":o.filteredUsersTag,"select-item":o.selectUsersTagItem,"active-up-or-down":o.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=_=>i.selectUserTag(_)),onActivateItem:t[3]||(t[3]=_=>o.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),ie(c,{"filtered-templates-text":o.filteredTemplatesText,"select-item":o.selectTemplatesTextItem,"active-up-or-down":o.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=_=>i.selectTemplateText(_)),onActivateItem:t[5]||(t[5]=_=>o.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),ie(l,{room:n.room,"message-reply":o.messageReply,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onResetMessage:i.resetMessage},Fe({_:2},[_e(e.$slots,(_,A)=>({name:A,fn:ve(w=>[oe(e.$slots,A,Be(De(w)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),ie(d,{files:o.files,onRemoveFile:i.removeFile,onResetMessage:i.resetMessage},Fe({_:2},[_e(e.$slots,(_,A)=>({name:A,fn:ve(w=>[oe(e.$slots,A,Be(De(w)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),X("div",{class:Ae(["vac-box-footer",{"vac-box-footer-border":!o.files.length}])},[n.showAudio&&!o.files.length?(L(),z("div",Wb,[o.isRecording?(L(),z(Pe,{key:0},[X("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(..._)=>i.stopRecorder&&i.stopRecorder(..._))},[oe(e.$slots,"audio-stop-icon",{},()=>[ie(f,{name:"close-outline"})])]),Vb,X("div",Kb,we(i.recordedTime),1),X("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=_=>i.toggleRecorder(!1))},[oe(e.$slots,"audio-check-icon",{},()=>[ie(f,{name:"checkmark"})])])],64)):(L(),z("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=_=>i.toggleRecorder(!0))},[oe(e.$slots,"microphone-icon",{},()=>[ie(f,{name:"microphone",class:"vac-icon-microphone"})])]))])):ne("",!0),X("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:n.textMessages.TYPE_MESSAGE,class:Ae(["vac-textarea",{"vac-textarea-outline":o.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(..._)=>i.onChangeInput&&i.onChangeInput(..._)),onKeydown:[t[10]||(t[10]=Wt((..._)=>i.escapeTextarea&&i.escapeTextarea(..._),["esc"])),t[11]||(t[11]=Wt(wt((..._)=>i.selectItem&&i.selectItem(..._),["exact","prevent"]),["enter"])),t[13]||(t[13]=Wt(wt(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=Wt((..._)=>i.selectItem&&i.selectItem(..._),["tab"])),t[15]||(t[15]=Wt(wt(()=>{},["exact","prevent"]),["up"])),t[16]||(t[16]=Wt(_=>i.updateActiveUpOrDown(-1),["up"])),t[17]||(t[17]=Wt(wt(()=>{},["exact","prevent"]),["down"])),t[18]||(t[18]=Wt(_=>i.updateActiveUpOrDown(1),["down"]))],onPaste:t[12]||(t[12]=(..._)=>i.onPasteImage&&i.onPasteImage(..._))},null,42,Gb),X("div",Yb,[o.editedMessage._id?(L(),z("div",{key:0,class:"vac-svg-button",onClick:t[19]||(t[19]=(..._)=>i.resetMessage&&i.resetMessage(..._))},[oe(e.$slots,"edit-close-icon",{},()=>[ie(f,{name:"close-outline"})])])):ne("",!0),n.showEmojis?qt((L(),z("div",Qb,[oe(e.$slots,"emoji-picker",Hi({emojiOpened:o.emojiOpened},{addEmoji:i.addEmoji}),()=>[ie(g,{"emoji-opened":o.emojiOpened,"position-top":!0,onAddEmoji:i.addEmoji,onOpenEmoji:t[20]||(t[20]=_=>o.emojiOpened=_)},{"emoji-picker-icon":ve(()=>[oe(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","onAddEmoji"])])])),[[y,()=>o.emojiOpened=!1]]):ne("",!0),n.showFiles?(L(),z("div",{key:2,class:"vac-svg-button",onClick:t[21]||(t[21]=(..._)=>i.launchFilePicker&&i.launchFilePicker(..._))},[oe(e.$slots,"paperclip-icon",{},()=>[ie(f,{name:"paperclip"})])])):ne("",!0),n.textareaActionEnabled?(L(),z("div",{key:3,class:"vac-svg-button",onClick:t[22]||(t[22]=(..._)=>i.textareaActionHandler&&i.textareaActionHandler(..._))},[oe(e.$slots,"custom-action-icon",{},()=>[ie(f,{name:"deleted"})])])):ne("",!0),n.showFiles?(L(),z("input",{key:4,ref:"file",type:"file",multiple:"",accept:n.acceptedFiles,style:{display:"none"},onChange:t[23]||(t[23]=_=>i.onFileChange(_.target.files))},null,40,Xb)):ne("",!0),n.showSendIcon?(L(),z("div",{key:5,class:Ae(["vac-svg-button",{"vac-send-disabled":i.isMessageEmpty}]),onClick:t[24]||(t[24]=(..._)=>i.sendMessage&&i.sendMessage(..._))},[oe(e.$slots,"send-icon",{},()=>[ie(f,{name:"send",param:i.isMessageEmpty||i.isFileLoading?"disabled":""},null,8,["param"])])],2)):ne("",!0)])],2)],2)),[[bo,Object.keys(n.room).length&&n.showFooter]])}var Jb=ze(zb,[["render",Zb]]);const $b={name:"MessageReply",components:{AudioPlayer:Vs,SvgIcon:rt,FormatMessage:Or},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(n=>n._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return Mo(this.firstFile)},isImage(){return Wn(this.firstFile)},isVideo(){return Tr(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},e0={class:"vac-reply-message"},t0={class:"vac-reply-username"},n0={key:0,class:"vac-image-reply-container"},r0={key:1,class:"vac-video-reply-container"},o0={controls:""},i0=["src"],s0={key:3,class:"vac-file-container"},a0={class:"vac-text-ellipsis"},l0={key:0,class:"vac-text-ellipsis vac-text-extension"},c0={class:"vac-reply-content"};function u0(e,t,n,r,o,i){const a=pe("audio-player"),s=pe("svg-icon"),c=pe("format-message");return L(),z("div",e0,[X("div",t0,we(i.replyUsername),1),i.isImage?(L(),z("div",n0,[X("div",{class:"vac-message-image vac-message-image-reply",style:Le({"background-image":`url('${i.firstFile.url}')`})},null,4)])):i.isVideo?(L(),z("div",r0,[X("video",o0,[X("source",{src:i.firstFile.url},null,8,i0)])])):i.isAudio?(L(),je(a,{key:2,src:i.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=l=>e.progressTime=l),onHoverAudioProgress:t[1]||(t[1]=l=>e.hoverAudioProgress=l)},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["src"])):i.isOtherFile?(L(),z("div",s0,[X("div",null,[oe(e.$slots,"file-icon",{},()=>[ie(s,{name:"file"})])]),X("div",a0,we(i.firstFile.name),1),i.firstFile.extension?(L(),z("div",l0,we(i.firstFile.extension),1)):ne("",!0)])):ne("",!0),X("div",c0,[ie(c,{"message-id":n.message.replyMessage._id,content:n.message.replyMessage.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var d0=ze($b,[["render",u0]]);const f0={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){const r=54*Math.PI;return{radius:35,stroke:4,normalizedRadius:27,circumference:r}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},h0={ref:"progress",class:"vac-progress-wrapper"},m0=["height","width"],g0=["stroke-dasharray","stroke-width","r","cx","cy"],p0={class:"vac-progress-text"},v0=X("span",{class:"vac-progress-pourcent"},"%",-1);function y0(e,t,n,r,o,i){return L(),je(Qe,{name:"vac-fade-spinner",appear:""},{default:ve(()=>[X("div",h0,[(L(),z("svg",{height:o.radius*2,width:o.radius*2},[X("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":o.circumference+" "+o.circumference,style:Le({strokeDashoffset:i.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":o.stroke,fill:"transparent",r:o.normalizedRadius,cx:o.radius,cy:o.radius},null,12,g0)],8,m0)),X("div",{class:"vac-progress-content",style:Le({height:o.radius*2-19+"px",width:o.radius*2-19+"px"})},[X("div",p0,[Mt(we(n.progress),1),v0])],4)],512)]),_:1})}var Vu=ze(f0,[["render",y0]]);const b0={name:"MessageFile",components:{SvgIcon:rt,Loader:wo,ProgressBar:Vu},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return Wn(this.file)},isVideo(){return Tr(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!Wn(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},w0={class:"vac-message-file-container"},k0={key:0,class:"vac-image-buttons"},x0={controls:""},_0=["src"];function A0(e,t,n,r,o,i){const a=pe("progress-bar"),s=pe("loader"),c=pe("svg-icon");return L(),z("div",w0,[i.isImage?(L(),z("div",{key:0,ref:"imageRef"+n.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=l=>o.imageHover=!0),onMouseleave:t[3]||(t[3]=l=>o.imageHover=!1),onClick:t[4]||(t[4]=l=>i.openFile(l,"preview"))},[n.file.progress>=0?(L(),je(a,{key:0,progress:n.file.progress,style:Le({top:`${o.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(L(),je(s,{key:1,show:i.isImageLoading,type:"message-file","message-id":n.message._id,style:Le({top:`${o.imageResponsive.loaderTop}px`})},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["show","message-id","style"])),X("div",{class:Ae(["vac-message-image",{"vac-blur-loading":i.isImageLoading&&n.message.senderId===n.currentUserId}]),style:Le({"background-image":`url('${i.isImageLoading&&n.file.preview||n.file.url}')`,"max-height":`${o.imageResponsive.maxHeight}px`})},[ie(Qe,{name:"vac-fade-image"},{default:ve(()=>[!n.messageSelectionEnabled&&o.imageHover&&!i.isImageLoading?(L(),z("div",k0,[X("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=l=>i.openFile(l,"preview"))},[oe(e.$slots,"eye-icon_"+n.message._id,{},()=>[ie(c,{name:"eye"})])]),X("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=l=>i.openFile(l,"download"))},[oe(e.$slots,"document-icon_"+n.message._id,{},()=>[ie(c,{name:"document"})])])])):ne("",!0)]),_:3})],6)],544)):i.isVideo?(L(),z("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=wt(l=>i.openFile(l,"preview"),["prevent"]))},[n.file.progress>=0?(L(),je(a,{key:0,progress:n.file.progress},null,8,["progress"])):ne("",!0),X("video",x0,[X("source",{src:n.file.url},null,8,_0)])])):ne("",!0)])}var E0=ze(b0,[["render",A0]]);const C0={name:"MessageFiles",components:{SvgIcon:rt,FormatMessage:Or,ProgressBar:Vu,MessageFile:E0},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>pc(e))},otherFiles(){return this.message.files.filter(e=>!pc(e))}},methods:{openFile(e,t,n){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:n}))}}},O0={class:"vac-message-files-container"},S0=["onClick"],T0={class:"vac-svg-button"},R0={class:"vac-text-ellipsis"},M0={key:0,class:"vac-text-ellipsis vac-text-extension"};function P0(e,t,n,r,o,i){const a=pe("message-file"),s=pe("progress-bar"),c=pe("svg-icon"),l=pe("format-message");return L(),z("div",O0,[(L(!0),z(Pe,null,_e(i.imageVideoFiles,(d,f)=>(L(),z("div",{key:f+"iv"},[ie(a,{file:d,"current-user-id":n.currentUserId,message:n.message,index:f,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=g=>e.$emit("open-file",g))},Fe({_:2},[_e(e.$slots,(g,y)=>({name:y,fn:ve(_=>[oe(e.$slots,y,Be(De(_)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(L(!0),z(Pe,null,_e(i.otherFiles,(d,f)=>(L(),z("div",{key:f+"a",class:"vac-file-wrapper"},[d.progress>=0?(L(),je(s,{key:0,progress:d.progress,style:{top:"44px"}},null,8,["progress"])):ne("",!0),X("div",{class:Ae(["vac-file-container",{"vac-file-container-progress":d.progress>=0}]),onClick:g=>i.openFile(g,d,"download")},[X("div",T0,[oe(e.$slots,"document-icon",{},()=>[ie(c,{name:"document"})])]),X("div",R0,we(d.name),1),d.extension?(L(),z("div",M0,we(d.extension),1)):ne("",!0)],10,S0)]))),128)),ie(l,{"message-id":n.message._id,content:n.message.content,users:n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:t[1]||(t[1]=d=>e.$emit("open-user-tag",d))},null,8,["message-id","content","users","text-formatting","link-options"])])}var I0=ze(C0,[["render",P0]]);const L0={name:"MessageActions",components:{SvgIcon:rt,EmojiPickerContainer:Uu},directives:{clickOutside:Ro},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,n=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-n>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},j0={class:"vac-message-actions-wrapper"},N0={key:"3"},D0={class:"vac-menu-list"},B0=["onClick"];function F0(e,t,n,r,o,i){const a=pe("svg-icon"),s=pe("emoji-picker-container"),c=uo("click-outside");return L(),z("div",j0,[X("div",{class:"vac-options-container",style:Le({display:n.hoverAudioProgress?"none":"initial",width:i.filteredMessageActions.length&&n.showReactionEmojis?"70px":"45px"})},[ie(Xi,{name:"vac-slide-left",tag:"span"},{default:ve(()=>[i.isMessageActions||i.isMessageReactions?(L(),z("div",{key:"1",class:Ae(["vac-blur-container",{"vac-options-me":n.message.senderId===n.currentUserId}])},null,2)):ne("",!0),i.isMessageActions?(L(),z("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...l)=>i.openOptions&&i.openOptions(...l))},[oe(e.$slots,"dropdown-icon_"+n.message._id,{},()=>[ie(a,{name:"dropdown",param:"message"})])],512)):ne("",!0),i.isMessageReactions?qt((L(),z("div",N0,[oe(e.$slots,"emoji-picker",Hi({emojiOpened:o.emojiOpened},{addEmoji:i.sendMessageReaction}),()=>[ie(s,{class:"vac-message-emojis",style:Le({right:i.isMessageActions?"30px":"5px"}),"emoji-opened":o.emojiOpened,"emoji-reaction":!0,"position-right":n.message.senderId===n.currentUserId,"message-id":n.message._id,onAddEmoji:i.sendMessageReaction,onOpenEmoji:i.openEmoji},Fe({_:2},[_e(e.$slots,(l,d)=>({name:d,fn:ve(f=>[oe(e.$slots,d,Be(De(f)))])}))]),1032,["style","emoji-opened","position-right","message-id","onAddEmoji","onOpenEmoji"])])])),[[c,i.closeEmoji]]):ne("",!0)]),_:3})],4),i.filteredMessageActions.length?(L(),je(Qe,{key:0,name:n.message.senderId===n.currentUserId?"vac-slide-left":"vac-slide-right"},{default:ve(()=>[o.optionsOpened?qt((L(),z("div",{key:0,ref:"menuOptions",class:Ae(["vac-menu-options",{"vac-menu-left":n.message.senderId!==n.currentUserId}]),style:Le({top:`${o.menuOptionsTop}px`})},[X("div",D0,[(L(!0),z(Pe,null,_e(i.filteredMessageActions,l=>(L(),z("div",{key:l.name},[X("div",{class:"vac-menu-item",onClick:d=>i.messageActionHandler(l)},we(l.title),9,B0)]))),128))])],6)),[[c,i.closeOptions]]):ne("",!0)]),_:1},8,["name"])):ne("",!0)])}var U0=ze(L0,[["render",F0]]);const H0={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},q0=["onClick"];function z0(e,t,n,r,o,i){return n.message.deleted?ne("",!0):(L(),je(Xi,{key:0,name:"vac-slide-left",tag:"span"},{default:ve(()=>[(L(!0),z(Pe,null,_e(n.message.reactions,(a,s)=>qt((L(),z("button",{key:s+0,class:Ae(["vac-button-reaction",{"vac-reaction-me":a.indexOf(n.currentUserId)!==-1}]),style:Le({float:n.message.senderId===n.currentUserId?"right":"left"}),onClick:c=>i.sendMessageReaction({unicode:s},a)},[Mt(we(s),1),X("span",null,we(a.length),1)],14,q0)),[[bo,a.length]])),128))]),_:1}))}var W0=ze(H0,[["render",z0]]);function V0(e){if(!((r,o)=>o.every(i=>{let a=!1;return(i.type[0]==="array"&&Array.isArray(r[i.key])||i.type.find(s=>s===typeof r[i.key]))&&(a=!0),a&&Qs(r,i.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain roomId[String, Number], roomName[String] and users[Array]")}function K0(e){if(!((r,o)=>o.every(i=>i.type.find(s=>s===typeof r[i.key])&&Qs(r,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain _id[String, Number] and username[String]")}function G0(e){if(!((r,o)=>o.every(i=>i.type.find(s=>s===typeof r[i.key])&&Qs(r,i.key)))(e,[{key:"_id",type:["string","number"]},{key:"content",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain _id[String, Number], content[String, Number] and senderId[String, Number]")}function Qs(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const Y0={name:"RoomMessage",components:{SvgIcon:rt,FormatMessage:Or,AudioPlayer:Vs,MessageReply:d0,MessageFiles:I0,MessageActions:U0,MessageReactions:W0},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>Mo(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,n)=>n.index<t.index?n:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){G0(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},Q0=["id"],X0={key:0,class:"vac-card-info vac-card-date"},Z0={key:1,class:"vac-line-new"},J0={key:2,class:"vac-card-info vac-card-system"},$0={key:1,class:"vac-avatar-offset"},ew={key:0,class:"vac-progress-time"},tw={class:"vac-text-timestamp"},nw={key:0,class:"vac-icon-edited"},rw={key:1},ow=[X("div",{class:"vac-failure-text"},"!",-1)],iw={key:3,class:"vac-avatar-current-offset"};function sw(e,t,n,r,o,i){const a=pe("format-message"),s=pe("message-reply"),c=pe("message-files"),l=pe("audio-player"),d=pe("svg-icon"),f=pe("message-actions"),g=pe("message-reactions");return L(),z("div",{id:n.message._id,ref:"message",class:"vac-message-wrapper"},[i.showDate?(L(),z("div",X0,we(n.message.date),1)):ne("",!0),o.newMessage._id===n.message._id?(L(),z("div",Z0,we(n.textMessages.NEW_MESSAGES),1)):ne("",!0),n.message.system?(L(),z("div",J0,[oe(e.$slots,"message_"+n.message._id,{},()=>[ie(a,{"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-messages":n.textMessages,"text-formatting":n.textFormatting,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(L(),z("div",{key:3,class:Ae(["vac-message-box",{"vac-offset-current":n.message.senderId===n.currentUserId}]),onClick:t[8]||(t[8]=(...y)=>i.selectMessage&&i.selectMessage(...y))},[oe(e.$slots,"message_"+n.message._id,{},()=>[n.message.avatar&&n.message.senderId!==n.currentUserId?oe(e.$slots,"message-avatar_"+n.message._id,{key:0},()=>[X("div",{class:"vac-avatar",style:Le({"background-image":`url('${n.message.avatar}')`})},null,4)]):ne("",!0),i.hasSenderUserAvatar&&!n.message.avatar?(L(),z("div",$0)):ne("",!0),X("div",{class:Ae(["vac-message-container",{"vac-message-container-offset":i.messageOffset}])},[X("div",{class:Ae(["vac-message-card",{"vac-message-highlight":i.isMessageHover,"vac-message-current":n.message.senderId===n.currentUserId,"vac-message-deleted":n.message.deleted,"vac-item-clickable":n.messageSelectionEnabled,"vac-message-selected":i.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...y)=>i.onHoverMessage&&i.onHoverMessage(...y)),onMouseleave:t[6]||(t[6]=(...y)=>i.onLeaveMessage&&i.onLeaveMessage(...y))},[i.showUsername?(L(),z("div",{key:0,class:Ae(["vac-text-username",{"vac-username-reply":!n.message.deleted&&n.message.replyMessage}])},[X("span",null,we(n.message.username),1)],2)):ne("",!0),!n.message.deleted&&n.message.replyMessage?(L(),je(s,{key:1,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["message","room-users","text-formatting","link-options"])):ne("",!0),!!n.message.deleted||!n.message.files||!n.message.files.length?(L(),je(a,{key:2,"message-id":n.message._id,content:n.message.content,deleted:!!n.message.deleted,users:n.roomUsers,"text-formatting":n.textFormatting,"text-messages":n.textMessages,"link-options":n.linkOptions,onOpenUserTag:i.openUserTag},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!i.isAudio||n.message.files.length>1?(L(),je(c,{key:3,"current-user-id":n.currentUserId,message:n.message,"room-users":n.roomUsers,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"message-selection-enabled":n.messageSelectionEnabled,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(L(),z(Pe,{key:4},[ie(l,{"message-id":n.message._id,src:n.message.files[0].url,"message-selection-enabled":n.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=y=>o.progressTime=y),onHoverAudioProgress:t[1]||(t[1]=y=>o.hoverAudioProgress=y)},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["message-id","src","message-selection-enabled"]),n.message.deleted?ne("",!0):(L(),z("div",ew,we(o.progressTime),1))],64)),X("div",tw,[n.message.edited&&!n.message.deleted?(L(),z("div",nw,[oe(e.$slots,"pencil-icon_"+n.message._id,{},()=>[ie(d,{name:"pencil"})])])):ne("",!0),X("span",null,we(n.message.timestamp),1),i.isCheckmarkVisible?(L(),z("span",rw,[oe(e.$slots,"checkmark-icon_"+n.message._id,{},()=>[ie(d,{name:n.message.distributed?"double-checkmark":"checkmark",param:n.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):ne("",!0)]),ie(f,{"current-user-id":n.currentUserId,message:n.message,"message-actions":n.messageActions,"show-reaction-emojis":n.showReactionEmojis,"message-hover":o.messageHover,"hover-message-id":o.hoverMessageId,"hover-audio-progress":o.hoverAudioProgress,onUpdateMessageHover:t[2]||(t[2]=y=>o.messageHover=y),onUpdateOptionsOpened:t[3]||(t[3]=y=>o.optionsOpened=y),onUpdateEmojiOpened:t[4]||(t[4]=y=>o.emojiOpened=y),onMessageActionHandler:i.messageActionHandler,onSendMessageReaction:i.sendMessageReaction},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","onMessageActionHandler","onSendMessageReaction"])],34),ie(g,{"current-user-id":n.currentUserId,message:n.message,onSendMessageReaction:i.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),oe(e.$slots,"message-failure_"+n.message._id,{},()=>[n.message.failure&&n.message.senderId===n.currentUserId?(L(),z("div",{key:0,class:Ae(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":n.message.avatar&&n.message.senderId===n.currentUserId}]),onClick:t[7]||(t[7]=y=>e.$emit("open-failed-message",{message:n.message}))},ow,2)):ne("",!0)]),n.message.avatar&&n.message.senderId===n.currentUserId?oe(e.$slots,"message-avatar_"+n.message._id,{key:2},()=>[X("div",{class:"vac-avatar vac-avatar-current",style:Le({"background-image":`url('${n.message.avatar}')`})},null,4)]):ne("",!0),i.hasCurrentUserAvatar&&!n.message.avatar?(L(),z("div",iw)):ne("",!0)])],2))],8,Q0)}var aw=ze(Y0,[["render",sw]]);const lw={name:"ChatRoom",components:{Loader:wo,SvgIcon:rt,RoomHeader:Zp,RoomFooter:Jb,RoomMessage:aw},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((n,r)=>{this.showNewMessagesDivider&&!n.seen&&n.senderId!==this.currentUserId&&this.newMessages.push({_id:n._id,index:r})}),(t==null?void 0:t.length)===(e==null?void 0:e.length)-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("infinite-loader-messages");if(e){const t={root:document.querySelector("vue-advanced-chat").shadowRoot.getElementById("messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(n=>{n[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,n=new ResizeObserver(o=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),n.disconnect())});for(var r=0;r<e.children.length;r++)n.observe(e.children[r])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY;addEventListener("touchend",r=>this.touchEnd(r,t,n),{once:!0})}},touchEnd(e,t,n){if(e.changedTouches.length===1){const r=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY,i=r-t>100,a=Math.abs(o-n)>50;i&&!a&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const n=this.$refs.scrollContainer;!n||(e(),setTimeout(()=>{n.scrollTo({top:n.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:n}){if(t!==this.messages.length-1)return;const r=n.offsetHeight+60;setTimeout(()=>{const o=this.getBottomScroll(this.$refs.scrollContainer)>r;e.senderId===this.currentUserId?o?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():o?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:n,scrollTop:r}=e;return t-n-r},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth"))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.droppedFiles=e.dataTransfer.files}}},cw={class:"vac-container-center vac-room-empty"},uw={class:"vac-messages-container"},dw={key:0,class:"vac-text-started"},fw={key:1,class:"vac-text-started"},hw={key:0,id:"infinite-loader-messages"},mw={key:2},gw={key:0,class:"vac-badge-counter vac-messages-count"};function pw(e,t,n,r,o,i){const a=pe("room-header"),s=pe("loader"),c=pe("room-message"),l=pe("svg-icon"),d=pe("room-footer");return qt((L(),z("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=wt((...f)=>i.onDropFiles&&i.onDropFiles(...f),["prevent"])),onDragenter:t[13]||(t[13]=wt(()=>{},["prevent"])),onDragover:t[14]||(t[14]=wt(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=wt(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...f)=>i.touchStart&&i.touchStart(...f))},[i.showNoRoom?oe(e.$slots,"no-room-selected",{key:0},()=>[X("div",cw,[X("div",null,we(n.textMessages.ROOM_EMPTY),1)])]):(L(),je(a,{key:1,"current-user-id":n.currentUserId,"text-messages":n.textMessages,"single-room":n.singleRoom,"show-rooms-list":n.showRoomsList,"is-mobile":n.isMobile,"room-info-enabled":n.roomInfoEnabled,"menu-actions":n.menuActions,room:i.room,"message-selection-enabled":o.messageSelectionEnabled,"message-selection-actions":n.messageSelectionActions,"selected-messages-total":o.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=f=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=f=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=f=>e.$emit("menu-action-handler",f)),onMessageSelectionActionHandler:i.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=f=>o.messageSelectionEnabled=!1)},Fe({_:2},[_e(e.$slots,(f,g)=>({name:g,fn:ve(y=>[oe(e.$slots,g,Be(De(y)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),X("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...f)=>i.onContainerScroll&&i.onContainerScroll(...f))},[ie(s,{show:o.loadingMessages,type:"messages"},Fe({_:2},[_e(e.$slots,(f,g)=>({name:g,fn:ve(y=>[oe(e.$slots,g,Be(De(y)))])}))]),1032,["show"]),X("div",uw,[X("div",{class:Ae({"vac-messages-hidden":o.loadingMessages})},[ie(Qe,{name:"vac-fade-message"},{default:ve(()=>[X("div",null,[i.showNoMessages?(L(),z("div",dw,[oe(e.$slots,"messages-empty",{},()=>[Mt(we(n.textMessages.MESSAGES_EMPTY),1)])])):ne("",!0),i.showMessagesStarted?(L(),z("div",fw,we(n.textMessages.CONVERSATION_STARTED)+" "+we(n.messages[0].date),1)):ne("",!0)])]),_:3}),n.messages.length&&!n.messagesLoaded?(L(),z("div",hw,[ie(s,{show:!0,infinite:!0,type:"infinite-messages"},Fe({_:2},[_e(e.$slots,(f,g)=>({name:g,fn:ve(y=>[oe(e.$slots,g,Be(De(y)))])}))]),1024)])):ne("",!0),(L(),je(Xi,{key:n.roomId,name:"vac-fade-message",tag:"span"},{default:ve(()=>[(L(!0),z(Pe,null,_e(n.messages,(f,g)=>(L(),z("div",{key:f.indexId||f._id},[ie(c,{"current-user-id":n.currentUserId,message:f,index:g,messages:n.messages,"edited-message-id":o.editedMessageId,"message-actions":n.messageActions,"room-users":i.room.users,"text-messages":n.textMessages,"new-messages":o.newMessages,"show-reaction-emojis":n.showReactionEmojis,"show-new-messages-divider":n.showNewMessagesDivider,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"username-options":n.usernameOptions,"message-selection-enabled":o.messageSelectionEnabled,"selected-messages":o.selectedMessages,onMessageAdded:i.onMessageAdded,onMessageActionHandler:i.messageActionHandler,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:t[4]||(t[4]=y=>e.$emit("open-failed-message",y)),onSendMessageReaction:i.sendMessageReaction,onSelectMessage:i.selectMessage,onUnselectMessage:i.unselectMessage},Fe({_:2},[_e(e.$slots,(y,_)=>({name:_,fn:ve(A=>[oe(e.$slots,_,Be(De(A)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),o.loadingMessages?ne("",!0):(L(),z("div",mw,[ie(Qe,{name:"vac-bounce"},{default:ve(()=>[o.scrollIcon?(L(),z("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...f)=>i.scrollToBottom&&i.scrollToBottom(...f))},[ie(Qe,{name:"vac-bounce"},{default:ve(()=>[o.scrollMessagesCount?(L(),z("div",gw,we(o.scrollMessagesCount),1)):ne("",!0)]),_:1}),oe(e.$slots,"scroll-icon",{},()=>[ie(l,{name:"dropdown",param:"scroll"})])])):ne("",!0)]),_:3})])),ie(d,{room:i.room,"room-id":n.roomId,"room-message":n.roomMessage,"text-messages":n.textMessages,"show-send-icon":n.showSendIcon,"show-files":n.showFiles,"show-audio":n.showAudio,"show-emojis":n.showEmojis,"show-footer":n.showFooter,"accepted-files":n.acceptedFiles,"textarea-action-enabled":n.textareaActionEnabled,"textarea-auto-focus":n.textareaAutoFocus,"user-tags-enabled":n.userTagsEnabled,"emojis-suggestion-enabled":n.emojisSuggestionEnabled,"templates-text":n.templatesText,"text-formatting":n.textFormatting,"link-options":n.linkOptions,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"init-reply-message":o.initReplyMessage,"init-edit-message":o.initEditMessage,"dropped-files":o.droppedFiles,onUpdateEditedMessageId:t[7]||(t[7]=f=>o.editedMessageId=f),onEditMessage:t[8]||(t[8]=f=>e.$emit("edit-message",f)),onSendMessage:t[9]||(t[9]=f=>e.$emit("send-message",f)),onTypingMessage:t[10]||(t[10]=f=>e.$emit("typing-message",f)),onTextareaActionHandler:t[11]||(t[11]=f=>e.$emit("textarea-action-handler",f))},Fe({_:2},[_e(e.$slots,(f,g)=>({name:g,fn:ve(y=>[oe(e.$slots,g,Be(De(y)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files"])],544)),[[bo,n.isMobile&&!n.showRoomsList||!n.isMobile||n.singleRoom]])}var vw=ze(lw,[["render",pw]]);const yw={name:"MediaPreview",components:{SvgIcon:rt},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return Wn(this.file)},isVideo(){return Tr(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},bw={key:0,class:"vac-media-preview-container"},ww={key:1,class:"vac-media-preview-container"},kw={controls:"",autoplay:""},xw=["src"],_w={class:"vac-svg-button"};function Aw(e,t,n,r,o,i){const a=pe("svg-icon");return L(),z("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=wt((...s)=>i.closeModal&&i.closeModal(...s),["stop"])),onKeydown:t[1]||(t[1]=Wt((...s)=>i.closeModal&&i.closeModal(...s),["esc"]))},[ie(Qe,{name:"vac-bounce-preview",appear:""},{default:ve(()=>[i.isImage?(L(),z("div",bw,[X("div",{class:"vac-image-preview",style:Le({"background-image":`url('${n.file.url}')`})},null,4)])):i.isVideo?(L(),z("div",ww,[X("video",kw,[X("source",{src:n.file.url},null,8,xw)])])):ne("",!0)]),_:1}),X("div",_w,[oe(e.$slots,"preview-close-icon",{},()=>[ie(a,{name:"close-outline",param:"preview"})])])],544)}var Ew=ze(yw,[["render",Aw]]),Cw={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const Ow={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorMe:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",colorTimestampMe:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},Sw=({general:e,container:t,header:n,footer:r,sidemenu:o,content:i,dropdown:a,message:s,markdown:c,room:l,emoji:d,icons:f})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":n.background,"--chat-header-color-name":n.colorRoomName,"--chat-header-color-info":n.colorRoomInfo,"--chat-footer-bg-color":r.background,"--chat-border-style-input":r.borderStyleInput,"--chat-border-color-input-selected":r.borderInputSelected,"--chat-footer-bg-color-reply":r.backgroundReply,"--chat-footer-bg-color-tag-active":r.backgroundTagActive,"--chat-footer-bg-color-tag":r.backgroundTag,"--chat-content-bg-color":i.background,"--chat-sidemenu-bg-color":o.background,"--chat-sidemenu-bg-color-hover":o.backgroundHover,"--chat-sidemenu-bg-color-active":o.backgroundActive,"--chat-sidemenu-color-active":o.colorActive,"--chat-sidemenu-border-color-search":o.borderColorSearch,"--chat-dropdown-bg-color":a.background,"--chat-dropdown-bg-color-hover":a.backgroundHover,"--chat-message-bg-color":s.background,"--chat-message-bg-color-me":s.backgroundMe,"--chat-message-color-started":s.colorStarted,"--chat-message-bg-color-deleted":s.backgroundDeleted,"--chat-message-bg-color-selected":s.backgroundSelected,"--chat-message-color-deleted":s.colorDeleted,"--chat-message-color-username":s.colorUsername,"--chat-message-color-timestamp":s.colorTimestamp,"--chat-message-color-timestamp-me":s.colorTimestampMe,"--chat-message-bg-color-date":s.backgroundDate,"--chat-message-color-date":s.colorDate,"--chat-message-bg-color-system":s.backgroundSystem,"--chat-message-color-system":s.colorSystem,"--chat-message-color":s.color,"--chat-message-color-me":s.colorMe,"--chat-message-bg-color-media":s.backgroundMedia,"--chat-message-bg-color-reply":s.backgroundReply,"--chat-message-color-reply-username":s.colorReplyUsername,"--chat-message-color-reply-content":s.colorReply,"--chat-message-color-tag":s.colorTag,"--chat-message-bg-color-image":s.backgroundImage,"--chat-message-color-new-messages":s.colorNewMessages,"--chat-message-bg-color-scroll-counter":s.backgroundScrollCounter,"--chat-message-color-scroll-counter":s.colorScrollCounter,"--chat-message-bg-color-reaction":s.backgroundReaction,"--chat-message-border-style-reaction":s.borderStyleReaction,"--chat-message-bg-color-reaction-hover":s.backgroundReactionHover,"--chat-message-border-style-reaction-hover":s.borderStyleReactionHover,"--chat-message-color-reaction-counter":s.colorReactionCounter,"--chat-message-bg-color-reaction-me":s.backgroundReactionMe,"--chat-message-border-style-reaction-me":s.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":s.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":s.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":s.colorReactionCounterMe,"--chat-message-bg-color-audio-record":s.backgroundAudioRecord,"--chat-message-bg-color-audio-line":s.backgroundAudioLine,"--chat-message-bg-color-audio-progress":s.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":s.backgroundAudioProgressSelector,"--chat-message-color-file-extension":s.colorFileExtension,"--chat-markdown-bg":c.background,"--chat-markdown-border":c.border,"--chat-markdown-color":c.color,"--chat-markdown-color-multi":c.colorMulti,"--chat-room-color-username":l.colorUsername,"--chat-room-color-message":l.colorMessage,"--chat-room-color-timestamp":l.colorTimestamp,"--chat-room-color-online":l.colorStateOnline,"--chat-room-color-offline":l.colorStateOffline,"--chat-room-bg-color-badge":l.backgroundCounterBadge,"--chat-room-color-badge":l.colorCounterBadge,"--chat-emoji-bg-color":d.background,"--chat-icon-color-search":f.search,"--chat-icon-color-add":f.add,"--chat-icon-color-toggle":f.toggle,"--chat-icon-color-menu":f.menu,"--chat-icon-color-close":f.close,"--chat-icon-color-close-image":f.closeImage,"--chat-icon-color-file":f.file,"--chat-icon-color-paperclip":f.paperclip,"--chat-icon-color-close-outline":f.closeOutline,"--chat-icon-color-close-preview":f.closePreview,"--chat-icon-color-send":f.send,"--chat-icon-color-send-disabled":f.sendDisabled,"--chat-icon-color-emoji":f.emoji,"--chat-icon-color-emoji-reaction":f.emojiReaction,"--chat-icon-color-document":f.document,"--chat-icon-color-pencil":f.pencil,"--chat-icon-color-checkmark":f.checkmark,"--chat-icon-color-checkmark-seen":f.checkmarkSeen,"--chat-icon-color-eye":f.eye,"--chat-icon-color-dropdown-message":f.dropdownMessage,"--chat-icon-bg-dropdown-message":f.dropdownMessageBackground,"--chat-icon-color-dropdown-room":f.dropdownRoom,"--chat-icon-color-dropdown-scroll":f.dropdownScroll,"--chat-icon-color-microphone":f.microphone,"--chat-icon-color-audio-play":f.audioPlay,"--chat-icon-color-audio-pause":f.audioPause,"--chat-icon-color-audio-cancel":f.audioCancel,"--chat-icon-color-audio-confirm":f.audioConfirm});var Tw=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-bold{font-weight:700}.vac-text-italic{font-style:italic}.vac-text-strike{text-decoration:line-through}.vac-text-underline{text-decoration:underline}.vac-text-inline-code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-text-multiline-code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:absolute;display:flex;align-items:center;height:64px;width:100%;z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{height:20px;width:100%;line-height:20px;overflow:hidden;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;cursor:pointer;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-message-current{color:var(--chat-message-color-me)!important;background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-current .vac-text-timestamp{color:var(--chat-message-color-timestamp-me)!important}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{color:var(--chat-message-color-me);background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const Rw={name:"ChatContainer",components:{RoomsList:jp,Room:vw,MediaPreview:Ew},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:44100},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1,italic:"_",bold:"*",strike:"~",underline:"\xB0",multilineCode:"```",inlineCode:"`"})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...Cw,...this.textMessagesCasted}},cssVars(){const e=Ow[this.theme],t={};return Object.keys(e).map(n=>{t[n]={...e[n],...this.stylesCasted[n]||{}}}),Sw(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const n=e.index||0,r=t.index||0;return this.roomsOrder==="asc"?n<r?-1:r<n?1:0:n>r?-1:r>n?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(n=>n.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const n=e.find(r=>r.roomId===this.roomId)||{};this.fetchRoom({room:n})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const n=this.roomsCasted.find(r=>r.roomId===e);this.fetchRoom({room:n})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(V0(e),e.users.forEach(t=>{K0(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},Mw={class:"vac-chat-container"};function Pw(e,t,n,r,o,i){const a=pe("rooms-list"),s=pe("room"),c=pe("media-preview");return L(),z("div",{class:"vac-card-window",style:Le([{height:n.height},i.cssVars])},[X("div",Mw,[i.singleRoomCasted?ne("",!0):(L(),je(a,{key:0,"current-user-id":n.currentUserId,rooms:i.orderedRooms,"loading-rooms":i.loadingRoomsCasted,"rooms-loaded":i.roomsLoadedCasted,room:o.room,"room-actions":i.roomActionsCasted,"custom-search-room-enabled":n.customSearchRoomEnabled,"text-messages":i.t,"show-search":i.showSearchCasted,"show-add-room":i.showAddRoomCasted,"show-rooms-list":o.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":o.isMobile,"scroll-distance":n.scrollDistance,onFetchRoom:i.fetchRoom,onFetchMoreRooms:i.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=l=>o.loadingMoreRooms=l),onAddRoom:i.addRoom,onSearchRoom:i.searchRoom,onRoomActionHandler:i.roomActionHandler},Fe({_:2},[_e(o.slots,l=>({name:l.slot,fn:ve(d=>[oe(e.$slots,l.slot,Be(De(d)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),ie(s,{"current-user-id":n.currentUserId,rooms:i.roomsCasted,"room-id":o.room.roomId||"","load-first-room":i.loadFirstRoomCasted,messages:i.messagesCasted,"room-message":n.roomMessage,"messages-loaded":i.messagesLoadedCasted,"menu-actions":i.menuActionsCasted,"message-actions":i.messageActionsCasted,"message-selection-actions":i.messageSelectionActionsCasted,"auto-scroll":i.autoScrollCasted,"show-send-icon":i.showSendIconCasted,"show-files":i.showFilesCasted,"show-audio":i.showAudioCasted,"audio-bit-rate":n.audioBitRate,"audio-sample-rate":n.audioSampleRate,"show-emojis":i.showEmojisCasted,"show-reaction-emojis":i.showReactionEmojisCasted,"show-new-messages-divider":i.showNewMessagesDividerCasted,"show-footer":i.showFooterCasted,"text-messages":i.t,"single-room":i.singleRoomCasted,"show-rooms-list":o.showRoomsList&&i.roomsListOpenedCasted,"text-formatting":i.textFormattingCasted,"link-options":i.linkOptionsCasted,"is-mobile":o.isMobile,"loading-rooms":i.loadingRoomsCasted,"room-info-enabled":i.roomInfoEnabledCasted,"textarea-action-enabled":i.textareaActionEnabledCasted,"textarea-auto-focus":i.textareaAutoFocusCasted,"user-tags-enabled":i.userTagsEnabledCasted,"emojis-suggestion-enabled":i.emojisSuggestionEnabledCasted,"scroll-distance":n.scrollDistance,"accepted-files":n.acceptedFiles,"templates-text":i.templatesTextCasted,"username-options":i.usernameOptionsCasted,onToggleRoomsList:i.toggleRoomsList,onRoomInfo:i.roomInfo,onFetchMessages:i.fetchMessages,onSendMessage:i.sendMessage,onEditMessage:i.editMessage,onDeleteMessage:i.deleteMessage,onOpenFile:i.openFile,onOpenUserTag:i.openUserTag,onOpenFailedMessage:i.openFailedMessage,onMenuActionHandler:i.menuActionHandler,onMessageActionHandler:i.messageActionHandler,onMessageSelectionActionHandler:i.messageSelectionActionHandler,onSendMessageReaction:i.sendMessageReaction,onTypingMessage:i.typingMessage,onTextareaActionHandler:i.textareaActionHandler},Fe({_:2},[_e(o.slots,l=>({name:l.slot,fn:ve(d=>[oe(e.$slots,l.slot,Be(De(d)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","templates-text","username-options","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),ie(Qe,{name:"vac-fade-preview",appear:""},{default:ve(()=>[o.showMediaPreview?(L(),je(c,{key:0,file:o.previewFile,onCloseMediaPreview:t[1]||(t[1]=l=>o.showMediaPreview=!1)},Fe({_:2},[_e(o.slots,l=>({name:l.slot,fn:ve(d=>[oe(e.$slots,l.slot,Be(De(d)))])}))]),1032,["file"])):ne("",!0)]),_:3})],4)}var Iw=ze(Rw,[["render",Pw],["styles",[Tw]]]);const Ku=fh(Iw),Gu="vue-advanced-chat";function Lw(){customElements.get(Gu)||customElements.define(Gu,Ku)}var Yu={};function jw(e){return e&&e.__esModule?e:{default:e}}var Nw=jw,Qu={exports:{}};(function(e){var t=function(n){var r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(u,v,S){u[v]=S.value},a,s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function f(u,v,S){return Object.defineProperty(u,v,{value:S,enumerable:!0,configurable:!0,writable:!0}),u[v]}try{f({},"")}catch{f=function(v,S,W){return v[S]=W}}function g(u,v,S,W){var F=v&&v.prototype instanceof I?v:I,re=Object.create(F.prototype),ue=new m(W||[]);return i(re,"_invoke",{value:h(u,S,ue)}),re}n.wrap=g;function y(u,v,S){try{return{type:"normal",arg:u.call(v,S)}}catch(W){return{type:"throw",arg:W}}}var _="suspendedStart",A="suspendedYield",w="executing",T="completed",O={};function I(){}function K(){}function Q(){}var D={};f(D,c,function(){return this});var j=Object.getPrototypeOf,M=j&&j(j(E([])));M&&M!==r&&o.call(M,c)&&(D=M);var N=Q.prototype=I.prototype=Object.create(D);K.prototype=Q,i(N,"constructor",{value:Q,configurable:!0}),i(Q,"constructor",{value:K,configurable:!0}),K.displayName=f(Q,d,"GeneratorFunction");function H(u){["next","throw","return"].forEach(function(v){f(u,v,function(S){return this._invoke(v,S)})})}n.isGeneratorFunction=function(u){var v=typeof u=="function"&&u.constructor;return v?v===K||(v.displayName||v.name)==="GeneratorFunction":!1},n.mark=function(u){return Object.setPrototypeOf?Object.setPrototypeOf(u,Q):(u.__proto__=Q,f(u,d,"GeneratorFunction")),u.prototype=Object.create(N),u},n.awrap=function(u){return{__await:u}};function P(u,v){function S(re,ue,le,ge){var Ce=y(u[re],u,ue);if(Ce.type==="throw")ge(Ce.arg);else{var Se=Ce.arg,Ne=Se.value;return Ne&&typeof Ne=="object"&&o.call(Ne,"__await")?v.resolve(Ne.__await).then(function(xe){S("next",xe,le,ge)},function(xe){S("throw",xe,le,ge)}):v.resolve(Ne).then(function(xe){Se.value=xe,le(Se)},function(xe){return S("throw",xe,le,ge)})}}var W;function F(re,ue){function le(){return new v(function(ge,Ce){S(re,ue,ge,Ce)})}return W=W?W.then(le,le):le()}i(this,"_invoke",{value:F})}H(P.prototype),f(P.prototype,l,function(){return this}),n.AsyncIterator=P,n.async=function(u,v,S,W,F){F===void 0&&(F=Promise);var re=new P(g(u,v,S,W),F);return n.isGeneratorFunction(v)?re:re.next().then(function(ue){return ue.done?ue.value:re.next()})};function h(u,v,S){var W=_;return function(re,ue){if(W===w)throw new Error("Generator is already running");if(W===T){if(re==="throw")throw ue;return b()}for(S.method=re,S.arg=ue;;){var le=S.delegate;if(le){var ge=k(le,S);if(ge){if(ge===O)continue;return ge}}if(S.method==="next")S.sent=S._sent=S.arg;else if(S.method==="throw"){if(W===_)throw W=T,S.arg;S.dispatchException(S.arg)}else S.method==="return"&&S.abrupt("return",S.arg);W=w;var Ce=y(u,v,S);if(Ce.type==="normal"){if(W=S.done?T:A,Ce.arg===O)continue;return{value:Ce.arg,done:S.done}}else Ce.type==="throw"&&(W=T,S.method="throw",S.arg=Ce.arg)}}}function k(u,v){var S=u.iterator[v.method];if(S===a){if(v.delegate=null,v.method==="throw"){if(u.iterator.return&&(v.method="return",v.arg=a,k(u,v),v.method==="throw"))return O;v.method="throw",v.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var W=y(S,u.iterator,v.arg);if(W.type==="throw")return v.method="throw",v.arg=W.arg,v.delegate=null,O;var F=W.arg;if(!F)return v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,O;if(F.done)v[u.resultName]=F.value,v.next=u.nextLoc,v.method!=="return"&&(v.method="next",v.arg=a);else return F;return v.delegate=null,O}H(N),f(N,d,"Generator"),f(N,c,function(){return this}),f(N,"toString",function(){return"[object Generator]"});function R(u){var v={tryLoc:u[0]};1 in u&&(v.catchLoc=u[1]),2 in u&&(v.finallyLoc=u[2],v.afterLoc=u[3]),this.tryEntries.push(v)}function p(u){var v=u.completion||{};v.type="normal",delete v.arg,u.completion=v}function m(u){this.tryEntries=[{tryLoc:"root"}],u.forEach(R,this),this.reset(!0)}n.keys=function(u){var v=Object(u),S=[];for(var W in v)S.push(W);return S.reverse(),function F(){for(;S.length;){var re=S.pop();if(re in v)return F.value=re,F.done=!1,F}return F.done=!0,F}};function E(u){if(u){var v=u[c];if(v)return v.call(u);if(typeof u.next=="function")return u;if(!isNaN(u.length)){var S=-1,W=function F(){for(;++S<u.length;)if(o.call(u,S))return F.value=u[S],F.done=!1,F;return F.value=a,F.done=!0,F};return W.next=W}}return{next:b}}n.values=E;function b(){return{value:a,done:!0}}return m.prototype={constructor:m,reset:function(u){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(p),!u)for(var v in this)v.charAt(0)==="t"&&o.call(this,v)&&!isNaN(+v.slice(1))&&(this[v]=a)},stop:function(){this.done=!0;var u=this.tryEntries[0],v=u.completion;if(v.type==="throw")throw v.arg;return this.rval},dispatchException:function(u){if(this.done)throw u;var v=this;function S(ge,Ce){return re.type="throw",re.arg=u,v.next=ge,Ce&&(v.method="next",v.arg=a),!!Ce}for(var W=this.tryEntries.length-1;W>=0;--W){var F=this.tryEntries[W],re=F.completion;if(F.tryLoc==="root")return S("end");if(F.tryLoc<=this.prev){var ue=o.call(F,"catchLoc"),le=o.call(F,"finallyLoc");if(ue&&le){if(this.prev<F.catchLoc)return S(F.catchLoc,!0);if(this.prev<F.finallyLoc)return S(F.finallyLoc)}else if(ue){if(this.prev<F.catchLoc)return S(F.catchLoc,!0)}else if(le){if(this.prev<F.finallyLoc)return S(F.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(u,v){for(var S=this.tryEntries.length-1;S>=0;--S){var W=this.tryEntries[S];if(W.tryLoc<=this.prev&&o.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var F=W;break}}F&&(u==="break"||u==="continue")&&F.tryLoc<=v&&v<=F.finallyLoc&&(F=null);var re=F?F.completion:{};return re.type=u,re.arg=v,F?(this.method="next",this.next=F.finallyLoc,O):this.complete(re)},complete:function(u,v){if(u.type==="throw")throw u.arg;return u.type==="break"||u.type==="continue"?this.next=u.arg:u.type==="return"?(this.rval=this.arg=u.arg,this.method="return",this.next="end"):u.type==="normal"&&v&&(this.next=v),O},finish:function(u){for(var v=this.tryEntries.length-1;v>=0;--v){var S=this.tryEntries[v];if(S.finallyLoc===u)return this.complete(S.completion,S.afterLoc),p(S),O}},catch:function(u){for(var v=this.tryEntries.length-1;v>=0;--v){var S=this.tryEntries[v];if(S.tryLoc===u){var W=S.completion;if(W.type==="throw"){var F=W.arg;p(S)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(u,v,S){return this.delegate={iterator:E(u),resultName:v,nextLoc:S},this.method==="next"&&(this.arg=a),O}},n}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(Qu);var Dw=Qu.exports;function Xu(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(l){n(l);return}s.done?t(c):Promise.resolve(c).then(r,o)}function Bw(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(c){Xu(i,r,o,a,s,"next",c)}function s(c){Xu(i,r,o,a,s,"throw",c)}a(void 0)})}}var Fw=Bw;(function(e){var t=Nw;Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var n=t(Dw),r=t(Fw);function o(a){return i.apply(this,arguments)}function i(){return(i=(0,r.default)(n.default.mark(function a(s){var c,l;return n.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return c=document.createElement("video"),l=new Promise(function(f,g){c.addEventListener("loadedmetadata",function(){c.duration===1/0?(c.currentTime=Number.MAX_SAFE_INTEGER,c.ontimeupdate=function(){c.ontimeupdate=null,f(c.duration),c.currentTime=0}):f(c.duration)}),c.onerror=function(y){return g(y.target.error)}}),c.src=typeof s=="string"||s instanceof String?s:window.URL.createObjectURL(s),d.abrupt("return",l);case 4:case"end":return d.stop()}},a)}))).apply(this,arguments)}})(Yu);var Uw=Ul(Yu);const Rn=()=>({value:!0}),qr=()=>({value:!1}),Hw=()=>new Error("MISSING_PERMISSION"),qw=()=>new Error("ALREADY_RECORDING"),zw=()=>new Error("DEVICE_CANNOT_VOICE_RECORD"),Zu=()=>new Error("FAILED_TO_RECORD"),Xs=()=>new Error("RECORDING_HAS_NOT_STARTED"),Ju=()=>new Error("FAILED_TO_FETCH_RECORDING"),Ww=()=>new Error("COULD_NOT_QUERY_PERMISSION_STATUS"),Vw=["audio/aac","audio/webm;codecs=opus","audio/mp4","audio/webm","audio/ogg;codecs=opus"],$u=()=>new Promise(()=>{});class St{constructor(){this.mediaRecorder=null,this.chunks=[],this.pendingResult=$u()}static async canDeviceVoiceRecord(){var t;return((t=navigator==null?void 0:navigator.mediaDevices)===null||t===void 0?void 0:t.getUserMedia)==null||St.getSupportedMimeType()==null?qr():Rn()}async startRecording(){if(this.mediaRecorder!=null)throw qw();if(!(await St.canDeviceVoiceRecord()).value)throw zw();if(!(await St.hasAudioRecordingPermission().catch(()=>Rn())).value)throw Hw();return navigator.mediaDevices.getUserMedia({audio:!0}).then(this.onSuccessfullyStartedRecording.bind(this)).catch(this.onFailedToStartRecording.bind(this)),Rn()}async stopRecording(){if(this.mediaRecorder==null)throw Xs();try{return this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(t=>t.stop()),this.pendingResult}catch{throw Ju()}finally{this.prepareInstanceForNextOperation()}}static async hasAudioRecordingPermission(){return navigator.permissions.query({name:"microphone"}).then(t=>({value:t.state==="granted"})).catch(()=>{throw Ww()})}static async requestAudioRecordingPermission(){return(await St.hasAudioRecordingPermission().catch(()=>qr())).value?Rn():navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>Rn()).catch(()=>qr())}pauseRecording(){if(this.mediaRecorder==null)throw Xs();return this.mediaRecorder.state==="recording"?(this.mediaRecorder.pause(),Promise.resolve(Rn())):Promise.resolve(qr())}resumeRecording(){if(this.mediaRecorder==null)throw Xs();return this.mediaRecorder.state==="paused"?(this.mediaRecorder.resume(),Promise.resolve(Rn())):Promise.resolve(qr())}getCurrentStatus(){return this.mediaRecorder==null?Promise.resolve({status:"NONE"}):this.mediaRecorder.state==="recording"?Promise.resolve({status:"RECORDING"}):this.mediaRecorder.state==="paused"?Promise.resolve({status:"PAUSED"}):Promise.resolve({status:"NONE"})}static getSupportedMimeType(){if((MediaRecorder==null?void 0:MediaRecorder.isTypeSupported)==null)return null;const t=Vw.find(n=>MediaRecorder.isTypeSupported(n));return t!=null?t:null}onSuccessfullyStartedRecording(t){this.pendingResult=new Promise((n,r)=>{this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onerror=()=>{r(Zu()),this.prepareInstanceForNextOperation()},this.mediaRecorder.onstop=async()=>{const o=St.getSupportedMimeType();if(o==null)r(Ju());else{const i=new Blob(this.chunks,{type:o}),a=await St.blobToBase64(i),s=await Uw(i);this.prepareInstanceForNextOperation(),n({value:{recordDataBase64:a,mimeType:o,msDuration:s*1e3}})}},this.mediaRecorder.ondataavailable=o=>this.chunks.push(o.data),this.mediaRecorder.start()})}onFailedToStartRecording(){throw this.prepareInstanceForNextOperation(),Zu()}static blobToBase64(t){return new Promise(n=>{const r=new FileReader;r.onloadend=()=>{const o=String(r.result),i=o.split("base64,"),a=i.length>1?i[1]:o;n(a.trim())},r.readAsDataURL(t)})}prepareInstanceForNextOperation(){if(this.mediaRecorder!=null&&this.mediaRecorder.state==="recording")try{this.mediaRecorder.stop()}catch{}this.pendingResult=$u(),this.mediaRecorder=null,this.chunks=[]}}class Kw extends Ys{constructor(){super(...arguments),this.voiceRecorderInstance=new St}canDeviceVoiceRecord(){return St.canDeviceVoiceRecord()}hasAudioRecordingPermission(){return St.hasAudioRecordingPermission()}requestAudioRecordingPermission(){return St.requestAudioRecordingPermission()}startRecording(){return this.voiceRecorderInstance.startRecording()}stopRecording(){return this.voiceRecorderInstance.stopRecording()}pauseRecording(){return this.voiceRecorderInstance.pauseRecording()}resumeRecording(){return this.voiceRecorderInstance.resumeRecording()}getCurrentStatus(){return this.voiceRecorderInstance.getCurrentStatus()}}var Gw=Object.freeze(Object.defineProperty({__proto__:null,VoiceRecorderWeb:Kw},Symbol.toStringTag,{value:"Module"}));an.VueAdvancedChat=Ku,an.register=Lw,Object.defineProperties(an,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
