(function(io,ao){typeof exports=="object"&&typeof module!="undefined"?ao(exports):typeof define=="function"&&define.amd?define(["exports"],ao):(io=typeof globalThis!="undefined"?globalThis:io||self,ao(io["vue-advanced-chat"]={}))})(this,function(io){"use strict";function ao(e,t){const o=Object.create(null),s=e.split(",");for(let n=0;n<s.length;n++)o[s[n]]=!0;return t?n=>!!o[n.toLowerCase()]:n=>!!o[n]}const Bl=ao("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function hi(e){return!!e||e===""}function Me(e){if(oe(e)){const t={};for(let o=0;o<e.length;o++){const s=e[o],n=Xe(s)?zl(s):Me(s);if(n)for(const r in n)t[r]=n[r]}return t}else{if(Xe(e))return e;if(We(e))return e}}const Dl=/;(?![^(]*\))/g,Hl=/:(.+)/;function zl(e){const t={};return e.split(Dl).forEach(o=>{if(o){const s=o.split(Hl);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ge(e){let t="";if(Xe(e))t=e;else if(oe(e))for(let o=0;o<e.length;o++){const s=ge(e[o]);s&&(t+=s+" ")}else if(We(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}function Le(e){if(!e)return null;let{class:t,style:o}=e;return t&&!Xe(t)&&(e.class=ge(t)),o&&(e.style=Me(o)),e}const ne=e=>Xe(e)?e:e==null?"":oe(e)||We(e)&&(e.toString===bi||!pe(e.toString))?JSON.stringify(e,gi,2):String(e),gi=(e,t)=>t&&t.__v_isRef?gi(e,t.value):Co(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[s,n])=>(o[`${s} =>`]=n,o),{})}:pi(t)?{[`Set(${t.size})`]:[...t.values()]}:We(t)&&!oe(t)&&!yi(t)?String(t):t,Ue={},Ro=[],_t=()=>{},ql=()=>!1,Kl=/^on[^a-z]/,js=e=>Kl.test(e),Pr=e=>e.startsWith("onUpdate:"),Ze=Object.assign,Nr=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},Vl=Object.prototype.hasOwnProperty,ke=(e,t)=>Vl.call(e,t),oe=Array.isArray,Co=e=>Ps(e)==="[object Map]",pi=e=>Ps(e)==="[object Set]",pe=e=>typeof e=="function",Xe=e=>typeof e=="string",Ur=e=>typeof e=="symbol",We=e=>e!==null&&typeof e=="object",vi=e=>We(e)&&pe(e.then)&&pe(e.catch),bi=Object.prototype.toString,Ps=e=>bi.call(e),Gl=e=>Ps(e).slice(8,-1),yi=e=>Ps(e)==="[object Object]",Fr=e=>Xe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ns=ao(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Us=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},Wl=/-(\w)/g,pt=Us(e=>e.replace(Wl,(t,o)=>o?o.toUpperCase():"")),Yl=/\B([A-Z])/g,Ct=Us(e=>e.replace(Yl,"-$1").toLowerCase()),Fs=Us(e=>e.charAt(0).toUpperCase()+e.slice(1)),Br=Us(e=>e?`on${Fs(e)}`:""),Bs=(e,t)=>!Object.is(e,t),Dr=(e,t)=>{for(let o=0;o<e.length;o++)e[o](t)},Ds=(e,t,o)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:o})},Hs=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wi;const Zl=()=>wi||(wi=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let Ot;class Xl{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ot&&(this.parent=Ot,this.index=(Ot.scopes||(Ot.scopes=[])).push(this)-1)}run(t){if(this.active){const o=Ot;try{return Ot=this,t()}finally{Ot=o}}}on(){Ot=this}off(){Ot=this.parent}stop(t){if(this.active){let o,s;for(o=0,s=this.effects.length;o<s;o++)this.effects[o].stop();for(o=0,s=this.cleanups.length;o<s;o++)this.cleanups[o]();if(this.scopes)for(o=0,s=this.scopes.length;o<s;o++)this.scopes[o].stop(!0);if(this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Jl(e,t=Ot){t&&t.active&&t.effects.push(e)}const Hr=e=>{const t=new Set(e);return t.w=0,t.n=0,t},xi=e=>(e.w&Gt)>0,_i=e=>(e.n&Gt)>0,Ql=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Gt},$l=e=>{const{deps:t}=e;if(t.length){let o=0;for(let s=0;s<t.length;s++){const n=t[s];xi(n)&&!_i(n)?n.delete(e):t[o++]=n,n.w&=~Gt,n.n&=~Gt}t.length=o}},zr=new WeakMap;let Wo=0,Gt=1;const qr=30;let kt;const co=Symbol(""),Kr=Symbol("");class Vr{constructor(t,o=null,s){this.fn=t,this.scheduler=o,this.active=!0,this.deps=[],this.parent=void 0,Jl(this,s)}run(){if(!this.active)return this.fn();let t=kt,o=Wt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=kt,kt=this,Wt=!0,Gt=1<<++Wo,Wo<=qr?Ql(this):ki(this),this.fn()}finally{Wo<=qr&&$l(this),Gt=1<<--Wo,kt=this.parent,Wt=o,this.parent=void 0,this.deferStop&&this.stop()}}stop(){kt===this?this.deferStop=!0:this.active&&(ki(this),this.onStop&&this.onStop(),this.active=!1)}}function ki(e){const{deps:t}=e;if(t.length){for(let o=0;o<t.length;o++)t[o].delete(e);t.length=0}}let Wt=!0;const Ei=[];function Oo(){Ei.push(Wt),Wt=!1}function Ao(){const e=Ei.pop();Wt=e===void 0?!0:e}function mt(e,t,o){if(Wt&&kt){let s=zr.get(e);s||zr.set(e,s=new Map);let n=s.get(o);n||s.set(o,n=Hr()),Ti(n)}}function Ti(e,t){let o=!1;Wo<=qr?_i(e)||(e.n|=Gt,o=!xi(e)):o=!e.has(kt),o&&(e.add(kt),kt.deps.push(e))}function Ft(e,t,o,s,n,r){const i=zr.get(e);if(!i)return;let a=[];if(t==="clear")a=[...i.values()];else if(o==="length"&&oe(e))i.forEach((c,l)=>{(l==="length"||l>=s)&&a.push(c)});else switch(o!==void 0&&a.push(i.get(o)),t){case"add":oe(e)?Fr(o)&&a.push(i.get("length")):(a.push(i.get(co)),Co(e)&&a.push(i.get(Kr)));break;case"delete":oe(e)||(a.push(i.get(co)),Co(e)&&a.push(i.get(Kr)));break;case"set":Co(e)&&a.push(i.get(co));break}if(a.length===1)a[0]&&Gr(a[0]);else{const c=[];for(const l of a)l&&c.push(...l);Gr(Hr(c))}}function Gr(e,t){const o=oe(e)?e:[...e];for(const s of o)s.computed&&Si(s);for(const s of o)s.computed||Si(s)}function Si(e,t){(e!==kt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const ed=ao("__proto__,__v_isRef,__isVue"),Mi=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ur)),td=Wr(),od=Wr(!1,!0),sd=Wr(!0),Ri=rd();function rd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...o){const s=Re(this);for(let r=0,i=this.length;r<i;r++)mt(s,"get",r+"");const n=s[t](...o);return n===-1||n===!1?s[t](...o.map(Re)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...o){Oo();const s=Re(this)[t].apply(this,o);return Ao(),s}}),e}function Wr(e=!1,t=!1){return function(s,n,r){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&r===(e?t?wd:Ui:t?Ni:Pi).get(s))return s;const i=oe(s);if(!e&&i&&ke(Ri,n))return Reflect.get(Ri,n,r);const a=Reflect.get(s,n,r);return(Ur(n)?Mi.has(n):ed(n))||(e||mt(s,"get",n),t)?a:rt(a)?i&&Fr(n)?a:a.value:We(a)?e?Fi(a):Xr(a):a}}const nd=Ci(),id=Ci(!0);function Ci(e=!1){return function(o,s,n,r){let i=o[s];if(Yo(i)&&rt(i)&&!rt(n))return!1;if(!e&&!Yo(n)&&(Qr(n)||(n=Re(n),i=Re(i)),!oe(o)&&rt(i)&&!rt(n)))return i.value=n,!0;const a=oe(o)&&Fr(s)?Number(s)<o.length:ke(o,s),c=Reflect.set(o,s,n,r);return o===Re(r)&&(a?Bs(n,i)&&Ft(o,"set",s,n):Ft(o,"add",s,n)),c}}function ad(e,t){const o=ke(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&o&&Ft(e,"delete",t,void 0),s}function cd(e,t){const o=Reflect.has(e,t);return(!Ur(t)||!Mi.has(t))&&mt(e,"has",t),o}function ld(e){return mt(e,"iterate",oe(e)?"length":co),Reflect.ownKeys(e)}const Oi={get:td,set:nd,deleteProperty:ad,has:cd,ownKeys:ld},dd={get:sd,set(e,t){return!0},deleteProperty(e,t){return!0}},ud=Ze({},Oi,{get:od,set:id}),Yr=e=>e,zs=e=>Reflect.getPrototypeOf(e);function qs(e,t,o=!1,s=!1){e=e.__v_raw;const n=Re(e),r=Re(t);o||(t!==r&&mt(n,"get",t),mt(n,"get",r));const{has:i}=zs(n),a=s?Yr:o?en:$r;if(i.call(n,t))return a(e.get(t));if(i.call(n,r))return a(e.get(r));e!==n&&e.get(t)}function Ks(e,t=!1){const o=this.__v_raw,s=Re(o),n=Re(e);return t||(e!==n&&mt(s,"has",e),mt(s,"has",n)),e===n?o.has(e):o.has(e)||o.has(n)}function Vs(e,t=!1){return e=e.__v_raw,!t&&mt(Re(e),"iterate",co),Reflect.get(e,"size",e)}function Ai(e){e=Re(e);const t=Re(this);return zs(t).has.call(t,e)||(t.add(e),Ft(t,"add",e,e)),this}function Li(e,t){t=Re(t);const o=Re(this),{has:s,get:n}=zs(o);let r=s.call(o,e);r||(e=Re(e),r=s.call(o,e));const i=n.call(o,e);return o.set(e,t),r?Bs(t,i)&&Ft(o,"set",e,t):Ft(o,"add",e,t),this}function Ii(e){const t=Re(this),{has:o,get:s}=zs(t);let n=o.call(t,e);n||(e=Re(e),n=o.call(t,e)),s&&s.call(t,e);const r=t.delete(e);return n&&Ft(t,"delete",e,void 0),r}function ji(){const e=Re(this),t=e.size!==0,o=e.clear();return t&&Ft(e,"clear",void 0,void 0),o}function Gs(e,t){return function(s,n){const r=this,i=r.__v_raw,a=Re(i),c=t?Yr:e?en:$r;return!e&&mt(a,"iterate",co),i.forEach((l,u)=>s.call(n,c(l),c(u),r))}}function Ws(e,t,o){return function(...s){const n=this.__v_raw,r=Re(n),i=Co(r),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,l=n[e](...s),u=o?Yr:t?en:$r;return!t&&mt(r,"iterate",c?Kr:co),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function Yt(e){return function(...t){return e==="delete"?!1:this}}function md(){const e={get(r){return qs(this,r)},get size(){return Vs(this)},has:Ks,add:Ai,set:Li,delete:Ii,clear:ji,forEach:Gs(!1,!1)},t={get(r){return qs(this,r,!1,!0)},get size(){return Vs(this)},has:Ks,add:Ai,set:Li,delete:Ii,clear:ji,forEach:Gs(!1,!0)},o={get(r){return qs(this,r,!0)},get size(){return Vs(this,!0)},has(r){return Ks.call(this,r,!0)},add:Yt("add"),set:Yt("set"),delete:Yt("delete"),clear:Yt("clear"),forEach:Gs(!0,!1)},s={get(r){return qs(this,r,!0,!0)},get size(){return Vs(this,!0)},has(r){return Ks.call(this,r,!0)},add:Yt("add"),set:Yt("set"),delete:Yt("delete"),clear:Yt("clear"),forEach:Gs(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=Ws(r,!1,!1),o[r]=Ws(r,!0,!1),t[r]=Ws(r,!1,!0),s[r]=Ws(r,!0,!0)}),[e,o,t,s]}const[fd,hd,gd,pd]=md();function Zr(e,t){const o=t?e?pd:gd:e?hd:fd;return(s,n,r)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?s:Reflect.get(ke(o,n)&&n in s?o:s,n,r)}const vd={get:Zr(!1,!1)},bd={get:Zr(!1,!0)},yd={get:Zr(!0,!1)},Pi=new WeakMap,Ni=new WeakMap,Ui=new WeakMap,wd=new WeakMap;function xd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _d(e){return e.__v_skip||!Object.isExtensible(e)?0:xd(Gl(e))}function Xr(e){return Yo(e)?e:Jr(e,!1,Oi,vd,Pi)}function kd(e){return Jr(e,!1,ud,bd,Ni)}function Fi(e){return Jr(e,!0,dd,yd,Ui)}function Jr(e,t,o,s,n){if(!We(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=n.get(e);if(r)return r;const i=_d(e);if(i===0)return e;const a=new Proxy(e,i===2?s:o);return n.set(e,a),a}function Lo(e){return Yo(e)?Lo(e.__v_raw):!!(e&&e.__v_isReactive)}function Yo(e){return!!(e&&e.__v_isReadonly)}function Qr(e){return!!(e&&e.__v_isShallow)}function Bi(e){return Lo(e)||Yo(e)}function Re(e){const t=e&&e.__v_raw;return t?Re(t):e}function Di(e){return Ds(e,"__v_skip",!0),e}const $r=e=>We(e)?Xr(e):e,en=e=>We(e)?Fi(e):e;function Ed(e){Wt&&kt&&(e=Re(e),Ti(e.dep||(e.dep=Hr())))}function Td(e,t){e=Re(e),e.dep&&Gr(e.dep)}function rt(e){return!!(e&&e.__v_isRef===!0)}function Sd(e){return rt(e)?e.value:e}const Md={get:(e,t,o)=>Sd(Reflect.get(e,t,o)),set:(e,t,o,s)=>{const n=e[t];return rt(n)&&!rt(o)?(n.value=o,!0):Reflect.set(e,t,o,s)}};function Hi(e){return Lo(e)?e:new Proxy(e,Md)}class Rd{constructor(t,o,s,n){this._setter=o,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Vr(t,()=>{this._dirty||(this._dirty=!0,Td(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=s}get value(){const t=Re(this);return Ed(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Cd(e,t,o=!1){let s,n;const r=pe(e);return r?(s=e,n=_t):(s=e.get,n=e.set),new Rd(s,n,r||!n,o)}function Zt(e,t,o,s){let n;try{n=s?e(...s):e()}catch(r){Ys(r,t,o)}return n}function vt(e,t,o,s){if(pe(e)){const r=Zt(e,t,o,s);return r&&vi(r)&&r.catch(i=>{Ys(i,t,o)}),r}const n=[];for(let r=0;r<e.length;r++)n.push(vt(e[r],t,o,s));return n}function Ys(e,t,o,s=!0){const n=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,a=o;for(;r;){const l=r.ec;if(l){for(let u=0;u<l.length;u++)if(l[u](e,i,a)===!1)return}r=r.parent}const c=t.appContext.config.errorHandler;if(c){Zt(c,null,10,[e,i,a]);return}}Od(e,o,n,s)}function Od(e,t,o,s=!0){console.error(e)}let Zs=!1,tn=!1;const ft=[];let Bt=0;const Zo=[];let Xo=null,Io=0;const Jo=[];let Xt=null,jo=0;const zi=Promise.resolve();let on=null,sn=null;function qi(e){const t=on||zi;return e?t.then(this?e.bind(this):e):t}function Ad(e){let t=Bt+1,o=ft.length;for(;t<o;){const s=t+o>>>1;Qo(ft[s])<e?t=s+1:o=s}return t}function Ki(e){(!ft.length||!ft.includes(e,Zs&&e.allowRecurse?Bt+1:Bt))&&e!==sn&&(e.id==null?ft.push(e):ft.splice(Ad(e.id),0,e),Vi())}function Vi(){!Zs&&!tn&&(tn=!0,on=zi.then(Yi))}function Ld(e){const t=ft.indexOf(e);t>Bt&&ft.splice(t,1)}function Gi(e,t,o,s){oe(e)?o.push(...e):(!t||!t.includes(e,e.allowRecurse?s+1:s))&&o.push(e),Vi()}function Id(e){Gi(e,Xo,Zo,Io)}function jd(e){Gi(e,Xt,Jo,jo)}function Xs(e,t=null){if(Zo.length){for(sn=t,Xo=[...new Set(Zo)],Zo.length=0,Io=0;Io<Xo.length;Io++)Xo[Io]();Xo=null,Io=0,sn=null,Xs(e,t)}}function Wi(e){if(Xs(),Jo.length){const t=[...new Set(Jo)];if(Jo.length=0,Xt){Xt.push(...t);return}for(Xt=t,Xt.sort((o,s)=>Qo(o)-Qo(s)),jo=0;jo<Xt.length;jo++)Xt[jo]();Xt=null,jo=0}}const Qo=e=>e.id==null?1/0:e.id;function Yi(e){tn=!1,Zs=!0,Xs(e),ft.sort((o,s)=>Qo(o)-Qo(s));const t=_t;try{for(Bt=0;Bt<ft.length;Bt++){const o=ft[Bt];o&&o.active!==!1&&Zt(o,null,14)}}finally{Bt=0,ft.length=0,Wi(),Zs=!1,on=null,(ft.length||Zo.length||Jo.length)&&Yi(e)}}function Pd(e,t,...o){if(e.isUnmounted)return;const s=e.vnode.props||Ue;let n=o;const r=t.startsWith("update:"),i=r&&t.slice(7);if(i&&i in s){const u=`${i==="modelValue"?"model":i}Modifiers`,{number:d,trim:f}=s[u]||Ue;f&&(n=o.map(g=>g.trim())),d&&(n=o.map(Hs))}let a,c=s[a=Br(t)]||s[a=Br(pt(t))];!c&&r&&(c=s[a=Br(Ct(t))]),c&&vt(c,e,6,n);const l=s[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,vt(l,e,6,n)}}function Zi(e,t,o=!1){const s=t.emitsCache,n=s.get(e);if(n!==void 0)return n;const r=e.emits;let i={},a=!1;if(!pe(e)){const c=l=>{const u=Zi(l,t,!0);u&&(a=!0,Ze(i,u))};!o&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!a?(s.set(e,null),null):(oe(r)?r.forEach(c=>i[c]=null):Ze(i,r),s.set(e,i),i)}function Js(e,t){return!e||!js(t)?!1:(t=t.slice(2).replace(/Once$/,""),ke(e,t[0].toLowerCase()+t.slice(1))||ke(e,Ct(t))||ke(e,t))}let et=null,Xi=null;function Qs(e){const t=et;return et=e,Xi=e&&e.type.__scopeId||null,t}function Q(e,t=et,o){if(!t||e._n)return e;const s=(...n)=>{s._d&&Ra(-1);const r=Qs(t),i=e(...n);return Qs(r),s._d&&Ra(1),i};return s._n=!0,s._c=!0,s._d=!0,s}function U0(){}function rn(e){const{type:t,vnode:o,proxy:s,withProxy:n,props:r,propsOptions:[i],slots:a,attrs:c,emit:l,render:u,renderCache:d,data:f,setupState:g,ctx:y,inheritAttrs:L}=e;let A,G;const le=Qs(e);try{if(o.shapeFlag&4){const ie=n||s;A=At(u.call(ie,ie,d,r,g,f,y)),G=c}else{const ie=t;A=At(ie.length>1?ie(r,{attrs:c,slots:a,emit:l}):ie(r,null)),G=t.props?c:Nd(c)}}catch(ie){os.length=0,Ys(ie,e,1),A=F(yt)}let se=A;if(G&&L!==!1){const ie=Object.keys(G),{shapeFlag:ve}=se;ie.length&&ve&7&&(i&&ie.some(Pr)&&(G=Ud(G,i)),se=Jt(se,G))}return o.dirs&&(se=Jt(se),se.dirs=se.dirs?se.dirs.concat(o.dirs):o.dirs),o.transition&&(se.transition=o.transition),A=se,Qs(le),A}const Nd=e=>{let t;for(const o in e)(o==="class"||o==="style"||js(o))&&((t||(t={}))[o]=e[o]);return t},Ud=(e,t)=>{const o={};for(const s in e)(!Pr(s)||!(s.slice(9)in t))&&(o[s]=e[s]);return o};function Fd(e,t,o){const{props:s,children:n,component:r}=e,{props:i,children:a,patchFlag:c}=t,l=r.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&c>=0){if(c&1024)return!0;if(c&16)return s?Ji(s,i,l):!!i;if(c&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(i[f]!==s[f]&&!Js(l,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===i?!1:s?i?Ji(s,i,l):!0:!!i;return!1}function Ji(e,t,o){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==e[r]&&!Js(o,r))return!0}return!1}function Bd({vnode:e,parent:t},o){for(;t&&t.subTree===e;)(e=t.vnode).el=o,t=t.parent}const Dd=e=>e.__isSuspense;function Hd(e,t){t&&t.pendingBranch?oe(e)?t.effects.push(...e):t.effects.push(e):jd(e)}function zd(e,t){if(Je){let o=Je.provides;const s=Je.parent&&Je.parent.provides;s===o&&(o=Je.provides=Object.create(s)),o[e]=t}}function nn(e,t,o=!1){const s=Je||et;if(s){const n=s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return o&&pe(t)?t.call(s.proxy):t}}const Qi={};function an(e,t,o){return $i(e,t,o)}function $i(e,t,{immediate:o,deep:s,flush:n,onTrack:r,onTrigger:i}=Ue){const a=Je;let c,l=!1,u=!1;if(rt(e)?(c=()=>e.value,l=Qr(e)):Lo(e)?(c=()=>e,s=!0):oe(e)?(u=!0,l=e.some(G=>Lo(G)||Qr(G)),c=()=>e.map(G=>{if(rt(G))return G.value;if(Lo(G))return lo(G);if(pe(G))return Zt(G,a,2)})):pe(e)?t?c=()=>Zt(e,a,2):c=()=>{if(!(a&&a.isUnmounted))return d&&d(),vt(e,a,3,[f])}:c=_t,t&&s){const G=c;c=()=>lo(G())}let d,f=G=>{d=A.onStop=()=>{Zt(G,a,4)}};if(rs)return f=_t,t?o&&vt(t,a,3,[c(),u?[]:void 0,f]):c(),_t;let g=u?[]:Qi;const y=()=>{if(!!A.active)if(t){const G=A.run();(s||l||(u?G.some((le,se)=>Bs(le,g[se])):Bs(G,g)))&&(d&&d(),vt(t,a,3,[G,g===Qi?void 0:g,f]),g=G)}else A.run()};y.allowRecurse=!!t;let L;n==="sync"?L=y:n==="post"?L=()=>lt(y,a&&a.suspense):L=()=>Id(y);const A=new Vr(c,L);return t?o?y():g=A.run():n==="post"?lt(A.run.bind(A),a&&a.suspense):A.run(),()=>{A.stop(),a&&a.scope&&Nr(a.scope.effects,A)}}function qd(e,t,o){const s=this.proxy,n=Xe(e)?e.includes(".")?ea(s,e):()=>s[e]:e.bind(s,s);let r;pe(t)?r=t:(r=t.handler,o=t);const i=Je;Po(this);const a=$i(n,r.bind(s),o);return i?Po(i):go(),a}function ea(e,t){const o=t.split(".");return()=>{let s=e;for(let n=0;n<o.length&&s;n++)s=s[o[n]];return s}}function lo(e,t){if(!We(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),rt(e))lo(e.value,t);else if(oe(e))for(let o=0;o<e.length;o++)lo(e[o],t);else if(pi(e)||Co(e))e.forEach(o=>{lo(o,t)});else if(yi(e))for(const o in e)lo(e[o],t);return e}function ta(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ia(()=>{e.isMounted=!0}),ca(()=>{e.isUnmounting=!0}),e}const bt=[Function,Array],oa={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bt,onEnter:bt,onAfterEnter:bt,onEnterCancelled:bt,onBeforeLeave:bt,onLeave:bt,onAfterLeave:bt,onLeaveCancelled:bt,onBeforeAppear:bt,onAppear:bt,onAfterAppear:bt,onAppearCancelled:bt},setup(e,{slots:t}){const o=Aa(),s=ta();let n;return()=>{const r=t.default&&ln(t.default(),!0);if(!r||!r.length)return;let i=r[0];if(r.length>1){for(const L of r)if(L.type!==yt){i=L;break}}const a=Re(e),{mode:c}=a;if(s.isLeaving)return cn(i);const l=ra(i);if(!l)return cn(i);const u=$o(l,a,s,o);es(l,u);const d=o.subTree,f=d&&ra(d);let g=!1;const{getTransitionKey:y}=l.type;if(y){const L=y();n===void 0?n=L:L!==n&&(n=L,g=!0)}if(f&&f.type!==yt&&(!ho(l,f)||g)){const L=$o(f,a,s,o);if(es(f,L),c==="out-in")return s.isLeaving=!0,L.afterLeave=()=>{s.isLeaving=!1,o.update()},cn(i);c==="in-out"&&l.type!==yt&&(L.delayLeave=(A,G,le)=>{const se=sa(s,f);se[String(f.key)]=f,A._leaveCb=()=>{G(),A._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=le})}return i}}};function sa(e,t){const{leavingVNodes:o}=e;let s=o.get(t.type);return s||(s=Object.create(null),o.set(t.type,s)),s}function $o(e,t,o,s){const{appear:n,mode:r,persisted:i=!1,onBeforeEnter:a,onEnter:c,onAfterEnter:l,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:g,onLeaveCancelled:y,onBeforeAppear:L,onAppear:A,onAfterAppear:G,onAppearCancelled:le}=t,se=String(e.key),ie=sa(o,e),ve=(D,ee)=>{D&&vt(D,s,9,ee)},re=(D,ee)=>{const me=ee[1];ve(D,ee),oe(D)?D.every(fe=>fe.length<=1)&&me():D.length<=1&&me()},V={mode:r,persisted:i,beforeEnter(D){let ee=a;if(!o.isMounted)if(n)ee=L||a;else return;D._leaveCb&&D._leaveCb(!0);const me=ie[se];me&&ho(e,me)&&me.el._leaveCb&&me.el._leaveCb(),ve(ee,[D])},enter(D){let ee=c,me=l,fe=u;if(!o.isMounted)if(n)ee=A||c,me=G||l,fe=le||u;else return;let K=!1;const we=D._enterCb=Se=>{K||(K=!0,Se?ve(fe,[D]):ve(me,[D]),V.delayedLeave&&V.delayedLeave(),D._enterCb=void 0)};ee?re(ee,[D,we]):we()},leave(D,ee){const me=String(e.key);if(D._enterCb&&D._enterCb(!0),o.isUnmounting)return ee();ve(d,[D]);let fe=!1;const K=D._leaveCb=we=>{fe||(fe=!0,ee(),we?ve(y,[D]):ve(g,[D]),D._leaveCb=void 0,ie[me]===e&&delete ie[me])};ie[me]=e,f?re(f,[D,K]):K()},clone(D){return $o(D,t,o,s)}};return V}function cn(e){if($s(e))return e=Jt(e),e.children=null,e}function ra(e){return $s(e)?e.children?e.children[0]:void 0:e}function es(e,t){e.shapeFlag&6&&e.component?es(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function ln(e,t=!1,o){let s=[],n=0;for(let r=0;r<e.length;r++){let i=e[r];const a=o==null?i.key:String(o)+String(i.key!=null?i.key:r);i.type===Te?(i.patchFlag&128&&n++,s=s.concat(ln(i.children,t,a))):(t||i.type!==yt)&&s.push(a!=null?Jt(i,{key:a}):i)}if(n>1)for(let r=0;r<s.length;r++)s[r].patchFlag=-2;return s}function Kd(e){return pe(e)?{setup:e,name:e.name}:e}const ts=e=>!!e.type.__asyncLoader,$s=e=>e.type.__isKeepAlive;function Vd(e,t){na(e,"a",t)}function Gd(e,t){na(e,"da",t)}function na(e,t,o=Je){const s=e.__wdc||(e.__wdc=()=>{let n=o;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(er(t,s,o),o){let n=o.parent;for(;n&&n.parent;)$s(n.parent.vnode)&&Wd(s,t,o,n),n=n.parent}}function Wd(e,t,o,s){const n=er(t,e,s,!0);la(()=>{Nr(s[t],n)},o)}function er(e,t,o=Je,s=!1){if(o){const n=o[e]||(o[e]=[]),r=t.__weh||(t.__weh=(...i)=>{if(o.isUnmounted)return;Oo(),Po(o);const a=vt(t,o,e,i);return go(),Ao(),a});return s?n.unshift(r):n.push(r),r}}const Dt=e=>(t,o=Je)=>(!rs||e==="sp")&&er(e,t,o),Yd=Dt("bm"),ia=Dt("m"),Zd=Dt("bu"),aa=Dt("u"),ca=Dt("bum"),la=Dt("um"),Xd=Dt("sp"),Jd=Dt("rtg"),Qd=Dt("rtc");function $d(e,t=Je){er("ec",e,t)}function Ht(e,t){const o=et;if(o===null)return e;const s=ar(o)||o.proxy,n=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[i,a,c,l=Ue]=t[r];pe(i)&&(i={mounted:i,updated:i}),i.deep&&lo(a),n.push({dir:i,instance:s,value:a,oldValue:void 0,arg:c,modifiers:l})}return e}function uo(e,t,o,s){const n=e.dirs,r=t&&t.dirs;for(let i=0;i<n.length;i++){const a=n[i];r&&(a.oldValue=r[i].value);let c=a.dir[s];c&&(Oo(),vt(c,o,8,[e.el,a,e,t]),Ao())}}const dn="components",eu="directives";function $(e,t){return un(dn,e,!0,t)||e}const da=Symbol();function tu(e){return Xe(e)?un(dn,e,!1)||e:e||da}function tr(e){return un(eu,e)}function un(e,t,o=!0,s=!1){const n=et||Je;if(n){const r=n.type;if(e===dn){const a=Ru(r,!1);if(a&&(a===t||a===pt(t)||a===Fs(pt(t))))return r}const i=ua(n[e]||r[e],t)||ua(n.appContext[e],t);return!i&&s?r:i}}function ua(e,t){return e&&(e[t]||e[pt(t)]||e[Fs(pt(t))])}function ue(e,t,o,s){let n;const r=o&&o[s];if(oe(e)||Xe(e)){n=new Array(e.length);for(let i=0,a=e.length;i<a;i++)n[i]=t(e[i],i,void 0,r&&r[i])}else if(typeof e=="number"){n=new Array(e);for(let i=0;i<e;i++)n[i]=t(i+1,i,void 0,r&&r[i])}else if(We(e))if(e[Symbol.iterator])n=Array.from(e,(i,a)=>t(i,a,void 0,r&&r[a]));else{const i=Object.keys(e);n=new Array(i.length);for(let a=0,c=i.length;a<c;a++){const l=i[a];n[a]=t(e[l],l,a,r&&r[a])}}else n=[];return o&&(o[s]=n),n}function Ie(e,t){for(let o=0;o<t.length;o++){const s=t[o];if(oe(s))for(let n=0;n<s.length;n++)e[s[n].name]=s[n].fn;else s&&(e[s.name]=s.fn)}return e}function U(e,t,o={},s,n){if(et.isCE||et.parent&&ts(et.parent)&&et.parent.isCE)return F("slot",t==="default"?null:{name:t},s&&s());let r=e[t];r&&r._c&&(r._d=!1),p();const i=r&&ma(r(o)),a=Oe(Te,{key:o.key||`_${t}`},i||(s?s():[]),i&&e._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function ma(e){return e.some(t=>rr(t)?!(t.type===yt||t.type===Te&&!ma(t.children)):!0)?e:null}const mn=e=>e?La(e)?ar(e)||e.proxy:mn(e.parent):null,or=Ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>mn(e.parent),$root:e=>mn(e.root),$emit:e=>e.emit,$options:e=>ga(e),$forceUpdate:e=>e.f||(e.f=()=>Ki(e.update)),$nextTick:e=>e.n||(e.n=qi.bind(e.proxy)),$watch:e=>qd.bind(e)}),ou={get({_:e},t){const{ctx:o,setupState:s,data:n,props:r,accessCache:i,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const g=i[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return n[t];case 4:return o[t];case 3:return r[t]}else{if(s!==Ue&&ke(s,t))return i[t]=1,s[t];if(n!==Ue&&ke(n,t))return i[t]=2,n[t];if((l=e.propsOptions[0])&&ke(l,t))return i[t]=3,r[t];if(o!==Ue&&ke(o,t))return i[t]=4,o[t];fn&&(i[t]=0)}}const u=or[t];let d,f;if(u)return t==="$attrs"&&mt(e,"get",t),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(o!==Ue&&ke(o,t))return i[t]=4,o[t];if(f=c.config.globalProperties,ke(f,t))return f[t]},set({_:e},t,o){const{data:s,setupState:n,ctx:r}=e;return n!==Ue&&ke(n,t)?(n[t]=o,!0):s!==Ue&&ke(s,t)?(s[t]=o,!0):ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:s,appContext:n,propsOptions:r}},i){let a;return!!o[i]||e!==Ue&&ke(e,i)||t!==Ue&&ke(t,i)||(a=r[0])&&ke(a,i)||ke(s,i)||ke(or,i)||ke(n.config.globalProperties,i)},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:ke(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};let fn=!0;function su(e){const t=ga(e),o=e.proxy,s=e.ctx;fn=!1,t.beforeCreate&&fa(t.beforeCreate,e,"bc");const{data:n,computed:r,methods:i,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:f,beforeUpdate:g,updated:y,activated:L,deactivated:A,beforeDestroy:G,beforeUnmount:le,destroyed:se,unmounted:ie,render:ve,renderTracked:re,renderTriggered:V,errorCaptured:D,serverPrefetch:ee,expose:me,inheritAttrs:fe,components:K,directives:we,filters:Se}=t;if(l&&ru(l,s,null,e.appContext.config.unwrapInjectedRef),i)for(const he in i){const de=i[he];pe(de)&&(s[he]=de.bind(o))}if(n){const he=n.call(o,o);We(he)&&(e.data=Xr(he))}if(fn=!0,r)for(const he in r){const de=r[he],E=pe(de)?de.bind(o,o):pe(de.get)?de.get.bind(o,o):_t,x=!pe(de)&&pe(de.set)?de.set.bind(o):_t,O=Ou({get:E,set:x});Object.defineProperty(s,he,{enumerable:!0,configurable:!0,get:()=>O.value,set:W=>O.value=W})}if(a)for(const he in a)ha(a[he],s,o,he);if(c){const he=pe(c)?c.call(o):c;Reflect.ownKeys(he).forEach(de=>{zd(de,he[de])})}u&&fa(u,e,"c");function Ce(he,de){oe(de)?de.forEach(E=>he(E.bind(o))):de&&he(de.bind(o))}if(Ce(Yd,d),Ce(ia,f),Ce(Zd,g),Ce(aa,y),Ce(Vd,L),Ce(Gd,A),Ce($d,D),Ce(Qd,re),Ce(Jd,V),Ce(ca,le),Ce(la,ie),Ce(Xd,ee),oe(me))if(me.length){const he=e.exposed||(e.exposed={});me.forEach(de=>{Object.defineProperty(he,de,{get:()=>o[de],set:E=>o[de]=E})})}else e.exposed||(e.exposed={});ve&&e.render===_t&&(e.render=ve),fe!=null&&(e.inheritAttrs=fe),K&&(e.components=K),we&&(e.directives=we)}function ru(e,t,o=_t,s=!1){oe(e)&&(e=hn(e));for(const n in e){const r=e[n];let i;We(r)?"default"in r?i=nn(r.from||n,r.default,!0):i=nn(r.from||n):i=nn(r),rt(i)&&s?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[n]=i}}function fa(e,t,o){vt(oe(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,o)}function ha(e,t,o,s){const n=s.includes(".")?ea(o,s):()=>o[s];if(Xe(e)){const r=t[e];pe(r)&&an(n,r)}else if(pe(e))an(n,e.bind(o));else if(We(e))if(oe(e))e.forEach(r=>ha(r,t,o,s));else{const r=pe(e.handler)?e.handler.bind(o):t[e.handler];pe(r)&&an(n,r,e)}}function ga(e){const t=e.type,{mixins:o,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,a=r.get(t);let c;return a?c=a:!n.length&&!o&&!s?c=t:(c={},n.length&&n.forEach(l=>sr(c,l,i,!0)),sr(c,t,i)),r.set(t,c),c}function sr(e,t,o,s=!1){const{mixins:n,extends:r}=t;r&&sr(e,r,o,!0),n&&n.forEach(i=>sr(e,i,o,!0));for(const i in t)if(!(s&&i==="expose")){const a=nu[i]||o&&o[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const nu={data:pa,props:mo,emits:mo,methods:mo,computed:mo,beforeCreate:nt,created:nt,beforeMount:nt,mounted:nt,beforeUpdate:nt,updated:nt,beforeDestroy:nt,beforeUnmount:nt,destroyed:nt,unmounted:nt,activated:nt,deactivated:nt,errorCaptured:nt,serverPrefetch:nt,components:mo,directives:mo,watch:au,provide:pa,inject:iu};function pa(e,t){return t?e?function(){return Ze(pe(e)?e.call(this,this):e,pe(t)?t.call(this,this):t)}:t:e}function iu(e,t){return mo(hn(e),hn(t))}function hn(e){if(oe(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function nt(e,t){return e?[...new Set([].concat(e,t))]:t}function mo(e,t){return e?Ze(Ze(Object.create(null),e),t):t}function au(e,t){if(!e)return t;if(!t)return e;const o=Ze(Object.create(null),e);for(const s in t)o[s]=nt(e[s],t[s]);return o}function cu(e,t,o,s=!1){const n={},r={};Ds(r,nr,1),e.propsDefaults=Object.create(null),va(e,t,n,r);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);o?e.props=s?n:kd(n):e.type.props?e.props=n:e.props=r,e.attrs=r}function lu(e,t,o,s){const{props:n,attrs:r,vnode:{patchFlag:i}}=e,a=Re(n),[c]=e.propsOptions;let l=!1;if((s||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Js(e.emitsOptions,f))continue;const g=t[f];if(c)if(ke(r,f))g!==r[f]&&(r[f]=g,l=!0);else{const y=pt(f);n[y]=gn(c,a,y,g,e,!1)}else g!==r[f]&&(r[f]=g,l=!0)}}}else{va(e,t,n,r)&&(l=!0);let u;for(const d in a)(!t||!ke(t,d)&&((u=Ct(d))===d||!ke(t,u)))&&(c?o&&(o[d]!==void 0||o[u]!==void 0)&&(n[d]=gn(c,a,d,void 0,e,!0)):delete n[d]);if(r!==a)for(const d in r)(!t||!ke(t,d)&&!0)&&(delete r[d],l=!0)}l&&Ft(e,"set","$attrs")}function va(e,t,o,s){const[n,r]=e.propsOptions;let i=!1,a;if(t)for(let c in t){if(Ns(c))continue;const l=t[c];let u;n&&ke(n,u=pt(c))?!r||!r.includes(u)?o[u]=l:(a||(a={}))[u]=l:Js(e.emitsOptions,c)||(!(c in s)||l!==s[c])&&(s[c]=l,i=!0)}if(r){const c=Re(o),l=a||Ue;for(let u=0;u<r.length;u++){const d=r[u];o[d]=gn(n,c,d,l[d],e,!ke(l,d))}}return i}function gn(e,t,o,s,n,r){const i=e[o];if(i!=null){const a=ke(i,"default");if(a&&s===void 0){const c=i.default;if(i.type!==Function&&pe(c)){const{propsDefaults:l}=n;o in l?s=l[o]:(Po(n),s=l[o]=c.call(null,t),go())}else s=c}i[0]&&(r&&!a?s=!1:i[1]&&(s===""||s===Ct(o))&&(s=!0))}return s}function ba(e,t,o=!1){const s=t.propsCache,n=s.get(e);if(n)return n;const r=e.props,i={},a=[];let c=!1;if(!pe(e)){const u=d=>{c=!0;const[f,g]=ba(d,t,!0);Ze(i,f),g&&a.push(...g)};!o&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!r&&!c)return s.set(e,Ro),Ro;if(oe(r))for(let u=0;u<r.length;u++){const d=pt(r[u]);ya(d)&&(i[d]=Ue)}else if(r)for(const u in r){const d=pt(u);if(ya(d)){const f=r[u],g=i[d]=oe(f)||pe(f)?{type:f}:f;if(g){const y=_a(Boolean,g.type),L=_a(String,g.type);g[0]=y>-1,g[1]=L<0||y<L,(y>-1||ke(g,"default"))&&a.push(d)}}}const l=[i,a];return s.set(e,l),l}function ya(e){return e[0]!=="$"}function wa(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function xa(e,t){return wa(e)===wa(t)}function _a(e,t){return oe(t)?t.findIndex(o=>xa(o,e)):pe(t)&&xa(t,e)?0:-1}const ka=e=>e[0]==="_"||e==="$stable",pn=e=>oe(e)?e.map(At):[At(e)],du=(e,t,o)=>{if(t._n)return t;const s=Q((...n)=>pn(t(...n)),o);return s._c=!1,s},Ea=(e,t,o)=>{const s=e._ctx;for(const n in e){if(ka(n))continue;const r=e[n];if(pe(r))t[n]=du(n,r,s);else if(r!=null){const i=pn(r);t[n]=()=>i}}},Ta=(e,t)=>{const o=pn(t);e.slots.default=()=>o},uu=(e,t)=>{if(e.vnode.shapeFlag&32){const o=t._;o?(e.slots=Re(t),Ds(t,"_",o)):Ea(t,e.slots={})}else e.slots={},t&&Ta(e,t);Ds(e.slots,nr,1)},mu=(e,t,o)=>{const{vnode:s,slots:n}=e;let r=!0,i=Ue;if(s.shapeFlag&32){const a=t._;a?o&&a===1?r=!1:(Ze(n,t),!o&&a===1&&delete n._):(r=!t.$stable,Ea(t,n)),i=t}else t&&(Ta(e,t),i={default:1});if(r)for(const a in n)!ka(a)&&!(a in i)&&delete n[a]};function Sa(){return{app:null,config:{isNativeTag:ql,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let fu=0;function hu(e,t){return function(s,n=null){pe(s)||(s=Object.assign({},s)),n!=null&&!We(n)&&(n=null);const r=Sa(),i=new Set;let a=!1;const c=r.app={_uid:fu++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:Lu,get config(){return r.config},set config(l){},use(l,...u){return i.has(l)||(l&&pe(l.install)?(i.add(l),l.install(c,...u)):pe(l)&&(i.add(l),l(c,...u))),c},mixin(l){return r.mixins.includes(l)||r.mixins.push(l),c},component(l,u){return u?(r.components[l]=u,c):r.components[l]},directive(l,u){return u?(r.directives[l]=u,c):r.directives[l]},mount(l,u,d){if(!a){const f=F(s,n);return f.appContext=r,u&&t?t(f,l):e(f,l,d),a=!0,c._container=l,l.__vue_app__=c,ar(f.component)||f.component.proxy}},unmount(){a&&(e(null,c._container),delete c._container.__vue_app__)},provide(l,u){return r.provides[l]=u,c}};return c}}function vn(e,t,o,s,n=!1){if(oe(e)){e.forEach((f,g)=>vn(f,t&&(oe(t)?t[g]:t),o,s,n));return}if(ts(s)&&!n)return;const r=s.shapeFlag&4?ar(s.component)||s.component.proxy:s.el,i=n?null:r,{i:a,r:c}=e,l=t&&t.r,u=a.refs===Ue?a.refs={}:a.refs,d=a.setupState;if(l!=null&&l!==c&&(Xe(l)?(u[l]=null,ke(d,l)&&(d[l]=null)):rt(l)&&(l.value=null)),pe(c))Zt(c,a,12,[i,u]);else{const f=Xe(c),g=rt(c);if(f||g){const y=()=>{if(e.f){const L=f?u[c]:c.value;n?oe(L)&&Nr(L,r):oe(L)?L.includes(r)||L.push(r):f?(u[c]=[r],ke(d,c)&&(d[c]=u[c])):(c.value=[r],e.k&&(u[e.k]=c.value))}else f?(u[c]=i,ke(d,c)&&(d[c]=i)):g&&(c.value=i,e.k&&(u[e.k]=i))};i?(y.id=-1,lt(y,o)):y()}}}const lt=Hd;function gu(e){return pu(e)}function pu(e,t){const o=Zl();o.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:i,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:f,setScopeId:g=_t,cloneNode:y,insertStaticContent:L}=e,A=(m,h,_,S=null,M=null,P=null,z=!1,j=null,H=!!h.dynamicChildren)=>{if(m===h)return;m&&!ho(m,h)&&(S=qe(m),N(m,M,P,!0),m=null),h.patchFlag===-2&&(H=!1,h.dynamicChildren=null);const{type:R,ref:X,shapeFlag:Y}=h;switch(R){case bn:G(m,h,_,S);break;case yt:le(m,h,_,S);break;case yn:m==null&&se(h,_,S,z);break;case Te:we(m,h,_,S,M,P,z,j,H);break;default:Y&1?re(m,h,_,S,M,P,z,j,H):Y&6?Se(m,h,_,S,M,P,z,j,H):(Y&64||Y&128)&&R.process(m,h,_,S,M,P,z,j,H,Ye)}X!=null&&M&&vn(X,m&&m.ref,P,h||m,!h)},G=(m,h,_,S)=>{if(m==null)s(h.el=a(h.children),_,S);else{const M=h.el=m.el;h.children!==m.children&&l(M,h.children)}},le=(m,h,_,S)=>{m==null?s(h.el=c(h.children||""),_,S):h.el=m.el},se=(m,h,_,S)=>{[m.el,m.anchor]=L(m.children,h,_,S,m.el,m.anchor)},ie=({el:m,anchor:h},_,S)=>{let M;for(;m&&m!==h;)M=f(m),s(m,_,S),m=M;s(h,_,S)},ve=({el:m,anchor:h})=>{let _;for(;m&&m!==h;)_=f(m),n(m),m=_;n(h)},re=(m,h,_,S,M,P,z,j,H)=>{z=z||h.type==="svg",m==null?V(h,_,S,M,P,z,j,H):me(m,h,M,P,z,j,H)},V=(m,h,_,S,M,P,z,j)=>{let H,R;const{type:X,props:Y,shapeFlag:J,transition:te,patchFlag:xe,dirs:k}=m;if(m.el&&y!==void 0&&xe===-1)H=m.el=y(m.el);else{if(H=m.el=i(m.type,P,Y&&Y.is,Y),J&8?u(H,m.children):J&16&&ee(m.children,H,null,S,M,P&&X!=="foreignObject",z,j),k&&uo(m,null,S,"created"),Y){for(const v in Y)v!=="value"&&!Ns(v)&&r(H,v,null,Y[v],P,m.children,S,M,Ee);"value"in Y&&r(H,"value",null,Y.value),(R=Y.onVnodeBeforeMount)&&Lt(R,S,m)}D(H,m,m.scopeId,z,S)}k&&uo(m,null,S,"beforeMount");const C=(!M||M&&!M.pendingBranch)&&te&&!te.persisted;C&&te.beforeEnter(H),s(H,h,_),((R=Y&&Y.onVnodeMounted)||C||k)&&lt(()=>{R&&Lt(R,S,m),C&&te.enter(H),k&&uo(m,null,S,"mounted")},M)},D=(m,h,_,S,M)=>{if(_&&g(m,_),S)for(let P=0;P<S.length;P++)g(m,S[P]);if(M){let P=M.subTree;if(h===P){const z=M.vnode;D(m,z,z.scopeId,z.slotScopeIds,M.parent)}}},ee=(m,h,_,S,M,P,z,j,H=0)=>{for(let R=H;R<m.length;R++){const X=m[R]=j?$t(m[R]):At(m[R]);A(null,X,h,_,S,M,P,z,j)}},me=(m,h,_,S,M,P,z)=>{const j=h.el=m.el;let{patchFlag:H,dynamicChildren:R,dirs:X}=h;H|=m.patchFlag&16;const Y=m.props||Ue,J=h.props||Ue;let te;_&&fo(_,!1),(te=J.onVnodeBeforeUpdate)&&Lt(te,_,h,m),X&&uo(h,m,_,"beforeUpdate"),_&&fo(_,!0);const xe=M&&h.type!=="foreignObject";if(R?fe(m.dynamicChildren,R,j,_,S,xe,P):z||E(m,h,j,null,_,S,xe,P,!1),H>0){if(H&16)K(j,h,Y,J,_,S,M);else if(H&2&&Y.class!==J.class&&r(j,"class",null,J.class,M),H&4&&r(j,"style",Y.style,J.style,M),H&8){const k=h.dynamicProps;for(let C=0;C<k.length;C++){const v=k[C],q=Y[v],ce=J[v];(ce!==q||v==="value")&&r(j,v,q,ce,M,m.children,_,S,Ee)}}H&1&&m.children!==h.children&&u(j,h.children)}else!z&&R==null&&K(j,h,Y,J,_,S,M);((te=J.onVnodeUpdated)||X)&&lt(()=>{te&&Lt(te,_,h,m),X&&uo(h,m,_,"updated")},S)},fe=(m,h,_,S,M,P,z)=>{for(let j=0;j<h.length;j++){const H=m[j],R=h[j],X=H.el&&(H.type===Te||!ho(H,R)||H.shapeFlag&70)?d(H.el):_;A(H,R,X,null,S,M,P,z,!0)}},K=(m,h,_,S,M,P,z)=>{if(_!==S){for(const j in S){if(Ns(j))continue;const H=S[j],R=_[j];H!==R&&j!=="value"&&r(m,j,R,H,z,h.children,M,P,Ee)}if(_!==Ue)for(const j in _)!Ns(j)&&!(j in S)&&r(m,j,_[j],null,z,h.children,M,P,Ee);"value"in S&&r(m,"value",_.value,S.value)}},we=(m,h,_,S,M,P,z,j,H)=>{const R=h.el=m?m.el:a(""),X=h.anchor=m?m.anchor:a("");let{patchFlag:Y,dynamicChildren:J,slotScopeIds:te}=h;te&&(j=j?j.concat(te):te),m==null?(s(R,_,S),s(X,_,S),ee(h.children,_,X,M,P,z,j,H)):Y>0&&Y&64&&J&&m.dynamicChildren?(fe(m.dynamicChildren,J,_,M,P,z,j),(h.key!=null||M&&h===M.subTree)&&Ma(m,h,!0)):E(m,h,_,X,M,P,z,j,H)},Se=(m,h,_,S,M,P,z,j,H)=>{h.slotScopeIds=j,m==null?h.shapeFlag&512?M.ctx.activate(h,_,S,z,H):He(h,_,S,M,P,z,H):Ce(m,h,H)},He=(m,h,_,S,M,P,z)=>{const j=m.component=ku(m,S,M);if($s(m)&&(j.ctx.renderer=Ye),Eu(j),j.asyncDep){if(M&&M.registerDep(j,he),!m.el){const H=j.subTree=F(yt);le(null,H,h,_)}return}he(j,m,h,_,M,P,z)},Ce=(m,h,_)=>{const S=h.component=m.component;if(Fd(m,h,_))if(S.asyncDep&&!S.asyncResolved){de(S,h,_);return}else S.next=h,Ld(S.update),S.update();else h.el=m.el,S.vnode=h},he=(m,h,_,S,M,P,z)=>{const j=()=>{if(m.isMounted){let{next:X,bu:Y,u:J,parent:te,vnode:xe}=m,k=X,C;fo(m,!1),X?(X.el=xe.el,de(m,X,z)):X=xe,Y&&Dr(Y),(C=X.props&&X.props.onVnodeBeforeUpdate)&&Lt(C,te,X,xe),fo(m,!0);const v=rn(m),q=m.subTree;m.subTree=v,A(q,v,d(q.el),qe(q),m,M,P),X.el=v.el,k===null&&Bd(m,v.el),J&&lt(J,M),(C=X.props&&X.props.onVnodeUpdated)&&lt(()=>Lt(C,te,X,xe),M)}else{let X;const{el:Y,props:J}=h,{bm:te,m:xe,parent:k}=m,C=ts(h);if(fo(m,!1),te&&Dr(te),!C&&(X=J&&J.onVnodeBeforeMount)&&Lt(X,k,h),fo(m,!0),Y&&at){const v=()=>{m.subTree=rn(m),at(Y,m.subTree,m,M,null)};C?h.type.__asyncLoader().then(()=>!m.isUnmounted&&v()):v()}else{const v=m.subTree=rn(m);A(null,v,_,S,m,M,P),h.el=v.el}if(xe&&lt(xe,M),!C&&(X=J&&J.onVnodeMounted)){const v=h;lt(()=>Lt(X,k,v),M)}(h.shapeFlag&256||k&&ts(k.vnode)&&k.vnode.shapeFlag&256)&&m.a&&lt(m.a,M),m.isMounted=!0,h=_=S=null}},H=m.effect=new Vr(j,()=>Ki(R),m.scope),R=m.update=()=>H.run();R.id=m.uid,fo(m,!0),R()},de=(m,h,_)=>{h.component=m;const S=m.vnode.props;m.vnode=h,m.next=null,lu(m,h.props,S,_),mu(m,h.children,_),Oo(),Xs(void 0,m.update),Ao()},E=(m,h,_,S,M,P,z,j,H=!1)=>{const R=m&&m.children,X=m?m.shapeFlag:0,Y=h.children,{patchFlag:J,shapeFlag:te}=h;if(J>0){if(J&128){O(R,Y,_,S,M,P,z,j,H);return}else if(J&256){x(R,Y,_,S,M,P,z,j,H);return}}te&8?(X&16&&Ee(R,M,P),Y!==R&&u(_,Y)):X&16?te&16?O(R,Y,_,S,M,P,z,j,H):Ee(R,M,P,!0):(X&8&&u(_,""),te&16&&ee(Y,_,S,M,P,z,j,H))},x=(m,h,_,S,M,P,z,j,H)=>{m=m||Ro,h=h||Ro;const R=m.length,X=h.length,Y=Math.min(R,X);let J;for(J=0;J<Y;J++){const te=h[J]=H?$t(h[J]):At(h[J]);A(m[J],te,_,null,M,P,z,j,H)}R>X?Ee(m,M,P,!0,!1,Y):ee(h,_,S,M,P,z,j,H,Y)},O=(m,h,_,S,M,P,z,j,H)=>{let R=0;const X=h.length;let Y=m.length-1,J=X-1;for(;R<=Y&&R<=J;){const te=m[R],xe=h[R]=H?$t(h[R]):At(h[R]);if(ho(te,xe))A(te,xe,_,null,M,P,z,j,H);else break;R++}for(;R<=Y&&R<=J;){const te=m[Y],xe=h[J]=H?$t(h[J]):At(h[J]);if(ho(te,xe))A(te,xe,_,null,M,P,z,j,H);else break;Y--,J--}if(R>Y){if(R<=J){const te=J+1,xe=te<X?h[te].el:S;for(;R<=J;)A(null,h[R]=H?$t(h[R]):At(h[R]),_,xe,M,P,z,j,H),R++}}else if(R>J)for(;R<=Y;)N(m[R],M,P,!0),R++;else{const te=R,xe=R,k=new Map;for(R=xe;R<=J;R++){const ct=h[R]=H?$t(h[R]):At(h[R]);ct.key!=null&&k.set(ct.key,R)}let C,v=0;const q=J-xe+1;let ce=!1,Ke=0;const $e=new Array(q);for(R=0;R<q;R++)$e[R]=0;for(R=te;R<=Y;R++){const ct=m[R];if(v>=q){N(ct,M,P,!0);continue}let Ut;if(ct.key!=null)Ut=k.get(ct.key);else for(C=xe;C<=J;C++)if($e[C-xe]===0&&ho(ct,h[C])){Ut=C;break}Ut===void 0?N(ct,M,P,!0):($e[Ut-xe]=R+1,Ut>=Ke?Ke=Ut:ce=!0,A(ct,h[Ut],_,null,M,P,z,j,H),v++)}const fi=ce?vu($e):Ro;for(C=fi.length-1,R=q-1;R>=0;R--){const ct=xe+R,Ut=h[ct],Fl=ct+1<X?h[ct+1].el:S;$e[R]===0?A(null,Ut,_,Fl,M,P,z,j,H):ce&&(C<0||R!==fi[C]?W(Ut,_,Fl,2):C--)}}},W=(m,h,_,S,M=null)=>{const{el:P,type:z,transition:j,children:H,shapeFlag:R}=m;if(R&6){W(m.component.subTree,h,_,S);return}if(R&128){m.suspense.move(h,_,S);return}if(R&64){z.move(m,h,_,Ye);return}if(z===Te){s(P,h,_);for(let Y=0;Y<H.length;Y++)W(H[Y],h,_,S);s(m.anchor,h,_);return}if(z===yn){ie(m,h,_);return}if(S!==2&&R&1&&j)if(S===0)j.beforeEnter(P),s(P,h,_),lt(()=>j.enter(P),M);else{const{leave:Y,delayLeave:J,afterLeave:te}=j,xe=()=>s(P,h,_),k=()=>{Y(P,()=>{xe(),te&&te()})};J?J(P,xe,k):k()}else s(P,h,_)},N=(m,h,_,S=!1,M=!1)=>{const{type:P,props:z,ref:j,children:H,dynamicChildren:R,shapeFlag:X,patchFlag:Y,dirs:J}=m;if(j!=null&&vn(j,null,_,m,!0),X&256){h.ctx.deactivate(m);return}const te=X&1&&J,xe=!ts(m);let k;if(xe&&(k=z&&z.onVnodeBeforeUnmount)&&Lt(k,h,m),X&6)ze(m.component,_,S);else{if(X&128){m.suspense.unmount(_,S);return}te&&uo(m,null,h,"beforeUnmount"),X&64?m.type.remove(m,h,_,M,Ye,S):R&&(P!==Te||Y>0&&Y&64)?Ee(R,h,_,!1,!0):(P===Te&&Y&384||!M&&X&16)&&Ee(H,h,_),S&&ae(m)}(xe&&(k=z&&z.onVnodeUnmounted)||te)&&lt(()=>{k&&Lt(k,h,m),te&&uo(m,null,h,"unmounted")},_)},ae=m=>{const{type:h,el:_,anchor:S,transition:M}=m;if(h===Te){be(_,S);return}if(h===yn){ve(m);return}const P=()=>{n(_),M&&!M.persisted&&M.afterLeave&&M.afterLeave()};if(m.shapeFlag&1&&M&&!M.persisted){const{leave:z,delayLeave:j}=M,H=()=>z(_,P);j?j(m.el,P,H):H()}else P()},be=(m,h)=>{let _;for(;m!==h;)_=f(m),n(m),m=_;n(h)},ze=(m,h,_)=>{const{bum:S,scope:M,update:P,subTree:z,um:j}=m;S&&Dr(S),M.stop(),P&&(P.active=!1,N(z,m,h,_)),j&&lt(j,h),lt(()=>{m.isUnmounted=!0},h),h&&h.pendingBranch&&!h.isUnmounted&&m.asyncDep&&!m.asyncResolved&&m.suspenseId===h.pendingId&&(h.deps--,h.deps===0&&h.resolve())},Ee=(m,h,_,S=!1,M=!1,P=0)=>{for(let z=P;z<m.length;z++)N(m[z],h,_,S,M)},qe=m=>m.shapeFlag&6?qe(m.component.subTree):m.shapeFlag&128?m.suspense.next():f(m.anchor||m.el),gt=(m,h,_)=>{m==null?h._vnode&&N(h._vnode,null,null,!0):A(h._vnode||null,m,h,null,null,null,_),Wi(),h._vnode=m},Ye={p:A,um:N,m:W,r:ae,mt:He,mc:ee,pc:E,pbc:fe,n:qe,o:e};let Ne,at;return t&&([Ne,at]=t(Ye)),{render:gt,hydrate:Ne,createApp:hu(gt,Ne)}}function fo({effect:e,update:t},o){e.allowRecurse=t.allowRecurse=o}function Ma(e,t,o=!1){const s=e.children,n=t.children;if(oe(s)&&oe(n))for(let r=0;r<s.length;r++){const i=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=$t(n[r]),a.el=i.el),o||Ma(i,a))}}function vu(e){const t=e.slice(),o=[0];let s,n,r,i,a;const c=e.length;for(s=0;s<c;s++){const l=e[s];if(l!==0){if(n=o[o.length-1],e[n]<l){t[s]=n,o.push(s);continue}for(r=0,i=o.length-1;r<i;)a=r+i>>1,e[o[a]]<l?r=a+1:i=a;l<e[o[r]]&&(r>0&&(t[s]=o[r-1]),o[r]=s)}}for(r=o.length,i=o[r-1];r-- >0;)o[r]=i,i=t[i];return o}const bu=e=>e.__isTeleport,Te=Symbol(void 0),bn=Symbol(void 0),yt=Symbol(void 0),yn=Symbol(void 0),os=[];let Et=null;function p(e=!1){os.push(Et=e?null:[])}function yu(){os.pop(),Et=os[os.length-1]||null}let ss=1;function Ra(e){ss+=e}function Ca(e){return e.dynamicChildren=ss>0?Et||Ro:null,yu(),ss>0&&Et&&Et.push(e),e}function w(e,t,o,s,n,r){return Ca(T(e,t,o,s,n,r,!0))}function Oe(e,t,o,s,n){return Ca(F(e,t,o,s,n,!0))}function rr(e){return e?e.__v_isVNode===!0:!1}function ho(e,t){return e.type===t.type&&e.key===t.key}const nr="__vInternal",Oa=({key:e})=>e!=null?e:null,ir=({ref:e,ref_key:t,ref_for:o})=>e!=null?Xe(e)||rt(e)||pe(e)?{i:et,r:e,k:t,f:!!o}:e:null;function T(e,t=null,o=null,s=0,n=null,r=e===Te?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Oa(t),ref:t&&ir(t),scopeId:Xi,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null};return a?(wn(c,o),r&128&&e.normalize(c)):o&&(c.shapeFlag|=Xe(o)?8:16),ss>0&&!i&&Et&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Et.push(c),c}const F=wu;function wu(e,t=null,o=null,s=0,n=null,r=!1){if((!e||e===da)&&(e=yt),rr(e)){const a=Jt(e,t,!0);return o&&wn(a,o),ss>0&&!r&&Et&&(a.shapeFlag&6?Et[Et.indexOf(e)]=a:Et.push(a)),a.patchFlag|=-2,a}if(Cu(e)&&(e=e.__vccOpts),t){t=Ae(t);let{class:a,style:c}=t;a&&!Xe(a)&&(t.class=ge(a)),We(c)&&(Bi(c)&&!oe(c)&&(c=Ze({},c)),t.style=Me(c))}const i=Xe(e)?1:Dd(e)?128:bu(e)?64:We(e)?4:pe(e)?2:0;return T(e,t,o,s,n,i,r,!0)}function Ae(e){return e?Bi(e)||nr in e?Ze({},e):e:null}function Jt(e,t,o=!1){const{props:s,ref:n,patchFlag:r,children:i}=e,a=t?xn(s||{},t):s;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Oa(a),ref:t&&t.ref?o&&n?oe(n)?n.concat(ir(t)):[n,ir(t)]:ir(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Te?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Jt(e.ssContent),ssFallback:e.ssFallback&&Jt(e.ssFallback),el:e.el,anchor:e.anchor}}function Qt(e=" ",t=0){return F(bn,null,e,t)}function B(e="",t=!1){return t?(p(),Oe(yt,null,e)):F(yt,null,e)}function At(e){return e==null||typeof e=="boolean"?F(yt):oe(e)?F(Te,null,e.slice()):typeof e=="object"?$t(e):F(bn,null,String(e))}function $t(e){return e.el===null||e.memo?e:Jt(e)}function wn(e,t){let o=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(oe(t))o=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),wn(e,n()),n._c&&(n._d=!0));return}else{o=32;const n=t._;!n&&!(nr in t)?t._ctx=et:n===3&&et&&(et.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else pe(t)?(t={default:t,_ctx:et},o=32):(t=String(t),s&64?(o=16,t=[Qt(t)]):o=8);e.children=t,e.shapeFlag|=o}function xn(...e){const t={};for(let o=0;o<e.length;o++){const s=e[o];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=ge([t.class,s.class]));else if(n==="style")t.style=Me([t.style,s.style]);else if(js(n)){const r=t[n],i=s[n];i&&r!==i&&!(oe(r)&&r.includes(i))&&(t[n]=r?[].concat(r,i):i)}else n!==""&&(t[n]=s[n])}return t}function Lt(e,t,o,s=null){vt(e,t,7,[o,s])}const xu=Sa();let _u=0;function ku(e,t,o){const s=e.type,n=(t?t.appContext:e.appContext)||xu,r={uid:_u++,vnode:e,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Xl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ba(s,n),emitsOptions:Zi(s,n),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:s.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=Pd.bind(null,r),e.ce&&e.ce(r),r}let Je=null;const Aa=()=>Je||et,Po=e=>{Je=e,e.scope.on()},go=()=>{Je&&Je.scope.off(),Je=null};function La(e){return e.vnode.shapeFlag&4}let rs=!1;function Eu(e,t=!1){rs=t;const{props:o,children:s}=e.vnode,n=La(e);cu(e,o,n,t),uu(e,s);const r=n?Tu(e,t):void 0;return rs=!1,r}function Tu(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=Di(new Proxy(e.ctx,ou));const{setup:s}=o;if(s){const n=e.setupContext=s.length>1?Mu(e):null;Po(e),Oo();const r=Zt(s,e,0,[e.props,n]);if(Ao(),go(),vi(r)){if(r.then(go,go),t)return r.then(i=>{Ia(e,i,t)}).catch(i=>{Ys(i,e,0)});e.asyncDep=r}else Ia(e,r,t)}else Pa(e,t)}function Ia(e,t,o){pe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:We(t)&&(e.setupState=Hi(t)),Pa(e,o)}let ja;function Pa(e,t,o){const s=e.type;if(!e.render){if(!t&&ja&&!s.render){const n=s.template;if(n){const{isCustomElement:r,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:c}=s,l=Ze(Ze({isCustomElement:r,delimiters:a},i),c);s.render=ja(n,l)}}e.render=s.render||_t}Po(e),Oo(),su(e),Ao(),go()}function Su(e){return new Proxy(e.attrs,{get(t,o){return mt(e,"get","$attrs"),t[o]}})}function Mu(e){const t=s=>{e.exposed=s||{}};let o;return{get attrs(){return o||(o=Su(e))},slots:e.slots,emit:e.emit,expose:t}}function ar(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(Hi(Di(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in or)return or[o](e)}}))}function Ru(e,t=!0){return pe(e)?e.displayName||e.name:e.name||t&&e.__name}function Cu(e){return pe(e)&&"__vccOpts"in e}const Ou=(e,t)=>Cd(e,t,rs);function Au(e,t,o){const s=arguments.length;return s===2?We(t)&&!oe(t)?rr(t)?F(e,null,[t]):F(e,t):F(e,null,t):(s>3?o=Array.prototype.slice.call(arguments,2):s===3&&rr(o)&&(o=[o]),F(e,t,o))}const Lu="3.2.37",Iu="http://www.w3.org/2000/svg",po=typeof document!="undefined"?document:null,Na=po&&po.createElement("template"),ju={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,s)=>{const n=t?po.createElementNS(Iu,e):po.createElement(e,o?{is:o}:void 0);return e==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:e=>po.createTextNode(e),createComment:e=>po.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>po.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,o,s,n,r){const i=o?o.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),o),!(n===r||!(n=n.nextSibling)););else{Na.innerHTML=s?`<svg>${e}</svg>`:e;const a=Na.content;if(s){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,o)}return[i?i.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}};function Pu(e,t,o){const s=e._vtc;s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}function Nu(e,t,o){const s=e.style,n=Xe(o);if(o&&!n){for(const r in o)_n(s,r,o[r]);if(t&&!Xe(t))for(const r in t)o[r]==null&&_n(s,r,"")}else{const r=s.display;n?t!==o&&(s.cssText=o):t&&e.removeAttribute("style"),"_vod"in e&&(s.display=r)}}const Ua=/\s*!important$/;function _n(e,t,o){if(oe(o))o.forEach(s=>_n(e,t,s));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const s=Uu(e,t);Ua.test(o)?e.setProperty(Ct(s),o.replace(Ua,""),"important"):e[s]=o}}const Fa=["Webkit","Moz","ms"],kn={};function Uu(e,t){const o=kn[t];if(o)return o;let s=pt(t);if(s!=="filter"&&s in e)return kn[t]=s;s=Fs(s);for(let n=0;n<Fa.length;n++){const r=Fa[n]+s;if(r in e)return kn[t]=r}return t}const Ba="http://www.w3.org/1999/xlink";function Fu(e,t,o,s,n){if(s&&t.startsWith("xlink:"))o==null?e.removeAttributeNS(Ba,t.slice(6,t.length)):e.setAttributeNS(Ba,t,o);else{const r=Bl(t);o==null||r&&!hi(o)?e.removeAttribute(t):e.setAttribute(t,r?"":o)}}function Bu(e,t,o,s,n,r,i){if(t==="innerHTML"||t==="textContent"){s&&i(s,n,r),e[t]=o==null?"":o;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=o;const c=o==null?"":o;(e.value!==c||e.tagName==="OPTION")&&(e.value=c),o==null&&e.removeAttribute(t);return}let a=!1;if(o===""||o==null){const c=typeof e[t];c==="boolean"?o=hi(o):o==null&&c==="string"?(o="",a=!0):c==="number"&&(o=0,a=!0)}try{e[t]=o}catch{}a&&e.removeAttribute(t)}const[Da,Du]=(()=>{let e=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const o=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(o&&Number(o[1])<=53)}return[e,t]})();let En=0;const Hu=Promise.resolve(),zu=()=>{En=0},qu=()=>En||(Hu.then(zu),En=Da());function Ku(e,t,o,s){e.addEventListener(t,o,s)}function Vu(e,t,o,s){e.removeEventListener(t,o,s)}function Gu(e,t,o,s,n=null){const r=e._vei||(e._vei={}),i=r[t];if(s&&i)i.value=s;else{const[a,c]=Wu(t);if(s){const l=r[t]=Yu(s,n);Ku(e,a,l,c)}else i&&(Vu(e,a,i,c),r[t]=void 0)}}const Ha=/(?:Once|Passive|Capture)$/;function Wu(e){let t;if(Ha.test(e)){t={};let o;for(;o=e.match(Ha);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[Ct(e.slice(2)),t]}function Yu(e,t){const o=s=>{const n=s.timeStamp||Da();(Du||n>=o.attached-1)&&vt(Zu(s,o.value),t,5,[s])};return o.value=e,o.attached=qu(),o}function Zu(e,t){if(oe(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const za=/^on[a-z]/,Xu=(e,t,o,s,n=!1,r,i,a,c)=>{t==="class"?Pu(e,s,n):t==="style"?Nu(e,o,s):js(t)?Pr(t)||Gu(e,t,o,s,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Ju(e,t,s,n))?Bu(e,t,s,r,i,a,c):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Fu(e,t,s,n))};function Ju(e,t,o,s){return s?!!(t==="innerHTML"||t==="textContent"||t in e&&za.test(t)&&pe(o)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||za.test(t)&&Xe(o)?!1:t in e}function Qu(e,t){const o=Kd(e);class s extends Tn{constructor(r){super(o,r,t)}}return s.def=o,s}const $u=typeof HTMLElement!="undefined"?HTMLElement:class{};class Tn extends $u{constructor(t,o={},s){super(),this._def=t,this._props=o,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&s?s(this._createVNode(),this.shadowRoot):this.attachShadow({mode:"open"})}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,qi(()=>{this._connected||(tc(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let s=0;s<this.attributes.length;s++)this._setAttr(this.attributes[s].name);new MutationObserver(s=>{for(const n of s)this._setAttr(n.attributeName)}).observe(this,{attributes:!0});const t=s=>{const{props:n,styles:r}=s,i=!oe(n),a=n?i?Object.keys(n):n:[];let c;if(i)for(const l in this._props){const u=n[l];(u===Number||u&&u.type===Number)&&(this._props[l]=Hs(this._props[l]),(c||(c=Object.create(null)))[l]=!0)}this._numberProps=c;for(const l of Object.keys(this))l[0]!=="_"&&this._setProp(l,this[l],!0,!1);for(const l of a.map(pt))Object.defineProperty(this,l,{get(){return this._getProp(l)},set(u){this._setProp(l,u)}});this._applyStyles(r),this._update()},o=this._def.__asyncLoader;o?o().then(t):t(this._def)}_setAttr(t){let o=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(o=Hs(o)),this._setProp(pt(t),o,!1)}_getProp(t){return this._props[t]}_setProp(t,o,s=!0,n=!0){o!==this._props[t]&&(this._props[t]=o,n&&this._instance&&this._update(),s&&(o===!0?this.setAttribute(Ct(t),""):typeof o=="string"||typeof o=="number"?this.setAttribute(Ct(t),o+""):o||this.removeAttribute(Ct(t))))}_update(){tc(this._createVNode(),this.shadowRoot)}_createVNode(){const t=F(this._def,Ze({},this._props));return this._instance||(t.ce=o=>{this._instance=o,o.isCE=!0,o.emit=(n,...r)=>{this.dispatchEvent(new CustomEvent(n,{detail:r}))};let s=this;for(;s=s&&(s.parentNode||s.host);)if(s instanceof Tn){o.parent=s._instance;break}}),t}_applyStyles(t){t&&t.forEach(o=>{const s=document.createElement("style");s.textContent=o,this.shadowRoot.appendChild(s)})}}const eo="transition",ns="animation",Ge=(e,{slots:t})=>Au(oa,Va(e),t);Ge.displayName="Transition";const qa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},em=Ge.props=Ze({},oa.props,qa),vo=(e,t=[])=>{oe(e)?e.forEach(o=>o(...t)):e&&e(...t)},Ka=e=>e?oe(e)?e.some(t=>t.length>1):e.length>1:!1;function Va(e){const t={};for(const K in e)K in qa||(t[K]=e[K]);if(e.css===!1)return t;const{name:o="v",type:s,duration:n,enterFromClass:r=`${o}-enter-from`,enterActiveClass:i=`${o}-enter-active`,enterToClass:a=`${o}-enter-to`,appearFromClass:c=r,appearActiveClass:l=i,appearToClass:u=a,leaveFromClass:d=`${o}-leave-from`,leaveActiveClass:f=`${o}-leave-active`,leaveToClass:g=`${o}-leave-to`}=e,y=tm(n),L=y&&y[0],A=y&&y[1],{onBeforeEnter:G,onEnter:le,onEnterCancelled:se,onLeave:ie,onLeaveCancelled:ve,onBeforeAppear:re=G,onAppear:V=le,onAppearCancelled:D=se}=t,ee=(K,we,Se)=>{to(K,we?u:a),to(K,we?l:i),Se&&Se()},me=(K,we)=>{K._isLeaving=!1,to(K,d),to(K,g),to(K,f),we&&we()},fe=K=>(we,Se)=>{const He=K?V:le,Ce=()=>ee(we,K,Se);vo(He,[we,Ce]),Ga(()=>{to(we,K?c:r),zt(we,K?u:a),Ka(He)||Wa(we,s,L,Ce)})};return Ze(t,{onBeforeEnter(K){vo(G,[K]),zt(K,r),zt(K,i)},onBeforeAppear(K){vo(re,[K]),zt(K,c),zt(K,l)},onEnter:fe(!1),onAppear:fe(!0),onLeave(K,we){K._isLeaving=!0;const Se=()=>me(K,we);zt(K,d),Ja(),zt(K,f),Ga(()=>{!K._isLeaving||(to(K,d),zt(K,g),Ka(ie)||Wa(K,s,A,Se))}),vo(ie,[K,Se])},onEnterCancelled(K){ee(K,!1),vo(se,[K])},onAppearCancelled(K){ee(K,!0),vo(D,[K])},onLeaveCancelled(K){me(K),vo(ve,[K])}})}function tm(e){if(e==null)return null;if(We(e))return[Sn(e.enter),Sn(e.leave)];{const t=Sn(e);return[t,t]}}function Sn(e){return Hs(e)}function zt(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e._vtc||(e._vtc=new Set)).add(t)}function to(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const{_vtc:o}=e;o&&(o.delete(t),o.size||(e._vtc=void 0))}function Ga(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let om=0;function Wa(e,t,o,s){const n=e._endId=++om,r=()=>{n===e._endId&&s()};if(o)return setTimeout(r,o);const{type:i,timeout:a,propCount:c}=Ya(e,t);if(!i)return s();const l=i+"end";let u=0;const d=()=>{e.removeEventListener(l,f),r()},f=g=>{g.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),e.addEventListener(l,f)}function Ya(e,t){const o=window.getComputedStyle(e),s=y=>(o[y]||"").split(", "),n=s(eo+"Delay"),r=s(eo+"Duration"),i=Za(n,r),a=s(ns+"Delay"),c=s(ns+"Duration"),l=Za(a,c);let u=null,d=0,f=0;t===eo?i>0&&(u=eo,d=i,f=r.length):t===ns?l>0&&(u=ns,d=l,f=c.length):(d=Math.max(i,l),u=d>0?i>l?eo:ns:null,f=u?u===eo?r.length:c.length:0);const g=u===eo&&/\b(transform|all)(,|$)/.test(o[eo+"Property"]);return{type:u,timeout:d,propCount:f,hasTransform:g}}function Za(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,s)=>Xa(o)+Xa(e[s])))}function Xa(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function Ja(){return document.body.offsetHeight}const Qa=new WeakMap,$a=new WeakMap,Mn={name:"TransitionGroup",props:Ze({},em,{tag:String,moveClass:String}),setup(e,{slots:t}){const o=Aa(),s=ta();let n,r;return aa(()=>{if(!n.length)return;const i=e.moveClass||`${e.name||"v"}-move`;if(!im(n[0].el,o.vnode.el,i))return;n.forEach(sm),n.forEach(rm);const a=n.filter(nm);Ja(),a.forEach(c=>{const l=c.el,u=l.style;zt(l,i),u.transform=u.webkitTransform=u.transitionDuration="";const d=l._moveCb=f=>{f&&f.target!==l||(!f||/transform$/.test(f.propertyName))&&(l.removeEventListener("transitionend",d),l._moveCb=null,to(l,i))};l.addEventListener("transitionend",d)})}),()=>{const i=Re(e),a=Va(i);let c=i.tag||Te;n=r,r=t.default?ln(t.default()):[];for(let l=0;l<r.length;l++){const u=r[l];u.key!=null&&es(u,$o(u,a,s,o))}if(n)for(let l=0;l<n.length;l++){const u=n[l];es(u,$o(u,a,s,o)),Qa.set(u,u.el.getBoundingClientRect())}return F(c,null,r)}}};function sm(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function rm(e){$a.set(e,e.el.getBoundingClientRect())}function nm(e){const t=Qa.get(e),o=$a.get(e),s=t.left-o.left,n=t.top-o.top;if(s||n){const r=e.el.style;return r.transform=r.webkitTransform=`translate(${s}px,${n}px)`,r.transitionDuration="0s",e}}function im(e,t,o){const s=e.cloneNode();e._vtc&&e._vtc.forEach(i=>{i.split(/\s+/).forEach(a=>a&&s.classList.remove(a))}),o.split(/\s+/).forEach(i=>i&&s.classList.add(i)),s.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(s);const{hasTransform:r}=Ya(s);return n.removeChild(s),r}const am=["ctrl","shift","alt","meta"],cm={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>am.some(o=>e[`${o}Key`]&&!t.includes(o))},wt=(e,t)=>(o,...s)=>{for(let n=0;n<t.length;n++){const r=cm[t[n]];if(r&&r(o,t))return}return e(o,...s)},lm={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qt=(e,t)=>o=>{if(!("key"in o))return;const s=Ct(o.key);if(t.some(n=>n===s||lm[n]===s))return e(o)},cr={beforeMount(e,{value:t},{transition:o}){e._vod=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):is(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:s}){!t!=!o&&(s?t?(s.beforeEnter(e),is(e,!0),s.enter(e)):s.leave(e,()=>{is(e,!1)}):is(e,t))},beforeUnmount(e,{value:t}){is(e,t)}};function is(e,t){e.style.display=t?e._vod:"none"}const dm=Ze({patchProp:Xu},ju);let ec;function um(){return ec||(ec=gu(dm))}const tc=(...e)=>{um().render(...e)};var Fe=(e,t)=>{const o=e.__vccOpts||e;for(const[s,n]of t)o[s]=n;return o};const mm={name:"AppLoader",props:{show:{type:Boolean,default:!1},infinite:{type:Boolean,default:!1},type:{type:String,required:!0},messageId:{type:String,default:""}}},fm=T("div",{id:"vac-circle"},null,-1),hm=T("div",{id:"vac-circle"},null,-1),gm=T("div",{id:"vac-circle"},null,-1),pm=T("div",{id:"vac-circle"},null,-1),vm=T("div",{id:"vac-circle"},null,-1),bm=T("div",{id:"vac-circle"},null,-1);function ym(e,t,o,s,n,r){return p(),Oe(Ge,{name:"vac-fade-spinner",appear:""},{default:Q(()=>[o.show?(p(),w("div",{key:0,class:ge(["vac-loader-wrapper",{"vac-container-center":!o.infinite,"vac-container-top":o.infinite}])},[o.type==="rooms"?U(e.$slots,"spinner-icon-rooms",{key:0},()=>[fm]):B("",!0),o.type==="infinite-rooms"?U(e.$slots,"spinner-icon-infinite-rooms",{key:1},()=>[hm]):B("",!0),o.type==="message-file"?U(e.$slots,"spinner-icon-message-file_"+o.messageId,{key:2},()=>[gm]):B("",!0),o.type==="room-file"?U(e.$slots,"spinner-icon-room-file",{key:3},()=>[pm]):B("",!0),o.type==="messages"?U(e.$slots,"spinner-icon-messages",{key:4},()=>[vm]):B("",!0),o.type==="infinite-messages"?U(e.$slots,"spinner-icon-infinite-messages",{key:5},()=>[bm]):B("",!0)],2)):B("",!0)]),_:3})}var lr=Fe(mm,[["render",ym]]);const wm={name:"SvgIcon",props:{name:{type:String,default:null},param:{type:String,default:null}},data(){return{svgItem:{search:{path:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},add:{path:"M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"},toggle:{path:"M5,13L9,17L7.6,18.42L1.18,12L7.6,5.58L9,7L5,11H21V13H5M21,6V8H11V6H21M21,16V18H11V16H21Z"},menu:{path:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"},close:{path:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"},file:{path:"M14,17H7V15H14M17,13H7V11H17M17,9H7V7H17M19,3H5C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5C21,3.89 20.1,3 19,3Z"},paperclip:{path:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},"close-outline":{path:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},send:{path:"M2,21L23,12L2,3V10L17,12L2,14V21Z"},emoji:{path:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"},document:{path:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},pencil:{path:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},checkmark:{path:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"},"double-checkmark":{path:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"},eye:{path:"M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"},dropdown:{path:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z"},deleted:{path:"M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L16.91,5.68C15.55,4.63 13.85,4 12,4M12,20A8,8 0 0,0 20,12C20,10.15 19.37,8.45 18.32,7.09L7.09,18.32C8.45,19.37 10.15,20 12,20Z"},microphone:{size:"large",path:"M432.8,216.4v39.2c0,45.2-15.3,84.3-45.2,118.4c-29.8,33.2-67.3,52.8-111.6,57.9v40.9h78.4c5.1,0,10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6c0,5.1-1.7,10.2-6,13.6c-4.3,4.3-8.5,6-13.6,6H157.6c-5.1,0-10.2-1.7-13.6-6c-4.3-4.3-6-8.5-6-13.6c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6H236v-40.9c-44.3-5.1-81.8-23.9-111.6-57.9s-45.2-73.3-45.2-118.4v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6s10.2,1.7,13.6,6c4.3,4.3,6,8.5,6,13.6v39.2c0,37.5,13.6,70.7,40,97.1s59.6,40,97.1,40s70.7-13.6,97.1-40c26.4-26.4,40-59.6,40-97.1v-39.2c0-5.1,1.7-10.2,6-13.6c4.3-4.3,8.5-6,13.6-6c5.1,0,10.2,1.7,13.6,6C430.2,206.2,432.8,211.3,432.8,216.4z M353.5,98v157.6c0,27.3-9.4,50.3-29,69c-19.6,19.6-42.6,29-69,29s-50.3-9.4-69-29c-19.6-19.6-29-42.6-29-69V98c0-27.3,9.4-50.3,29-69c19.6-19.6,42.6-29,69-29s50.3,9.4,69,29C344.2,47.7,353.5,71.6,353.5,98z"},"audio-play":{size:"medium",path:"M43.331,21.237L7.233,0.397c-0.917-0.529-2.044-0.529-2.96,0c-0.916,0.528-1.48,1.505-1.48,2.563v41.684   c0,1.058,0.564,2.035,1.48,2.563c0.458,0.268,0.969,0.397,1.48,0.397c0.511,0,1.022-0.133,1.48-0.397l36.098-20.84   c0.918-0.529,1.479-1.506,1.479-2.564S44.247,21.767,43.331,21.237z"},"audio-pause":{size:"medium",path:"M17.991,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C4.729,2.969,7.698,0,11.36,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z",path2:"M42.877,40.976c0,3.662-2.969,6.631-6.631,6.631l0,0c-3.662,0-6.631-2.969-6.631-6.631V6.631C29.616,2.969,32.585,0,36.246,0l0,0c3.662,0,6.631,2.969,6.631,6.631V40.976z"}}}},computed:{svgId(){const e=this.param?"-"+this.param:"";return`vac-icon-${this.name}${e}`},size(){const e=this.svgItem[this.name];return e.size==="large"?512:e.size==="medium"?48:24}}},xm=["viewBox"],_m=["id","d"],km=["id","d"];function Em(e,t,o,s,n,r){return p(),w("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",width:"24",height:"24",viewBox:`0 0 ${r.size} ${r.size}`},[T("path",{id:r.svgId,d:n.svgItem[o.name].path},null,8,_m),n.svgItem[o.name].path2?(p(),w("path",{key:0,id:r.svgId,d:n.svgItem[o.name].path2},null,8,km)):B("",!0)],8,xm)}var Qe=Fe(wm,[["render",Em]]);const Tm={name:"RoomsSearch",components:{SvgIcon:Qe},props:{textMessages:{type:Object,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0}},emits:["search-room","add-room"],computed:{showSearchBar(){return this.showSearch||this.showAddRoom}}},Sm={key:0,class:"vac-icon-search"},Mm=["placeholder"];function Rm(e,t,o,s,n,r){const i=$("svg-icon");return p(),w("div",{class:ge({"vac-box-search":r.showSearchBar,"vac-box-empty":!r.showSearchBar})},[o.showSearch?(p(),w(Te,{key:0},[!o.loadingRooms&&o.rooms.length?(p(),w("div",Sm,[U(e.$slots,"search-icon",{},()=>[F(i,{name:"search"})])])):B("",!0),!o.loadingRooms&&o.rooms.length?(p(),w("input",{key:1,type:"search",placeholder:o.textMessages.SEARCH,autocomplete:"off",class:"vac-input",onInput:t[0]||(t[0]=a=>e.$emit("search-room",a))},null,40,Mm)):B("",!0)],64)):B("",!0),o.showAddRoom?(p(),w("div",{key:1,class:"vac-svg-button vac-add-icon",onClick:t[1]||(t[1]=a=>e.$emit("add-room"))},[U(e.$slots,"add-icon",{},()=>[F(i,{name:"add"})])])):B("",!0)],2)}var Cm=Fe(Tm,[["render",Rm]]);function Om(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tt={},No={};No.__esModule=!0,No.inherits=Am;function Am(e,t){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=Object.create(e.prototype);for(var n in o)s[n]=o[n];return s.constructor=t,t.prototype=s,t}var as={};as.__esModule=!0;var Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht={defaultProtocol:"http",events:null,format:sc,formatHref:sc,nl2br:!1,tagName:"a",target:jm,validate:!0,ignoreTags:[],attributes:null,className:"linkified"};as.defaults=ht,as.Options=oc,as.contains=Im;function oc(e){e=e||{},this.defaultProtocol=e.hasOwnProperty("defaultProtocol")?e.defaultProtocol:ht.defaultProtocol,this.events=e.hasOwnProperty("events")?e.events:ht.events,this.format=e.hasOwnProperty("format")?e.format:ht.format,this.formatHref=e.hasOwnProperty("formatHref")?e.formatHref:ht.formatHref,this.nl2br=e.hasOwnProperty("nl2br")?e.nl2br:ht.nl2br,this.tagName=e.hasOwnProperty("tagName")?e.tagName:ht.tagName,this.target=e.hasOwnProperty("target")?e.target:ht.target,this.validate=e.hasOwnProperty("validate")?e.validate:ht.validate,this.ignoreTags=[],this.attributes=e.attributes||e.linkAttributes||ht.attributes,this.className=e.hasOwnProperty("className")?e.className:e.linkClass||ht.className;for(var t=e.hasOwnProperty("ignoreTags")?e.ignoreTags:ht.ignoreTags,o=0;o<t.length;o++)this.ignoreTags.push(t[o].toUpperCase())}oc.prototype={resolve:function(t){var o=t.toHref(this.defaultProtocol);return{formatted:this.get("format",t.toString(),t),formattedHref:this.get("formatHref",o,t),tagName:this.get("tagName",o,t),className:this.get("className",o,t),target:this.get("target",o,t),events:this.getObject("events",o,t),attributes:this.getObject("attributes",o,t)}},check:function(t){return this.get("validate",t.toString(),t)},get:function(t,o,s){var n=void 0,r=this[t];if(!r)return r;switch(typeof r=="undefined"?"undefined":Lm(r)){case"function":return r(o,s.type);case"object":return n=r.hasOwnProperty(s.type)?r[s.type]:ht[t],typeof n=="function"?n(o,s.type):n}return r},getObject:function(t,o,s){var n=this[t];return typeof n=="function"?n(o,s.type):n}};function Im(e,t){for(var o=0;o<e.length;o++)if(e[o]===t)return!0;return!1}function sc(e){return e}function jm(e,t){return t==="url"?"_blank":null}var It={},Kt={};Kt.__esModule=!0,Kt.stateify=Kt.TokenState=Kt.CharacterState=void 0;var rc=No;function Rn(){return function(e){this.j=[],this.T=e||null}}var Cn=Rn();Cn.prototype={defaultTransition:!1,on:function(t,o){if(t instanceof Array){for(var s=0;s<t.length;s++)this.j.push([t[s],o]);return this}return this.j.push([t,o]),this},next:function(t){for(var o=0;o<this.j.length;o++){var s=this.j[o],n=s[0],r=s[1];if(this.test(t,n))return r}return this.defaultTransition},accepts:function(){return!!this.T},test:function(t,o){return t===o},emit:function(){return this.T}};var On=(0,rc.inherits)(Cn,Rn(),{test:function(t,o){return t===o||o instanceof RegExp&&o.test(t)}}),Pm=(0,rc.inherits)(Cn,Rn(),{jump:function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=this.next(new t(""));return s===this.defaultTransition?(s=new this.constructor(o),this.on(t,s)):o&&(s.T=o),s},test:function(t,o){return t instanceof o}});function Nm(e,t,o,s){for(var n=0,r=e.length,i=t,a=[],c=void 0;n<r&&(c=i.next(e[n]));)i=c,n++;if(n>=r)return[];for(;n<r-1;)c=new On(s),a.push(c),i.on(e[n],c),i=c,n++;return c=new On(o),a.push(c),i.on(e[r-1],c),a}Kt.CharacterState=On,Kt.TokenState=Pm,Kt.stateify=Nm;var Z={},dr={};dr.__esModule=!0;function Um(){return function(e){e&&(this.v=e)}}dr.createTokenClass=Um,Z.__esModule=!0,Z.AMPERSAND=Z.CLOSEPAREN=Z.CLOSEANGLEBRACKET=Z.CLOSEBRACKET=Z.CLOSEBRACE=Z.OPENPAREN=Z.OPENANGLEBRACKET=Z.OPENBRACKET=Z.OPENBRACE=Z.WS=Z.TLD=Z.SYM=Z.UNDERSCORE=Z.SLASH=Z.MAILTO=Z.PROTOCOL=Z.QUERY=Z.POUND=Z.PLUS=Z.NUM=Z.NL=Z.LOCALHOST=Z.PUNCTUATION=Z.DOT=Z.COLON=Z.AT=Z.DOMAIN=Z.Base=void 0;var nc=dr,Fm=No,An=(0,nc.createTokenClass)();An.prototype={toString:function(){return this.v+""}};function Be(e){var t=e?{v:e}:{};return(0,Fm.inherits)(An,(0,nc.createTokenClass)(),t)}var Bm=Be(),Dm=Be("@"),Hm=Be(":"),zm=Be("."),qm=Be(),Km=Be(),Vm=Be(`
`),Gm=Be(),Wm=Be("+"),Ym=Be("#"),Zm=Be(),Xm=Be("mailto:"),Jm=Be("?"),Qm=Be("/"),$m=Be("_"),ef=Be(),tf=Be(),of=Be(),sf=Be("{"),rf=Be("["),nf=Be("<"),af=Be("("),cf=Be("}"),lf=Be("]"),df=Be(">"),uf=Be(")"),mf=Be("&");Z.Base=An,Z.DOMAIN=Bm,Z.AT=Dm,Z.COLON=Hm,Z.DOT=zm,Z.PUNCTUATION=qm,Z.LOCALHOST=Km,Z.NL=Vm,Z.NUM=Gm,Z.PLUS=Wm,Z.POUND=Ym,Z.QUERY=Jm,Z.PROTOCOL=Zm,Z.MAILTO=Xm,Z.SLASH=Qm,Z.UNDERSCORE=$m,Z.SYM=ef,Z.TLD=tf,Z.WS=of,Z.OPENBRACE=sf,Z.OPENBRACKET=rf,Z.OPENANGLEBRACKET=nf,Z.OPENPAREN=af,Z.CLOSEBRACE=cf,Z.CLOSEBRACKET=lf,Z.CLOSEANGLEBRACKET=df,Z.CLOSEPAREN=uf,Z.AMPERSAND=mf,It.__esModule=!0,It.start=It.run=It.TOKENS=It.State=void 0;var oo=Kt,ye=Z,ff=hf(ye);function hf(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}var ic="aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|active|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|aigo|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blanco|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnl|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|boots|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|cartier|casa|case|caseih|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|ceb|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|chase|chat|cheap|chintai|chloe|christmas|chrome|chrysler|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dodge|dog|doha|domains|dot|download|drive|dtv|dubai|duck|dunlop|duns|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epost|epson|equipment|er|ericsson|erni|es|esq|estate|esurance|et|etisalat|eu|eurovision|eus|events|everbank|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fujixerox|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodhands|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|honeywell|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|htc|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|industries|infiniti|info|ing|ink|institute|insurance|insure|int|intel|international|intuit|investments|io|ipiranga|iq|ir|irish|is|iselect|ismaili|ist|istanbul|it|itau|itv|iveco|iwc|jaguar|java|jcb|jcp|je|jeep|jetzt|jewelry|jio|jlc|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|ladbrokes|lamborghini|lamer|lancaster|lancia|lancome|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|liaison|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|lupin|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|meo|merckmsd|metlife|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|mobily|moda|moe|moi|mom|monash|money|monster|mopar|mormon|mortgage|moscow|moto|motorcycles|mov|movie|movistar|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nadex|nagoya|name|nationwide|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|newholland|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|onyourside|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|panerai|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|piaget|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|rightathome|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sapo|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scor|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|shriram|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|space|spiegel|spot|spreadbetting|sr|srl|srt|st|stada|staples|star|starhub|statebank|statefarm|statoil|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|symantec|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|telecity|telefonica|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|uconnect|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|vista|vistaprint|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|warman|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--estv75g|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kpu716f|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbb9fbpob|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--p1acf|xn--p1ai|xn--pbt977c|xn--pgbs0dh|xn--pssy2u|xn--q9jyb4c|xn--qcka1pmc|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xperia|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zippo|zm|zone|zuerich|zw".split("|"),Ln="0123456789".split(""),ur="0123456789abcdefghijklmnopqrstuvwxyz".split(""),ac=[" ","\f","\r","	","\v","\xA0","\u1680","\u180E"],it=[],je=function(t){return new oo.CharacterState(t)},xt=je(),In=je(ye.NUM),Uo=je(ye.DOMAIN),cs=je(),jn=je(ye.WS);xt.on("@",je(ye.AT)).on(".",je(ye.DOT)).on("+",je(ye.PLUS)).on("#",je(ye.POUND)).on("?",je(ye.QUERY)).on("/",je(ye.SLASH)).on("_",je(ye.UNDERSCORE)).on(":",je(ye.COLON)).on("{",je(ye.OPENBRACE)).on("[",je(ye.OPENBRACKET)).on("<",je(ye.OPENANGLEBRACKET)).on("(",je(ye.OPENPAREN)).on("}",je(ye.CLOSEBRACE)).on("]",je(ye.CLOSEBRACKET)).on(">",je(ye.CLOSEANGLEBRACKET)).on(")",je(ye.CLOSEPAREN)).on("&",je(ye.AMPERSAND)).on([",",";","!",'"',"'"],je(ye.PUNCTUATION)),xt.on(`
`,je(ye.NL)).on(ac,jn),jn.on(ac,jn);for(var Pn=0;Pn<ic.length;Pn++){var gf=(0,oo.stateify)(ic[Pn],xt,ye.TLD,ye.DOMAIN);it.push.apply(it,gf)}var cc=(0,oo.stateify)("file",xt,ye.DOMAIN,ye.DOMAIN),lc=(0,oo.stateify)("ftp",xt,ye.DOMAIN,ye.DOMAIN),dc=(0,oo.stateify)("http",xt,ye.DOMAIN,ye.DOMAIN),uc=(0,oo.stateify)("mailto",xt,ye.DOMAIN,ye.DOMAIN);it.push.apply(it,cc),it.push.apply(it,lc),it.push.apply(it,dc),it.push.apply(it,uc);var pf=cc.pop(),vf=lc.pop(),bf=dc.pop(),yf=uc.pop(),mr=je(ye.DOMAIN),fr=je(ye.PROTOCOL),wf=je(ye.MAILTO);vf.on("s",mr).on(":",fr),bf.on("s",mr).on(":",fr),it.push(mr),pf.on(":",fr),mr.on(":",fr),yf.on(":",wf);var xf=(0,oo.stateify)("localhost",xt,ye.LOCALHOST,ye.DOMAIN);it.push.apply(it,xf),xt.on(Ln,In),In.on("-",cs).on(Ln,In).on(ur,Uo),Uo.on("-",cs).on(ur,Uo);for(var Nn=0;Nn<it.length;Nn++)it[Nn].on("-",cs).on(ur,Uo);cs.on("-",cs).on(Ln,Uo).on(ur,Uo),xt.defaultTransition=je(ye.SYM);var _f=function(t){for(var o=t.replace(/[A-Z]/g,function(f){return f.toLowerCase()}),s=t.length,n=[],r=0;r<s;){for(var i=xt,a=null,c=0,l=null,u=-1;r<s&&(a=i.next(o[r]));)i=a,i.accepts()?(u=0,l=i):u>=0&&u++,c++,r++;if(!(u<0)){r-=u,c-=u;var d=l.emit();n.push(new d(t.substr(r-c,c)))}}return n},kf=xt;It.State=oo.CharacterState,It.TOKENS=ff,It.run=_f,It.start=kf;var jt={},dt={};dt.__esModule=!0,dt.URL=dt.TEXT=dt.NL=dt.EMAIL=dt.MAILTOEMAIL=dt.Base=void 0;var Fo=dr,ls=No,ds=Z;function Ef(e){return e instanceof ds.DOMAIN||e instanceof ds.TLD}var bo=(0,Fo.createTokenClass)();bo.prototype={type:"token",isLink:!1,toString:function(){for(var t=[],o=0;o<this.v.length;o++)t.push(this.v[o].toString());return t.join("")},toHref:function(){return this.toString()},toObject:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http";return{type:this.type,value:this.toString(),href:this.toHref(t)}}};var Tf=(0,ls.inherits)(bo,(0,Fo.createTokenClass)(),{type:"email",isLink:!0}),Sf=(0,ls.inherits)(bo,(0,Fo.createTokenClass)(),{type:"email",isLink:!0,toHref:function(){return"mailto:"+this.toString()}}),Mf=(0,ls.inherits)(bo,(0,Fo.createTokenClass)(),{type:"text"}),Rf=(0,ls.inherits)(bo,(0,Fo.createTokenClass)(),{type:"nl"}),Cf=(0,ls.inherits)(bo,(0,Fo.createTokenClass)(),{type:"url",isLink:!0,toHref:function(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"http",o=!1,s=!1,n=this.v,r=[],i=0;n[i]instanceof ds.PROTOCOL;)o=!0,r.push(n[i].toString().toLowerCase()),i++;for(;n[i]instanceof ds.SLASH;)s=!0,r.push(n[i].toString()),i++;for(;Ef(n[i]);)r.push(n[i].toString().toLowerCase()),i++;for(;i<n.length;i++)r.push(n[i].toString());return r=r.join(""),o||s||(r=t+"://"+r),r},hasProtocol:function(){return this.v[0]instanceof ds.PROTOCOL}});dt.Base=bo,dt.MAILTOEMAIL=Tf,dt.EMAIL=Sf,dt.NL=Rf,dt.TEXT=Mf,dt.URL=Cf,jt.__esModule=!0,jt.start=jt.run=jt.TOKENS=jt.State=void 0;var mc=Kt,ut=dt,Of=Af(ut),I=Z;function Af(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}var _e=function(t){return new mc.TokenState(t)},hr=_e(),fc=_e(),hc=_e(),Un=_e(),gc=_e(),so=_e(),gr=_e(),us=_e(ut.URL),pc=_e(),vc=_e(ut.URL),Ve=_e(ut.URL),ms=_e(),fs=_e(),hs=_e(),gs=_e(),ps=_e(),yo=_e(ut.URL),wo=_e(ut.URL),xo=_e(ut.URL),_o=_e(ut.URL),vs=_e(),bs=_e(),ys=_e(),ws=_e(),Bo=_e(),Fn=_e(),pr=_e(ut.EMAIL),bc=_e(),Lf=_e(ut.EMAIL),ko=_e(ut.MAILTOEMAIL),Bn=_e(),Do=_e(),vr=_e(),yc=_e(),If=_e(ut.NL);hr.on(I.NL,If).on(I.PROTOCOL,fc).on(I.MAILTO,hc).on(I.SLASH,Un),fc.on(I.SLASH,Un),Un.on(I.SLASH,gc),hr.on(I.TLD,so).on(I.DOMAIN,so).on(I.LOCALHOST,us).on(I.NUM,so),gc.on(I.TLD,Ve).on(I.DOMAIN,Ve).on(I.NUM,Ve).on(I.LOCALHOST,Ve),so.on(I.DOT,gr),Bo.on(I.DOT,Fn),gr.on(I.TLD,us).on(I.DOMAIN,so).on(I.NUM,so).on(I.LOCALHOST,so),Fn.on(I.TLD,pr).on(I.DOMAIN,Bo).on(I.NUM,Bo).on(I.LOCALHOST,Bo),us.on(I.DOT,gr),pr.on(I.DOT,Fn),us.on(I.COLON,pc).on(I.SLASH,Ve),pc.on(I.NUM,vc),vc.on(I.SLASH,Ve),pr.on(I.COLON,bc),bc.on(I.NUM,Lf);var ot=[I.DOMAIN,I.AT,I.LOCALHOST,I.NUM,I.PLUS,I.POUND,I.PROTOCOL,I.SLASH,I.TLD,I.UNDERSCORE,I.SYM,I.AMPERSAND],st=[I.COLON,I.DOT,I.QUERY,I.PUNCTUATION,I.CLOSEBRACE,I.CLOSEBRACKET,I.CLOSEANGLEBRACKET,I.CLOSEPAREN,I.OPENBRACE,I.OPENBRACKET,I.OPENANGLEBRACKET,I.OPENPAREN];Ve.on(I.OPENBRACE,fs).on(I.OPENBRACKET,hs).on(I.OPENANGLEBRACKET,gs).on(I.OPENPAREN,ps),ms.on(I.OPENBRACE,fs).on(I.OPENBRACKET,hs).on(I.OPENANGLEBRACKET,gs).on(I.OPENPAREN,ps),fs.on(I.CLOSEBRACE,Ve),hs.on(I.CLOSEBRACKET,Ve),gs.on(I.CLOSEANGLEBRACKET,Ve),ps.on(I.CLOSEPAREN,Ve),yo.on(I.CLOSEBRACE,Ve),wo.on(I.CLOSEBRACKET,Ve),xo.on(I.CLOSEANGLEBRACKET,Ve),_o.on(I.CLOSEPAREN,Ve),vs.on(I.CLOSEBRACE,Ve),bs.on(I.CLOSEBRACKET,Ve),ys.on(I.CLOSEANGLEBRACKET,Ve),ws.on(I.CLOSEPAREN,Ve),fs.on(ot,yo),hs.on(ot,wo),gs.on(ot,xo),ps.on(ot,_o),fs.on(st,vs),hs.on(st,bs),gs.on(st,ys),ps.on(st,ws),yo.on(ot,yo),wo.on(ot,wo),xo.on(ot,xo),_o.on(ot,_o),yo.on(st,yo),wo.on(st,wo),xo.on(st,xo),_o.on(st,_o),vs.on(ot,yo),bs.on(ot,wo),ys.on(ot,xo),ws.on(ot,_o),vs.on(st,vs),bs.on(st,bs),ys.on(st,ys),ws.on(st,ws),Ve.on(ot,Ve),ms.on(ot,Ve),Ve.on(st,ms),ms.on(st,ms),hc.on(I.TLD,ko).on(I.DOMAIN,ko).on(I.NUM,ko).on(I.LOCALHOST,ko),ko.on(ot,ko).on(st,Bn),Bn.on(ot,ko).on(st,Bn);var xs=[I.DOMAIN,I.NUM,I.PLUS,I.POUND,I.QUERY,I.UNDERSCORE,I.SYM,I.AMPERSAND,I.TLD];so.on(xs,Do).on(I.AT,vr),us.on(xs,Do).on(I.AT,vr),gr.on(xs,Do),Do.on(xs,Do).on(I.AT,vr).on(I.DOT,yc),yc.on(xs,Do),vr.on(I.TLD,Bo).on(I.DOMAIN,Bo).on(I.LOCALHOST,pr);var jf=function(t){for(var o=t.length,s=0,n=[],r=[];s<o;){for(var i=hr,a=null,c=null,l=0,u=null,d=-1;s<o&&!(a=i.next(t[s]));)r.push(t[s++]);for(;s<o&&(c=a||i.next(t[s]));)a=null,i=c,i.accepts()?(d=0,u=i):d>=0&&d++,s++,l++;if(d<0)for(var f=s-l;f<s;f++)r.push(t[f]);else{r.length>0&&(n.push(new ut.TEXT(r)),r=[]),s-=d,l-=d;var g=u.emit();n.push(new g(t.slice(s-l,s)))}}return r.length>0&&n.push(new ut.TEXT(r)),n};jt.State=mc.TokenState,jt.TOKENS=Of,jt.run=jf,jt.start=hr,tt.__esModule=!0,tt.tokenize=tt.test=tt.scanner=tt.parser=tt.options=tt.inherits=tt.find=void 0;var Pf=No,Nf=as,Uf=Dn(Nf),Ff=It,wc=Dn(Ff),Bf=jt,xc=Dn(Bf);function Dn(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Array.isArray||(Array.isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"});var Hn=function(t){return xc.run(wc.run(t))},Df=function(t){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=Hn(t),n=[],r=0;r<s.length;r++){var i=s[r];i.isLink&&(!o||i.type===o)&&n.push(i.toObject())}return n},Hf=function(t){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,s=Hn(t);return s.length===1&&s[0].isLink&&(!o||s[0].type===o)};tt.find=Df,tt.inherits=Pf.inherits,tt.options=Uf,tt.parser=xc,tt.scanner=wc,tt.test=Hf,tt.tokenize=Hn;var _c=tt,zf=(e,t,o)=>{const s={bold:o.bold,italic:o.italic,strike:o.strike,underline:o.underline,multilineCode:o.multilineCode,inlineCode:o.inlineCode},n={[s.bold]:{end:"\\"+s.bold,allowed_chars:".",type:"bold"},[s.italic]:{end:s.italic,allowed_chars:".",type:"italic"},[s.strike]:{end:s.strike,allowed_chars:".",type:"strike"},[s.underline]:{end:s.underline,allowed_chars:".",type:"underline"},[s.multilineCode]:{end:s.multilineCode,allowed_chars:`(.|
)`,type:"multiline-code"},[s.inlineCode]:{end:s.inlineCode,allowed_chars:".",type:"inline-code"},"<usertag>":{allowed_chars:".",end:"</usertag>",type:"tag"}},r=br(e,n),i=qf(r,n),a=[].concat.apply([],i);return t&&Vf(a),a};function br(e,t){let o=[],s=-1,n=null,r=_c.find(e),i=!1;if(r.length>0&&(s=e.indexOf(r[0].value),i=!0),Object.keys(t).forEach(a=>{const c=e.indexOf(a);c>=0&&(s<0||c<s)&&(s=c,n=a,i=!1)}),i&&n!==-1){let a=e.substr(0,s),c=e.substr(s,r[0].value.length),l=e.substr(s+r[0].value.length);return o.push(a),o.push(c),o=o.concat(br(l,t)),o}if(n){let a=e.substr(0,s);const c=n;let l=e.substr(s+c.length);if(e.replace(/\s/g,"").length===c.length*2)return[e];const u=l.match(new RegExp("^("+(t[c].allowed_chars||".")+"*"+(t[c].end?"?":"")+")"+(t[c].end?"("+t[c].end+")":""),"m"));if(!u||!u[1])a=a+c,o.push(a);else{a&&o.push(a);const d={start:c,content:br(u[1],t),end:u[2],type:t[c].type};o.push(d),l=l.substr(u[0].length)}return o=o.concat(br(l,t)),o}else return e?[e]:[]}function qf(e,t){const o=[];return e.forEach(s=>{typeof s=="string"?o.push({types:[],value:s}):t[s.start]&&o.push(Kf(s))}),o}function Kf(e){const t=[];return kc(e,t,[]),t}function kc(e,t,o){e.content.forEach(s=>{typeof s=="string"?t.push({types:Ec(o.concat([e.type])),value:s}):kc(s,t,Ec([s.type].concat([e.type]).concat(o)))})}function Ec(e){return[...new Set(e)]}function Vf(e){const t=[];return e.forEach(o=>{const s=_c.find(o.value);if(s.length){const n=o.value.replace(s[0].value,"");t.push({types:o.types,value:n}),o.types=["url"].concat(o.types),o.href=s[0].href,o.value=s[0].value}t.push(o)}),t}const zn=["png","jpg","jpeg","webp","svg","gif"],Tc=["mp4","video/ogg","webm","quicktime"],Gf=["mp3","audio/ogg","wav","mpeg"],Wf={name:"FormatMessage",components:{SvgIcon:Qe},props:{messageId:{type:String,default:""},roomId:{type:String,default:""},roomList:{type:Boolean,default:!1},content:{type:[String,Number],required:!0},deleted:{type:Boolean,default:!1},users:{type:Array,default:()=>[]},linkify:{type:Boolean,default:!0},singleLine:{type:Boolean,default:!1},reply:{type:Boolean,default:!1},textFormatting:{type:Object,required:!0},textMessages:{type:Object,default:()=>{}},linkOptions:{type:Object,required:!0}},emits:["open-user-tag"],computed:{linkifiedMessage(){if(this.deleted)return[{value:this.textMessages.MESSAGE_DELETED}];const e=zf(this.formatTags(this.content),this.linkify&&!this.linkOptions.disabled,this.textFormatting);return e.forEach(t=>{t.url=this.checkType(t,"url"),t.bold=this.checkType(t,"bold"),t.italic=this.checkType(t,"italic"),t.strike=this.checkType(t,"strike"),t.underline=this.checkType(t,"underline"),t.inline=this.checkType(t,"inline-code"),t.multiline=this.checkType(t,"multiline-code"),t.tag=this.checkType(t,"tag"),t.image=this.checkImageType(t),t.value=this.replaceEmojiByElement(t.value)}),e},formattedContent(){return this.deleted?this.textMessages.MESSAGE_DELETED:this.formatTags(this.content)}},methods:{checkType(e,t){return e.types&&e.types.indexOf(t)!==-1},checkImageType(e){let t=e.value.lastIndexOf(".");e.value.lastIndexOf("/")>t&&(t=-1);const s=e.value.substring(t+1,e.value.length),n=t>0&&zn.some(r=>s.toLowerCase().includes(r));return n&&this.setImageSize(e),n},setImageSize(e){const t=new Image;t.src=e.value,t.addEventListener("load",o);function o(s){const n=s.path[0].width/150;e.height=Math.round(s.path[0].height/n)+"px",t.removeEventListener("load",o)}},formatTags(e){const t="<usertag>",o="</usertag>",s=[...e.matchAll(new RegExp(t,"gi"))].map(r=>r.index),n=e;return s.forEach(r=>{const i=n.substring(r+t.length,n.indexOf(o,r)),a=this.users.find(c=>c._id===i);e=e.replaceAll(i,`@${(a==null?void 0:a.username)||"unknown"}`)}),e},openTag(e){if(!this.singleLine&&this.checkType(e,"tag")){const t=this.users.find(o=>e.value.indexOf(o.username)!==-1);this.$emit("open-user-tag",t)}},replaceEmojiByElement(e){let t;return this.singleLine?t=16:t=this.containsOnlyEmojis()?28:20,e.replaceAll(/[\p{Extended_Pictographic}\u{1F3FB}-\u{1F3FF}\u{1F9B0}-\u{1F9B3}]/gu,o=>`<span style="font-size: ${t}px">${o}</span>`)},containsOnlyEmojis(){const e=this.content.replace(new RegExp("[\0-\u1EEFf]","g"),""),t=this.content.replace(new RegExp(`[
\rs]+|( )+`,"g"),"");return e.length===t.length}}},Yf={class:"vac-image-link-container"},Zf={class:"vac-image-link-message"},Xf=["innerHTML"],Jf=["innerHTML"];function Qf(e,t,o,s,n,r){const i=$("svg-icon");return p(),w("div",{class:ge(["vac-format-message-wrapper",{"vac-text-ellipsis":o.singleLine}])},[o.textFormatting.disabled?(p(),w("div",{key:1,innerHTML:r.formattedContent},null,8,Jf)):(p(),w("div",{key:0,class:ge({"vac-text-ellipsis":o.singleLine})},[(p(!0),w(Te,null,ue(r.linkifiedMessage,(a,c)=>(p(),w("div",{key:c,class:"vac-format-container"},[(p(),Oe(tu(a.url?"a":"span"),{class:ge({"vac-text-ellipsis":o.singleLine,"vac-text-bold":a.bold,"vac-text-italic":o.deleted||a.italic,"vac-text-strike":a.strike,"vac-text-underline":a.underline,"vac-text-inline-code":!o.singleLine&&a.inline,"vac-text-multiline-code":!o.singleLine&&a.multiline,"vac-text-tag":!o.singleLine&&!o.reply&&a.tag}),href:a.href,target:a.href?o.linkOptions.target:null,rel:a.href?o.linkOptions.rel:null,onClick:l=>r.openTag(a)},{default:Q(()=>[o.deleted?(p(),w(Te,{key:0},[U(e.$slots,o.roomList?"deleted-icon-room_"+o.roomId:"deleted-icon_"+o.messageId,{},()=>[F(i,{name:"deleted",class:ge(["vac-icon-deleted",{"vac-icon-deleted-room":o.roomList}])},null,8,["class"])]),Qt(" "+ne(o.textMessages.MESSAGE_DELETED),1)],64)):a.url&&a.image?(p(),w(Te,{key:1},[T("div",Yf,[T("div",{class:"vac-image-link",style:Me({"background-image":`url('${a.value}')`,height:a.height})},null,4)]),T("div",Zf,[T("span",null,ne(a.value),1)])],64)):(p(),w("span",{key:2,innerHTML:a.value},null,8,Xf))]),_:2},1032,["class","href","target","rel","onClick"]))]))),128))],2))],2)}var _s=Fe(Wf,[["render",Qf]]);const Eo="__v-click-outside",Sc=typeof window!="undefined",$f=typeof navigator!="undefined",eh=Sc&&("ontouchstart"in window||$f&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"],th=e=>{const t=typeof e=="function";if(!t&&typeof e!="object")throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:t?e:e.handler,middleware:e.middleware||(o=>o),events:e.events||eh,isActive:e.isActive!==!1,detectIframe:e.detectIframe!==!1,capture:Boolean(e.capture)}},Mc=({event:e,handler:t,middleware:o})=>{o(e)&&t(e)},oh=({el:e,event:t,handler:o,middleware:s})=>{setTimeout(()=>{const{activeElement:n}=document;n&&n.tagName==="IFRAME"&&!e.contains(n)&&Mc({event:t,handler:o,middleware:s})},0)},sh=({el:e,event:t,handler:o,middleware:s})=>{const n=t.path||t.composedPath&&t.composedPath();(n?n.indexOf(e)<0:!e.contains(t.target))&&Mc({event:t,handler:o,middleware:s})},Rc=(e,{value:t})=>{const{events:o,handler:s,middleware:n,isActive:r,detectIframe:i,capture:a}=th(t);if(!!r){if(e[Eo]=o.map(c=>({event:c,srcTarget:document.documentElement,handler:l=>sh({el:e,event:l,handler:s,middleware:n}),capture:a})),i){const c={event:"blur",srcTarget:window,handler:l=>oh({el:e,event:l,handler:s,middleware:n}),capture:a};e[Eo]=[...e[Eo],c]}e[Eo].forEach(({event:c,srcTarget:l,handler:u})=>setTimeout(()=>{!e[Eo]||l.addEventListener(c,u,a)},0))}},Cc=e=>{(e[Eo]||[]).forEach(({event:o,srcTarget:s,handler:n,capture:r})=>s.removeEventListener(o,n,r)),delete e[Eo]};var yr=Sc?{beforeMount:Rc,updated:(e,{value:t,oldValue:o})=>{JSON.stringify(t)!==JSON.stringify(o)&&(Cc(e),Rc(e,{value:t}))},unmounted:Cc}:{},Oc=(e,t,o)=>{if(e.typingUsers&&e.typingUsers.length){const s=e.users.filter(n=>{if(n._id!==t&&e.typingUsers.indexOf(n._id)!==-1&&!(n.status&&n.status.state==="offline"))return!0});return s.length?e.users.length===2?o.IS_TYPING:s.map(n=>n.username).join(", ")+" "+o.IS_TYPING:void 0}};function ks(e,t){if(!(!t||!t.type))return e.some(o=>t.type.toLowerCase().includes(o))}function Ho(e){return ks(zn,e)}function Es(e){return ks(Tc,e)}function Ac(e){return ks(zn,e)||ks(Tc,e)}function wr(e){return ks(Gf,e)}const rh={name:"RoomsContent",components:{SvgIcon:Qe,FormatMessage:_s},directives:{clickOutside:yr},props:{currentUserId:{type:[String,Number],required:!0},room:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},roomActions:{type:Array,required:!0}},emits:["room-action-handler"],data(){return{roomMenuOpened:null}},computed:{getLastMessage(){const e=this.typingUsers;if(e)return e;const t=this.room.lastMessage.content;if(this.room.users.length<=2)return t;const o=this.room.users.find(s=>s._id===this.room.lastMessage.senderId);return this.room.lastMessage.username?`${this.room.lastMessage.username} - ${t}`:!o||o._id===this.currentUserId?t:`${o.username} - ${t}`},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(t=>t._id!==this.currentUserId);return e&&e.status?e.status.state:null},typingUsers(){return Oc(this.room,this.currentUserId,this.textMessages)},isMessageCheckmarkVisible(){return!this.typingUsers&&this.room.lastMessage&&!this.room.lastMessage.deleted&&this.room.lastMessage.senderId===this.currentUserId&&(this.room.lastMessage.saved||this.room.lastMessage.distributed||this.room.lastMessage.seen)},formattedDuration(){var t,o;const e=(o=(t=this.room.lastMessage)==null?void 0:t.files)==null?void 0:o[0];if(e){if(!e.duration)return`${e.name}.${e.extension}`;let s=Math.floor(e.duration);return(s-(s%=60))/60+(s>9?":":":0")+s}return""},isAudio(){return this.room.lastMessage.files?wr(this.room.lastMessage.files[0]):!1}},methods:{roomActionHandler(e){this.closeRoomMenu(),this.$emit("room-action-handler",{action:e,roomId:this.room.roomId})},closeRoomMenu(){this.roomMenuOpened=null}}},nh={class:"vac-room-container"},ih={class:"vac-name-container vac-text-ellipsis"},ah={class:"vac-title-container"},ch={class:"vac-room-name vac-text-ellipsis"},lh={key:1,class:"vac-text-date"},dh={key:0},uh={key:1,class:"vac-text-ellipsis"},mh={key:3,class:"vac-text-ellipsis"},fh={class:"vac-room-options-container"},hh={key:0,class:"vac-badge-counter vac-room-badge"},gh={key:0,class:"vac-menu-options"},ph={class:"vac-menu-list"},vh=["onClick"];function bh(e,t,o,s,n,r){const i=$("svg-icon"),a=$("format-message"),c=tr("click-outside");return p(),w("div",nh,[U(e.$slots,"room-list-item_"+o.room.roomId,{},()=>[U(e.$slots,"room-list-avatar_"+o.room.roomId,{},()=>[o.room.avatar?(p(),w("div",{key:0,class:"vac-avatar",style:Me({"background-image":`url('${o.room.avatar}')`})},null,4)):B("",!0)]),T("div",ih,[T("div",ah,[r.userStatus?(p(),w("div",{key:0,class:ge(["vac-state-circle",{"vac-state-online":r.userStatus==="online"}])},null,2)):B("",!0),T("div",ch,ne(o.room.roomName),1),o.room.lastMessage?(p(),w("div",lh,ne(o.room.lastMessage.timestamp),1)):B("",!0)]),T("div",{class:ge(["vac-text-last",{"vac-message-new":o.room.lastMessage&&o.room.lastMessage.new&&!r.typingUsers}])},[r.isMessageCheckmarkVisible?(p(),w("span",dh,[U(e.$slots,"checkmark-icon_"+o.room.roomId,{},()=>[F(i,{name:o.room.lastMessage.distributed?"double-checkmark":"checkmark",param:o.room.lastMessage.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):B("",!0),o.room.lastMessage&&!o.room.lastMessage.deleted&&r.isAudio?(p(),w("div",uh,[U(e.$slots,"microphone-icon_"+o.room.roomId,{},()=>[F(i,{name:"microphone",class:"vac-icon-microphone"})]),Qt(" "+ne(r.formattedDuration),1)])):o.room.lastMessage?(p(),Oe(a,{key:2,"message-id":o.room.lastMessage._id,"room-id":o.room.roomId,"room-list":!0,content:r.getLastMessage,deleted:!!o.room.lastMessage.deleted&&!r.typingUsers,users:o.room.users,"text-messages":o.textMessages,linkify:!1,"text-formatting":o.textFormatting,"link-options":o.linkOptions,"single-line":!0},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["message-id","room-id","content","deleted","users","text-messages","text-formatting","link-options"])):B("",!0),!o.room.lastMessage&&r.typingUsers?(p(),w("div",mh,ne(r.typingUsers),1)):B("",!0),T("div",fh,[o.room.unreadCount?(p(),w("div",hh,ne(o.room.unreadCount),1)):B("",!0),U(e.$slots,"room-list-options_"+o.room.roomId,{},()=>[o.roomActions.length?(p(),w("div",{key:0,class:"vac-svg-button vac-list-room-options",onClick:t[0]||(t[0]=wt(l=>n.roomMenuOpened=o.room.roomId,["stop"]))},[U(e.$slots,"room-list-options-icon_"+o.room.roomId,{},()=>[F(i,{name:"dropdown",param:"room"})])])):B("",!0),o.roomActions.length?(p(),Oe(Ge,{key:1,name:"vac-slide-left"},{default:Q(()=>[n.roomMenuOpened===o.room.roomId?Ht((p(),w("div",gh,[T("div",ph,[(p(!0),w(Te,null,ue(o.roomActions,l=>(p(),w("div",{key:l.name},[T("div",{class:"vac-menu-item",onClick:wt(u=>r.roomActionHandler(l),["stop"])},ne(l.title),9,vh)]))),128))])])),[[c,r.closeRoomMenu]]):B("",!0)]),_:1})):B("",!0)])])],2)])])])}var yh=Fe(rh,[["render",bh]]),qn=(e,t,o,s=!1)=>!o||o===""?e:e.filter(n=>s?xr(n[t]).startsWith(xr(o)):xr(n[t]).includes(xr(o)));function xr(e){return e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const wh={name:"RoomsList",components:{Loader:lr,RoomsSearch:Cm,RoomContent:yh},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},showRoomsList:{type:Boolean,required:!0},showSearch:{type:Boolean,required:!0},showAddRoom:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},loadingRooms:{type:Boolean,required:!0},roomsLoaded:{type:Boolean,required:!0},room:{type:Object,required:!0},customSearchRoomEnabled:{type:[Boolean,String],default:!1},roomActions:{type:Array,required:!0},scrollDistance:{type:Number,required:!0}},emits:["add-room","search-room","room-action-handler","loading-more-rooms","fetch-room","fetch-more-rooms"],data(){return{filteredRooms:this.rooms||[],observer:null,showLoader:!0,loadingMoreRooms:!1,selectedRoomId:""}},watch:{rooms:{deep:!0,handler(e,t){this.filteredRooms=e,(e.length!==t.length||this.roomsLoaded)&&(this.loadingMoreRooms=!1)}},loadingRooms(e){e||setTimeout(()=>this.initIntersectionObserver())},loadingMoreRooms(e){this.$emit("loading-more-rooms",e)},roomsLoaded:{immediate:!0,handler(e){e&&(this.loadingMoreRooms=!1,this.loadingRooms||(this.showLoader=!1))}},room:{immediate:!0,handler(e){e&&!this.isMobile&&(this.selectedRoomId=e.roomId)}}},methods:{initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("infinite-loader-rooms");if(e){const t={root:document.querySelector("vue-advanced-chat").shadowRoot.getElementById("rooms-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(o=>{o[0].isIntersecting&&this.loadMoreRooms()},t),this.observer.observe(e)}},searchRoom(e){this.customSearchRoomEnabled?this.$emit("search-room",e.target.value):this.filteredRooms=qn(this.rooms,"roomName",e.target.value)},openRoom(e){e.roomId===this.room.roomId&&!this.isMobile||(this.isMobile||(this.selectedRoomId=e.roomId),this.$emit("fetch-room",{room:e}))},loadMoreRooms(){if(!this.loadingMoreRooms){if(this.roomsLoaded){this.loadingMoreRooms=!1,this.showLoader=!1;return}this.$emit("fetch-more-rooms"),this.loadingMoreRooms=!0}}}},xh={key:0,class:"vac-rooms-empty"},_h={key:1,id:"rooms-list",class:"vac-room-list"},kh=["id","onClick"],Eh={key:0,id:"infinite-loader-rooms"};function Th(e,t,o,s,n,r){const i=$("rooms-search"),a=$("loader"),c=$("room-content");return Ht((p(),w("div",{class:ge(["vac-rooms-container",{"vac-rooms-container-full":o.isMobile,"vac-app-border-r":!o.isMobile}])},[U(e.$slots,"rooms-header"),U(e.$slots,"rooms-list-search",{},()=>[F(i,{rooms:o.rooms,"loading-rooms":o.loadingRooms,"text-messages":o.textMessages,"show-search":o.showSearch,"show-add-room":o.showAddRoom,onSearchRoom:r.searchRoom,onAddRoom:t[0]||(t[0]=l=>e.$emit("add-room"))},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["rooms","loading-rooms","text-messages","show-search","show-add-room","onSearchRoom"])]),F(a,{show:o.loadingRooms,type:"rooms"},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["show"]),!o.loadingRooms&&!o.rooms.length?(p(),w("div",xh,[U(e.$slots,"rooms-empty",{},()=>[Qt(ne(o.textMessages.ROOMS_EMPTY),1)])])):B("",!0),o.loadingRooms?B("",!0):(p(),w("div",_h,[(p(!0),w(Te,null,ue(n.filteredRooms,l=>(p(),w("div",{id:l.roomId,key:l.roomId,class:ge(["vac-room-item",{"vac-room-selected":n.selectedRoomId===l.roomId}]),onClick:u=>r.openRoom(l)},[F(c,{"current-user-id":o.currentUserId,room:l,"text-formatting":o.textFormatting,"link-options":o.linkOptions,"text-messages":o.textMessages,"room-actions":o.roomActions,onRoomActionHandler:t[1]||(t[1]=u=>e.$emit("room-action-handler",u))},Ie({_:2},[ue(e.$slots,(u,d)=>({name:d,fn:Q(f=>[U(e.$slots,d,Le(Ae(f)))])}))]),1032,["current-user-id","room","text-formatting","link-options","text-messages","room-actions"])],10,kh))),128)),F(Ge,{name:"vac-fade-message"},{default:Q(()=>[o.rooms.length&&!o.loadingRooms?(p(),w("div",Eh,[F(a,{show:n.showLoader,infinite:!0,type:"infinite-rooms"},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["show"])])):B("",!0)]),_:3})]))],2)),[[cr,o.showRoomsList]])}var Sh=Fe(wh,[["render",Th]]);const Mh={name:"RoomHeader",components:{SvgIcon:Qe},directives:{clickOutside:yr},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},room:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},messageSelectionActions:{type:Array,required:!0},selectedMessagesTotal:{type:Number,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","cancel-message-selection","message-selection-action-handler"],data(){return{menuOpened:!1,messageSelectionAnimationEnded:!0}},computed:{typingUsers(){return Oc(this.room,this.currentUserId,this.textMessages)},userStatus(){if(!this.room.users||this.room.users.length!==2)return;const e=this.room.users.find(o=>o._id!==this.currentUserId);if(!e.status)return;let t="";return e.status.state==="online"?t=this.textMessages.IS_ONLINE:e.status.lastChanged&&(t=this.textMessages.LAST_SEEN+e.status.lastChanged),t}},watch:{messageSelectionEnabled(e){e?this.messageSelectionAnimationEnded=!1:setTimeout(()=>{this.messageSelectionAnimationEnded=!0},300)}},methods:{menuActionHandler(e){this.closeMenu(),this.$emit("menu-action-handler",e)},closeMenu(){this.menuOpened=!1},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",e)}}},Rh={class:"vac-room-header vac-app-border-b"},Ch={class:"vac-room-wrapper"},Oh={key:0,class:"vac-room-selection"},Ah=["id"],Lh=["onClick"],Ih={class:"vac-selection-button-count"},jh={class:"vac-text-ellipsis"},Ph={class:"vac-room-name vac-text-ellipsis"},Nh={key:0,class:"vac-room-info vac-text-ellipsis"},Uh={key:1,class:"vac-room-info vac-text-ellipsis"},Fh={key:0,class:"vac-menu-options"},Bh={class:"vac-menu-list"},Dh=["onClick"];function Hh(e,t,o,s,n,r){const i=$("svg-icon"),a=tr("click-outside");return p(),w("div",Rh,[U(e.$slots,"room-header",{},()=>[T("div",Ch,[F(Ge,{name:"vac-slide-up"},{default:Q(()=>[o.messageSelectionEnabled?(p(),w("div",Oh,[(p(!0),w(Te,null,ue(o.messageSelectionActions,c=>(p(),w("div",{id:c.name,key:c.name},[T("div",{class:"vac-selection-button",onClick:l=>r.messageSelectionActionHandler(c)},[Qt(ne(c.title)+" ",1),T("span",Ih,ne(o.selectedMessagesTotal),1)],8,Lh)],8,Ah))),128)),T("div",{class:"vac-selection-cancel vac-item-clickable",onClick:t[0]||(t[0]=c=>e.$emit("cancel-message-selection"))},ne(o.textMessages.CANCEL_SELECT_MESSAGE),1)])):B("",!0)]),_:1}),!o.messageSelectionEnabled&&n.messageSelectionAnimationEnded?(p(),w(Te,{key:0},[o.singleRoom?B("",!0):(p(),w("div",{key:0,class:ge(["vac-svg-button vac-toggle-button",{"vac-rotate-icon-init":!o.isMobile,"vac-rotate-icon":!o.showRoomsList&&!o.isMobile}]),onClick:t[1]||(t[1]=c=>e.$emit("toggle-rooms-list"))},[U(e.$slots,"toggle-icon",{},()=>[F(i,{name:"toggle"})])],2)),T("div",{class:ge(["vac-info-wrapper",{"vac-item-clickable":o.roomInfoEnabled}]),onClick:t[2]||(t[2]=c=>e.$emit("room-info"))},[U(e.$slots,"room-header-avatar",{},()=>[o.room.avatar?(p(),w("div",{key:0,class:"vac-avatar",style:Me({"background-image":`url('${o.room.avatar}')`})},null,4)):B("",!0)]),U(e.$slots,"room-header-info",{},()=>[T("div",jh,[T("div",Ph,ne(o.room.roomName),1),r.typingUsers?(p(),w("div",Nh,ne(r.typingUsers),1)):(p(),w("div",Uh,ne(r.userStatus),1))])])],2),o.room.roomId?U(e.$slots,"room-options",{key:1},()=>[o.menuActions.length?(p(),w("div",{key:0,class:"vac-svg-button vac-room-options",onClick:t[3]||(t[3]=c=>n.menuOpened=!n.menuOpened)},[U(e.$slots,"menu-icon",{},()=>[F(i,{name:"menu"})])])):B("",!0),o.menuActions.length?(p(),Oe(Ge,{key:1,name:"vac-slide-left"},{default:Q(()=>[n.menuOpened?Ht((p(),w("div",Fh,[T("div",Bh,[(p(!0),w(Te,null,ue(o.menuActions,c=>(p(),w("div",{key:c.name},[T("div",{class:"vac-menu-item",onClick:l=>r.menuActionHandler(c)},ne(c.title),9,Dh)]))),128))])])),[[a,r.closeMenu]]):B("",!0)]),_:1})):B("",!0)]):B("",!0)],64)):B("",!0)])])])}var zh=Fe(Mh,[["render",Hh]]);function _r(e){if(typeof e!="string"||!e)throw new Error("expected a non-empty string, got: "+e)}function Kn(e){if(typeof e!="number")throw new Error("expected a number, got: "+e)}const qh=1,Kh=1,To="emoji",zo="keyvalue",Vn="favorites",Vh="tokens",Lc="tokens",Gh="unicode",Ic="count",Wh="group",Yh="order",jc="group-order",Gn="eTag",kr="url",Pc="skinTone",qo="readonly",Wn="readwrite",Nc="skinUnicodes",Zh="skinUnicodes",Xh="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",Jh="en";function Qh(e,t){const o=new Set,s=[];for(const n of e){const r=t(n);o.has(r)||(o.add(r),s.push(n))}return s}function Uc(e){return Qh(e,t=>t.unicode)}function $h(e){function t(o,s,n){const r=s?e.createObjectStore(o,{keyPath:s}):e.createObjectStore(o);if(n)for(const[i,[a,c]]of Object.entries(n))r.createIndex(i,a,{multiEntry:c});return r}t(zo),t(To,Gh,{[Lc]:[Vh,!0],[jc]:[[Wh,Yh]],[Nc]:[Zh,!0]}),t(Vn,void 0,{[Ic]:[""]})}const Yn={},Er={},Tr={};function Fc(e,t,o){o.onerror=()=>t(o.error),o.onblocked=()=>t(new Error("IDB blocked")),o.onsuccess=()=>e(o.result)}async function eg(e){const t=await new Promise((o,s)=>{const n=indexedDB.open(e,qh);Yn[e]=n,n.onupgradeneeded=r=>{r.oldVersion<Kh&&$h(n.result)},Fc(o,s,n)});return t.onclose=()=>Zn(e),t}function tg(e){return Er[e]||(Er[e]=eg(e)),Er[e]}function Vt(e,t,o,s){return new Promise((n,r)=>{const i=e.transaction(t,o,{durability:"relaxed"}),a=typeof t=="string"?i.objectStore(t):t.map(l=>i.objectStore(l));let c;s(a,i,l=>{c=l}),i.oncomplete=()=>n(c),i.onerror=()=>r(i.error)})}function Zn(e){const t=Yn[e],o=t&&t.result;if(o){o.close();const s=Tr[e];if(s)for(const n of s)n()}delete Yn[e],delete Er[e],delete Tr[e]}function og(e){return new Promise((t,o)=>{Zn(e);const s=indexedDB.deleteDatabase(e);Fc(t,o,s)})}function sg(e,t){let o=Tr[e];o||(o=Tr[e]=[]),o.push(t)}const rg=new Set([":D","XD",":'D","O:)",":X",":P",";P","XP",":L",":Z",":j","8D","XO","8)",":B",":O",":S",":'o","Dx","X(","D:",":C",">0)",":3","</3","<3","\\M/",":E","8#"]);function Ko(e){return e.split(/[\s_]+/).map(t=>!t.match(/\w/)||rg.has(t)?t.toLowerCase():t.replace(/[)(:,]/g,"").replace(//g,"'").toLowerCase()).filter(Boolean)}const ng=2;function Bc(e){return e.filter(Boolean).map(t=>t.toLowerCase()).filter(t=>t.length>=ng)}function ig(e){return e.map(({annotation:o,emoticon:s,group:n,order:r,shortcodes:i,skins:a,tags:c,emoji:l,version:u})=>{const d=[...new Set(Bc([...(i||[]).map(Ko).flat(),...c.map(Ko).flat(),...Ko(o),s]))].sort(),f={annotation:o,group:n,order:r,tags:c,tokens:d,unicode:l,version:u};if(s&&(f.emoticon=s),i&&(f.shortcodes=i),a){f.skinTones=[],f.skinUnicodes=[],f.skinVersions=[];for(const{tone:g,emoji:y,version:L}of a)f.skinTones.push(g),f.skinUnicodes.push(y),f.skinVersions.push(L)}return f})}function Dc(e,t,o,s){e[t](o).onsuccess=n=>s&&s(n.target.result)}function So(e,t,o){Dc(e,"get",t,o)}function Hc(e,t,o){Dc(e,"getAll",t,o)}function Xn(e){e.commit&&e.commit()}function ag(e,t){let o=e[0];for(let s=1;s<e.length;s++){const n=e[s];t(o)>t(n)&&(o=n)}return o}function zc(e,t){const o=ag(e,n=>n.length),s=[];for(const n of o)e.some(r=>r.findIndex(i=>t(i)===t(n))===-1)||s.push(n);return s}async function cg(e){return!await Jn(e,zo,kr)}async function lg(e,t,o){const[s,n]=await Promise.all([Gn,kr].map(r=>Jn(e,zo,r)));return s===o&&n===t}async function dg(e,t){return Vt(e,To,qo,(s,n,r)=>{let i;const a=()=>{s.getAll(i&&IDBKeyRange.lowerBound(i,!0),50).onsuccess=c=>{const l=c.target.result;for(const u of l)if(i=u.unicode,t(u))return r(u);if(l.length<50)return r();a()}};a()})}async function qc(e,t,o,s){try{const n=ig(t);await Vt(e,[To,zo],Wn,([r,i],a)=>{let c,l,u=0;function d(){++u===2&&f()}function f(){if(!(c===s&&l===o)){r.clear();for(const g of n)r.put(g);i.put(s,Gn),i.put(o,kr),Xn(a)}}So(i,Gn,g=>{c=g,d()}),So(i,kr,g=>{l=g,d()})})}finally{}}async function ug(e,t){return Vt(e,To,qo,(o,s,n)=>{const r=IDBKeyRange.bound([t,0],[t+1,0],!1,!0);Hc(o.index(jc),r,n)})}async function Kc(e,t){const o=Bc(Ko(t));return o.length?Vt(e,To,qo,(s,n,r)=>{const i=[],a=()=>{i.length===o.length&&c()},c=()=>{const l=zc(i,u=>u.unicode);r(l.sort((u,d)=>u.order<d.order?-1:1))};for(let l=0;l<o.length;l++){const u=o[l],d=l===o.length-1?IDBKeyRange.bound(u,u+"\uFFFF",!1,!0):IDBKeyRange.only(u);Hc(s.index(Lc),d,f=>{i.push(f),a()})}}):[]}async function mg(e,t){const o=await Kc(e,t);return o.length?o.filter(s=>(s.shortcodes||[]).map(r=>r.toLowerCase()).includes(t.toLowerCase()))[0]||null:await dg(e,n=>(n.shortcodes||[]).includes(t.toLowerCase()))||null}async function fg(e,t){return Vt(e,To,qo,(o,s,n)=>So(o,t,r=>{if(r)return n(r);So(o.index(Nc),t,i=>n(i||null))}))}function Jn(e,t,o){return Vt(e,t,qo,(s,n,r)=>So(s,o,r))}function hg(e,t,o,s){return Vt(e,t,Wn,(n,r)=>{n.put(s,o),Xn(r)})}function gg(e,t){return Vt(e,Vn,Wn,(o,s)=>So(o,t,n=>{o.put((n||0)+1,t),Xn(s)}))}function pg(e,t,o){return o===0?[]:Vt(e,[Vn,To],qo,([s,n],r,i)=>{const a=[];s.index(Ic).openCursor(void 0,"prev").onsuccess=c=>{const l=c.target.result;if(!l)return i(a);function u(g){if(a.push(g),a.length===o)return i(a);l.continue()}const d=l.primaryKey,f=t.byName(d);if(f)return u(f);So(n,d,g=>{if(g)return u(g);l.continue()})}})}const Sr="";function vg(e,t){const o=new Map;for(const n of e){const r=t(n);for(const i of r){let a=o;for(let l=0;l<i.length;l++){const u=i.charAt(l);let d=a.get(u);d||(d=new Map,a.set(u,d)),a=d}let c=a.get(Sr);c||(c=[],a.set(Sr,c)),c.push(n)}}return(n,r)=>{let i=o;for(let l=0;l<n.length;l++){const u=n.charAt(l),d=i.get(u);if(d)i=d;else return[]}if(r)return i.get(Sr)||[];const a=[],c=[i];for(;c.length;){const u=[...c.shift().entries()].sort((d,f)=>d[0]<f[0]?-1:1);for(const[d,f]of u)d===Sr?a.push(...f):c.push(f)}return a}}const bg=["name","url"];function yg(e){const t=e&&Array.isArray(e),o=t&&e.length&&(!e[0]||bg.some(s=>!(s in e[0])));if(!t||o)throw new Error("Custom emojis are in the wrong format")}function Vc(e){yg(e);const t=(f,g)=>f.name.toLowerCase()<g.name.toLowerCase()?-1:1,o=e.sort(t),n=vg(e,f=>[...new Set((f.shortcodes||[]).map(g=>Ko(g)).flat())]),r=f=>n(f,!0),i=f=>n(f,!1),a=f=>{const g=Ko(f),y=g.map((L,A)=>(A<g.length-1?r:i)(L));return zc(y,L=>L.name).sort(t)},c=new Map,l=new Map;for(const f of e){l.set(f.name.toLowerCase(),f);for(const g of f.shortcodes||[])c.set(g.toLowerCase(),f)}return{all:o,search:a,byShortcode:f=>c.get(f.toLowerCase()),byName:f=>l.get(f.toLowerCase())}}function Ts(e){if(!e)return e;if(delete e.tokens,e.skinTones){const t=e.skinTones.length;e.skins=Array(t);for(let o=0;o<t;o++)e.skins[o]={tone:e.skinTones[o],unicode:e.skinUnicodes[o],version:e.skinVersions[o]};delete e.skinTones,delete e.skinUnicodes,delete e.skinVersions}return e}function Gc(e){e||console.warn("emoji-picker-element is more efficient if the dataSource server exposes an ETag header.")}const wg=["annotation","emoji","group","order","tags","version"];function xg(e){if(!e||!Array.isArray(e)||!e[0]||typeof e[0]!="object"||wg.some(t=>!(t in e[0])))throw new Error("Emoji data is in the wrong format")}function Wc(e,t){if(Math.floor(e.status/100)!==2)throw new Error("Failed to fetch: "+t+":  "+e.status)}async function _g(e){const t=await fetch(e,{method:"HEAD"});Wc(t,e);const o=t.headers.get("etag");return Gc(o),o}async function Qn(e){const t=await fetch(e);Wc(t,e);const o=t.headers.get("etag");Gc(o);const s=await t.json();return xg(s),[o,s]}function kg(e){for(var t="",o=new Uint8Array(e),s=o.byteLength,n=-1;++n<s;)t+=String.fromCharCode(o[n]);return t}function Eg(e){for(var t=e.length,o=new ArrayBuffer(t),s=new Uint8Array(o),n=-1;++n<t;)s[n]=e.charCodeAt(n);return o}async function Yc(e){const t=JSON.stringify(e),o=Eg(t),s=await crypto.subtle.digest("SHA-1",o),n=kg(s);return btoa(n)}async function Tg(e,t){let o,s=await _g(t);if(!s){const n=await Qn(t);s=n[0],o=n[1],s||(s=await Yc(o))}await lg(e,t,s)||(o||(o=(await Qn(t))[1]),await qc(e,o,t,s))}async function Sg(e,t){let[o,s]=await Qn(t);o||(o=await Yc(s)),await qc(e,s,t,o)}class Zc{constructor({dataSource:t=Xh,locale:o=Jh,customEmoji:s=[]}={}){this.dataSource=t,this.locale=o,this._dbName=`emoji-picker-element-${this.locale}`,this._db=void 0,this._lazyUpdate=void 0,this._custom=Vc(s),this._clear=this._clear.bind(this),this._ready=this._init()}async _init(){const t=this._db=await tg(this._dbName);sg(this._dbName,this._clear);const o=this.dataSource;await cg(t)?await Sg(t,o):this._lazyUpdate=Tg(t,o)}async ready(){const t=async()=>(this._ready||(this._ready=this._init()),this._ready);await t(),this._db||await t()}async getEmojiByGroup(t){return Kn(t),await this.ready(),Uc(await ug(this._db,t)).map(Ts)}async getEmojiBySearchQuery(t){_r(t),await this.ready();const o=this._custom.search(t),s=Uc(await Kc(this._db,t)).map(Ts);return[...o,...s]}async getEmojiByShortcode(t){_r(t),await this.ready();const o=this._custom.byShortcode(t);return o||Ts(await mg(this._db,t))}async getEmojiByUnicodeOrName(t){_r(t),await this.ready();const o=this._custom.byName(t);return o||Ts(await fg(this._db,t))}async getPreferredSkinTone(){return await this.ready(),await Jn(this._db,zo,Pc)||0}async setPreferredSkinTone(t){return Kn(t),await this.ready(),hg(this._db,zo,Pc,t)}async incrementFavoriteEmojiCount(t){return _r(t),await this.ready(),gg(this._db,t)}async getTopFavoriteEmoji(t){return Kn(t),await this.ready(),(await pg(this._db,this._custom,t)).map(Ts)}set customEmoji(t){this._custom=Vc(t)}get customEmoji(){return this._custom.all}async _shutdown(){await this.ready();try{await this._lazyUpdate}catch{}}_clear(){this._db=this._ready=this._lazyUpdate=void 0}async close(){await this._shutdown(),await Zn(this._dbName)}async delete(){await this._shutdown(),await og(this._dbName)}}function Ss(){}function Xc(e){return e()}function Jc(){return Object.create(null)}function Ms(e){e.forEach(Xc)}function Qc(e){return typeof e=="function"}function Mg(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Mr;function Rr(e,t){return Mr||(Mr=document.createElement("a")),Mr.href=t,e===Mr.href}function Rg(e){return Object.keys(e).length===0}function Cg(e){return e&&Qc(e.destroy)?e.destroy:Ss}function De(e,t){e.appendChild(t)}function Tt(e,t,o){e.insertBefore(t,o||null)}function St(e){e.parentNode.removeChild(e)}function Pe(e){return document.createElement(e)}function Pt(e){return document.createTextNode(e)}function Mt(e,t,o,s){return e.addEventListener(t,o,s),()=>e.removeEventListener(t,o,s)}function b(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function Nt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function $c(e,t){e.value=t==null?"":t}function ro(e,t,o,s){o===null?e.style.removeProperty(t):e.style.setProperty(t,o,s?"important":"")}let $n;function Rs(e){$n=e}const Cs=[],Vo=[],Cr=[],el=[],tl=Promise.resolve();let ei=!1;function ol(){ei||(ei=!0,tl.then(sl))}function Og(){return ol(),tl}function ti(e){Cr.push(e)}const oi=new Set;let Or=0;function sl(){const e=$n;do{for(;Or<Cs.length;){const t=Cs[Or];Or++,Rs(t),Ag(t.$$)}for(Rs(null),Cs.length=0,Or=0;Vo.length;)Vo.pop()();for(let t=0;t<Cr.length;t+=1){const o=Cr[t];oi.has(o)||(oi.add(o),o())}Cr.length=0}while(Cs.length);for(;el.length;)el.pop()();ei=!1,oi.clear(),Rs(e)}function Ag(e){if(e.fragment!==null){e.update(),Ms(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ti)}}const Lg=new Set;function Ig(e,t){e&&e.i&&(Lg.delete(e),e.i(t))}const jg=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Os(e,t){e.d(1),t.delete(e.key)}function As(e,t,o,s,n,r,i,a,c,l,u,d){let f=e.length,g=r.length,y=f;const L={};for(;y--;)L[e[y].key]=y;const A=[],G=new Map,le=new Map;for(y=g;y--;){const re=d(n,r,y),V=o(re);let D=i.get(V);D?s&&D.p(re,t):(D=l(V,re),D.c()),G.set(V,A[y]=D),V in L&&le.set(V,Math.abs(y-L[V]))}const se=new Set,ie=new Set;function ve(re){Ig(re,1),re.m(a,u),i.set(re.key,re),u=re.first,g--}for(;f&&g;){const re=A[g-1],V=e[f-1],D=re.key,ee=V.key;re===V?(u=re.first,f--,g--):G.has(ee)?!i.has(D)||se.has(D)?ve(re):ie.has(ee)?f--:le.get(D)>le.get(ee)?(ie.add(D),ve(re)):(se.add(ee),f--):(c(V,i),f--)}for(;f--;){const re=e[f];G.has(re.key)||c(re,i)}for(;g;)ve(A[g-1]);return A}function Pg(e,t,o,s){const{fragment:n,on_mount:r,on_destroy:i,after_update:a}=e.$$;n&&n.m(t,o),s||ti(()=>{const c=r.map(Xc).filter(Qc);i?i.push(...c):Ms(c),e.$$.on_mount=[]}),a.forEach(ti)}function Ng(e,t){const o=e.$$;o.fragment!==null&&(Ms(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function Ug(e,t){e.$$.dirty[0]===-1&&(Cs.push(e),ol(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Fg(e,t,o,s,n,r,i,a=[-1]){const c=$n;Rs(e);const l=e.$$={fragment:null,ctx:null,props:r,update:Ss,not_equal:n,bound:Jc(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:Jc(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};i&&i(l.root);let u=!1;l.ctx=o?o(e,t.props||{},(d,f,...g)=>{const y=g.length?g[0]:f;return l.ctx&&n(l.ctx[d],l.ctx[d]=y)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](y),u&&Ug(e,d)),f}):[],l.update(),u=!0,Ms(l.before_update),l.fragment=s?s(l.ctx):!1,t.target&&(l.fragment&&l.fragment.c(),Pg(e,t.target,void 0,void 0),sl()),Rs(c)}class Bg{$destroy(){Ng(this,1),this.$destroy=Ss}$on(t,o){const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(o),()=>{const n=s.indexOf(o);n!==-1&&s.splice(n,1)}}$set(t){this.$$set&&!Rg(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const rl=[[-1,"\u2728","custom"],[0,"\u{1F600}","smileys-emotion"],[1,"\u{1F44B}","people-body"],[3,"\u{1F431}","animals-nature"],[4,"\u{1F34E}","food-drink"],[5,"\u{1F3E0}\uFE0F","travel-places"],[6,"\u26BD","activities"],[7,"\u{1F4DD}","objects"],[8,"\u26D4\uFE0F","symbols"],[9,"\u{1F3C1}","flags"]].map(([e,t,o])=>({id:e,emoji:t,name:o})),Ar=rl.slice(1),Dg=rl[0],Hg=2,nl=6,il=typeof requestIdleCallback=="function"?requestIdleCallback:setTimeout;function al(e){return e.unicode.includes("\u200D")}const zg={"\u{1FAE0}":14,"\u{1F972}":13.1,"\u{1F97B}":12.1,"\u{1F970}":11,"\u{1F929}":5,"\u{1F471}\u200D\u2640\uFE0F":4,"\u{1F923}":3,"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F":2,"\u{1F600}":1,"\u{1F610}\uFE0F":.7,"\u{1F603}":.6},qg=1e3,Kg="\u{1F590}\uFE0F",Vg=8,Gg=["\u{1F60A}","\u{1F612}","\u2665\uFE0F","\u{1F44D}\uFE0F","\u{1F60D}","\u{1F602}","\u{1F62D}","\u263A\uFE0F","\u{1F614}","\u{1F629}","\u{1F60F}","\u{1F495}","\u{1F64C}","\u{1F618}"],cl='"Twemoji Mozilla","Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji","EmojiOne Color","Android Emoji",sans-serif',Wg=(e,t)=>e<t?-1:e>t?1:0,ll=(e,t)=>{const o=document.createElement("canvas");o.width=o.height=1;const s=o.getContext("2d");return s.textBaseline="top",s.font=`100px ${cl}`,s.fillStyle=t,s.scale(.01,.01),s.fillText(e,0,0),s.getImageData(0,0,1,1).data},Yg=(e,t)=>{const o=[...e].join(","),s=[...t].join(",");return o===s&&!o.startsWith("0,0,0,")};function Zg(e){const t=ll(e,"#000"),o=ll(e,"#fff");return t&&o&&Yg(t,o)}function Xg(){const e=Object.entries(zg);try{for(const[t,o]of e)if(Zg(t))return o}catch{}finally{}return e[0][1]}const si=new Promise(e=>il(()=>e(Xg()))),ri=new Map,Jg="\uFE0F",Qg="\uD83C",$g="\u200D",ep=127995,tp=57339;function op(e,t){if(t===0)return e;const o=e.indexOf($g);return o!==-1?e.substring(0,o)+String.fromCodePoint(ep+t-1)+e.substring(o):(e.endsWith(Jg)&&(e=e.substring(0,e.length-1)),e+Qg+String.fromCodePoint(tp+t-1))}function no(e){e.preventDefault(),e.stopPropagation()}function ni(e,t,o){return t+=e?-1:1,t<0?t=o.length-1:t>=o.length&&(t=0),t}function dl(e,t){const o=new Set,s=[];for(const n of e){const r=t(n);o.has(r)||(o.add(r),s.push(n))}return s}function sp(e,t){const o=s=>{const n={};for(const r of s)typeof r.tone=="number"&&r.version<=t&&(n[r.tone]=r.unicode);return n};return e.map(({unicode:s,skins:n,shortcodes:r,url:i,name:a,category:c})=>({unicode:s,name:a,shortcodes:r,url:i,category:c,id:s||a,skins:n&&o(n),title:(r||[]).join(", ")}))}const Lr=requestAnimationFrame;let rp=typeof ResizeObserver=="function";function np(e,t){let o;return rp?(o=new ResizeObserver(s=>t(s[0].contentRect.width)),o.observe(e)):Lr(()=>t(e.getBoundingClientRect().width)),{destroy(){o&&o.disconnect()}}}function ul(e){{const t=document.createRange();return t.selectNode(e.firstChild),t.getBoundingClientRect().width}}let ii;function ip(e,t,o){for(const s of e){const n=o(s),r=ul(n);typeof ii=="undefined"&&(ii=ul(t));const i=r/1.8<ii;ri.set(s.unicode,i)}}function ap(e){return dl(e,t=>t)}const{Map:Ls}=jg;function ml(e,t,o){const s=e.slice();return s[63]=t[o],s[65]=o,s}function fl(e,t,o){const s=e.slice();return s[66]=t[o],s[65]=o,s}function hl(e,t,o){const s=e.slice();return s[63]=t[o],s[65]=o,s}function gl(e,t,o){const s=e.slice();return s[69]=t[o],s}function pl(e,t,o){const s=e.slice();return s[72]=t[o],s[65]=o,s}function vl(e,t){let o,s=t[72]+"",n,r,i,a,c,l;return{key:e,first:null,c(){o=Pe("div"),n=Pt(s),b(o,"id",r="skintone-"+t[65]),b(o,"class",i="emoji hide-focus "+(t[65]===t[20]?"active":"")),b(o,"aria-selected",a=t[65]===t[20]),b(o,"role","option"),b(o,"title",c=t[0].skinTones[t[65]]),b(o,"tabindex","-1"),b(o,"aria-label",l=t[0].skinTones[t[65]]),this.first=o},m(u,d){Tt(u,o,d),De(o,n)},p(u,d){t=u,d[0]&512&&s!==(s=t[72]+"")&&Nt(n,s),d[0]&512&&r!==(r="skintone-"+t[65])&&b(o,"id",r),d[0]&1049088&&i!==(i="emoji hide-focus "+(t[65]===t[20]?"active":""))&&b(o,"class",i),d[0]&1049088&&a!==(a=t[65]===t[20])&&b(o,"aria-selected",a),d[0]&513&&c!==(c=t[0].skinTones[t[65]])&&b(o,"title",c),d[0]&513&&l!==(l=t[0].skinTones[t[65]])&&b(o,"aria-label",l)},d(u){u&&St(o)}}}function bl(e,t){let o,s,n=t[69].emoji+"",r,i,a,c,l,u,d;function f(){return t[49](t[69])}return{key:e,first:null,c(){o=Pe("button"),s=Pe("div"),r=Pt(n),b(s,"class","nav-emoji emoji"),b(o,"role","tab"),b(o,"class","nav-button"),b(o,"aria-controls",i="tab-"+t[69].id),b(o,"aria-label",a=t[0].categories[t[69].name]),b(o,"aria-selected",c=!t[4]&&t[13].id===t[69].id),b(o,"title",l=t[0].categories[t[69].name]),this.first=o},m(g,y){Tt(g,o,y),De(o,s),De(s,r),u||(d=Mt(o,"click",f),u=!0)},p(g,y){t=g,y[0]&4096&&n!==(n=t[69].emoji+"")&&Nt(r,n),y[0]&4096&&i!==(i="tab-"+t[69].id)&&b(o,"aria-controls",i),y[0]&4097&&a!==(a=t[0].categories[t[69].name])&&b(o,"aria-label",a),y[0]&12304&&c!==(c=!t[4]&&t[13].id===t[69].id)&&b(o,"aria-selected",c),y[0]&4097&&l!==(l=t[0].categories[t[69].name])&&b(o,"title",l)},d(g){g&&St(o),u=!1,d()}}}function cp(e){let t,o;return{c(){t=Pe("img"),b(t,"class","custom-emoji"),Rr(t.src,o=e[63].url)||b(t,"src",o),b(t,"alt",""),b(t,"loading","lazy")},m(s,n){Tt(s,t,n)},p(s,n){n[0]&32768&&!Rr(t.src,o=s[63].url)&&b(t,"src",o)},d(s){s&&St(t)}}}function lp(e){let t=e[27](e[63],e[8])+"",o;return{c(){o=Pt(t)},m(s,n){Tt(s,o,n)},p(s,n){n[0]&33024&&t!==(t=s[27](s[63],s[8])+"")&&Nt(o,t)},d(s){s&&St(o)}}}function yl(e,t){let o,s,n,r,i,a,c;function l(f,g){return f[63].unicode?lp:cp}let u=l(t),d=u(t);return{key:e,first:null,c(){o=Pe("button"),d.c(),b(o,"role",s=t[4]?"option":"menuitem"),b(o,"aria-selected",n=t[4]?t[65]==t[5]:""),b(o,"aria-label",r=t[28](t[63],t[8])),b(o,"title",i=t[63].title),b(o,"class",a="emoji "+(t[4]&&t[65]===t[5]?"active":"")),b(o,"id",c="emo-"+t[63].id),this.first=o},m(f,g){Tt(f,o,g),d.m(o,null)},p(f,g){t=f,u===(u=l(t))&&d?d.p(t,g):(d.d(1),d=u(t),d&&(d.c(),d.m(o,null))),g[0]&16&&s!==(s=t[4]?"option":"menuitem")&&b(o,"role",s),g[0]&32816&&n!==(n=t[4]?t[65]==t[5]:"")&&b(o,"aria-selected",n),g[0]&33024&&r!==(r=t[28](t[63],t[8]))&&b(o,"aria-label",r),g[0]&32768&&i!==(i=t[63].title)&&b(o,"title",i),g[0]&32816&&a!==(a="emoji "+(t[4]&&t[65]===t[5]?"active":""))&&b(o,"class",a),g[0]&32768&&c!==(c="emo-"+t[63].id)&&b(o,"id",c)},d(f){f&&St(o),d.d()}}}function wl(e,t){let o,s=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"",n,r,i,a,c=[],l=new Ls,u,d,f,g=t[66].emojis;const y=L=>L[63].id;for(let L=0;L<g.length;L+=1){let A=hl(t,g,L),G=y(A);l.set(G,c[L]=yl(G,A))}return{key:e,first:null,c(){o=Pe("div"),n=Pt(s),a=Pe("div");for(let L=0;L<c.length;L+=1)c[L].c();b(o,"id",r="menu-label-"+t[65]),b(o,"class",i="category "+(t[15].length===1&&t[15][0].category===""?"gone":"")),b(o,"aria-hidden","true"),b(a,"class","emoji-menu"),b(a,"role",u=t[4]?"listbox":"menu"),b(a,"aria-labelledby",d="menu-label-"+t[65]),b(a,"id",f=t[4]?"search-results":""),this.first=o},m(L,A){Tt(L,o,A),De(o,n),Tt(L,a,A);for(let G=0;G<c.length;G+=1)c[G].m(a,null)},p(L,A){t=L,A[0]&40977&&s!==(s=(t[4]?t[0].searchResultsLabel:t[66].category?t[66].category:t[15].length>1?t[0].categories.custom:t[0].categories[t[13].name])+"")&&Nt(n,s),A[0]&32768&&r!==(r="menu-label-"+t[65])&&b(o,"id",r),A[0]&32768&&i!==(i="category "+(t[15].length===1&&t[15][0].category===""?"gone":""))&&b(o,"class",i),A[0]&402686256&&(g=t[66].emojis,c=As(c,A,y,1,t,g,l,a,Os,yl,null,hl)),A[0]&16&&u!==(u=t[4]?"listbox":"menu")&&b(a,"role",u),A[0]&32768&&d!==(d="menu-label-"+t[65])&&b(a,"aria-labelledby",d),A[0]&16&&f!==(f=t[4]?"search-results":"")&&b(a,"id",f)},d(L){L&&St(o),L&&St(a);for(let A=0;A<c.length;A+=1)c[A].d()}}}function dp(e){let t,o;return{c(){t=Pe("img"),b(t,"class","custom-emoji"),Rr(t.src,o=e[63].url)||b(t,"src",o),b(t,"alt",""),b(t,"loading","lazy")},m(s,n){Tt(s,t,n)},p(s,n){n[0]&1024&&!Rr(t.src,o=s[63].url)&&b(t,"src",o)},d(s){s&&St(t)}}}function up(e){let t=e[27](e[63],e[8])+"",o;return{c(){o=Pt(t)},m(s,n){Tt(s,o,n)},p(s,n){n[0]&1280&&t!==(t=s[27](s[63],s[8])+"")&&Nt(o,t)},d(s){s&&St(o)}}}function xl(e,t){let o,s,n,r;function i(l,u){return l[63].unicode?up:dp}let a=i(t),c=a(t);return{key:e,first:null,c(){o=Pe("button"),c.c(),b(o,"role","menuitem"),b(o,"aria-label",s=t[28](t[63],t[8])),b(o,"title",n=t[63].title),b(o,"class","emoji"),b(o,"id",r="fav-"+t[63].id),this.first=o},m(l,u){Tt(l,o,u),c.m(o,null)},p(l,u){t=l,a===(a=i(t))&&c?c.p(t,u):(c.d(1),c=a(t),c&&(c.c(),c.m(o,null))),u[0]&1280&&s!==(s=t[28](t[63],t[8]))&&b(o,"aria-label",s),u[0]&1024&&n!==(n=t[63].title)&&b(o,"title",n),u[0]&1024&&r!==(r="fav-"+t[63].id)&&b(o,"id",r)},d(l){l&&St(o),c.d()}}}function mp(e){let t,o,s,n,r,i,a,c,l,u=e[0].searchLabel+"",d,f,g=e[0].searchDescription+"",y,L,A,G,le,se,ie,ve=e[0].skinToneDescription+"",re,V,D=[],ee=new Ls,me,fe,K,we,Se,He=[],Ce=new Ls,he,de,E,x,O,W,N,ae,be=[],ze=new Ls,Ee,qe,gt,Ye,Ne,at=[],m=new Ls,h,_,S,M,P,z,j=e[9];const H=k=>k[72];for(let k=0;k<j.length;k+=1){let C=pl(e,j,k),v=H(C);ee.set(v,D[k]=vl(v,C))}let R=e[12];const X=k=>k[69].id;for(let k=0;k<R.length;k+=1){let C=gl(e,R,k),v=X(C);Ce.set(v,He[k]=bl(v,C))}let Y=e[15];const J=k=>k[66].category;for(let k=0;k<Y.length;k+=1){let C=fl(e,Y,k),v=J(C);ze.set(v,be[k]=wl(v,C))}let te=e[10];const xe=k=>k[63].id;for(let k=0;k<te.length;k+=1){let C=ml(e,te,k),v=xe(C);m.set(v,at[k]=xl(v,C))}return{c(){t=Pe("section"),o=Pe("div"),s=Pe("div"),n=Pe("div"),r=Pe("input"),l=Pe("label"),d=Pt(u),f=Pe("span"),y=Pt(g),L=Pe("div"),A=Pe("button"),G=Pt(e[21]),ie=Pe("span"),re=Pt(ve),V=Pe("div");for(let k=0;k<D.length;k+=1)D[k].c();Se=Pe("div");for(let k=0;k<He.length;k+=1)He[k].c();de=Pe("div"),E=Pe("div"),x=Pe("div"),O=Pt(e[18]),N=Pe("div"),ae=Pe("div");for(let k=0;k<be.length;k+=1)be[k].c();Ne=Pe("div");for(let k=0;k<at.length;k+=1)at[k].c();S=Pe("button"),S.textContent="\u{1F600}",b(o,"class","pad-top"),b(r,"id","search"),b(r,"class","search"),b(r,"type","search"),b(r,"role","combobox"),b(r,"enterkeyhint","search"),b(r,"placeholder",i=e[0].searchLabel),b(r,"autocapitalize","none"),b(r,"autocomplete","off"),b(r,"spellcheck","true"),b(r,"aria-expanded",a=!!(e[4]&&e[1].length)),b(r,"aria-controls","search-results"),b(r,"aria-describedby","search-description"),b(r,"aria-autocomplete","list"),b(r,"aria-activedescendant",c=e[26]?`emo-${e[26]}`:""),b(l,"class","sr-only"),b(l,"for","search"),b(f,"id","search-description"),b(f,"class","sr-only"),b(n,"class","search-wrapper"),b(A,"id","skintone-button"),b(A,"class",le="emoji "+(e[6]?"hide-focus":"")),b(A,"aria-label",e[23]),b(A,"title",e[23]),b(A,"aria-describedby","skintone-description"),b(A,"aria-haspopup","listbox"),b(A,"aria-expanded",e[6]),b(A,"aria-controls","skintone-list"),b(L,"class",se="skintone-button-wrapper "+(e[19]?"expanded":"")),b(ie,"id","skintone-description"),b(ie,"class","sr-only"),b(V,"id","skintone-list"),b(V,"class",me="skintone-list "+(e[6]?"":"hidden no-animate")),ro(V,"transform","translateY("+(e[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),b(V,"role","listbox"),b(V,"aria-label",fe=e[0].skinTonesLabel),b(V,"aria-activedescendant",K="skintone-"+e[20]),b(V,"aria-hidden",we=!e[6]),b(s,"class","search-row"),b(Se,"class","nav"),b(Se,"role","tablist"),ro(Se,"grid-template-columns","repeat("+e[12].length+", 1fr)"),b(Se,"aria-label",he=e[0].categoriesLabel),b(E,"class","indicator"),ro(E,"transform","translateX("+(e[24]?-1:1)*e[11]*100+"%)"),b(de,"class","indicator-wrapper"),b(x,"class",W="message "+(e[18]?"":"gone")),b(x,"role","alert"),b(x,"aria-live","polite"),b(N,"class",Ee="tabpanel "+(!e[14]||e[18]?"gone":"")),b(N,"role",qe=e[4]?"region":"tabpanel"),b(N,"aria-label",gt=e[4]?e[0].searchResultsLabel:e[0].categories[e[13].name]),b(N,"id",Ye=e[4]?"":`tab-${e[13].id}`),b(N,"tabindex","0"),b(Ne,"class",h="favorites emoji-menu "+(e[18]?"gone":"")),b(Ne,"role","menu"),b(Ne,"aria-label",_=e[0].favoritesLabel),ro(Ne,"padding-inline-end",e[25]+"px"),b(S,"aria-hidden","true"),b(S,"tabindex","-1"),b(S,"class","abs-pos hidden emoji"),b(t,"class","picker"),b(t,"aria-label",M=e[0].regionLabel),b(t,"style",e[22])},m(k,C){Tt(k,t,C),De(t,o),De(t,s),De(s,n),De(n,r),$c(r,e[2]),De(n,l),De(l,d),De(n,f),De(f,y),De(s,L),De(L,A),De(A,G),De(s,ie),De(ie,re),De(s,V);for(let v=0;v<D.length;v+=1)D[v].m(V,null);e[48](V),De(t,Se);for(let v=0;v<He.length;v+=1)He[v].m(Se,null);De(t,de),De(de,E),De(t,x),De(x,O),De(t,N),De(N,ae);for(let v=0;v<be.length;v+=1)be[v].m(ae,null);e[50](N),De(t,Ne);for(let v=0;v<at.length;v+=1)at[v].m(Ne,null);De(t,S),e[51](S),e[52](t),P||(z=[Mt(r,"input",e[47]),Mt(r,"keydown",e[30]),Mt(A,"click",e[35]),Mt(V,"focusout",e[38]),Mt(V,"click",e[34]),Mt(V,"keydown",e[36]),Mt(V,"keyup",e[37]),Mt(Se,"keydown",e[32]),Cg(e[29].call(null,ae)),Mt(N,"click",e[33]),Mt(Ne,"click",e[33])],P=!0)},p(k,C){C[0]&1&&i!==(i=k[0].searchLabel)&&b(r,"placeholder",i),C[0]&18&&a!==(a=!!(k[4]&&k[1].length))&&b(r,"aria-expanded",a),C[0]&67108864&&c!==(c=k[26]?`emo-${k[26]}`:"")&&b(r,"aria-activedescendant",c),C[0]&4&&$c(r,k[2]),C[0]&1&&u!==(u=k[0].searchLabel+"")&&Nt(d,u),C[0]&1&&g!==(g=k[0].searchDescription+"")&&Nt(y,g),C[0]&2097152&&Nt(G,k[21]),C[0]&64&&le!==(le="emoji "+(k[6]?"hide-focus":""))&&b(A,"class",le),C[0]&8388608&&b(A,"aria-label",k[23]),C[0]&8388608&&b(A,"title",k[23]),C[0]&64&&b(A,"aria-expanded",k[6]),C[0]&524288&&se!==(se="skintone-button-wrapper "+(k[19]?"expanded":""))&&b(L,"class",se),C[0]&1&&ve!==(ve=k[0].skinToneDescription+"")&&Nt(re,ve),C[0]&1049089&&(j=k[9],D=As(D,C,H,1,k,j,ee,V,Os,vl,null,pl)),C[0]&64&&me!==(me="skintone-list "+(k[6]?"":"hidden no-animate"))&&b(V,"class",me),C[0]&64&&ro(V,"transform","translateY("+(k[6]?0:"calc(-1 * var(--num-skintones) * var(--total-emoji-size))")+")"),C[0]&1&&fe!==(fe=k[0].skinTonesLabel)&&b(V,"aria-label",fe),C[0]&1048576&&K!==(K="skintone-"+k[20])&&b(V,"aria-activedescendant",K),C[0]&64&&we!==(we=!k[6])&&b(V,"aria-hidden",we),C[0]&12305|C[1]&1&&(R=k[12],He=As(He,C,X,1,k,R,Ce,Se,Os,bl,null,gl)),C[0]&4096&&ro(Se,"grid-template-columns","repeat("+k[12].length+", 1fr)"),C[0]&1&&he!==(he=k[0].categoriesLabel)&&b(Se,"aria-label",he),C[0]&16779264&&ro(E,"transform","translateX("+(k[24]?-1:1)*k[11]*100+"%)"),C[0]&262144&&Nt(O,k[18]),C[0]&262144&&W!==(W="message "+(k[18]?"":"gone"))&&b(x,"class",W),C[0]&402694449&&(Y=k[15],be=As(be,C,J,1,k,Y,ze,ae,Os,wl,null,fl)),C[0]&278528&&Ee!==(Ee="tabpanel "+(!k[14]||k[18]?"gone":""))&&b(N,"class",Ee),C[0]&16&&qe!==(qe=k[4]?"region":"tabpanel")&&b(N,"role",qe),C[0]&8209&&gt!==(gt=k[4]?k[0].searchResultsLabel:k[0].categories[k[13].name])&&b(N,"aria-label",gt),C[0]&8208&&Ye!==(Ye=k[4]?"":`tab-${k[13].id}`)&&b(N,"id",Ye),C[0]&402654464&&(te=k[10],at=As(at,C,xe,1,k,te,m,Ne,Os,xl,null,ml)),C[0]&262144&&h!==(h="favorites emoji-menu "+(k[18]?"gone":""))&&b(Ne,"class",h),C[0]&1&&_!==(_=k[0].favoritesLabel)&&b(Ne,"aria-label",_),C[0]&33554432&&ro(Ne,"padding-inline-end",k[25]+"px"),C[0]&1&&M!==(M=k[0].regionLabel)&&b(t,"aria-label",M),C[0]&4194304&&b(t,"style",k[22])},i:Ss,o:Ss,d(k){k&&St(t);for(let C=0;C<D.length;C+=1)D[C].d();e[48](null);for(let C=0;C<He.length;C+=1)He[C].d();for(let C=0;C<be.length;C+=1)be[C].d();e[50](null);for(let C=0;C<at.length;C+=1)at[C].d();e[51](null),e[52](null),P=!1,Ms(z)}}}function fp(e,t,o){let{skinToneEmoji:s}=t,{i18n:n}=t,{database:r}=t,{customEmoji:i}=t,{customCategorySorting:a}=t,c=!0,l=[],u=[],d="",f="",g,y,L,A=!1,G=-1,le,se=!1,ie=!1,ve,re=0,V=0,D,ee,me="",fe=[],K=[],we,Se=Vg,He=!1,Ce=0,he=0,de=Ar,E,x=!1,O;const W=v=>{g.getRootNode().getElementById(v).focus()},N=(v,q)=>{g.dispatchEvent(new CustomEvent(v,{detail:q,bubbles:!0,composed:!0}))},ae=(v,q)=>q&&v.skins&&v.skins[q]||v.unicode,be=(v,q)=>ap([v.name||ae(v,q),...v.shortcodes||[]]).join(", "),ze=v=>/^skintone-/.test(v.id);si.then(v=>{v||o(18,le=n.emojiUnsupportedMessage)});function Ee(v){return np(v,q=>{{const ce=getComputedStyle(g),Ke=parseInt(ce.getPropertyValue("--num-columns"),10),$e=ce.getPropertyValue("direction")==="rtl",ct=v.parentElement.getBoundingClientRect().width-q;o(46,Se=Ke),o(25,Ce=ct),o(24,He=$e)}})}function qe(v){const q=g.getRootNode();ip(v,y,Ke=>q.getElementById(`emo-${Ke.id}`)),o(1,l=l)}function gt(v){return!v.unicode||!al(v)||ri.get(v.unicode)}async function Ye(v){const q=await si;return v.filter(({version:ce})=>!ce||ce<=q)}async function Ne(v){return sp(v,await si)}async function at(v){if(typeof v=="undefined")return[];const q=v===-1?i:await r.getEmojiByGroup(v);return Ne(await Ye(q))}async function m(v){return Ne(await Ye(await r.getEmojiBySearchQuery(v)))}function h(v){if(!A||!l.length)return;const q=ce=>{no(v),o(5,G=ni(ce,G,l))};switch(v.key){case"ArrowDown":return q(!1);case"ArrowUp":return q(!0);case"Enter":if(G!==-1)return no(v),M(l[G].id);l.length&&o(5,G=0)}}function _(v){o(2,d=""),o(44,f=""),o(5,G=-1),o(11,he=de.findIndex(q=>q.id===v.id))}function S(v){const{target:q,key:ce}=v,Ke=$e=>{$e&&(no(v),$e.focus())};switch(ce){case"ArrowLeft":return Ke(q.previousSibling);case"ArrowRight":return Ke(q.nextSibling);case"Home":return Ke(q.parentElement.firstChild);case"End":return Ke(q.parentElement.lastChild)}}async function M(v){const q=await r.getEmojiByUnicodeOrName(v),ce=[...l,...K].find($e=>$e.id===v),Ke=ce.unicode&&ae(ce,re);await r.incrementFavoriteEmojiCount(v),N("emoji-click",{emoji:q,skinTone:re,...Ke&&{unicode:Ke},...ce.name&&{name:ce.name}})}async function P(v){const{target:q}=v;if(!q.classList.contains("emoji"))return;no(v);const ce=q.id.substring(4);M(ce)}async function z(v){const{target:q}=v;if(!ze(q))return;no(v);const ce=parseInt(q.id.slice(9),10);o(8,re=ce),o(6,se=!1),W("skintone-button"),N("skin-tone-change",{skinTone:ce}),r.setPreferredSkinTone(ce)}async function j(v){o(6,se=!se),o(20,V=re),se&&(no(v),Lr(()=>W(`skintone-${V}`)))}function H(v){if(!se)return;const q=async ce=>{no(v),o(20,V=ce),await Og(),W(`skintone-${V}`)};switch(v.key){case"ArrowUp":return q(ni(!0,V,fe));case"ArrowDown":return q(ni(!1,V,fe));case"Home":return q(0);case"End":return q(fe.length-1);case"Enter":return z(v);case"Escape":return no(v),o(6,se=!1),W("skintone-button")}}function R(v){if(!!se)switch(v.key){case" ":return z(v)}}async function X(v){const{relatedTarget:q}=v;(!q||!ze(q))&&o(6,se=!1)}function Y(){d=this.value,o(2,d)}function J(v){Vo[v?"unshift":"push"](()=>{ve=v,o(7,ve)})}const te=v=>_(v);function xe(v){Vo[v?"unshift":"push"](()=>{L=v,o(3,L)})}function k(v){Vo[v?"unshift":"push"](()=>{y=v,o(17,y)})}function C(v){Vo[v?"unshift":"push"](()=>{g=v,o(16,g)})}return e.$$set=v=>{"skinToneEmoji"in v&&o(40,s=v.skinToneEmoji),"i18n"in v&&o(0,n=v.i18n),"database"in v&&o(39,r=v.database),"customEmoji"in v&&o(41,i=v.customEmoji),"customCategorySorting"in v&&o(42,a=v.customCategorySorting)},e.$$.update=()=>{if(e.$$.dirty[1]&1280&&i&&r&&o(39,r.customEmoji=i,r),e.$$.dirty[0]&1|e.$$.dirty[1]&256){async function v(){let q=!1;const ce=setTimeout(()=>{q=!0,o(18,le=n.loadingMessage)},qg);try{await r.ready(),o(14,x=!0)}catch(Ke){console.error(Ke),o(18,le=n.networkErrorMessage)}finally{clearTimeout(ce),q&&(q=!1,o(18,le=""))}}r&&v()}if(e.$$.dirty[0]&6144|e.$$.dirty[1]&1024&&(i&&i.length?o(12,de=[Dg,...Ar]):de!==Ar&&(he&&o(11,he--,he),o(12,de=Ar))),e.$$.dirty[0]&4&&il(()=>{o(44,f=(d||"").trim()),o(5,G=-1)}),e.$$.dirty[0]&6144&&o(13,E=de[he]),e.$$.dirty[0]&24576|e.$$.dirty[1]&8192){async function v(){if(!x)o(1,l=[]),o(4,A=!1);else if(f.length>=Hg){const q=f,ce=await m(q);q===f&&(o(1,l=ce),o(4,A=!0))}else if(E){const q=E.id,ce=await at(q);q===E.id&&(o(1,l=ce),o(4,A=!1))}}v()}if(e.$$.dirty[0]&4112&&o(22,ee=`
  --font-family: ${cl};
  --num-groups: ${de.length}; 
  --indicator-opacity: ${A?0:1}; 
  --num-skintones: ${nl};`),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function v(){x&&o(8,re=await r.getPreferredSkinTone())}v()}if(e.$$.dirty[1]&512&&o(9,fe=Array(nl).fill().map((v,q)=>op(s,q))),e.$$.dirty[0]&768&&o(21,D=fe[re]),e.$$.dirty[0]&257&&o(23,me=n.skinToneLabel.replace("{skinTone}",n.skinTones[re])),e.$$.dirty[0]&16384|e.$$.dirty[1]&256){async function v(){o(45,we=(await Promise.all(Gg.map(q=>r.getEmojiByUnicodeOrName(q)))).filter(Boolean))}x&&v()}if(e.$$.dirty[0]&16384|e.$$.dirty[1]&49408){async function v(){const q=await r.getTopFavoriteEmoji(Se),ce=await Ne(dl([...q,...we],Ke=>Ke.unicode||Ke.name).slice(0,Se));o(10,K=ce)}x&&we&&v()}if(e.$$.dirty[0]&10){const v=l.filter(q=>q.unicode).filter(q=>al(q)&&!ri.has(q.unicode));v.length?Lr(()=>qe(v)):(o(1,l=l.filter(gt)),Lr(()=>{(L||{}).scrollTop=0}))}e.$$.dirty[0]&1026|e.$$.dirty[1]&4096,e.$$.dirty[0]&18|e.$$.dirty[1]&2048&&o(15,u=function(){if(A)return[{category:"",emojis:l}];const q=new Map;for(const ce of l){const Ke=ce.category||"";let $e=q.get(Ke);$e||($e=[],q.set(Ke,$e)),$e.push(ce)}return[...q.entries()].map(([ce,Ke])=>({category:ce,emojis:Ke})).sort((ce,Ke)=>a(ce.category,Ke.category))}()),e.$$.dirty[0]&34&&o(26,O=G!==-1&&l[G].id),e.$$.dirty[0]&192&&(se?ve.addEventListener("transitionend",()=>{o(19,ie=!0)},{once:!0}):o(19,ie=!1))},[n,l,d,L,A,G,se,ve,re,fe,K,he,de,E,x,u,g,y,le,ie,V,D,ee,me,He,Ce,O,ae,be,Ee,h,_,S,P,z,j,H,R,X,r,s,i,a,c,f,we,Se,Y,J,te,xe,k,C]}class hp extends Bg{constructor(t){super(),Fg(this,t,fp,mp,Mg,{skinToneEmoji:40,i18n:0,database:39,customEmoji:41,customCategorySorting:42},null,[-1,-1,-1])}}const gp="https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json",pp="en";var vp={categoriesLabel:"Categories",emojiUnsupportedMessage:"Your browser does not support color emoji.",favoritesLabel:"Favorites",loadingMessage:"Loading\u2026",networkErrorMessage:"Could not load emoji.",regionLabel:"Emoji picker",searchDescription:"When search results are available, press up or down to select and enter to choose.",searchLabel:"Search",searchResultsLabel:"Search results",skinToneDescription:"When expanded, press up or down to select and enter to choose.",skinToneLabel:"Choose a skin tone (currently {skinTone})",skinTonesLabel:"Skin tones",skinTones:["Default","Light","Medium-Light","Medium","Medium-Dark","Dark"],categories:{custom:"Custom","smileys-emotion":"Smileys and emoticons","people-body":"People and body","animals-nature":"Animals and nature","food-drink":"Food and drink","travel-places":"Travel and places",activities:"Activities",objects:"Objects",symbols:"Symbols",flags:"Flags"}};const _l=["customEmoji","customCategorySorting","database","dataSource","i18n","locale","skinToneEmoji"];class kl extends HTMLElement{constructor(t){super(),this.attachShadow({mode:"open"});const o=document.createElement("style");o.textContent=":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}",this.shadowRoot.appendChild(o),this._ctx={locale:pp,dataSource:gp,skinToneEmoji:Kg,customCategorySorting:Wg,customEmoji:null,i18n:vp,...t};for(const s of _l)s!=="database"&&Object.prototype.hasOwnProperty.call(this,s)&&(this._ctx[s]=this[s],delete this[s]);this._dbFlush()}connectedCallback(){this._cmp=new hp({target:this.shadowRoot,props:this._ctx})}disconnectedCallback(){this._cmp.$destroy(),this._cmp=void 0;const{database:t}=this._ctx;t&&t.close().catch(o=>console.error(o))}static get observedAttributes(){return["locale","data-source","skin-tone-emoji"]}attributeChangedCallback(t,o,s){this._set(t.replace(/-([a-z])/g,(n,r)=>r.toUpperCase()),s)}_set(t,o){this._ctx[t]=o,this._cmp&&this._cmp.$set({[t]:o}),["locale","dataSource"].includes(t)&&this._dbFlush()}_dbCreate(){const{locale:t,dataSource:o,database:s}=this._ctx;(!s||s.locale!==t||s.dataSource!==o)&&this._set("database",new Zc({locale:t,dataSource:o}))}_dbFlush(){Promise.resolve().then(()=>this._dbCreate())}}const El={};for(const e of _l)El[e]={get(){return e==="database"&&this._dbCreate(),this._ctx[e]},set(t){if(e==="database")throw new Error("database is read-only");this._set(e,t)}};Object.defineProperties(kl.prototype,El),customElements.get("emoji-picker")||customElements.define("emoji-picker",kl);const bp={name:"EmojiPickerContainer",components:{SvgIcon:Qe},props:{emojiOpened:{type:Boolean,default:!1},emojiReaction:{type:Boolean,default:!1},positionTop:{type:Boolean,default:!1},positionRight:{type:Boolean,default:!1},messageId:{type:String,default:""}},emits:["add-emoji","open-emoji"],data(){return{emojiPickerHeight:320,emojiPickerTop:0,emojiPickerRight:""}},watch:{emojiOpened(e){e&&setTimeout(()=>{this.addCustomStyling(),this.$refs.emojiPicker.shadowRoot.addEventListener("emoji-click",({detail:t})=>{this.$emit("add-emoji",{unicode:t.unicode})})},0)}},methods:{addCustomStyling(){const e=`.picker {
				border: none;
			}`,t=`.nav {
				overflow-x: auto;
			}`,o=`.search-wrapper {
				padding-right: 2px;
				padding-left: 2px;
			}`,s=`input.search {
				height: 32px;
				font-size: 14px;
				border-radius: 10rem;
				border: var(--chat-border-style);
				padding: 5px 10px;
				outline: none;
				background: var(--chat-bg-color-input);
				color: var(--chat-color);
			}`,n=document.createElement("style");n.textContent=e+t+o+s,this.$refs.emojiPicker.shadowRoot.appendChild(n)},openEmoji(e){this.$emit("open-emoji",!this.emojiOpened),this.setEmojiPickerPosition(e.clientY,e.view.innerWidth,e.view.innerHeight)},setEmojiPickerPosition(e,t,o){const s=t<500||o<700,n=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer");if(!n){s&&(this.emojiPickerRight="-50px");return}s?(this.emojiPickerRight=t/2-(this.positionTop?200:150)+"px",this.emojiPickerTop=100,this.emojiPickerHeight=o-200):(n.getBoundingClientRect().top-e>this.emojiPickerHeight-50?this.emojiPickerTop=e+10:this.emojiPickerTop=e-this.emojiPickerHeight-10,this.emojiPickerRight=this.positionTop?"0px":this.positionRight?"60px":"")}}},yp={class:"vac-emoji-wrapper"},wp={ref:"emojiPicker","v-if":"emojiOpened"};function xp(e,t,o,s,n,r){const i=$("svg-icon");return p(),w("div",yp,[T("div",{class:ge(["vac-svg-button",{"vac-emoji-reaction":o.emojiReaction}]),onClick:t[0]||(t[0]=(...a)=>r.openEmoji&&r.openEmoji(...a))},[U(e.$slots,o.messageId?"emoji-picker-reaction-icon_"+o.messageId:"emoji-picker-icon",{},()=>[F(i,{name:"emoji",param:o.emojiReaction?"reaction":""},null,8,["param"])])],2),o.emojiOpened?(p(),Oe(Ge,{key:0,name:"vac-slide-up",appear:""},{default:Q(()=>[T("div",{class:ge(["vac-emoji-picker",{"vac-picker-reaction":o.emojiReaction}]),style:Me({height:`${n.emojiPickerHeight}px`,top:o.positionTop?n.emojiPickerHeight:`${n.emojiPickerTop}px`,right:n.emojiPickerRight,display:n.emojiPickerTop||!o.emojiReaction?"initial":"none"})},[T("emoji-picker",wp,null,512)],6)]),_:1})):B("",!0)])}var Tl=Fe(bp,[["render",xp]]);const _p={name:"RoomFiles",components:{Loader:lr,SvgIcon:Qe},props:{file:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["remove-file"],computed:{isImage(){return Ho(this.file)},isVideo(){return Es(this.file)}}},kp={class:"vac-room-file-container"},Ep=["src"],Tp={class:"vac-text-ellipsis"},Sp={key:0,class:"vac-text-ellipsis vac-text-extension"};function Mp(e,t,o,s,n,r){const i=$("loader"),a=$("svg-icon");return p(),w("div",kp,[F(i,{show:o.file.loading,type:"room-file"},Ie({_:2},[ue(e.$slots,(c,l)=>({name:l,fn:Q(u=>[U(e.$slots,l,Le(Ae(u)))])}))]),1032,["show"]),T("div",{class:"vac-svg-button vac-icon-remove",onClick:t[0]||(t[0]=c=>e.$emit("remove-file",o.index))},[U(e.$slots,"image-close-icon",{},()=>[F(a,{name:"close",param:"image"})])]),r.isImage?(p(),w("div",{key:0,class:ge(["vac-message-image",{"vac-blur-loading":o.file.loading}]),style:Me({"background-image":`url('${o.file.localUrl||o.file.url}')`})},null,6)):r.isVideo?(p(),w("video",{key:1,controls:"",class:ge({"vac-blur-loading":o.file.loading})},[T("source",{src:o.file.localUrl||o.file.url},null,8,Ep)],2)):(p(),w("div",{key:2,class:ge(["vac-file-container",{"vac-blur-loading":o.file.loading}])},[T("div",null,[U(e.$slots,"file-icon",{},()=>[F(a,{name:"file"})])]),T("div",Tp,ne(o.file.name),1),o.file.extension?(p(),w("div",Sp,ne(o.file.extension),1)):B("",!0)],2))])}var Rp=Fe(_p,[["render",Mp]]);const Cp={name:"RoomFiles",components:{SvgIcon:Qe,RoomFile:Rp},props:{files:{type:Array,required:!0}},emits:["remove-file","reset-message"],computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}}},Op={class:"vac-files-box"},Ap={class:"vac-icon-close"};function Lp(e,t,o,s,n,r){const i=$("room-file"),a=$("svg-icon");return p(),Oe(Ge,{name:"vac-slide-up"},{default:Q(()=>[o.files.length?(p(),w("div",{key:0,class:"vac-room-files-container",style:Me({bottom:`${r.footerHeight}px`})},[T("div",Op,[(p(!0),w(Te,null,ue(o.files,(c,l)=>(p(),w("div",{key:l},[F(i,{file:c,index:l,onRemoveFile:t[0]||(t[0]=u=>e.$emit("remove-file",u))},Ie({_:2},[ue(e.$slots,(u,d)=>({name:d,fn:Q(f=>[U(e.$slots,d,Le(Ae(f)))])}))]),1032,["file","index"])]))),128))]),T("div",Ap,[T("div",{class:"vac-svg-button",onClick:t[1]||(t[1]=c=>e.$emit("reset-message"))},[U(e.$slots,"files-close-icon",{},()=>[F(a,{name:"close-outline"})])])])],4)):B("",!0)]),_:3})}var Ip=Fe(Cp,[["render",Lp]]);const jp={props:{percentage:{type:Number,default:0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","change-linehead"],data(){return{isMouseDown:!1}},methods:{onMouseDown(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!0;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},onMouseUp(e){if(this.messageSelectionEnabled)return;this.isMouseDown=!1,document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove);const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},onMouseMove(e){if(this.messageSelectionEnabled)return;const t=this.calculateLineHeadPosition(e,this.$refs.progress);this.$emit("change-linehead",t)},calculateLineHeadPosition(e,t){const o=t.getBoundingClientRect().width,s=t.getBoundingClientRect().left;let n=(e.clientX-s)/o;return n=n<0?0:n,n=n>1?1:n,n}}},Pp={class:"vac-player-progress"},Np={class:"vac-line-container"};function Up(e,t,o,s,n,r){return p(),w("div",{ref:"progress",class:"vac-player-bar",onMousedown:t[0]||(t[0]=(...i)=>r.onMouseDown&&r.onMouseDown(...i)),onMouseover:t[1]||(t[1]=i=>e.$emit("hover-audio-progress",!0)),onMouseout:t[2]||(t[2]=i=>e.$emit("hover-audio-progress",!1))},[T("div",Pp,[T("div",Np,[T("div",{class:"vac-line-progress",style:Me({width:`${o.percentage}%`})},null,4),T("div",{class:ge(["vac-line-dot",{"vac-line-dot__active":n.isMouseDown}]),style:Me({left:`${o.percentage}%`})},null,6)])])],544)}var Fp=Fe(jp,[["render",Up]]);const Bp={name:"AudioPlayer",components:{SvgIcon:Qe,AudioControl:Fp},props:{messageId:{type:[String,Number],default:null},src:{type:String,default:null},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["hover-audio-progress","update-progress-time"],data(){return{isPlaying:!1,duration:this.convertTimeMMSS(0),playedTime:this.convertTimeMMSS(0),progress:0}},computed:{playerUniqId(){return`audio-player${this.messageId}`},audioSource(){return this.src?this.src:(this.resetProgress(),null)}},mounted(){this.player=document.querySelector("vue-advanced-chat").shadowRoot.getElementById(this.playerUniqId),this.player.addEventListener("ended",()=>{this.isPlaying=!1}),this.player.addEventListener("loadeddata",()=>{this.resetProgress(),this.duration=this.convertTimeMMSS(this.player.duration),this.updateProgressTime()}),this.player.addEventListener("timeupdate",this.onTimeUpdate)},methods:{convertTimeMMSS(e){return new Date(e*1e3).toISOString().substr(14,5)},playback(){this.messageSelectionEnabled||!this.audioSource||(this.isPlaying?this.player.pause():setTimeout(()=>this.player.play()),this.isPlaying=!this.isPlaying)},resetProgress(){this.isPlaying&&this.player.pause(),this.duration=this.convertTimeMMSS(0),this.playedTime=this.convertTimeMMSS(0),this.progress=0,this.isPlaying=!1,this.updateProgressTime()},onTimeUpdate(){this.playedTime=this.convertTimeMMSS(this.player.currentTime),this.progress=this.player.currentTime/this.player.duration*100,this.updateProgressTime()},onUpdateProgress(e){e&&(this.player.currentTime=e*this.player.duration)},updateProgressTime(){this.$emit("update-progress-time",this.progress>1?this.playedTime:this.duration)}}},Dp={class:"vac-audio-player"},Hp=["id","src"];function zp(e,t,o,s,n,r){const i=$("svg-icon"),a=$("audio-control");return p(),w("div",null,[T("div",Dp,[T("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=(...c)=>r.playback&&r.playback(...c))},[n.isPlaying?U(e.$slots,"audio-pause-icon_"+o.messageId,{key:0},()=>[F(i,{name:"audio-pause"})]):U(e.$slots,"audio-play-icon_"+o.messageId,{key:1},()=>[F(i,{name:"audio-play"})])]),F(a,{percentage:n.progress,"message-selection-enabled":o.messageSelectionEnabled,onChangeLinehead:r.onUpdateProgress,onHoverAudioProgress:t[1]||(t[1]=c=>e.$emit("hover-audio-progress",c))},null,8,["percentage","message-selection-enabled","onChangeLinehead"]),T("audio",{id:r.playerUniqId,src:r.audioSource},null,8,Hp)])])}var ai=Fe(Bp,[["render",zp]]);const qp={name:"RoomMessageReply",components:{SvgIcon:Qe,FormatMessage:_s,AudioPlayer:ai},props:{room:{type:Object,required:!0},messageReply:{type:Object,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0}},emits:["reset-message"],computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight},firstFile(){var e,t;return(t=(e=this.messageReply)==null?void 0:e.files)!=null&&t.length?this.messageReply.files[0]:{}},isImage(){return Ho(this.firstFile)},isVideo(){return Es(this.firstFile)},isAudio(){return wr(this.firstFile)},isOtherFile(){var e,t;return((t=(e=this.messageReply)==null?void 0:e.files)==null?void 0:t.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},Kp={class:"vac-reply-box"},Vp={class:"vac-reply-info"},Gp={class:"vac-reply-username"},Wp={class:"vac-reply-content"},Yp=["src"],Zp={key:1,controls:"",class:"vac-image-reply"},Xp=["src"],Jp={key:3,class:"vac-image-reply vac-file-container"},Qp={class:"vac-text-ellipsis"},$p={key:0,class:"vac-text-ellipsis vac-text-extension"},ev={class:"vac-icon-reply"};function tv(e,t,o,s,n,r){const i=$("format-message"),a=$("audio-player"),c=$("svg-icon");return p(),Oe(Ge,{name:"vac-slide-up"},{default:Q(()=>[o.messageReply?(p(),w("div",{key:0,class:"vac-reply-container",style:Me({bottom:`${r.footerHeight}px`})},[T("div",Kp,[T("div",Vp,[T("div",Gp,ne(o.messageReply.username),1),T("div",Wp,[F(i,{"message-id":o.messageReply._id,content:o.messageReply.content,users:o.room.users,"text-formatting":o.textFormatting,"link-options":o.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])]),r.isImage?(p(),w("img",{key:0,src:r.firstFile.url,class:"vac-image-reply"},null,8,Yp)):r.isVideo?(p(),w("video",Zp,[T("source",{src:r.firstFile.url},null,8,Xp)])):r.isAudio?(p(),Oe(a,{key:2,src:r.firstFile.url,"message-selection-enabled":!1,class:"vac-audio-reply"},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["src"])):r.isOtherFile?(p(),w("div",Jp,[T("div",null,[U(e.$slots,"file-icon",{},()=>[F(c,{name:"file"})])]),T("div",Qp,ne(r.firstFile.name),1),r.firstFile.extension?(p(),w("div",$p,ne(r.firstFile.extension),1)):B("",!0)])):B("",!0)]),T("div",ev,[T("div",{class:"vac-svg-button",onClick:t[0]||(t[0]=l=>e.$emit("reset-message"))},[U(e.$slots,"reply-close-icon",{},()=>[F(c,{name:"close-outline"})])])])],4)):B("",!0)]),_:3})}var ov=Fe(qp,[["render",tv]]);const sv={name:"RoomUsersTag",props:{filteredUsersTag:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-user-tag","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredUsersTag(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-user-tag",this.filteredUsersTag[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredUsersTag.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},rv=["onMouseover","onClick"],nv={class:"vac-tags-info"},iv={class:"vac-tags-username"};function av(e,t,o,s,n,r){return p(),Oe(Ge,{name:"vac-slide-up"},{default:Q(()=>[o.filteredUsersTag.length?(p(),w("div",{key:0,class:"vac-tags-container",style:Me({bottom:`${r.footerHeight}px`})},[(p(!0),w(Te,null,ue(o.filteredUsersTag,(i,a)=>(p(),w("div",{key:i._id,class:ge(["vac-tags-box",{"vac-tags-box-active":a===n.activeItem}]),onMouseover:c=>n.activeItem=a,onClick:c=>e.$emit("select-user-tag",i)},[T("div",nv,[i.avatar?(p(),w("div",{key:0,class:"vac-avatar vac-tags-avatar",style:Me({"background-image":`url('${i.avatar}')`})},null,4)):B("",!0),T("div",iv,ne(i.username),1)])],42,rv))),128))],4)):B("",!0)]),_:1})}var cv=Fe(sv,[["render",av]]);const lv={name:"RoomEmojis",props:{filteredEmojis:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-emoji","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredEmojis(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-emoji",this.filteredEmojis[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredEmojis.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},dv=["onMouseover","onClick"];function uv(e,t,o,s,n,r){return p(),Oe(Ge,{name:"vac-slide-up"},{default:Q(()=>[o.filteredEmojis.length?(p(),w("div",{key:0,class:"vac-emojis-container",style:Me({bottom:`${r.footerHeight}px`})},[(p(!0),w(Te,null,ue(o.filteredEmojis,(i,a)=>(p(),w("div",{key:i,class:ge(["vac-emoji-element",{"vac-emoji-element-active":a===n.activeItem}]),onMouseover:c=>n.activeItem=a,onClick:c=>e.$emit("select-emoji",i)},ne(i),43,dv))),128))],4)):B("",!0)]),_:1})}var mv=Fe(lv,[["render",uv]]);const fv={name:"RoomTemplatesText",props:{filteredTemplatesText:{type:Array,required:!0},selectItem:{type:Boolean,default:null},activeUpOrDown:{type:Number,default:null}},emits:["select-template-text","activate-item"],data(){return{activeItem:null}},computed:{footerHeight(){return document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer").clientHeight}},watch:{filteredTemplatesText(e,t){(!t.length||e.length!==t.length)&&(this.activeItem=0)},selectItem(e){e&&this.$emit("select-template-text",this.filteredTemplatesText[this.activeItem])},activeUpOrDown(){this.activeUpOrDown>0&&this.activeItem<this.filteredTemplatesText.length-1?this.activeItem++:this.activeUpOrDown<0&&this.activeItem>0&&this.activeItem--,this.$emit("activate-item")}}},hv=["onMouseover","onClick"],gv={class:"vac-template-info"},pv={class:"vac-template-tag"},vv={class:"vac-template-text"};function bv(e,t,o,s,n,r){return p(),Oe(Ge,{name:"vac-slide-up"},{default:Q(()=>[o.filteredTemplatesText.length?(p(),w("div",{key:0,class:"vac-template-container vac-app-box-shadow",style:Me({bottom:`${r.footerHeight}px`})},[(p(!0),w(Te,null,ue(o.filteredTemplatesText,(i,a)=>(p(),w("div",{key:a,class:ge(["vac-template-box",{"vac-template-active":a===n.activeItem}]),onMouseover:c=>n.activeItem=a,onClick:c=>e.$emit("select-template-text",i)},[T("div",gv,[T("div",pv," /"+ne(i.tag),1),T("div",vv,ne(i.text),1)])],42,hv))),128))],4)):B("",!0)]),_:1})}var yv=Fe(fv,[["render",bv]]);/*! Capacitor: https://capacitorjs.com/ - MIT License */const wv=e=>{const t=new Map;t.set("web",{name:"web"});const o=e.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:t},s=(r,i)=>{o.platforms.set(r,i)},n=r=>{o.platforms.has(r)&&(o.currentPlatform=o.platforms.get(r))};return o.addPlatform=s,o.setPlatform=n,o},Sl=(e=>e.CapacitorPlatforms=wv(e))(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});Sl.addPlatform,Sl.setPlatform;var Go;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(Go||(Go={}));class ci extends Error{constructor(t,o,s){super(t),this.message=t,this.code=o,this.data=s}}const xv=e=>{var t,o;return e!=null&&e.androidBridge?"android":!((o=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||o===void 0)&&o.bridge?"ios":"web"},_v=e=>{var t,o,s,n,r;const i=e.CapacitorCustomPlatform||null,a=e.Capacitor||{},c=a.Plugins=a.Plugins||{},l=e.CapacitorPlatforms,u=()=>i!==null?i.name:xv(e),d=((t=l==null?void 0:l.currentPlatform)===null||t===void 0?void 0:t.getPlatform)||u,f=()=>d()!=="web",g=((o=l==null?void 0:l.currentPlatform)===null||o===void 0?void 0:o.isNativePlatform)||f,y=V=>{const D=ie.get(V);return!!(D!=null&&D.platforms.has(d())||G(V))},L=((s=l==null?void 0:l.currentPlatform)===null||s===void 0?void 0:s.isPluginAvailable)||y,A=V=>{var D;return(D=a.PluginHeaders)===null||D===void 0?void 0:D.find(ee=>ee.name===V)},G=((n=l==null?void 0:l.currentPlatform)===null||n===void 0?void 0:n.getPluginHeader)||A,le=V=>e.console.error(V),se=(V,D,ee)=>Promise.reject(`${ee} does not have an implementation of "${D}".`),ie=new Map,ve=(V,D={})=>{const ee=ie.get(V);if(ee)return console.warn(`Capacitor plugin "${V}" already registered. Cannot register plugins twice.`),ee.proxy;const me=d(),fe=G(V);let K;const we=async()=>(!K&&me in D?K=typeof D[me]=="function"?K=await D[me]():K=D[me]:i!==null&&!K&&"web"in D&&(K=typeof D.web=="function"?K=await D.web():K=D.web),K),Se=(x,O)=>{var W,N;if(fe){const ae=fe==null?void 0:fe.methods.find(be=>O===be.name);if(ae)return ae.rtype==="promise"?be=>a.nativePromise(V,O.toString(),be):(be,ze)=>a.nativeCallback(V,O.toString(),be,ze);if(x)return(W=x[O])===null||W===void 0?void 0:W.bind(x)}else{if(x)return(N=x[O])===null||N===void 0?void 0:N.bind(x);throw new ci(`"${V}" plugin is not implemented on ${me}`,Go.Unimplemented)}},He=x=>{let O;const W=(...N)=>{const ae=we().then(be=>{const ze=Se(be,x);if(ze){const Ee=ze(...N);return O=Ee==null?void 0:Ee.remove,Ee}else throw new ci(`"${V}.${x}()" is not implemented on ${me}`,Go.Unimplemented)});return x==="addListener"&&(ae.remove=async()=>O()),ae};return W.toString=()=>`${x.toString()}() { [capacitor code] }`,Object.defineProperty(W,"name",{value:x,writable:!1,configurable:!1}),W},Ce=He("addListener"),he=He("removeListener"),de=(x,O)=>{const W=Ce({eventName:x},O),N=async()=>{const be=await W;he({eventName:x,callbackId:be},O)},ae=new Promise(be=>W.then(()=>be({remove:N})));return ae.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await N()},ae},E=new Proxy({},{get(x,O){switch(O){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return fe?de:Ce;case"removeListener":return he;default:return He(O)}}});return c[V]=E,ie.set(V,{name:V,proxy:E,platforms:new Set([...Object.keys(D),...fe?[me]:[]])}),E},re=((r=l==null?void 0:l.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||ve;return a.convertFileSrc||(a.convertFileSrc=V=>V),a.getPlatform=d,a.handleError=le,a.isNativePlatform=g,a.isPluginAvailable=L,a.pluginMethodNoop=se,a.registerPlugin=re,a.Exception=ci,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},Ir=(e=>e.Capacitor=_v(e))(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),li=Ir.registerPlugin;Ir.Plugins;class di{constructor(t){this.listeners={},this.windowListeners={},t&&(console.warn(`Capacitor WebPlugin "${t.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=t)}addListener(t,o){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(o);const n=this.windowListeners[t];n&&!n.registered&&this.addWindowListener(n);const r=async()=>this.removeListener(t,o),i=Promise.resolve({remove:r});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),i}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,o){const s=this.listeners[t];s&&s.forEach(n=>n(o))}hasListeners(t){return!!this.listeners[t].length}registerWindowListener(t,o){this.windowListeners[o]={registered:!1,windowEventName:t,pluginEventName:o,handler:s=>{this.notifyListeners(o,s)}}}unimplemented(t="not implemented"){return new Ir.Exception(t,Go.Unimplemented)}unavailable(t="not available"){return new Ir.Exception(t,Go.Unavailable)}async removeListener(t,o){const s=this.listeners[t];if(!s)return;const n=s.indexOf(o);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){!t||(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}}const Ml=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);class kv extends di{async setCookie(t){try{const o=Ml(t.key),s=Ml(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,r=(t.path||"/").replace("path=","");document.cookie=`${o}=${s||""}${n}; path=${r}`}catch(o){return Promise.reject(o)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(o){return Promise.reject(o)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const o of t)document.cookie=o.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}li("CapacitorCookies",{web:()=>new kv});const Ev=async e=>new Promise((t,o)=>{const s=new FileReader;s.onload=()=>{const n=s.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>o(n),s.readAsDataURL(e)}),Tv=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(n=>n.toLocaleLowerCase()).reduce((n,r,i)=>(n[r]=e[t[i]],n),{})},Sv=(e,t=!0)=>e?Object.entries(e).reduce((s,n)=>{const[r,i]=n;let a,c;return Array.isArray(i)?(c="",i.forEach(l=>{a=t?encodeURIComponent(l):l,c+=`${r}=${a}&`}),c.slice(0,-1)):(a=t?encodeURIComponent(i):i,c=`${r}=${a}`),`${s}&${c}`},"").substr(1):null,Mv=(e,t={})=>{const o=Object.assign({method:e.method||"GET",headers:e.headers},t),n=Tv(e.headers)["content-type"]||"";if(typeof e.data=="string")o.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[i,a]of Object.entries(e.data||{}))r.set(i,a);o.body=r.toString()}else if(n.includes("multipart/form-data")){const r=new FormData;if(e.data instanceof FormData)e.data.forEach((a,c)=>{r.append(c,a)});else for(const a of Object.keys(e.data))r.append(a,e.data[a]);o.body=r;const i=new Headers(o.headers);i.delete("content-type"),o.headers=i}else(n.includes("application/json")||typeof e.data=="object")&&(o.body=JSON.stringify(e.data));return o};class Rv extends di{async request(t){const o=Mv(t,t.webFetchExtra),s=Sv(t.params,t.shouldEncodeUrlParams),n=s?`${t.url}?${s}`:t.url,r=await fetch(n,o),i=r.headers.get("content-type")||"";let{responseType:a="text"}=r.ok?t:{};i.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await r.blob(),c=await Ev(l);break;case"json":c=await r.json();break;case"document":case"text":default:c=await r.text()}const u={};return r.headers.forEach((d,f)=>{u[f]=d}),{data:c,headers:u,status:r.status,url:r.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}li("CapacitorHttp",{web:()=>new Rv});const jr=li("VoiceRecorder",{web:()=>Promise.resolve().then(function(){return P0}).then(e=>new e.VoiceRecorderWeb)});class Cv{constructor(t={}){this.beforeRecording=t.beforeRecording,this.pauseRecording=t.pauseRecording,this.afterRecording=t.afterRecording,this.micFailed=t.micFailed,this.encoderOptions={bitRate:t.bitRate,sampleRate:t.sampleRate},this.bufferSize=4096,this.records=[],this.isPause=!1,this.isRecording=!1,this.duration=0,this.volume=0,this._duration=0,this.timerInterval=-1}startTimer(){this.timerInterval=setInterval(()=>this.duration++,1e3)}stopTimer(){clearInterval(this.timerInterval)}async start(){let t=await jr.canDeviceVoiceRecord();if(!t.value)return this._micError("No recording device available!");if(!(await jr.requestAudioRecordingPermission()).value)return this._micError("Recording permission not granted!");t=await jr.startRecording(),this.startTimer(),this.beforeRecording&&this.beforeRecording("start recording"),this.isPause=!1,this.isRecording=!0}b64toBlob(t,o="",s=512){const n=atob(t),r=[];for(let a=0;a<n.length;a+=s){const c=n.slice(a,a+s),l=new Array(c.length);for(let d=0;d<c.length;d++)l[d]=c.charCodeAt(d);const u=new Uint8Array(l);r.push(u)}return new Blob(r,{type:o})}async stop(){this.stopTimer();const t=await jr.stopRecording(),o=t.value.recordDataBase64,s=t.value.mimeType,n={blob:this.b64toBlob(o,s),duration:t.value.msDuration};this.records.push(n),this._duration=0,this.duration=0,this.isPause=!1,this.isRecording=!1,this.afterRecording&&this.afterRecording(n)}pause(){this.stream.getTracks().forEach(t=>t.stop()),this.input.disconnect(),this.processor.disconnect(),this._duration=this.duration,this.isPause=!0,this.pauseRecording&&this.pauseRecording("pause recording")}_micCaptured(t){this.context=new(window.AudioContext||window.webkitAudioContext),this.duration=this._duration,this.input=this.context.createMediaStreamSource(t),this.processor=this.context.createScriptProcessor(this.bufferSize,1,1),this.stream=t,this.processor.onaudioprocess=o=>{const s=o.inputBuffer.getChannelData(0);let n=0;this.lameEncoder&&this.lameEncoder.encode(s);for(let r=0;r<s.length;++r)n+=s[r]*s[r];this.duration=parseFloat(this._duration)+parseFloat(this.context.currentTime.toFixed(2)),this.volume=Math.sqrt(n/s.length).toFixed(2)},this.input.connect(this.processor),this.processor.connect(this.context.destination)}_micError(t){this.micFailed&&this.micFailed(t)}}function Rl(){var e=Ov(),t=e.substr(0,4);return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw(n|u)|c55\/|capi|ccwa|cdm|cell|chtm|cldc|cmd|co(mp|nd)|craw|da(it|ll|ng)|dbte|dcs|devi|dica|dmob|do(c|p)o|ds(12|d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(|_)|g1 u|g560|gene|gf5|gmo|go(\.w|od)|gr(ad|un)|haie|hcit|hd(m|p|t)|hei|hi(pt|ta)|hp( i|ip)|hsc|ht(c(| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i(20|go|ma)|i230|iac( ||\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|[a-w])|libw|lynx|m1w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|mcr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|([1-8]|c))|phil|pire|pl(ay|uc)|pn2|po(ck|rt|se)|prox|psio|ptg|qaa|qc(07|12|21|32|60|[2-7]|i)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h|oo|p)|sdk\/|se(c(|0|1)|47|mc|nd|ri)|sgh|shar|sie(|m)|sk0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h|v|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl|tdg|tel(i|m)|tim|tmo|to(pl|sh)|ts(70|m|m3|m5)|tx9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas|your|zeto|zte/i.test(t)}function Ov(){var e=navigator.userAgent||navigator.vendor||window.opera||null;if(!e)throw new Error("Failed to look for user agent information.");return e}const Av={name:"RoomFooter",components:{SvgIcon:Qe,EmojiPickerContainer:Tl,RoomFiles:Ip,RoomMessageReply:ov,RoomUsersTag:cv,RoomEmojis:mv,RoomTemplatesText:yv},directives:{clickOutside:yr},props:{room:{type:Object,required:!0},roomId:{type:[String,Number],required:!0},roomMessage:{type:String,default:null},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},textMessages:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},showEmojis:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},templatesText:{type:Array,default:null},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},initReplyMessage:{type:Object,default:null},initEditMessage:{type:Object,default:null},droppedFiles:{type:Array,default:null}},emits:["edit-message","send-message","update-edited-message-id","textarea-action-handler","typing-message"],data(){return{message:"",editedMessage:{},messageReply:null,cursorRangePosition:null,files:[],fileDialog:!1,selectUsersTagItem:null,selectEmojiItem:null,selectTemplatesTextItem:null,format:"mp3",activeUpOrDownEmojis:null,activeUpOrDownUsersTag:null,activeUpOrDownTemplatesText:null,emojisDB:new Zc,emojiOpened:!1,keepKeyboardOpen:!1,filteredEmojis:[],filteredUsersTag:[],selectedUsersTag:[],filteredTemplatesText:[],recorder:this.initRecorder(),isRecording:!1}},computed:{isMessageEmpty(){return!this.files.length&&!this.message.trim()},isFileLoading(){return this.files.some(e=>e.loading)},recordedTime(){return new Date(this.recorder.duration*1e3).toISOString().substr(14,5)},shadowFooter(){return!!this.filteredEmojis.length||!!this.filteredUsersTag.length||!!this.filteredTemplatesText.length||!!this.files.length||!!this.messageReply}},watch:{roomId(){this.resetMessage(!0,!0),this.roomMessage&&(this.message=this.roomMessage,setTimeout(()=>this.onChangeInput()))},message(e){this.getTextareaRef().value=e},roomMessage:{immediate:!0,handler(e){e&&(this.message=this.roomMessage)}},editedMessage(e){this.$emit("update-edited-message-id",e._id)},initReplyMessage(e){e&&this.replyMessage(e)},initEditMessage(e){e&&this.editMessage(e)},droppedFiles(e){e&&this.onFileChange(e)}},mounted(){const e=Rl();let t=!0;this.getTextareaRef().addEventListener("keyup",o=>{o.key==="Enter"&&!o.shiftKey&&!this.fileDialog&&(e?(this.message=this.message+`
`,setTimeout(()=>this.onChangeInput())):t&&!this.filteredEmojis.length&&!this.filteredUsersTag.length&&!this.filteredTemplatesText.length&&this.sendMessage()),t=!o.isComposing,setTimeout(()=>{this.updateFooterLists()},60)}),this.getTextareaRef().addEventListener("click",()=>{e&&(this.keepKeyboardOpen=!0),this.updateFooterLists()}),this.getTextareaRef().addEventListener("blur",()=>{setTimeout(()=>{this.resetFooterList()},100),e&&setTimeout(()=>this.keepKeyboardOpen=!1)})},beforeUnmount(){this.stopRecorder()},methods:{getTextareaRef(){return this.$refs.roomTextarea},focusTextarea(e){Rl()&&e||!this.getTextareaRef()||(this.getTextareaRef().focus(),this.cursorRangePosition&&setTimeout(()=>{this.getTextareaRef().setSelectionRange(this.cursorRangePosition,this.cursorRangePosition),this.cursorRangePosition=null}))},onChangeInput(){var e,t,o;(((e=this.getTextareaRef())==null?void 0:e.value)||((t=this.getTextareaRef())==null?void 0:t.value)==="")&&(this.message=(o=this.getTextareaRef())==null?void 0:o.value),this.keepKeyboardOpen=!0,this.resizeTextarea(),this.$emit("typing-message",this.message)},resizeTextarea(){const e=this.getTextareaRef();if(!e)return;const t=window.getComputedStyle(e,null).getPropertyValue("padding-top").replace("px","");e.style.height=0,e.style.height=e.scrollHeight-t*2+"px"},escapeTextarea(){this.filteredEmojis.length?this.filteredEmojis=[]:this.filteredUsersTag.length?this.filteredUsersTag=[]:this.filteredTemplatesText.length?this.filteredTemplatesText=[]:this.resetMessage()},onPasteImage(e){var o;const t=(o=e.clipboardData)==null?void 0:o.items;t&&Array.from(t).forEach(s=>{if(s.type.includes("image")){const n=s.getAsFile();this.onFileChange([n])}})},updateActiveUpOrDown(e){this.filteredEmojis.length?this.activeUpOrDownEmojis=e:this.filteredUsersTag.length?this.activeUpOrDownUsersTag=e:this.filteredTemplatesText.length&&(this.activeUpOrDownTemplatesText=e)},selectItem(){this.filteredEmojis.length?this.selectEmojiItem=!0:this.filteredUsersTag.length?this.selectUsersTagItem=!0:this.filteredTemplatesText.length&&(this.selectTemplatesTextItem=!0)},selectEmoji(e){if(this.selectEmojiItem=!1,!e)return;const{position:t,endPosition:o}=this.getCharPosition(":");this.message=this.message.substr(0,t-1)+e+this.message.substr(o,this.message.length-1),this.cursorRangePosition=t,this.focusTextarea()},selectTemplateText(e){if(this.selectTemplatesTextItem=!1,!e)return;const{position:t,endPosition:o}=this.getCharPosition("/"),s=this.message.substr(o,o).length?"":" ";this.message=this.message.substr(0,t-1)+e.text+s+this.message.substr(o,this.message.length-1),this.cursorRangePosition=t+e.text.length+s.length+1,this.focusTextarea()},addEmoji(e){this.message+=e.unicode,this.focusTextarea(!0)},launchFilePicker(){this.$refs.file.value="",this.$refs.file.click()},async onFileChange(e){this.fileDialog=!0,this.focusTextarea(),Array.from(e).forEach(async t=>{const o=URL.createObjectURL(t),s=t.name.lastIndexOf(".");this.files.push({loading:!0,name:t.name.substring(0,s),size:t.size,type:t.type,extension:t.name.substring(s+1),localUrl:o});const n=await fetch(o).then(i=>i.blob());let r=this.files.find(i=>i.localUrl===o);r&&(r.blob=n,r.loading=!1,delete r.loading)}),setTimeout(()=>this.fileDialog=!1,500)},removeFile(e){this.files.splice(e,1),this.focusTextarea()},toggleRecorder(e){if(this.isRecording=e,!this.recorder.isRecording)setTimeout(()=>this.recorder.start(),200);else try{this.recorder.stop();const t=this.recorder.records[0];this.files.push({blob:t.blob,name:`audio.${this.format}`,size:t.blob.size,duration:t.duration,type:t.blob.type,audio:!0,localUrl:URL.createObjectURL(t.blob)}),this.recorder=this.initRecorder(),this.sendMessage()}catch{setTimeout(()=>this.stopRecorder(),100)}},stopRecorder(){if(this.recorder.isRecording)try{this.recorder.stop(),this.recorder=this.initRecorder()}catch{setTimeout(()=>this.stopRecorder(),100)}},textareaActionHandler(){this.$emit("textarea-action-handler",this.message)},sendMessage(){var o;let e=this.message.trim();if(!this.files.length&&!e||this.isFileLoading)return;this.selectedUsersTag.forEach(s=>{e=e.replace(`@${s.username}`,`<usertag>${s._id}</usertag>`)});const t=this.files.length?this.files:null;this.editedMessage._id?(this.editedMessage.content!==e||((o=this.editedMessage.files)==null?void 0:o.length)||this.files.length)&&this.$emit("edit-message",{messageId:this.editedMessage._id,newContent:e,files:t,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}):this.$emit("send-message",{content:e,files:t,replyMessage:this.messageReply,usersTag:this.selectedUsersTag}),this.resetMessage(!0)},editMessage(e){this.resetMessage(),this.editedMessage={...e};let t=e.content;const o=t,s="<usertag>",n="</usertag>";[...t.matchAll(new RegExp(s,"gi"))].map(i=>i.index).forEach(i=>{const a=o.substring(i+s.length,o.indexOf(n,i)),c=this.room.users.find(l=>l._id===a);t=t.replace(`${s}${a}${n}`,`@${(c==null?void 0:c.username)||"unknown"}`),this.selectUserTag(c,!0)}),this.message=t,e.files&&(this.files=[...e.files]),setTimeout(()=>this.resizeTextarea())},replyMessage(e){this.editedMessage={},this.messageReply=e,this.focusTextarea()},updateFooterLists(){this.updateFooterList("@"),this.updateFooterList(":"),this.updateFooterList("/")},updateFooterList(e){if(!this.getTextareaRef()||e===":"&&!this.emojisSuggestionEnabled||e==="@"&&(!this.userTagsEnabled||!this.room.users)||e==="/"&&!this.templatesText)return;const t=this.getTextareaRef().selectionStart;let o=t;for(;o>0&&this.message.charAt(o-1)!==e&&(this.message.charAt(o-1)!==" "||e!==":");)o--;const s=this.message.charAt(o-2),n=!s.match(/^[0-9a-zA-Z]+$/);if(this.message.charAt(o-1)===e&&(!s||s===" "||n)){const r=this.message.substring(o,t);e===":"?this.updateEmojis(r):e==="@"?this.updateShowUsersTag(r):e==="/"&&this.updateShowTemplatesText(r)}else this.resetFooterList(e)},updateShowUsersTag(e){this.filteredUsersTag=qn(this.room.users,"username",e,!0).filter(t=>t._id!==this.currentUserId)},selectUserTag(e,t=!1){if(this.selectUsersTagItem=!1,!e)return;const{position:o,endPosition:s}=this.getCharPosition("@"),n=this.message.substr(s,s).length?"":" ";this.message=this.message.substr(0,o)+e.username+n+this.message.substr(s,this.message.length-1),this.selectedUsersTag=[...this.selectedUsersTag,{...e}],t||(this.cursorRangePosition=o+e.username.length+n.length+1),this.focusTextarea()},updateShowTemplatesText(e){this.filteredTemplatesText=qn(this.templatesText,"tag",e,!0)},getCharPosition(e){let o=this.getTextareaRef().selectionStart;for(;o>0&&this.message.charAt(o-1)!==e;)o--;const s=this.getTextareaRef().selectionEnd;return{position:o,endPosition:s}},async updateEmojis(e){if(!e)return;const t=await this.emojisDB.getEmojiBySearchQuery(e);this.filteredEmojis=t.map(o=>o.unicode)},resetFooterList(e=null){e===":"?this.filteredEmojis=[]:e==="@"?this.filteredUsersTag=[]:e==="/"?this.filteredTemplatesText=[]:(this.filteredEmojis=[],this.filteredUsersTag=[],this.filteredTemplatesText=[])},resetMessage(e=!1,t=!1){t||this.$emit("typing-message",null),this.selectedUsersTag=[],this.resetFooterList(),this.resetTextareaSize(),this.message="",this.editedMessage={},this.messageReply=null,this.files=[],this.emojiOpened=!1,this.preventKeyboardFromClosing(),(this.textareaAutoFocus||!t)&&setTimeout(()=>this.focusTextarea(e))},resetTextareaSize(){this.getTextareaRef()&&(this.getTextareaRef().style.height="20px")},preventKeyboardFromClosing(){this.keepKeyboardOpen&&this.getTextareaRef().focus()},initRecorder(){return this.isRecording=!1,new Cv({bitRate:Number(this.audioBitRate),sampleRate:Number(this.audioSampleRate),beforeRecording:null,afterRecording:null,pauseRecording:null,micFailed:this.micFailed})},micFailed(){this.isRecording=!1,this.recorder=this.initRecorder()}}},Lv={key:0,class:"vac-icon-textarea-left"},Iv=T("div",{class:"vac-dot-audio-record"},null,-1),jv={class:"vac-dot-audio-record-time"},Pv=["placeholder"],Nv={class:"vac-icon-textarea"},Uv={key:1},Fv=["accept"];function Bv(e,t,o,s,n,r){const i=$("room-emojis"),a=$("room-users-tag"),c=$("room-templates-text"),l=$("room-message-reply"),u=$("room-files"),d=$("svg-icon"),f=$("emoji-picker-container"),g=tr("click-outside");return Ht((p(),w("div",{id:"room-footer",class:ge(["vac-room-footer",{"vac-app-box-shadow":r.shadowFooter}])},[F(i,{"filtered-emojis":n.filteredEmojis,"select-item":n.selectEmojiItem,"active-up-or-down":n.activeUpOrDownEmojis,onSelectEmoji:t[0]||(t[0]=y=>r.selectEmoji(y)),onActivateItem:t[1]||(t[1]=y=>n.activeUpOrDownEmojis=0)},null,8,["filtered-emojis","select-item","active-up-or-down"]),F(a,{"filtered-users-tag":n.filteredUsersTag,"select-item":n.selectUsersTagItem,"active-up-or-down":n.activeUpOrDownUsersTag,onSelectUserTag:t[2]||(t[2]=y=>r.selectUserTag(y)),onActivateItem:t[3]||(t[3]=y=>n.activeUpOrDownUsersTag=0)},null,8,["filtered-users-tag","select-item","active-up-or-down"]),F(c,{"filtered-templates-text":n.filteredTemplatesText,"select-item":n.selectTemplatesTextItem,"active-up-or-down":n.activeUpOrDownTemplatesText,onSelectTemplateText:t[4]||(t[4]=y=>r.selectTemplateText(y)),onActivateItem:t[5]||(t[5]=y=>n.activeUpOrDownTemplatesText=0)},null,8,["filtered-templates-text","select-item","active-up-or-down"]),F(l,{room:o.room,"message-reply":n.messageReply,"text-formatting":o.textFormatting,"link-options":o.linkOptions,onResetMessage:r.resetMessage},Ie({_:2},[ue(e.$slots,(y,L)=>({name:L,fn:Q(A=>[U(e.$slots,L,Le(Ae(A)))])}))]),1032,["room","message-reply","text-formatting","link-options","onResetMessage"]),F(u,{files:n.files,onRemoveFile:r.removeFile,onResetMessage:r.resetMessage},Ie({_:2},[ue(e.$slots,(y,L)=>({name:L,fn:Q(A=>[U(e.$slots,L,Le(Ae(A)))])}))]),1032,["files","onRemoveFile","onResetMessage"]),T("div",{class:ge(["vac-box-footer",{"vac-box-footer-border":!n.files.length}])},[o.showAudio&&!n.files.length?(p(),w("div",Lv,[n.isRecording?(p(),w(Te,{key:0},[T("div",{class:"vac-svg-button vac-icon-audio-stop",onClick:t[6]||(t[6]=(...y)=>r.stopRecorder&&r.stopRecorder(...y))},[U(e.$slots,"audio-stop-icon",{},()=>[F(d,{name:"close-outline"})])]),Iv,T("div",jv,ne(r.recordedTime),1),T("div",{class:"vac-svg-button vac-icon-audio-confirm",onClick:t[7]||(t[7]=y=>r.toggleRecorder(!1))},[U(e.$slots,"audio-check-icon",{},()=>[F(d,{name:"checkmark"})])])],64)):(p(),w("div",{key:1,class:"vac-svg-button",onClick:t[8]||(t[8]=y=>r.toggleRecorder(!0))},[U(e.$slots,"microphone-icon",{},()=>[F(d,{name:"microphone",class:"vac-icon-microphone"})])]))])):B("",!0),T("textarea",{id:"roomTextarea",ref:"roomTextarea",placeholder:o.textMessages.TYPE_MESSAGE,class:ge(["vac-textarea",{"vac-textarea-outline":n.editedMessage._id}]),style:{"min-height":"20px","padding-left":"12px"},onInput:t[9]||(t[9]=(...y)=>r.onChangeInput&&r.onChangeInput(...y)),onKeydown:[t[10]||(t[10]=qt((...y)=>r.escapeTextarea&&r.escapeTextarea(...y),["esc"])),t[11]||(t[11]=qt(wt((...y)=>r.selectItem&&r.selectItem(...y),["exact","prevent"]),["enter"])),t[13]||(t[13]=qt(wt(()=>{},["exact","prevent"]),["tab"])),t[14]||(t[14]=qt((...y)=>r.selectItem&&r.selectItem(...y),["tab"])),t[15]||(t[15]=qt(wt(()=>{},["exact","prevent"]),["up"])),t[16]||(t[16]=qt(y=>r.updateActiveUpOrDown(-1),["up"])),t[17]||(t[17]=qt(wt(()=>{},["exact","prevent"]),["down"])),t[18]||(t[18]=qt(y=>r.updateActiveUpOrDown(1),["down"]))],onPaste:t[12]||(t[12]=(...y)=>r.onPasteImage&&r.onPasteImage(...y))},null,42,Pv),T("div",Nv,[n.editedMessage._id?(p(),w("div",{key:0,class:"vac-svg-button",onClick:t[19]||(t[19]=(...y)=>r.resetMessage&&r.resetMessage(...y))},[U(e.$slots,"edit-close-icon",{},()=>[F(d,{name:"close-outline"})])])):B("",!0),o.showEmojis?Ht((p(),w("div",Uv,[U(e.$slots,"emoji-picker",xn({emojiOpened:n.emojiOpened},{addEmoji:r.addEmoji}),()=>[F(f,{"emoji-opened":n.emojiOpened,"position-top":!0,onAddEmoji:r.addEmoji,onOpenEmoji:t[20]||(t[20]=y=>n.emojiOpened=y)},{"emoji-picker-icon":Q(()=>[U(e.$slots,"emoji-picker-icon")]),_:3},8,["emoji-opened","onAddEmoji"])])])),[[g,()=>n.emojiOpened=!1]]):B("",!0),o.showFiles?(p(),w("div",{key:2,class:"vac-svg-button",onClick:t[21]||(t[21]=(...y)=>r.launchFilePicker&&r.launchFilePicker(...y))},[U(e.$slots,"paperclip-icon",{},()=>[F(d,{name:"paperclip"})])])):B("",!0),o.textareaActionEnabled?(p(),w("div",{key:3,class:"vac-svg-button",onClick:t[22]||(t[22]=(...y)=>r.textareaActionHandler&&r.textareaActionHandler(...y))},[U(e.$slots,"custom-action-icon",{},()=>[F(d,{name:"deleted"})])])):B("",!0),o.showFiles?(p(),w("input",{key:4,ref:"file",type:"file",multiple:"",accept:o.acceptedFiles,style:{display:"none"},onChange:t[23]||(t[23]=y=>r.onFileChange(y.target.files))},null,40,Fv)):B("",!0),o.showSendIcon?(p(),w("div",{key:5,class:ge(["vac-svg-button",{"vac-send-disabled":r.isMessageEmpty}]),onClick:t[24]||(t[24]=(...y)=>r.sendMessage&&r.sendMessage(...y))},[U(e.$slots,"send-icon",{},()=>[F(d,{name:"send",param:r.isMessageEmpty||r.isFileLoading?"disabled":""},null,8,["param"])])],2)):B("",!0)])],2)],2)),[[cr,Object.keys(o.room).length&&o.showFooter]])}var Dv=Fe(Av,[["render",Bv]]);const Hv={name:"MessageReply",components:{AudioPlayer:ai,SvgIcon:Qe,FormatMessage:_s},props:{message:{type:Object,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},roomUsers:{type:Array,required:!0}},computed:{replyUsername(){const{senderId:e}=this.message.replyMessage,t=this.roomUsers.find(o=>o._id===e);return t?t.username:""},firstFile(){var e,t;return(t=(e=this.message.replyMessage)==null?void 0:e.files)!=null&&t.length?this.message.replyMessage.files[0]:{}},isAudio(){return wr(this.firstFile)},isImage(){return Ho(this.firstFile)},isVideo(){return Es(this.firstFile)},isOtherFile(){var e;return((e=this.message.replyMessage.files)==null?void 0:e.length)&&!this.isAudio&&!this.isVideo&&!this.isImage}}},zv={class:"vac-reply-message"},qv={class:"vac-reply-username"},Kv={key:0,class:"vac-image-reply-container"},Vv={key:1,class:"vac-video-reply-container"},Gv={controls:""},Wv=["src"],Yv={key:3,class:"vac-file-container"},Zv={class:"vac-text-ellipsis"},Xv={key:0,class:"vac-text-ellipsis vac-text-extension"},Jv={class:"vac-reply-content"};function Qv(e,t,o,s,n,r){const i=$("audio-player"),a=$("svg-icon"),c=$("format-message");return p(),w("div",zv,[T("div",qv,ne(r.replyUsername),1),r.isImage?(p(),w("div",Kv,[T("div",{class:"vac-message-image vac-message-image-reply",style:Me({"background-image":`url('${r.firstFile.url}')`})},null,4)])):r.isVideo?(p(),w("div",Vv,[T("video",Gv,[T("source",{src:r.firstFile.url},null,8,Wv)])])):r.isAudio?(p(),Oe(i,{key:2,src:r.firstFile.url,"message-selection-enabled":!1,onUpdateProgressTime:t[0]||(t[0]=l=>e.progressTime=l),onHoverAudioProgress:t[1]||(t[1]=l=>e.hoverAudioProgress=l)},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["src"])):r.isOtherFile?(p(),w("div",Yv,[T("div",null,[U(e.$slots,"file-icon",{},()=>[F(a,{name:"file"})])]),T("div",Zv,ne(r.firstFile.name),1),r.firstFile.extension?(p(),w("div",Xv,ne(r.firstFile.extension),1)):B("",!0)])):B("",!0),T("div",Jv,[F(c,{"message-id":o.message.replyMessage._id,content:o.message.replyMessage.content,users:o.roomUsers,"text-formatting":o.textFormatting,"link-options":o.linkOptions,reply:!0},null,8,["message-id","content","users","text-formatting","link-options"])])])}var $v=Fe(Hv,[["render",Qv]]);const eb={name:"ProgressBar",props:{progress:{type:Number,default:0}},data(){const s=54*Math.PI;return{radius:35,stroke:4,normalizedRadius:27,circumference:s}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},tb={ref:"progress",class:"vac-progress-wrapper"},ob=["height","width"],sb=["stroke-dasharray","stroke-width","r","cx","cy"],rb={class:"vac-progress-text"},nb=T("span",{class:"vac-progress-pourcent"},"%",-1);function ib(e,t,o,s,n,r){return p(),Oe(Ge,{name:"vac-fade-spinner",appear:""},{default:Q(()=>[T("div",tb,[(p(),w("svg",{height:n.radius*2,width:n.radius*2},[T("circle",{stroke:"rgba(255, 255, 255, 0.7)","stroke-dasharray":n.circumference+" "+n.circumference,style:Me({strokeDashoffset:r.strokeDashoffset,strokeLinecap:"round"}),"stroke-width":n.stroke,fill:"transparent",r:n.normalizedRadius,cx:n.radius,cy:n.radius},null,12,sb)],8,ob)),T("div",{class:"vac-progress-content",style:Me({height:n.radius*2-19+"px",width:n.radius*2-19+"px"})},[T("div",rb,[Qt(ne(o.progress),1),nb])],4)],512)]),_:1})}var Cl=Fe(eb,[["render",ib]]);const ab={name:"MessageFile",components:{SvgIcon:Qe,Loader:lr,ProgressBar:Cl},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},file:{type:Object,required:!0},index:{type:Number,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file"],data(){return{imageResponsive:"",imageLoading:!1,imageHover:!1}},computed:{isImageLoading(){return this.file.url.indexOf("blob:http")!==-1||this.imageLoading},isImage(){return Ho(this.file)},isVideo(){return Es(this.file)}},watch:{file:{immediate:!0,handler(){this.checkImgLoad()}}},mounted(){const e=this.$refs["imageRef"+this.index];e&&(this.imageResponsive={maxHeight:e.clientWidth-18,loaderTop:e.clientHeight/2-9})},methods:{checkImgLoad(){if(!Ho(this.file))return;this.imageLoading=!0;const e=new Image;e.src=this.file.url,e.addEventListener("load",()=>this.imageLoading=!1)},openFile(e,t){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:this.file,action:t}))}}},cb={class:"vac-message-file-container"},lb={key:0,class:"vac-image-buttons"},db={controls:""},ub=["src"];function mb(e,t,o,s,n,r){const i=$("progress-bar"),a=$("loader"),c=$("svg-icon");return p(),w("div",cb,[r.isImage?(p(),w("div",{key:0,ref:"imageRef"+o.index,class:"vac-message-image-container",onMouseover:t[2]||(t[2]=l=>n.imageHover=!0),onMouseleave:t[3]||(t[3]=l=>n.imageHover=!1),onClick:t[4]||(t[4]=l=>r.openFile(l,"preview"))},[o.file.progress>=0?(p(),Oe(i,{key:0,progress:o.file.progress,style:Me({top:`${n.imageResponsive.loaderTop}px`})},null,8,["progress","style"])):(p(),Oe(a,{key:1,show:r.isImageLoading,type:"message-file","message-id":o.message._id,style:Me({top:`${n.imageResponsive.loaderTop}px`})},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["show","message-id","style"])),T("div",{class:ge(["vac-message-image",{"vac-blur-loading":r.isImageLoading&&o.message.senderId===o.currentUserId}]),style:Me({"background-image":`url('${r.isImageLoading&&o.file.preview||o.file.url}')`,"max-height":`${n.imageResponsive.maxHeight}px`})},[F(Ge,{name:"vac-fade-image"},{default:Q(()=>[!o.messageSelectionEnabled&&n.imageHover&&!r.isImageLoading?(p(),w("div",lb,[T("div",{class:"vac-svg-button vac-button-view",onClick:t[0]||(t[0]=l=>r.openFile(l,"preview"))},[U(e.$slots,"eye-icon_"+o.message._id,{},()=>[F(c,{name:"eye"})])]),T("div",{class:"vac-svg-button vac-button-download",onClick:t[1]||(t[1]=l=>r.openFile(l,"download"))},[U(e.$slots,"document-icon_"+o.message._id,{},()=>[F(c,{name:"document"})])])])):B("",!0)]),_:3})],6)],544)):r.isVideo?(p(),w("div",{key:1,class:"vac-video-container",onClick:t[5]||(t[5]=wt(l=>r.openFile(l,"preview"),["prevent"]))},[o.file.progress>=0?(p(),Oe(i,{key:0,progress:o.file.progress},null,8,["progress"])):B("",!0),T("video",db,[T("source",{src:o.file.url},null,8,ub)])])):B("",!0)])}var fb=Fe(ab,[["render",mb]]);const hb={name:"MessageFiles",components:{SvgIcon:Qe,FormatMessage:_s,ProgressBar:Cl,MessageFile:fb},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},roomUsers:{type:Array,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0}},emits:["open-file","open-user-tag"],computed:{imageVideoFiles(){return this.message.files.filter(e=>Ac(e))},otherFiles(){return this.message.files.filter(e=>!Ac(e))}},methods:{openFile(e,t,o){this.messageSelectionEnabled||(e.stopPropagation(),this.$emit("open-file",{file:t,action:o}))}}},gb={class:"vac-message-files-container"},pb=["onClick"],vb={class:"vac-svg-button"},bb={class:"vac-text-ellipsis"},yb={key:0,class:"vac-text-ellipsis vac-text-extension"};function wb(e,t,o,s,n,r){const i=$("message-file"),a=$("progress-bar"),c=$("svg-icon"),l=$("format-message");return p(),w("div",gb,[(p(!0),w(Te,null,ue(r.imageVideoFiles,(u,d)=>(p(),w("div",{key:d+"iv"},[F(i,{file:u,"current-user-id":o.currentUserId,message:o.message,index:d,"message-selection-enabled":o.messageSelectionEnabled,onOpenFile:t[0]||(t[0]=f=>e.$emit("open-file",f))},Ie({_:2},[ue(e.$slots,(f,g)=>({name:g,fn:Q(y=>[U(e.$slots,g,Le(Ae(y)))])}))]),1032,["file","current-user-id","message","index","message-selection-enabled"])]))),128)),(p(!0),w(Te,null,ue(r.otherFiles,(u,d)=>(p(),w("div",{key:d+"a",class:"vac-file-wrapper"},[u.progress>=0?(p(),Oe(a,{key:0,progress:u.progress,style:{top:"44px"}},null,8,["progress"])):B("",!0),T("div",{class:ge(["vac-file-container",{"vac-file-container-progress":u.progress>=0}]),onClick:f=>r.openFile(f,u,"download")},[T("div",vb,[U(e.$slots,"document-icon",{},()=>[F(c,{name:"document"})])]),T("div",bb,ne(u.name),1),u.extension?(p(),w("div",yb,ne(u.extension),1)):B("",!0)],10,pb)]))),128)),F(l,{"message-id":o.message._id,content:o.message.content,users:o.roomUsers,"text-formatting":o.textFormatting,"link-options":o.linkOptions,onOpenUserTag:t[1]||(t[1]=u=>e.$emit("open-user-tag",u))},null,8,["message-id","content","users","text-formatting","link-options"])])}var xb=Fe(hb,[["render",wb]]);const _b={name:"MessageActions",components:{SvgIcon:Qe,EmojiPickerContainer:Tl},directives:{clickOutside:yr},props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0},messageActions:{type:Array,required:!0},showReactionEmojis:{type:Boolean,required:!0},messageHover:{type:Boolean,required:!0},hoverMessageId:{type:[String,Number],default:null},hoverAudioProgress:{type:Boolean,required:!0}},emits:["update-emoji-opened","update-options-opened","update-message-hover","message-action-handler","send-message-reaction"],data(){return{menuOptionsTop:0,optionsOpened:!1,optionsClosing:!1,emojiOpened:!1}},computed:{isMessageActions(){return this.filteredMessageActions.length&&this.messageHover&&!this.message.deleted&&!this.message.disableActions&&!this.hoverAudioProgress},isMessageReactions(){return this.showReactionEmojis&&this.messageHover&&!this.message.deleted&&!this.message.disableReactions&&!this.hoverAudioProgress},filteredMessageActions(){return this.message.senderId===this.currentUserId?this.messageActions:this.messageActions.filter(e=>!e.onlyMe)}},watch:{emojiOpened(e){this.$emit("update-emoji-opened",e),e&&(this.optionsOpened=!1)},optionsOpened(e){this.$emit("update-options-opened",e)}},methods:{openOptions(){this.optionsClosing||(this.optionsOpened=!this.optionsOpened,this.optionsOpened&&setTimeout(()=>{const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("room-footer");if(!e||!this.$refs.menuOptions||!this.$refs.actionIcon)return;const t=this.$refs.menuOptions.getBoundingClientRect().height,o=this.$refs.actionIcon.getBoundingClientRect().top;e.getBoundingClientRect().top-o>t+50?this.menuOptionsTop=30:this.menuOptionsTop=-t}))},closeOptions(){this.optionsOpened=!1,this.optionsClosing=!0,this.updateMessageHover(),setTimeout(()=>this.optionsClosing=!1,100)},openEmoji(){this.emojiOpened=!this.emojiOpened},closeEmoji(){this.emojiOpened=!1,this.updateMessageHover()},updateMessageHover(){this.hoverMessageId!==this.message._id&&this.$emit("update-message-hover",!1)},messageActionHandler(e){this.closeOptions(),this.$emit("message-action-handler",e)},sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t}),this.closeEmoji()}}},kb={class:"vac-message-actions-wrapper"},Eb={key:"3"},Tb={class:"vac-menu-list"},Sb=["onClick"];function Mb(e,t,o,s,n,r){const i=$("svg-icon"),a=$("emoji-picker-container"),c=tr("click-outside");return p(),w("div",kb,[T("div",{class:"vac-options-container",style:Me({display:o.hoverAudioProgress?"none":"initial",width:r.filteredMessageActions.length&&o.showReactionEmojis?"70px":"45px"})},[F(Mn,{name:"vac-slide-left",tag:"span"},{default:Q(()=>[r.isMessageActions||r.isMessageReactions?(p(),w("div",{key:"1",class:ge(["vac-blur-container",{"vac-options-me":o.message.senderId===o.currentUserId}])},null,2)):B("",!0),r.isMessageActions?(p(),w("div",{ref:"actionIcon",key:"2",class:"vac-svg-button vac-message-options",onClick:t[0]||(t[0]=(...l)=>r.openOptions&&r.openOptions(...l))},[U(e.$slots,"dropdown-icon_"+o.message._id,{},()=>[F(i,{name:"dropdown",param:"message"})])],512)):B("",!0),r.isMessageReactions?Ht((p(),w("div",Eb,[U(e.$slots,"emoji-picker",xn({emojiOpened:n.emojiOpened},{addEmoji:r.sendMessageReaction}),()=>[F(a,{class:"vac-message-emojis",style:Me({right:r.isMessageActions?"30px":"5px"}),"emoji-opened":n.emojiOpened,"emoji-reaction":!0,"position-right":o.message.senderId===o.currentUserId,"message-id":o.message._id,onAddEmoji:r.sendMessageReaction,onOpenEmoji:r.openEmoji},Ie({_:2},[ue(e.$slots,(l,u)=>({name:u,fn:Q(d=>[U(e.$slots,u,Le(Ae(d)))])}))]),1032,["style","emoji-opened","position-right","message-id","onAddEmoji","onOpenEmoji"])])])),[[c,r.closeEmoji]]):B("",!0)]),_:3})],4),r.filteredMessageActions.length?(p(),Oe(Ge,{key:0,name:o.message.senderId===o.currentUserId?"vac-slide-left":"vac-slide-right"},{default:Q(()=>[n.optionsOpened?Ht((p(),w("div",{key:0,ref:"menuOptions",class:ge(["vac-menu-options",{"vac-menu-left":o.message.senderId!==o.currentUserId}]),style:Me({top:`${n.menuOptionsTop}px`})},[T("div",Tb,[(p(!0),w(Te,null,ue(r.filteredMessageActions,l=>(p(),w("div",{key:l.name},[T("div",{class:"vac-menu-item",onClick:u=>r.messageActionHandler(l)},ne(l.title),9,Sb)]))),128))])],6)),[[c,r.closeOptions]]):B("",!0)]),_:1},8,["name"])):B("",!0)])}var Rb=Fe(_b,[["render",Mb]]);const Cb={name:"MessageReactions",props:{currentUserId:{type:[String,Number],required:!0},message:{type:Object,required:!0}},emits:["send-message-reaction"],methods:{sendMessageReaction(e,t){this.$emit("send-message-reaction",{emoji:e,reaction:t})}}},Ob=["onClick"];function Ab(e,t,o,s,n,r){return o.message.deleted?B("",!0):(p(),Oe(Mn,{key:0,name:"vac-slide-left",tag:"span"},{default:Q(()=>[(p(!0),w(Te,null,ue(o.message.reactions,(i,a)=>Ht((p(),w("button",{key:a+0,class:ge(["vac-button-reaction",{"vac-reaction-me":i.indexOf(o.currentUserId)!==-1}]),style:Me({float:o.message.senderId===o.currentUserId?"right":"left"}),onClick:c=>r.sendMessageReaction({unicode:a},i)},[Qt(ne(a),1),T("span",null,ne(i.length),1)],14,Ob)),[[cr,i.length]])),128))]),_:1}))}var Lb=Fe(Cb,[["render",Ab]]);function Ib(e){if(!((s,n)=>n.every(r=>{let i=!1;return(r.type[0]==="array"&&Array.isArray(s[r.key])||r.type.find(a=>a===typeof s[r.key]))&&(i=!0),i&&ui(s,r.key)}))(e,[{key:"roomId",type:["string","number"]},{key:"roomName",type:["string"]},{key:"users",type:["array"]}]))throw new Error("Rooms object is not valid! Must contain roomId[String, Number], roomName[String] and users[Array]")}function jb(e){if(!((s,n)=>n.every(r=>r.type.find(a=>a===typeof s[r.key])&&ui(s,r.key)))(e,[{key:"_id",type:["string","number"]},{key:"username",type:["string"]}]))throw new Error("Participants object is not valid! Must contain _id[String, Number] and username[String]")}function Pb(e){if(!((s,n)=>n.every(r=>r.type.find(a=>a===typeof s[r.key])&&ui(s,r.key)))(e,[{key:"_id",type:["string","number"]},{key:"content",type:["string","number"]},{key:"senderId",type:["string","number"]}]))throw new Error("Messages object is not valid! Must contain _id[String, Number], content[String, Number] and senderId[String, Number]")}function ui(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==null&&e[t]!==void 0}const Nb={name:"RoomMessage",components:{SvgIcon:Qe,FormatMessage:_s,AudioPlayer:ai,MessageReply:$v,MessageFiles:xb,MessageActions:Rb,MessageReactions:Lb},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},index:{type:Number,required:!0},message:{type:Object,required:!0},messages:{type:Array,required:!0},editedMessageId:{type:[String,Number],default:null},roomUsers:{type:Array,default:()=>[]},messageActions:{type:Array,required:!0},newMessages:{type:Array,default:()=>[]},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},usernameOptions:{type:Object,required:!0},messageSelectionEnabled:{type:Boolean,required:!0},selectedMessages:{type:Array,default:()=>[]}},emits:["message-added","open-file","open-user-tag","open-failed-message","message-action-handler","send-message-reaction","select-message","unselect-message"],data(){return{hoverMessageId:null,messageHover:!1,optionsOpened:!1,emojiOpened:!1,newMessage:{},progressTime:"- : -",hoverAudioProgress:!1}},computed:{showUsername(){return!this.usernameOptions.currentUser&&this.message.senderId===this.currentUserId?!1:this.roomUsers.length>=this.usernameOptions.minUsers},showDate(){return this.index>0&&this.message.date!==this.messages[this.index-1].date},messageOffset(){return this.index>0&&this.message.senderId!==this.messages[this.index-1].senderId},isMessageHover(){return this.editedMessageId===this.message._id||this.hoverMessageId===this.message._id},isAudio(){var e;return(e=this.message.files)==null?void 0:e.some(t=>wr(t))},isCheckmarkVisible(){return this.message.senderId===this.currentUserId&&!this.message.deleted&&(this.message.saved||this.message.distributed||this.message.seen)},hasCurrentUserAvatar(){return this.messages.some(e=>e.senderId===this.currentUserId&&e.avatar)},hasSenderUserAvatar(){return this.messages.some(e=>e.senderId!==this.currentUserId&&e.avatar)},isMessageSelected(){return this.messageSelectionEnabled&&!!this.selectedMessages.find(e=>e._id===this.message._id)}},watch:{newMessages:{immediate:!0,deep:!0,handler(e){if(!e.length||!this.showNewMessagesDivider){this.newMessage={};return}this.newMessage=e.reduce((t,o)=>o.index<t.index?o:t)}},messageSelectionEnabled(){this.resetMessageHover()}},mounted(){Pb(this.message),this.$emit("message-added",{message:this.message,index:this.index,ref:this.$refs.message})},methods:{onHoverMessage(){this.messageSelectionEnabled||(this.messageHover=!0,this.canEditMessage()&&(this.hoverMessageId=this.message._id))},canEditMessage(){return!this.message.deleted},onLeaveMessage(){this.messageSelectionEnabled||(!this.optionsOpened&&!this.emojiOpened&&(this.messageHover=!1),this.hoverMessageId=null)},resetMessageHover(){this.messageHover=!1,this.hoverMessageId=null},openFile(e){this.$emit("open-file",{message:this.message,file:e})},openUserTag(e){this.$emit("open-user-tag",{user:e})},messageActionHandler(e){this.resetMessageHover(),setTimeout(()=>{this.$emit("message-action-handler",{action:e,message:this.message})},300)},sendMessageReaction({emoji:e,reaction:t}){this.$emit("send-message-reaction",{messageId:this.message._id,reaction:e,remove:t&&t.indexOf(this.currentUserId)!==-1}),this.messageHover=!1},selectMessage(){this.messageSelectionEnabled&&(this.isMessageSelected?this.$emit("unselect-message",this.message._id):this.$emit("select-message",this.message))}}},Ub=["id"],Fb={key:0,class:"vac-card-info vac-card-date"},Bb={key:1,class:"vac-line-new"},Db={key:2,class:"vac-card-info vac-card-system"},Hb={key:1,class:"vac-avatar-offset"},zb={key:0,class:"vac-progress-time"},qb={class:"vac-text-timestamp"},Kb={key:0,class:"vac-icon-edited"},Vb={key:1},Gb=[T("div",{class:"vac-failure-text"},"!",-1)],Wb={key:3,class:"vac-avatar-current-offset"};function Yb(e,t,o,s,n,r){const i=$("format-message"),a=$("message-reply"),c=$("message-files"),l=$("audio-player"),u=$("svg-icon"),d=$("message-actions"),f=$("message-reactions");return p(),w("div",{id:o.message._id,ref:"message",class:"vac-message-wrapper"},[r.showDate?(p(),w("div",Fb,ne(o.message.date),1)):B("",!0),n.newMessage._id===o.message._id?(p(),w("div",Bb,ne(o.textMessages.NEW_MESSAGES),1)):B("",!0),o.message.system?(p(),w("div",Db,[U(e.$slots,"message_"+o.message._id,{},()=>[F(i,{"message-id":o.message._id,content:o.message.content,deleted:!!o.message.deleted,users:o.roomUsers,"text-messages":o.textMessages,"text-formatting":o.textFormatting,"link-options":o.linkOptions,onOpenUserTag:r.openUserTag},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["message-id","content","deleted","users","text-messages","text-formatting","link-options","onOpenUserTag"])])])):(p(),w("div",{key:3,class:ge(["vac-message-box",{"vac-offset-current":o.message.senderId===o.currentUserId}]),onClick:t[8]||(t[8]=(...g)=>r.selectMessage&&r.selectMessage(...g))},[U(e.$slots,"message_"+o.message._id,{},()=>[o.message.avatar&&o.message.senderId!==o.currentUserId?U(e.$slots,"message-avatar_"+o.message._id,{key:0},()=>[T("div",{class:"vac-avatar",style:Me({"background-image":`url('${o.message.avatar}')`})},null,4)]):B("",!0),r.hasSenderUserAvatar&&!o.message.avatar?(p(),w("div",Hb)):B("",!0),T("div",{class:ge(["vac-message-container",{"vac-message-container-offset":r.messageOffset}])},[T("div",{class:ge(["vac-message-card",{"vac-message-highlight":r.isMessageHover,"vac-message-current":o.message.senderId===o.currentUserId,"vac-message-deleted":o.message.deleted,"vac-item-clickable":o.messageSelectionEnabled,"vac-message-selected":r.isMessageSelected}]),onMouseover:t[5]||(t[5]=(...g)=>r.onHoverMessage&&r.onHoverMessage(...g)),onMouseleave:t[6]||(t[6]=(...g)=>r.onLeaveMessage&&r.onLeaveMessage(...g))},[r.showUsername?(p(),w("div",{key:0,class:ge(["vac-text-username",{"vac-username-reply":!o.message.deleted&&o.message.replyMessage}])},[T("span",null,ne(o.message.username),1)],2)):B("",!0),!o.message.deleted&&o.message.replyMessage?(p(),Oe(a,{key:1,message:o.message,"room-users":o.roomUsers,"text-formatting":o.textFormatting,"link-options":o.linkOptions},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["message","room-users","text-formatting","link-options"])):B("",!0),!!o.message.deleted||!o.message.files||!o.message.files.length?(p(),Oe(i,{key:2,"message-id":o.message._id,content:o.message.content,deleted:!!o.message.deleted,users:o.roomUsers,"text-formatting":o.textFormatting,"text-messages":o.textMessages,"link-options":o.linkOptions,onOpenUserTag:r.openUserTag},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["message-id","content","deleted","users","text-formatting","text-messages","link-options","onOpenUserTag"])):!r.isAudio||o.message.files.length>1?(p(),Oe(c,{key:3,"current-user-id":o.currentUserId,message:o.message,"room-users":o.roomUsers,"text-formatting":o.textFormatting,"link-options":o.linkOptions,"message-selection-enabled":o.messageSelectionEnabled,onOpenFile:r.openFile,onOpenUserTag:r.openUserTag},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["current-user-id","message","room-users","text-formatting","link-options","message-selection-enabled","onOpenFile","onOpenUserTag"])):(p(),w(Te,{key:4},[F(l,{"message-id":o.message._id,src:o.message.files[0].url,"message-selection-enabled":o.messageSelectionEnabled,onUpdateProgressTime:t[0]||(t[0]=g=>n.progressTime=g),onHoverAudioProgress:t[1]||(t[1]=g=>n.hoverAudioProgress=g)},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["message-id","src","message-selection-enabled"]),o.message.deleted?B("",!0):(p(),w("div",zb,ne(n.progressTime),1))],64)),T("div",qb,[o.message.edited&&!o.message.deleted?(p(),w("div",Kb,[U(e.$slots,"pencil-icon_"+o.message._id,{},()=>[F(u,{name:"pencil"})])])):B("",!0),T("span",null,ne(o.message.timestamp),1),r.isCheckmarkVisible?(p(),w("span",Vb,[U(e.$slots,"checkmark-icon_"+o.message._id,{},()=>[F(u,{name:o.message.distributed?"double-checkmark":"checkmark",param:o.message.seen?"seen":"",class:"vac-icon-check"},null,8,["name","param"])])])):B("",!0)]),F(d,{"current-user-id":o.currentUserId,message:o.message,"message-actions":o.messageActions,"show-reaction-emojis":o.showReactionEmojis,"message-hover":n.messageHover,"hover-message-id":n.hoverMessageId,"hover-audio-progress":n.hoverAudioProgress,onUpdateMessageHover:t[2]||(t[2]=g=>n.messageHover=g),onUpdateOptionsOpened:t[3]||(t[3]=g=>n.optionsOpened=g),onUpdateEmojiOpened:t[4]||(t[4]=g=>n.emojiOpened=g),onMessageActionHandler:r.messageActionHandler,onSendMessageReaction:r.sendMessageReaction},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["current-user-id","message","message-actions","show-reaction-emojis","message-hover","hover-message-id","hover-audio-progress","onMessageActionHandler","onSendMessageReaction"])],34),F(f,{"current-user-id":o.currentUserId,message:o.message,onSendMessageReaction:r.sendMessageReaction},null,8,["current-user-id","message","onSendMessageReaction"])],2),U(e.$slots,"message-failure_"+o.message._id,{},()=>[o.message.failure&&o.message.senderId===o.currentUserId?(p(),w("div",{key:0,class:ge(["vac-failure-container vac-svg-button",{"vac-failure-container-avatar":o.message.avatar&&o.message.senderId===o.currentUserId}]),onClick:t[7]||(t[7]=g=>e.$emit("open-failed-message",{message:o.message}))},Gb,2)):B("",!0)]),o.message.avatar&&o.message.senderId===o.currentUserId?U(e.$slots,"message-avatar_"+o.message._id,{key:2},()=>[T("div",{class:"vac-avatar vac-avatar-current",style:Me({"background-image":`url('${o.message.avatar}')`})},null,4)]):B("",!0),r.hasCurrentUserAvatar&&!o.message.avatar?(p(),w("div",Wb)):B("",!0)])],2))],8,Ub)}var Zb=Fe(Nb,[["render",Yb]]);const Xb={name:"ChatRoom",components:{Loader:lr,SvgIcon:Qe,RoomHeader:zh,RoomFooter:Dv,RoomMessage:Zb},props:{currentUserId:{type:[String,Number],required:!0},textMessages:{type:Object,required:!0},singleRoom:{type:Boolean,required:!0},showRoomsList:{type:Boolean,required:!0},isMobile:{type:Boolean,required:!0},rooms:{type:Array,required:!0},roomId:{type:[String,Number],required:!0},loadFirstRoom:{type:Boolean,required:!0},messages:{type:Array,required:!0},roomMessage:{type:String,default:null},messagesLoaded:{type:Boolean,required:!0},menuActions:{type:Array,required:!0},messageActions:{type:Array,required:!0},messageSelectionActions:{type:Array,required:!0},autoScroll:{type:Object,required:!0},showSendIcon:{type:Boolean,required:!0},showFiles:{type:Boolean,required:!0},showAudio:{type:Boolean,required:!0},audioBitRate:{type:Number,required:!0},audioSampleRate:{type:Number,required:!0},showEmojis:{type:Boolean,required:!0},showReactionEmojis:{type:Boolean,required:!0},showNewMessagesDivider:{type:Boolean,required:!0},showFooter:{type:Boolean,required:!0},acceptedFiles:{type:String,required:!0},textFormatting:{type:Object,required:!0},linkOptions:{type:Object,required:!0},loadingRooms:{type:Boolean,required:!0},roomInfoEnabled:{type:Boolean,required:!0},textareaActionEnabled:{type:Boolean,required:!0},textareaAutoFocus:{type:Boolean,required:!0},userTagsEnabled:{type:Boolean,required:!0},emojisSuggestionEnabled:{type:Boolean,required:!0},scrollDistance:{type:Number,required:!0},templatesText:{type:Array,default:null},usernameOptions:{type:Object,required:!0}},emits:["toggle-rooms-list","room-info","menu-action-handler","message-selection-action-handler","edit-message","send-message","delete-message","message-action-handler","fetch-messages","send-message-reaction","typing-message","open-file","open-user-tag","open-failed-message","textarea-action-handler"],data(){return{editedMessageId:null,initReplyMessage:null,initEditMessage:null,loadingMessages:!1,observer:null,showLoader:!0,loadingMoreMessages:!1,scrollIcon:!1,scrollMessagesCount:0,newMessages:[],messageSelectionEnabled:!1,selectedMessages:[],droppedFiles:[]}},computed:{room(){return this.rooms.find(e=>e.roomId===this.roomId)||{}},showNoMessages(){return this.roomId&&!this.messages.length&&!this.loadingMessages&&!this.loadingRooms},showNoRoom(){const e=!this.rooms.length&&!this.loadingRooms||!this.roomId&&!this.loadFirstRoom;return e&&this.updateLoadingMessages(!1),e},showMessagesStarted(){return this.messages.length&&this.messagesLoaded}},watch:{roomId:{immediate:!0,handler(){this.onRoomChanged()}},messages:{deep:!0,handler(e,t){e.forEach((o,s)=>{this.showNewMessagesDivider&&!o.seen&&o.senderId!==this.currentUserId&&this.newMessages.push({_id:o._id,index:s})}),(t==null?void 0:t.length)===(e==null?void 0:e.length)-1&&(this.newMessages=[]),setTimeout(()=>this.loadingMoreMessages=!1)}},messagesLoaded(e){e&&this.updateLoadingMessages(!1)}},mounted(){this.newMessages=[]},methods:{updateLoadingMessages(e){this.loadingMessages=e,e||setTimeout(()=>this.initIntersectionObserver())},initIntersectionObserver(){this.observer&&(this.showLoader=!0,this.observer.disconnect());const e=document.querySelector("vue-advanced-chat").shadowRoot.getElementById("infinite-loader-messages");if(e){const t={root:document.querySelector("vue-advanced-chat").shadowRoot.getElementById("messages-list"),rootMargin:`${this.scrollDistance}px`,threshold:0};this.observer=new IntersectionObserver(o=>{o[0].isIntersecting&&this.loadMoreMessages()},t),this.observer.observe(e)}},preventTopScroll(){const e=this.$refs.scrollContainer,t=e.scrollHeight,o=new ResizeObserver(n=>{e.scrollHeight!==t&&this.$refs.scrollContainer&&(this.$refs.scrollContainer.scrollTo({top:e.scrollHeight-t}),o.disconnect())});for(var s=0;s<e.children.length;s++)o.observe(e.children[s])},touchStart(e){if(!this.singleRoom&&e.changedTouches.length===1){const t=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY;addEventListener("touchend",s=>this.touchEnd(s,t,o),{once:!0})}},touchEnd(e,t,o){if(e.changedTouches.length===1){const s=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY,r=s-t>100,i=Math.abs(n-o)>50;r&&!i&&this.$emit("toggle-rooms-list")}},onRoomChanged(){this.updateLoadingMessages(!0),this.scrollIcon=!1,this.scrollMessagesCount=0,this.resetMessageSelection();const e=this.$watch(()=>this.messages,t=>{if(!t||!t.length)return;const o=this.$refs.scrollContainer;!o||(e(),setTimeout(()=>{o.scrollTo({top:o.scrollHeight}),this.updateLoadingMessages(!1)}))})},resetMessageSelection(){this.messageSelectionEnabled=!1,this.selectedMessages=[]},selectMessage(e){this.selectedMessages.push(e)},unselectMessage(e){this.selectedMessages=this.selectedMessages.filter(t=>t._id!==e)},onMessageAdded({message:e,index:t,ref:o}){if(t!==this.messages.length-1)return;const s=o.offsetHeight+60;setTimeout(()=>{const n=this.getBottomScroll(this.$refs.scrollContainer)>s;e.senderId===this.currentUserId?n?this.autoScroll.send.newAfterScrollUp&&this.scrollToBottom():this.autoScroll.send.new&&this.scrollToBottom():n?this.autoScroll.receive.newAfterScrollUp?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++):this.autoScroll.receive.new?this.scrollToBottom():(this.scrollIcon=!0,this.scrollMessagesCount++)})},onContainerScroll(e){if(!e.target)return;const t=this.getBottomScroll(e.target);t<60&&(this.scrollMessagesCount=0),this.scrollIcon=t>500||this.scrollMessagesCount},loadMoreMessages(){this.loadingMessages||setTimeout(()=>{if(!this.loadingMoreMessages){if(this.messagesLoaded||!this.roomId){this.loadingMoreMessages=!1,this.showLoader=!1;return}this.preventTopScroll(),this.$emit("fetch-messages"),this.loadingMoreMessages=!0}},500)},messageActionHandler({action:e,message:t}){switch(e.name){case"replyMessage":this.initReplyMessage=t,setTimeout(()=>{this.initReplyMessage=null});return;case"editMessage":this.initEditMessage=t,setTimeout(()=>{this.initEditMessage=null});return;case"deleteMessage":return this.$emit("delete-message",t);case"selectMessages":this.selectedMessages=[t],this.messageSelectionEnabled=!0;return;default:return this.$emit("message-action-handler",{action:e,message:t})}},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{action:e,messages:this.selectedMessages}),this.resetMessageSelection()},sendMessageReaction(e){this.$emit("send-message-reaction",e)},getBottomScroll(e){const{scrollHeight:t,clientHeight:o,scrollTop:s}=e;return t-o-s},scrollToBottom(){setTimeout(()=>{const e=this.$refs.scrollContainer;e.classList.add("vac-scroll-smooth"),e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),setTimeout(()=>e.classList.remove("vac-scroll-smooth"))},50)},openFile({message:e,file:t}){this.$emit("open-file",{message:e,file:t})},openUserTag(e){this.$emit("open-user-tag",e)},onDropFiles(e){this.droppedFiles=e.dataTransfer.files}}},Jb={class:"vac-container-center vac-room-empty"},Qb={class:"vac-messages-container"},$b={key:0,class:"vac-text-started"},e0={key:1,class:"vac-text-started"},t0={key:0,id:"infinite-loader-messages"},o0={key:2},s0={key:0,class:"vac-badge-counter vac-messages-count"};function r0(e,t,o,s,n,r){const i=$("room-header"),a=$("loader"),c=$("room-message"),l=$("svg-icon"),u=$("room-footer");return Ht((p(),w("div",{class:"vac-col-messages",onDrop:t[12]||(t[12]=wt((...d)=>r.onDropFiles&&r.onDropFiles(...d),["prevent"])),onDragenter:t[13]||(t[13]=wt(()=>{},["prevent"])),onDragover:t[14]||(t[14]=wt(()=>{},["prevent"])),onDragleave:t[15]||(t[15]=wt(()=>{},["prevent"])),onTouchstart:t[16]||(t[16]=(...d)=>r.touchStart&&r.touchStart(...d))},[r.showNoRoom?U(e.$slots,"no-room-selected",{key:0},()=>[T("div",Jb,[T("div",null,ne(o.textMessages.ROOM_EMPTY),1)])]):(p(),Oe(i,{key:1,"current-user-id":o.currentUserId,"text-messages":o.textMessages,"single-room":o.singleRoom,"show-rooms-list":o.showRoomsList,"is-mobile":o.isMobile,"room-info-enabled":o.roomInfoEnabled,"menu-actions":o.menuActions,room:r.room,"message-selection-enabled":n.messageSelectionEnabled,"message-selection-actions":o.messageSelectionActions,"selected-messages-total":n.selectedMessages.length,onToggleRoomsList:t[0]||(t[0]=d=>e.$emit("toggle-rooms-list")),onRoomInfo:t[1]||(t[1]=d=>e.$emit("room-info")),onMenuActionHandler:t[2]||(t[2]=d=>e.$emit("menu-action-handler",d)),onMessageSelectionActionHandler:r.messageSelectionActionHandler,onCancelMessageSelection:t[3]||(t[3]=d=>n.messageSelectionEnabled=!1)},Ie({_:2},[ue(e.$slots,(d,f)=>({name:f,fn:Q(g=>[U(e.$slots,f,Le(Ae(g)))])}))]),1032,["current-user-id","text-messages","single-room","show-rooms-list","is-mobile","room-info-enabled","menu-actions","room","message-selection-enabled","message-selection-actions","selected-messages-total","onMessageSelectionActionHandler"])),T("div",{id:"messages-list",ref:"scrollContainer",class:"vac-container-scroll",onScroll:t[5]||(t[5]=(...d)=>r.onContainerScroll&&r.onContainerScroll(...d))},[F(a,{show:n.loadingMessages,type:"messages"},Ie({_:2},[ue(e.$slots,(d,f)=>({name:f,fn:Q(g=>[U(e.$slots,f,Le(Ae(g)))])}))]),1032,["show"]),T("div",Qb,[T("div",{class:ge({"vac-messages-hidden":n.loadingMessages})},[F(Ge,{name:"vac-fade-message"},{default:Q(()=>[T("div",null,[r.showNoMessages?(p(),w("div",$b,[U(e.$slots,"messages-empty",{},()=>[Qt(ne(o.textMessages.MESSAGES_EMPTY),1)])])):B("",!0),r.showMessagesStarted?(p(),w("div",e0,ne(o.textMessages.CONVERSATION_STARTED)+" "+ne(o.messages[0].date),1)):B("",!0)])]),_:3}),o.messages.length&&!o.messagesLoaded?(p(),w("div",t0,[F(a,{show:!0,infinite:!0,type:"infinite-messages"},Ie({_:2},[ue(e.$slots,(d,f)=>({name:f,fn:Q(g=>[U(e.$slots,f,Le(Ae(g)))])}))]),1024)])):B("",!0),(p(),Oe(Mn,{key:o.roomId,name:"vac-fade-message",tag:"span"},{default:Q(()=>[(p(!0),w(Te,null,ue(o.messages,(d,f)=>(p(),w("div",{key:d.indexId||d._id},[F(c,{"current-user-id":o.currentUserId,message:d,index:f,messages:o.messages,"edited-message-id":n.editedMessageId,"message-actions":o.messageActions,"room-users":r.room.users,"text-messages":o.textMessages,"new-messages":n.newMessages,"show-reaction-emojis":o.showReactionEmojis,"show-new-messages-divider":o.showNewMessagesDivider,"text-formatting":o.textFormatting,"link-options":o.linkOptions,"username-options":o.usernameOptions,"message-selection-enabled":n.messageSelectionEnabled,"selected-messages":n.selectedMessages,onMessageAdded:r.onMessageAdded,onMessageActionHandler:r.messageActionHandler,onOpenFile:r.openFile,onOpenUserTag:r.openUserTag,onOpenFailedMessage:t[4]||(t[4]=g=>e.$emit("open-failed-message",g)),onSendMessageReaction:r.sendMessageReaction,onSelectMessage:r.selectMessage,onUnselectMessage:r.unselectMessage},Ie({_:2},[ue(e.$slots,(g,y)=>({name:y,fn:Q(L=>[U(e.$slots,y,Le(Ae(L)))])}))]),1032,["current-user-id","message","index","messages","edited-message-id","message-actions","room-users","text-messages","new-messages","show-reaction-emojis","show-new-messages-divider","text-formatting","link-options","username-options","message-selection-enabled","selected-messages","onMessageAdded","onMessageActionHandler","onOpenFile","onOpenUserTag","onSendMessageReaction","onSelectMessage","onUnselectMessage"])]))),128))]),_:3}))],2)])],544),n.loadingMessages?B("",!0):(p(),w("div",o0,[F(Ge,{name:"vac-bounce"},{default:Q(()=>[n.scrollIcon?(p(),w("div",{key:0,class:"vac-icon-scroll",onClick:t[6]||(t[6]=(...d)=>r.scrollToBottom&&r.scrollToBottom(...d))},[F(Ge,{name:"vac-bounce"},{default:Q(()=>[n.scrollMessagesCount?(p(),w("div",s0,ne(n.scrollMessagesCount),1)):B("",!0)]),_:1}),U(e.$slots,"scroll-icon",{},()=>[F(l,{name:"dropdown",param:"scroll"})])])):B("",!0)]),_:3})])),F(u,{room:r.room,"room-id":o.roomId,"room-message":o.roomMessage,"text-messages":o.textMessages,"show-send-icon":o.showSendIcon,"show-files":o.showFiles,"show-audio":o.showAudio,"show-emojis":o.showEmojis,"show-footer":o.showFooter,"accepted-files":o.acceptedFiles,"textarea-action-enabled":o.textareaActionEnabled,"textarea-auto-focus":o.textareaAutoFocus,"user-tags-enabled":o.userTagsEnabled,"emojis-suggestion-enabled":o.emojisSuggestionEnabled,"templates-text":o.templatesText,"text-formatting":o.textFormatting,"link-options":o.linkOptions,"audio-bit-rate":o.audioBitRate,"audio-sample-rate":o.audioSampleRate,"init-reply-message":n.initReplyMessage,"init-edit-message":n.initEditMessage,"dropped-files":n.droppedFiles,onUpdateEditedMessageId:t[7]||(t[7]=d=>n.editedMessageId=d),onEditMessage:t[8]||(t[8]=d=>e.$emit("edit-message",d)),onSendMessage:t[9]||(t[9]=d=>e.$emit("send-message",d)),onTypingMessage:t[10]||(t[10]=d=>e.$emit("typing-message",d)),onTextareaActionHandler:t[11]||(t[11]=d=>e.$emit("textarea-action-handler",d))},Ie({_:2},[ue(e.$slots,(d,f)=>({name:f,fn:Q(g=>[U(e.$slots,f,Le(Ae(g)))])}))]),1032,["room","room-id","room-message","text-messages","show-send-icon","show-files","show-audio","show-emojis","show-footer","accepted-files","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","templates-text","text-formatting","link-options","audio-bit-rate","audio-sample-rate","init-reply-message","init-edit-message","dropped-files"])],544)),[[cr,o.isMobile&&!o.showRoomsList||!o.isMobile||o.singleRoom]])}var n0=Fe(Xb,[["render",r0]]);const i0={name:"MediaPreview",components:{SvgIcon:Qe},props:{file:{type:Object,required:!0}},emits:["close-media-preview"],computed:{isImage(){return Ho(this.file)},isVideo(){return Es(this.file)}},mounted(){this.$refs.modal.focus()},methods:{closeModal(){this.$emit("close-media-preview")}}},a0={key:0,class:"vac-media-preview-container"},c0={key:1,class:"vac-media-preview-container"},l0={controls:"",autoplay:""},d0=["src"],u0={class:"vac-svg-button"};function m0(e,t,o,s,n,r){const i=$("svg-icon");return p(),w("div",{ref:"modal",tabindex:"0",class:"vac-media-preview",onClick:t[0]||(t[0]=wt((...a)=>r.closeModal&&r.closeModal(...a),["stop"])),onKeydown:t[1]||(t[1]=qt((...a)=>r.closeModal&&r.closeModal(...a),["esc"]))},[F(Ge,{name:"vac-bounce-preview",appear:""},{default:Q(()=>[r.isImage?(p(),w("div",a0,[T("div",{class:"vac-image-preview",style:Me({"background-image":`url('${o.file.url}')`})},null,4)])):r.isVideo?(p(),w("div",c0,[T("video",l0,[T("source",{src:o.file.url},null,8,d0)])])):B("",!0)]),_:1}),T("div",u0,[U(e.$slots,"preview-close-icon",{},()=>[F(i,{name:"close-outline",param:"preview"})])])],544)}var f0=Fe(i0,[["render",m0]]),h0={ROOMS_EMPTY:"No rooms",ROOM_EMPTY:"No room selected",NEW_MESSAGES:"New Messages",MESSAGE_DELETED:"This message was deleted",MESSAGES_EMPTY:"No messages",CONVERSATION_STARTED:"Conversation started on:",TYPE_MESSAGE:"Type message",SEARCH:"Search",IS_ONLINE:"is online",LAST_SEEN:"last seen ",IS_TYPING:"is writing...",CANCEL_SELECT_MESSAGE:"Cancel"};const g0={light:{general:{color:"#0a0a0a",colorButtonClear:"#1976d2",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#fff",colorPlaceholder:"#9ca6af",colorCaret:"#1976d2",colorSpinner:"#333",borderStyle:"1px solid #e1e4e8",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#fff",colorRoomName:"#0a0a0a",colorRoomInfo:"#9ca6af"},footer:{background:"#f8f9fa",borderStyleInput:"1px solid #e1e4e8",borderInputSelected:"#1976d2",backgroundReply:"#e5e5e6",backgroundTagActive:"#e5e5e6",backgroundTag:"#f8f9fa"},content:{background:"#f8f9fa"},sidemenu:{background:"#fff",backgroundHover:"#f6f6f6",backgroundActive:"#e5effa",colorActive:"#1976d2",borderColorSearch:"#e1e5e8"},dropdown:{background:"#fff",backgroundHover:"#f6f6f6"},message:{background:"#fff",backgroundMe:"#ccf2cf",color:"#0a0a0a",colorMe:"#0a0a0a",colorStarted:"#9ca6af",backgroundDeleted:"#dadfe2",backgroundSelected:"#c2dcf2",colorDeleted:"#757e85",colorUsername:"#9ca6af",colorTimestamp:"#828c94",colorTimestampMe:"#828c94",backgroundDate:"#e5effa",colorDate:"#505a62",backgroundSystem:"#e5effa",colorSystem:"#505a62",backgroundMedia:"rgba(0, 0, 0, 0.15)",backgroundReply:"rgba(0, 0, 0, 0.08)",colorReplyUsername:"#0a0a0a",colorReply:"#6e6e6e",colorTag:"#0d579c",backgroundImage:"#ddd",colorNewMessages:"#1976d2",backgroundScrollCounter:"#0696c7",colorScrollCounter:"#fff",backgroundReaction:"#eee",borderStyleReaction:"1px solid #eee",backgroundReactionHover:"#fff",borderStyleReactionHover:"1px solid #ddd",colorReactionCounter:"#0a0a0a",backgroundReactionMe:"#cfecf5",borderStyleReactionMe:"1px solid #3b98b8",backgroundReactionHoverMe:"#cfecf5",borderStyleReactionHoverMe:"1px solid #3b98b8",colorReactionCounterMe:"#0b59b3",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(0, 0, 0, 0.15)",backgroundAudioProgress:"#455247",backgroundAudioProgressSelector:"#455247",colorFileExtension:"#757e85"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#0a0a0a",colorMessage:"#67717a",colorTimestamp:"#a2aeb8",colorStateOnline:"#4caf50",colorStateOffline:"#9ca6af",backgroundCounterBadge:"#0696c7",colorCounterBadge:"#fff"},emoji:{background:"#fff"},icons:{search:"#9ca6af",add:"#1976d2",toggle:"#0a0a0a",menu:"#0a0a0a",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#1976d2",closeOutline:"#000",closePreview:"#fff",send:"#1976d2",sendDisabled:"#9ca6af",emoji:"#1976d2",emojiReaction:"rgba(0, 0, 0, 0.3)",document:"#1976d2",pencil:"#9e9e9e",checkmark:"#9e9e9e",checkmarkSeen:"#0696c7",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#9e9e9e",dropdownScroll:"#0a0a0a",microphone:"#1976d2",audioPlay:"#455247",audioPause:"#455247",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}},dark:{general:{color:"#fff",colorButtonClear:"#fff",colorButton:"#fff",backgroundColorButton:"#1976d2",backgroundInput:"#202223",colorPlaceholder:"#596269",colorCaret:"#fff",colorSpinner:"#fff",borderStyle:"none",backgroundScrollIcon:"#fff"},container:{border:"none",borderRadius:"4px",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)"},header:{background:"#181a1b",colorRoomName:"#fff",colorRoomInfo:"#9ca6af"},footer:{background:"#131415",borderStyleInput:"none",borderInputSelected:"#1976d2",backgroundReply:"#1b1c1c",backgroundTagActive:"#1b1c1c",backgroundTag:"#131415"},content:{background:"#131415"},sidemenu:{background:"#181a1b",backgroundHover:"#202224",backgroundActive:"#151617",colorActive:"#fff",borderColorSearch:"#181a1b"},dropdown:{background:"#2a2c33",backgroundHover:"#26282e"},message:{background:"#22242a",backgroundMe:"#1f7e80",color:"#fff",colorStarted:"#9ca6af",backgroundDeleted:"#1b1c21",backgroundSelected:"#c2dcf2",colorDeleted:"#a2a5a8",colorUsername:"#b3bac9",colorTimestamp:"#ebedf2",backgroundDate:"rgba(0, 0, 0, 0.3)",colorDate:"#bec5cc",backgroundSystem:"rgba(0, 0, 0, 0.3)",colorSystem:"#bec5cc",backgroundMedia:"rgba(0, 0, 0, 0.18)",backgroundReply:"rgba(0, 0, 0, 0.18)",colorReplyUsername:"#fff",colorReply:"#d6d6d6",colorTag:"#f0c60a",backgroundImage:"#ddd",colorNewMessages:"#fff",backgroundScrollCounter:"#1976d2",colorScrollCounter:"#fff",backgroundReaction:"none",borderStyleReaction:"none",backgroundReactionHover:"#202223",borderStyleReactionHover:"none",colorReactionCounter:"#fff",backgroundReactionMe:"#4e9ad1",borderStyleReactionMe:"none",backgroundReactionHoverMe:"#4e9ad1",borderStyleReactionHoverMe:"none",colorReactionCounterMe:"#fff",backgroundAudioRecord:"#eb4034",backgroundAudioLine:"rgba(255, 255, 255, 0.15)",backgroundAudioProgress:"#b7d4d3",backgroundAudioProgressSelector:"#b7d4d3",colorFileExtension:"#a2a5a8"},markdown:{background:"rgba(239, 239, 239, 0.7)",border:"rgba(212, 212, 212, 0.9)",color:"#e01e5a",colorMulti:"#0a0a0a"},room:{colorUsername:"#fff",colorMessage:"#6c7278",colorTimestamp:"#6c7278",colorStateOnline:"#4caf50",colorStateOffline:"#596269",backgroundCounterBadge:"#1976d2",colorCounterBadge:"#fff"},emoji:{background:"#343740"},icons:{search:"#596269",add:"#fff",toggle:"#fff",menu:"#fff",close:"#9ca6af",closeImage:"#fff",file:"#1976d2",paperclip:"#fff",closeOutline:"#fff",closePreview:"#fff",send:"#fff",sendDisabled:"#646a70",emoji:"#fff",emojiReaction:"#fff",document:"#1976d2",pencil:"#ebedf2",checkmark:"#ebedf2",checkmarkSeen:"#f0d90a",eye:"#fff",dropdownMessage:"#fff",dropdownMessageBackground:"rgba(0, 0, 0, 0.25)",dropdownRoom:"#fff",dropdownScroll:"#0a0a0a",microphone:"#fff",audioPlay:"#b7d4d3",audioPause:"#b7d4d3",audioCancel:"#eb4034",audioConfirm:"#1ba65b"}}},p0=({general:e,container:t,header:o,footer:s,sidemenu:n,content:r,dropdown:i,message:a,markdown:c,room:l,emoji:u,icons:d})=>({"--chat-color":e.color,"--chat-color-button-clear":e.colorButtonClear,"--chat-color-button":e.colorButton,"--chat-bg-color-button":e.backgroundColorButton,"--chat-bg-color-input":e.backgroundInput,"--chat-color-spinner":e.colorSpinner,"--chat-color-placeholder":e.colorPlaceholder,"--chat-color-caret":e.colorCaret,"--chat-border-style":e.borderStyle,"--chat-bg-scroll-icon":e.backgroundScrollIcon,"--chat-container-border":t.border,"--chat-container-border-radius":t.borderRadius,"--chat-container-box-shadow":t.boxShadow,"--chat-header-bg-color":o.background,"--chat-header-color-name":o.colorRoomName,"--chat-header-color-info":o.colorRoomInfo,"--chat-footer-bg-color":s.background,"--chat-border-style-input":s.borderStyleInput,"--chat-border-color-input-selected":s.borderInputSelected,"--chat-footer-bg-color-reply":s.backgroundReply,"--chat-footer-bg-color-tag-active":s.backgroundTagActive,"--chat-footer-bg-color-tag":s.backgroundTag,"--chat-content-bg-color":r.background,"--chat-sidemenu-bg-color":n.background,"--chat-sidemenu-bg-color-hover":n.backgroundHover,"--chat-sidemenu-bg-color-active":n.backgroundActive,"--chat-sidemenu-color-active":n.colorActive,"--chat-sidemenu-border-color-search":n.borderColorSearch,"--chat-dropdown-bg-color":i.background,"--chat-dropdown-bg-color-hover":i.backgroundHover,"--chat-message-bg-color":a.background,"--chat-message-bg-color-me":a.backgroundMe,"--chat-message-color-started":a.colorStarted,"--chat-message-bg-color-deleted":a.backgroundDeleted,"--chat-message-bg-color-selected":a.backgroundSelected,"--chat-message-color-deleted":a.colorDeleted,"--chat-message-color-username":a.colorUsername,"--chat-message-color-timestamp":a.colorTimestamp,"--chat-message-color-timestamp-me":a.colorTimestampMe,"--chat-message-bg-color-date":a.backgroundDate,"--chat-message-color-date":a.colorDate,"--chat-message-bg-color-system":a.backgroundSystem,"--chat-message-color-system":a.colorSystem,"--chat-message-color":a.color,"--chat-message-color-me":a.colorMe,"--chat-message-bg-color-media":a.backgroundMedia,"--chat-message-bg-color-reply":a.backgroundReply,"--chat-message-color-reply-username":a.colorReplyUsername,"--chat-message-color-reply-content":a.colorReply,"--chat-message-color-tag":a.colorTag,"--chat-message-bg-color-image":a.backgroundImage,"--chat-message-color-new-messages":a.colorNewMessages,"--chat-message-bg-color-scroll-counter":a.backgroundScrollCounter,"--chat-message-color-scroll-counter":a.colorScrollCounter,"--chat-message-bg-color-reaction":a.backgroundReaction,"--chat-message-border-style-reaction":a.borderStyleReaction,"--chat-message-bg-color-reaction-hover":a.backgroundReactionHover,"--chat-message-border-style-reaction-hover":a.borderStyleReactionHover,"--chat-message-color-reaction-counter":a.colorReactionCounter,"--chat-message-bg-color-reaction-me":a.backgroundReactionMe,"--chat-message-border-style-reaction-me":a.borderStyleReactionMe,"--chat-message-bg-color-reaction-hover-me":a.backgroundReactionHoverMe,"--chat-message-border-style-reaction-hover-me":a.borderStyleReactionHoverMe,"--chat-message-color-reaction-counter-me":a.colorReactionCounterMe,"--chat-message-bg-color-audio-record":a.backgroundAudioRecord,"--chat-message-bg-color-audio-line":a.backgroundAudioLine,"--chat-message-bg-color-audio-progress":a.backgroundAudioProgress,"--chat-message-bg-color-audio-progress-selector":a.backgroundAudioProgressSelector,"--chat-message-color-file-extension":a.colorFileExtension,"--chat-markdown-bg":c.background,"--chat-markdown-border":c.border,"--chat-markdown-color":c.color,"--chat-markdown-color-multi":c.colorMulti,"--chat-room-color-username":l.colorUsername,"--chat-room-color-message":l.colorMessage,"--chat-room-color-timestamp":l.colorTimestamp,"--chat-room-color-online":l.colorStateOnline,"--chat-room-color-offline":l.colorStateOffline,"--chat-room-bg-color-badge":l.backgroundCounterBadge,"--chat-room-color-badge":l.colorCounterBadge,"--chat-emoji-bg-color":u.background,"--chat-icon-color-search":d.search,"--chat-icon-color-add":d.add,"--chat-icon-color-toggle":d.toggle,"--chat-icon-color-menu":d.menu,"--chat-icon-color-close":d.close,"--chat-icon-color-close-image":d.closeImage,"--chat-icon-color-file":d.file,"--chat-icon-color-paperclip":d.paperclip,"--chat-icon-color-close-outline":d.closeOutline,"--chat-icon-color-close-preview":d.closePreview,"--chat-icon-color-send":d.send,"--chat-icon-color-send-disabled":d.sendDisabled,"--chat-icon-color-emoji":d.emoji,"--chat-icon-color-emoji-reaction":d.emojiReaction,"--chat-icon-color-document":d.document,"--chat-icon-color-pencil":d.pencil,"--chat-icon-color-checkmark":d.checkmark,"--chat-icon-color-checkmark-seen":d.checkmarkSeen,"--chat-icon-color-eye":d.eye,"--chat-icon-color-dropdown-message":d.dropdownMessage,"--chat-icon-bg-dropdown-message":d.dropdownMessageBackground,"--chat-icon-color-dropdown-room":d.dropdownRoom,"--chat-icon-color-dropdown-scroll":d.dropdownScroll,"--chat-icon-color-microphone":d.microphone,"--chat-icon-color-audio-play":d.audioPlay,"--chat-icon-color-audio-pause":d.audioPause,"--chat-icon-color-audio-cancel":d.audioCancel,"--chat-icon-color-audio-confirm":d.audioConfirm});var v0=`.vac-fade-spinner-enter-from{opacity:0}.vac-fade-spinner-enter-active{transition:opacity .8s}.vac-fade-spinner-leave-active{transition:opacity .2s;opacity:0}.vac-fade-image-enter-from{opacity:0}.vac-fade-image-enter-active{transition:opacity 1s}.vac-fade-image-leave-active{transition:opacity .5s;opacity:0}.vac-fade-message-enter-from{opacity:0}.vac-fade-message-enter-active{transition:opacity .5s}.vac-fade-message-leave-active{transition:opacity .2s;opacity:0}.vac-slide-left-enter-active,.vac-slide-right-enter-active{transition:all .3s ease;transition-property:transform,opacity}.vac-slide-left-leave-active,.vac-slide-right-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)!important;transition-property:transform,opacity}.vac-slide-left-enter-from,.vac-slide-left-leave-to{transform:translate(10px);opacity:0}.vac-slide-right-enter-from,.vac-slide-right-leave-to{transform:translate(-10px);opacity:0}.vac-slide-up-enter-active{transition:all .3s ease}.vac-slide-up-leave-active{transition:all .2s cubic-bezier(1,.5,.8,1)}.vac-slide-up-enter-from,.vac-slide-up-leave-to{transform:translateY(10px);opacity:0}.vac-bounce-enter-active{animation:vac-bounce-in .5s}.vac-bounce-leave-active{animation:vac-bounce-in .3s reverse}@keyframes vac-bounce-in{0%{transform:scale(0)}50%{transform:scale(1.05)}to{transform:scale(1)}}.vac-fade-preview-enter{opacity:0}.vac-fade-preview-enter-active{transition:opacity .1s}.vac-fade-preview-leave-active{transition:opacity .2s;opacity:0}.vac-bounce-preview-enter-active{animation:vac-bounce-image-in .4s}.vac-bounce-preview-leave-active{animation:vac-bounce-image-in .3s reverse}@keyframes vac-bounce-image-in{0%{transform:scale(.6)}to{transform:scale(1)}}.vac-menu-list{border-radius:4px;display:block;cursor:pointer;background:var(--chat-dropdown-bg-color);padding:6px 0}.vac-menu-list :hover{background:var(--chat-dropdown-bg-color-hover);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-list :not(:hover){transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-menu-item{-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;min-height:30px;padding:5px 16px;position:relative;white-space:nowrap;line-height:30px}.vac-menu-options{position:absolute;right:10px;top:20px;z-index:9999;min-width:150px;display:inline-block;border-radius:4px;font-size:14px;color:var(--chat-color);overflow-y:auto;overflow-x:hidden;contain:content;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-app-border{border:var(--chat-border-style)}.vac-app-border-t{border-top:var(--chat-border-style)}.vac-app-border-r{border-right:var(--chat-border-style)}.vac-app-border-b{border-bottom:var(--chat-border-style)}.vac-app-box-shadow{transition:all .5s;box-shadow:0 2px 2px -4px #0000001a,0 2px 2px 1px #0000001f,0 1px 8px 1px #0000001f}.vac-item-clickable{cursor:pointer}.vac-vertical-center{display:flex;align-items:center;height:100%}.vac-vertical-center .vac-vertical-container{width:100%;text-align:center}.vac-svg-button{max-height:30px;display:flex;cursor:pointer;transition:all .2s}.vac-svg-button:hover{transform:scale(1.1);opacity:.7}.vac-avatar{background-size:cover;background-position:center center;background-repeat:no-repeat;background-color:#ddd;height:42px;width:42px;min-height:42px;min-width:42px;margin-right:15px;border-radius:50%}.vac-blur-loading{filter:blur(3px)}.vac-badge-counter{height:13px;width:auto;min-width:13px;border-radius:50%;display:flex;align-items:center;justify-content:center;padding:3px;font-size:11px;font-weight:500}.vac-text-ellipsis{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-text-bold{font-weight:700}.vac-text-italic{font-style:italic}.vac-text-strike{text-decoration:line-through}.vac-text-underline{text-decoration:underline}.vac-text-inline-code{display:inline-block;font-size:12px;color:var(--chat-markdown-color);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:2px 0;padding:2px 3px}.vac-text-multiline-code{display:block;font-size:12px;color:var(--chat-markdown-color-multi);background:var(--chat-markdown-bg);border:1px solid var(--chat-markdown-border);border-radius:3px;margin:4px 0;padding:7px}.vac-text-tag{color:var(--chat-message-color-tag);cursor:pointer}.vac-file-container{display:flex;align-content:center;justify-content:center;flex-wrap:wrap;text-align:center;background:var(--chat-bg-color-input);border:var(--chat-border-style-input);border-radius:4px;padding:10px}.vac-file-container svg{height:28px;width:28px}.vac-file-container .vac-text-extension{font-size:12px;color:var(--chat-message-color-file-extension);margin-top:-2px}.vac-card-window{width:100%;display:block;max-width:100%;background:var(--chat-content-bg-color);color:var(--chat-color);overflow-wrap:break-word;white-space:normal;border:var(--chat-container-border);border-radius:var(--chat-container-border-radius);box-shadow:var(--chat-container-box-shadow);-webkit-tap-highlight-color:transparent}.vac-card-window *{font-family:inherit}.vac-card-window a{color:#0d579c;font-weight:500}.vac-card-window .vac-chat-container{height:100%;display:flex}.vac-card-window .vac-chat-container input{min-width:10px}.vac-card-window .vac-chat-container textarea,.vac-card-window .vac-chat-container input[type=text],.vac-card-window .vac-chat-container input[type=search]{-webkit-appearance:none}.vac-media-preview{position:fixed;top:0;left:0;z-index:99;width:100vw;height:100vh;display:flex;align-items:center;background-color:#000c;outline:none}.vac-media-preview .vac-media-preview-container{height:calc(100% - 140px);width:calc(100% - 80px);padding:70px 40px;margin:0 auto}.vac-media-preview .vac-image-preview{width:100%;height:100%;background-size:contain;background-repeat:no-repeat;background-position:center}.vac-media-preview video{width:100%;height:100%}.vac-media-preview .vac-svg-button{position:absolute;top:30px;right:30px;transform:scale(1.4)}@media only screen and (max-width: 768px){.vac-media-preview .vac-svg-button{top:20px;right:20px;transform:scale(1.2)}.vac-media-preview .vac-media-preview-container{width:calc(100% - 40px);padding:70px 20px}}.vac-col-messages{position:relative;height:100%;flex:1;overflow:hidden;display:flex;flex-flow:column}.vac-col-messages .vac-container-center{height:100%;width:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center}.vac-col-messages .vac-room-empty{font-size:14px;color:#9ca6af;font-style:italic;line-height:20px;white-space:pre-line}.vac-col-messages .vac-room-empty div{padding:0 10%}.vac-col-messages .vac-container-scroll{background:var(--chat-content-bg-color);flex:1;overflow-y:auto;margin-right:1px;margin-top:65px;-webkit-overflow-scrolling:touch}.vac-col-messages .vac-container-scroll.vac-scroll-smooth{scroll-behavior:smooth}.vac-col-messages .vac-messages-container{padding:0 5px 5px}.vac-col-messages .vac-text-started{font-size:14px;color:var(--chat-message-color-started);font-style:italic;text-align:center;margin-top:25px;margin-bottom:20px}.vac-col-messages .vac-icon-scroll{position:absolute;bottom:80px;right:20px;padding:8px;background:var(--chat-bg-scroll-icon);border-radius:50%;box-shadow:0 1px 1px -1px #0003,0 1px 1px #00000024,0 1px 2px #0000001f;display:flex;cursor:pointer;z-index:10}.vac-col-messages .vac-icon-scroll svg{height:25px;width:25px}.vac-col-messages .vac-messages-count{position:absolute;top:-8px;left:11px;background-color:var(--chat-message-bg-color-scroll-counter);color:var(--chat-message-color-scroll-counter)}.vac-col-messages .vac-messages-hidden{opacity:0}@media only screen and (max-width: 768px){.vac-col-messages .vac-container-scroll{margin-top:50px}.vac-col-messages .vac-text-started{margin-top:20px}.vac-col-messages .vac-icon-scroll{bottom:70px}}.vac-room-header{position:absolute;display:flex;align-items:center;height:64px;width:100%;z-index:10;margin-right:1px;background:var(--chat-header-bg-color);border-top-right-radius:var(--chat-container-border-radius)}.vac-room-header .vac-room-wrapper{display:flex;align-items:center;min-width:0;height:100%;width:100%;padding:0 16px}.vac-room-header .vac-toggle-button{margin-right:15px}.vac-room-header .vac-toggle-button svg{height:26px;width:26px}.vac-room-header .vac-rotate-icon{transform:rotate(180deg)!important}.vac-room-header .vac-rotate-icon-init{transform:rotate(360deg)}.vac-room-header .vac-info-wrapper,.vac-room-header .vac-room-selection{display:flex;align-items:center;min-width:0;width:100%;height:100%}.vac-room-header .vac-room-selection .vac-selection-button{padding:8px 16px;color:var(--chat-color-button);background-color:var(--chat-bg-color-button);border-radius:4px;margin-right:10px;cursor:pointer;transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-button:hover{opacity:.7}.vac-room-header .vac-room-selection .vac-selection-button:active{opacity:.9}.vac-room-header .vac-room-selection .vac-selection-button .vac-selection-button-count{margin-left:6px;opacity:.9}.vac-room-header .vac-room-selection .vac-selection-cancel{display:flex;align-items:center;margin-left:auto;white-space:nowrap;color:var(--chat-color-button-clear);transition:all .2s}.vac-room-header .vac-room-selection .vac-selection-cancel:hover{opacity:.7}.vac-room-header .vac-room-name{font-size:17px;font-weight:500;line-height:22px;color:var(--chat-header-color-name)}.vac-room-header .vac-room-info{font-size:13px;line-height:18px;color:var(--chat-header-color-info)}.vac-room-header .vac-room-options{margin-left:auto}@media only screen and (max-width: 768px){.vac-room-header{height:50px}.vac-room-header .vac-room-wrapper{padding:0 10px}.vac-room-header .vac-room-name{font-size:16px;line-height:22px}.vac-room-header .vac-room-info{font-size:12px;line-height:16px}.vac-room-header .vac-avatar{height:37px;width:37px;min-height:37px;min-width:37px}}.vac-room-footer{width:100%;border-bottom-right-radius:4px;z-index:10}.vac-box-footer{display:flex;position:relative;background:var(--chat-footer-bg-color);padding:10px 8px}.vac-textarea{height:20px;width:100%;line-height:20px;overflow:hidden;outline:0;resize:none;border-radius:20px;padding:12px 16px;box-sizing:content-box;font-size:16px;background:var(--chat-bg-color-input);color:var(--chat-color);caret-color:var(--chat-color-caret);border:var(--chat-border-style-input)}.vac-textarea::placeholder{color:var(--chat-color-placeholder);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.vac-textarea-outline{border:1px solid var(--chat-border-color-input-selected);box-shadow:inset 0 0 0 1px var(--chat-border-color-input-selected)}.vac-icon-textarea,.vac-icon-textarea-left{display:flex;align-items:center}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea{margin-left:5px}.vac-icon-textarea-left{display:flex;align-items:center;margin-right:5px}.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 7px}.vac-icon-textarea-left .vac-icon-microphone{fill:var(--chat-icon-color-microphone);margin:0 7px}.vac-icon-textarea-left .vac-dot-audio-record{height:15px;width:15px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-record);animation:vac-scaling .8s ease-in-out infinite alternate}@keyframes vac-scaling{0%{transform:scale(1);opacity:.4}to{transform:scale(1.1);opacity:1}}.vac-icon-textarea-left .vac-dot-audio-record-time{font-size:16px;color:var(--chat-color);margin-left:8px;width:45px}.vac-icon-textarea-left .vac-icon-audio-stop,.vac-icon-textarea-left .vac-icon-audio-confirm{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop svg,.vac-icon-textarea-left .vac-icon-audio-confirm svg{min-height:28px;min-width:28px}.vac-icon-textarea-left .vac-icon-audio-stop{margin-right:20px}.vac-icon-textarea-left .vac-icon-audio-stop #vac-icon-close-outline{fill:var(--chat-icon-color-audio-cancel)}.vac-icon-textarea-left .vac-icon-audio-confirm{margin-right:3px;margin-left:12px}.vac-icon-textarea-left .vac-icon-audio-confirm #vac-icon-checkmark{fill:var(--chat-icon-color-audio-confirm)}.vac-send-disabled,.vac-send-disabled svg{cursor:none!important;pointer-events:none!important;transform:none!important}@media only screen and (max-width: 768px){.vac-room-footer{width:100%}.vac-box-footer{padding:7px 2px 7px 7px}.vac-box-footer.vac-box-footer-border{border-top:var(--chat-border-style-input)}.vac-textarea{padding:7px;line-height:18px}.vac-textarea::placeholder{color:transparent}.vac-icon-textarea svg,.vac-icon-textarea .vac-wrapper,.vac-icon-textarea-left svg,.vac-icon-textarea-left .vac-wrapper{margin:0 5px!important}}.vac-emojis-container{width:calc(100% - 16px);padding:10px 8px;background:var(--chat-footer-bg-color);display:flex;align-items:center;overflow:auto}.vac-emojis-container .vac-emoji-element{padding:0 8px;font-size:30px;border-radius:4px;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-emojis-container .vac-emoji-element-active{background:var(--chat-footer-bg-color-tag-active)}@media only screen and (max-width: 768px){.vac-emojis-container{width:calc(100% - 10px);padding:7px 5px}.vac-emojis-container .vac-emoji-element{padding:0 7px;font-size:26px}}.vac-reply-container{display:flex;padding:10px 10px 0;background:var(--chat-footer-bg-color);align-items:center;width:calc(100% - 20px)}.vac-reply-container .vac-reply-box{width:100%;overflow:hidden;background:var(--chat-footer-bg-color-reply);border-radius:4px;padding:8px 10px}.vac-reply-container .vac-reply-info{overflow:hidden}.vac-reply-container .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-container .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content);white-space:pre-line}.vac-reply-container .vac-icon-reply{margin-left:10px}.vac-reply-container .vac-icon-reply svg{height:20px;width:20px}.vac-reply-container .vac-image-reply{max-height:100px;max-width:200px;margin:4px 10px 0 0;border-radius:4px}.vac-reply-container .vac-audio-reply{margin-right:10px}.vac-reply-container .vac-file-container{max-width:80px}@media only screen and (max-width: 768px){.vac-reply-container{padding:5px 8px;width:calc(100% - 16px)}}.vac-room-files-container{display:flex;align-items:center;padding:10px 6px 0;background:var(--chat-footer-bg-color)}.vac-room-files-container .vac-files-box{display:flex;overflow:auto;width:calc(100% - 30px)}.vac-room-files-container video{height:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-files-container .vac-icon-close{margin-left:auto}.vac-room-files-container .vac-icon-close svg{height:20px;width:20px}@media only screen and (max-width: 768px){.vac-files-container{padding:6px 4px 4px 2px}}.vac-room-file-container{display:flex;position:relative;margin:0 4px}.vac-room-file-container .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:100px;width:100px;border:var(--chat-border-style-input);border-radius:4px}.vac-room-file-container .vac-file-container{height:80px;width:80px}.vac-room-file-container .vac-icon-remove{position:absolute;top:6px;left:6px;z-index:10}.vac-room-file-container .vac-icon-remove svg{height:20px;width:20px;border-radius:50%}.vac-room-file-container .vac-icon-remove:before{content:" ";position:absolute;width:100%;height:100%;background:rgba(0,0,0,.5);border-radius:50%;z-index:-1}.vac-tags-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-tags-container .vac-tags-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-tags-container .vac-tags-box-active{background:var(--chat-footer-bg-color-tag-active)}.vac-tags-container .vac-tags-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-tags-container .vac-tags-avatar{height:34px;width:34px;min-height:34px;min-width:34px}.vac-tags-container .vac-tags-username{font-size:14px}@media only screen and (max-width: 768px){.vac-tags-container .vac-tags-box{height:50px}.vac-tags-container .vac-tags-info{padding:0 12px}}.vac-template-container{display:flex;flex-direction:column;align-items:center;width:100%}.vac-template-container .vac-template-box{display:flex;width:100%;height:54px;overflow:hidden;cursor:pointer;background:var(--chat-footer-bg-color-tag);transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-template-container .vac-template-active{background:var(--chat-footer-bg-color-tag-active)}.vac-template-container .vac-template-info{display:flex;overflow:hidden;padding:0 20px;align-items:center}.vac-template-container .vac-template-tag{font-size:14px;font-weight:700;margin-right:10px}.vac-template-container .vac-template-text{font-size:14px}@media only screen and (max-width: 768px){.vac-template-container .vac-template-box{height:50px}.vac-template-container .vac-template-info{padding:0 12px}}.vac-rooms-container{display:flex;flex-flow:column;flex:0 0 25%;min-width:260px;max-width:500px;position:relative;background:var(--chat-sidemenu-bg-color);height:100%;border-top-left-radius:var(--chat-container-border-radius);border-bottom-left-radius:var(--chat-container-border-radius)}.vac-rooms-container.vac-rooms-container-full{flex:0 0 100%;max-width:100%}.vac-rooms-container .vac-rooms-empty{font-size:14px;color:#9ca6af;font-style:italic;text-align:center;margin:40px 0;line-height:20px;white-space:pre-line}.vac-rooms-container .vac-room-list{flex:1;position:relative;max-width:100%;cursor:pointer;padding:0 10px 5px;overflow-y:auto}.vac-rooms-container .vac-room-item{border-radius:8px;align-items:center;display:flex;flex:1 1 100%;margin-bottom:5px;padding:0 14px;position:relative;min-height:71px;transition:background-color .3s cubic-bezier(.25,.8,.5,1)}.vac-rooms-container .vac-room-item:hover{background:var(--chat-sidemenu-bg-color-hover)}.vac-rooms-container .vac-room-selected{color:var(--chat-sidemenu-color-active)!important;background:var(--chat-sidemenu-bg-color-active)!important}.vac-rooms-container .vac-room-selected:hover{background:var(--chat-sidemenu-bg-color-active)!important}@media only screen and (max-width: 768px){.vac-rooms-container .vac-room-list{padding:0 7px 5px}.vac-rooms-container .vac-room-item{min-height:60px;padding:0 8px}}.vac-room-container{display:flex;flex:1;align-items:center;width:100%}.vac-room-container .vac-name-container{flex:1}.vac-room-container .vac-title-container{display:flex;align-items:center;line-height:25px}.vac-room-container .vac-state-circle{width:9px;height:9px;border-radius:50%;background-color:var(--chat-room-color-offline);margin-right:6px;transition:.3s}.vac-room-container .vac-state-online{background-color:var(--chat-room-color-online)}.vac-room-container .vac-room-name{flex:1;color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-text-date{margin-left:5px;font-size:11px;color:var(--chat-room-color-timestamp)}.vac-room-container .vac-text-last{display:flex;align-items:center;font-size:12px;line-height:19px;color:var(--chat-room-color-message)}.vac-room-container .vac-message-new{color:var(--chat-room-color-username);font-weight:500}.vac-room-container .vac-icon-check{display:flex;vertical-align:middle;height:14px;width:14px;margin-top:-2px;margin-right:2px}.vac-room-container .vac-icon-microphone{height:15px;width:15px;vertical-align:middle;margin:-3px 1px 0 -2px;fill:var(--chat-room-color-message)}.vac-room-container .vac-room-options-container{display:flex;margin-left:auto}.vac-room-container .vac-room-badge{background-color:var(--chat-room-bg-color-badge);color:var(--chat-room-color-badge);margin-left:5px}.vac-room-container .vac-list-room-options{height:19px;width:19px;align-items:center;margin-left:5px}.vac-box-empty{margin-top:10px}@media only screen and (max-width: 768px){.vac-box-empty{margin-top:7px}}.vac-box-search{position:sticky;display:flex;align-items:center;height:64px;padding:0 15px}.vac-box-search .vac-icon-search{display:flex;position:absolute;left:30px}.vac-box-search .vac-icon-search svg{width:18px;height:18px}.vac-box-search .vac-input{height:38px;width:100%;background:var(--chat-bg-color-input);color:var(--chat-color);font-size:15px;outline:0;caret-color:var(--chat-color-caret);padding:10px 10px 10px 40px;border:1px solid var(--chat-sidemenu-border-color-search);border-radius:20px}.vac-box-search .vac-input::placeholder{color:var(--chat-color-placeholder)}.vac-box-search .vac-add-icon{margin-left:auto;padding-left:10px}@media only screen and (max-width: 768px){.vac-box-search{height:58px}}.vac-message-wrapper .vac-card-info{border-radius:4px;text-align:center;margin:10px auto;font-size:12px;padding:4px;display:block;overflow-wrap:break-word;position:relative;white-space:normal;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-card-date{max-width:150px;font-weight:500;text-transform:uppercase;color:var(--chat-message-color-date);background-color:var(--chat-message-bg-color-date)}.vac-message-wrapper .vac-card-system{max-width:250px;padding:8px 4px;color:var(--chat-message-color-system);background-color:var(--chat-message-bg-color-system)}.vac-message-wrapper .vac-line-new{color:var(--chat-message-color-new-messages);position:relative;text-align:center;font-size:13px;padding:10px 0}.vac-message-wrapper .vac-line-new:after,.vac-message-wrapper .vac-line-new:before{border-top:1px solid var(--chat-message-color-new-messages);content:"";left:0;position:absolute;top:50%;width:calc(50% - 60px)}.vac-message-wrapper .vac-line-new:before{left:auto;right:0}.vac-message-wrapper .vac-message-box{display:flex;flex:0 0 50%;max-width:50%;justify-content:flex-start;line-height:1.4}.vac-message-wrapper .vac-avatar{height:28px;width:28px;min-height:28px;min-width:28px;margin:0 0 2px;align-self:flex-end}.vac-message-wrapper .vac-avatar-current-offset{margin-right:28px}.vac-message-wrapper .vac-avatar-offset{margin-left:28px}.vac-message-wrapper .vac-failure-container{position:relative;align-self:flex-end;height:20px;width:20px;margin:0 0 2px -4px;border-radius:50%;background-color:#f44336}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:6px}.vac-message-wrapper .vac-failure-container .vac-failure-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:15px;font-weight:700}.vac-message-wrapper .vac-message-container{position:relative;padding:2px 10px;align-items:end;min-width:100px;box-sizing:content-box}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-offset-current{margin-left:50%;justify-content:flex-end}.vac-message-wrapper .vac-message-card{background-color:var(--chat-message-bg-color);color:var(--chat-message-color);border-radius:8px;font-size:14px;padding:6px 9px 3px;white-space:pre-line;max-width:100%;-webkit-transition-property:box-shadow,opacity;transition-property:box-shadow,opacity;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);will-change:box-shadow;box-shadow:0 1px 1px -1px #0000001a,0 1px 1px -1px #0000001c,0 1px 2px -1px #0000001c}.vac-message-wrapper .vac-message-highlight{box-shadow:0 1px 2px -1px #0000001a,0 1px 2px -1px #0000001c,0 1px 5px -1px #0000001c}.vac-message-wrapper .vac-message-deleted{color:var(--chat-message-color-deleted)!important;font-size:13px!important;font-style:italic!important;background-color:var(--chat-message-bg-color-deleted)!important}.vac-message-wrapper .vac-message-selected{background-color:var(--chat-message-bg-color-selected)!important;transition:background-color .2s}.vac-message-wrapper .vac-message-image{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:cover!important;background-position:center center!important;background-repeat:no-repeat!important;height:250px;width:250px;max-width:100%;border-radius:4px;margin:4px auto 5px;transition:.4s filter linear}.vac-message-wrapper .vac-text-username{font-size:13px;color:var(--chat-message-color-username);margin-bottom:2px}.vac-message-wrapper .vac-username-reply{margin-bottom:5px}.vac-message-wrapper .vac-text-timestamp{font-size:10px;color:var(--chat-message-color-timestamp);text-align:right}.vac-message-wrapper .vac-message-current{color:var(--chat-message-color-me)!important;background-color:var(--chat-message-bg-color-me)!important}.vac-message-wrapper .vac-message-current .vac-text-timestamp{color:var(--chat-message-color-timestamp-me)!important}.vac-message-wrapper .vac-progress-time{float:left;margin:-2px 0 0 40px;color:var(--chat-color);font-size:12px}.vac-message-wrapper .vac-icon-edited{-webkit-box-align:center;align-items:center;display:-webkit-inline-box;display:inline-flex;justify-content:center;letter-spacing:normal;line-height:1;text-indent:0;vertical-align:middle;margin:0 4px 2px}.vac-message-wrapper .vac-icon-edited svg{height:12px;width:12px}.vac-message-wrapper .vac-icon-check{height:14px;width:14px;vertical-align:middle;margin:-3px -3px 0 3px}@media only screen and (max-width: 768px){.vac-message-wrapper .vac-message-container{padding:2px 3px 1px}.vac-message-wrapper .vac-message-container-offset{margin-top:10px}.vac-message-wrapper .vac-message-box{flex:0 0 80%;max-width:80%}.vac-message-wrapper .vac-avatar{height:25px;width:25px;min-height:25px;min-width:25px;margin:0 6px 1px 0}.vac-message-wrapper .vac-avatar.vac-avatar-current{margin:0 0 1px 6px}.vac-message-wrapper .vac-avatar-current-offset{margin-right:31px}.vac-message-wrapper .vac-avatar-offset{margin-left:31px}.vac-message-wrapper .vac-failure-container{margin-left:2px}.vac-message-wrapper .vac-failure-container.vac-failure-container-avatar{margin-right:0}.vac-message-wrapper .vac-offset-current{margin-left:20%}.vac-message-wrapper .vac-progress-time{margin-left:37px}}.vac-audio-player{display:flex;margin:8px 0 5px}.vac-audio-player .vac-svg-button{max-width:18px;margin-left:7px}@media only screen and (max-width: 768px){.vac-audio-player{margin:4px 0 0}.vac-audio-player .vac-svg-button{max-width:16px;margin-left:5px}}.vac-player-bar{display:flex;align-items:center;max-width:calc(100% - 18px);margin-right:7px;margin-left:20px}.vac-player-bar .vac-player-progress{width:190px}.vac-player-bar .vac-player-progress .vac-line-container{position:relative;height:4px;border-radius:5px;background-color:var(--chat-message-bg-color-audio-line)}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-progress{position:absolute;height:inherit;background-color:var(--chat-message-bg-color-audio-progress);border-radius:inherit}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{position:absolute;top:-5px;margin-left:-7px;height:14px;width:14px;border-radius:50%;background-color:var(--chat-message-bg-color-audio-progress-selector);transition:transform .25s}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot__active{transform:scale(1.2)}@media only screen and (max-width: 768px){.vac-player-bar{margin-right:5px}.vac-player-bar .vac-player-progress .vac-line-container{height:3px}.vac-player-bar .vac-player-progress .vac-line-container .vac-line-dot{height:12px;width:12px;top:-5px;margin-left:-5px}}.vac-message-actions-wrapper .vac-options-container{position:absolute;top:2px;right:10px;height:40px;width:70px;overflow:hidden;border-top-right-radius:8px}.vac-message-actions-wrapper .vac-blur-container{position:absolute;height:100%;width:100%;left:8px;bottom:10px;background:var(--chat-message-bg-color);filter:blur(3px);border-bottom-left-radius:8px}.vac-message-actions-wrapper .vac-options-me{color:var(--chat-message-color-me);background:var(--chat-message-bg-color-me)}.vac-message-actions-wrapper .vac-message-options{background:var(--chat-icon-bg-dropdown-message);border-radius:50%;position:absolute;top:7px;right:7px}.vac-message-actions-wrapper .vac-message-options svg{height:17px;width:17px;padding:5px;margin:-5px}.vac-message-actions-wrapper .vac-message-emojis{position:absolute;top:6px;right:30px}.vac-message-actions-wrapper .vac-menu-options{right:15px}.vac-message-actions-wrapper .vac-menu-left{right:-118px}@media only screen and (max-width: 768px){.vac-message-actions-wrapper .vac-options-container{right:3px}.vac-message-actions-wrapper .vac-menu-left{right:-50px}}.vac-message-files-container .vac-file-wrapper{position:relative;width:fit-content}.vac-message-files-container .vac-file-wrapper .vac-file-container{height:60px;width:60px;margin:3px 0 5px;cursor:pointer;transition:all .6s}.vac-message-files-container .vac-file-wrapper .vac-file-container:hover{opacity:.85}.vac-message-files-container .vac-file-wrapper .vac-file-container svg{height:30px;width:30px}.vac-message-files-container .vac-file-wrapper .vac-file-container.vac-file-container-progress{background-color:#0000004d}.vac-message-file-container{position:relative;z-index:0}.vac-message-file-container .vac-message-image-container{cursor:pointer}.vac-message-file-container .vac-image-buttons{position:absolute;width:100%;height:100%;border-radius:4px;background:linear-gradient(to bottom,rgba(0,0,0,0) 55%,rgba(0,0,0,.02) 60%,rgba(0,0,0,.05) 65%,rgba(0,0,0,.1) 70%,rgba(0,0,0,.2) 75%,rgba(0,0,0,.3) 80%,rgba(0,0,0,.5) 85%,rgba(0,0,0,.6) 90%,rgba(0,0,0,.7) 95%,rgba(0,0,0,.8) 100%)}.vac-message-file-container .vac-image-buttons svg{height:26px;width:26px}.vac-message-file-container .vac-image-buttons .vac-button-view,.vac-message-file-container .vac-image-buttons .vac-button-download{position:absolute;bottom:6px;left:7px}.vac-message-file-container .vac-image-buttons :first-child{left:40px}.vac-message-file-container .vac-image-buttons .vac-button-view{max-width:18px;bottom:8px}.vac-message-file-container .vac-video-container{width:350px;max-width:100%;margin:4px auto 5px;cursor:pointer}.vac-message-file-container .vac-video-container video{width:100%;height:100%;border-radius:4px}.vac-button-reaction{display:inline-flex;align-items:center;border:var(--chat-message-border-style-reaction);outline:none;background:var(--chat-message-bg-color-reaction);border-radius:4px;margin:4px 2px 0;transition:.3s;padding:0 5px;font-size:18px;line-height:23px}.vac-button-reaction span{font-size:11px;font-weight:500;min-width:7px;color:var(--chat-message-color-reaction-counter)}.vac-button-reaction:hover{border:var(--chat-message-border-style-reaction-hover);background:var(--chat-message-bg-color-reaction-hover);cursor:pointer}.vac-button-reaction.vac-reaction-me{border:var(--chat-message-border-style-reaction-me);background:var(--chat-message-bg-color-reaction-me)}.vac-button-reaction.vac-reaction-me span{color:var(--chat-message-color-reaction-counter-me)}.vac-button-reaction.vac-reaction-me:hover{border:var(--chat-message-border-style-reaction-hover-me);background:var(--chat-message-bg-color-reaction-hover-me)}.vac-reply-message{background:var(--chat-message-bg-color-reply);border-radius:4px;margin:-1px -5px 8px;padding:8px 10px}.vac-reply-message .vac-reply-username{color:var(--chat-message-color-reply-username);font-size:12px;line-height:15px;margin-bottom:2px}.vac-reply-message .vac-image-reply-container{width:70px}.vac-reply-message .vac-image-reply-container .vac-message-image-reply{height:70px;width:70px;margin:4px auto 3px}.vac-reply-message .vac-video-reply-container{width:200px;max-width:100%}.vac-reply-message .vac-video-reply-container video{width:100%;height:100%;border-radius:4px}.vac-reply-message .vac-reply-content{font-size:12px;color:var(--chat-message-color-reply-content)}.vac-reply-message .vac-file-container{height:60px;width:60px}.vac-emoji-wrapper{position:relative;display:flex}.vac-emoji-wrapper .vac-emoji-reaction svg{height:19px;width:19px}.vac-emoji-wrapper .vac-emoji-picker{position:absolute;z-index:9999;bottom:32px;right:10px;width:300px;padding-top:4px;overflow:scroll;box-sizing:border-box;border-radius:.5rem;background:var(--chat-emoji-bg-color);box-shadow:0 1px 2px -2px #0000001a,0 1px 2px -1px #0000001a,0 1px 2px 1px #0000001a;scrollbar-width:none}.vac-emoji-wrapper .vac-emoji-picker::-webkit-scrollbar{display:none}.vac-emoji-wrapper .vac-emoji-picker.vac-picker-reaction{position:fixed;top:initial;right:initial}.vac-emoji-wrapper .vac-emoji-picker emoji-picker{height:100%;width:100%;--emoji-size: 1.2rem;--background: var(--chat-emoji-bg-color);--emoji-padding: .4rem;--border-color: var(--chat-sidemenu-border-color-search);--button-hover-background: var(--chat-sidemenu-bg-color-hover);--button-active-background: var(--chat-sidemenu-bg-color-hover)}.vac-format-message-wrapper .vac-format-container{display:inline}.vac-format-message-wrapper .vac-icon-deleted{height:14px;width:14px;vertical-align:middle;margin:-2px 2px 0 0;fill:var(--chat-message-color-deleted)}.vac-format-message-wrapper .vac-icon-deleted.vac-icon-deleted-room{margin:-3px 1px 0 0;fill:var(--chat-room-color-message)}.vac-format-message-wrapper .vac-image-link-container{background-color:var(--chat-message-bg-color-media);padding:8px;margin:2px auto;border-radius:4px}.vac-format-message-wrapper .vac-image-link{position:relative;background-color:var(--chat-message-bg-color-image)!important;background-size:contain;background-position:center center!important;background-repeat:no-repeat!important;height:150px;width:150px;max-width:100%;border-radius:4px;margin:0 auto}.vac-format-message-wrapper .vac-image-link-message{max-width:166px;font-size:12px}.vac-loader-wrapper.vac-container-center{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-loader-wrapper.vac-container-top{padding:21px}.vac-loader-wrapper.vac-container-top #vac-circle{height:20px;width:20px}.vac-loader-wrapper #vac-circle{margin:auto;height:28px;width:28px;border:3px rgba(0,0,0,.25) solid;border-top:3px var(--chat-color-spinner) solid;border-right:3px var(--chat-color-spinner) solid;border-bottom:3px var(--chat-color-spinner) solid;border-radius:50%;-webkit-animation:vac-spin 1s infinite linear;animation:vac-spin 1s infinite linear}@media only screen and (max-width: 768px){.vac-loader-wrapper #vac-circle{height:24px;width:24px}.vac-loader-wrapper.vac-container-top{padding:18px}.vac-loader-wrapper.vac-container-top #vac-circle{height:16px;width:16px}}@-webkit-keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes vac-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}#vac-icon-search{fill:var(--chat-icon-color-search)}#vac-icon-add{fill:var(--chat-icon-color-add)}#vac-icon-toggle{fill:var(--chat-icon-color-toggle)}#vac-icon-menu{fill:var(--chat-icon-color-menu)}#vac-icon-close{fill:var(--chat-icon-color-close)}#vac-icon-close-image{fill:var(--chat-icon-color-close-image)}#vac-icon-file{fill:var(--chat-icon-color-file)}#vac-icon-paperclip{fill:var(--chat-icon-color-paperclip)}#vac-icon-close-outline{fill:var(--chat-icon-color-close-outline)}#vac-icon-close-outline-preview{fill:var(--chat-icon-color-close-preview)}#vac-icon-send{fill:var(--chat-icon-color-send)}#vac-icon-send-disabled{fill:var(--chat-icon-color-send-disabled)}#vac-icon-emoji{fill:var(--chat-icon-color-emoji)}#vac-icon-emoji-reaction{fill:var(--chat-icon-color-emoji-reaction)}#vac-icon-document{fill:var(--chat-icon-color-document)}#vac-icon-pencil{fill:var(--chat-icon-color-pencil)}#vac-icon-checkmark,#vac-icon-double-checkmark{fill:var(--chat-icon-color-checkmark)}#vac-icon-checkmark-seen,#vac-icon-double-checkmark-seen{fill:var(--chat-icon-color-checkmark-seen)}#vac-icon-eye{fill:var(--chat-icon-color-eye)}#vac-icon-dropdown-message{fill:var(--chat-icon-color-dropdown-message)}#vac-icon-dropdown-room{fill:var(--chat-icon-color-dropdown-room)}#vac-icon-dropdown-scroll{fill:var(--chat-icon-color-dropdown-scroll)}#vac-icon-audio-play{fill:var(--chat-icon-color-audio-play)}#vac-icon-audio-pause{fill:var(--chat-icon-color-audio-pause)}.vac-progress-wrapper{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:9}.vac-progress-wrapper circle{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%}.vac-progress-wrapper .vac-progress-content{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:-1;margin-top:-2px;background-color:#000000b3;border-radius:50%}.vac-progress-wrapper .vac-progress-content .vac-progress-text{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);font-weight:700;color:#fff}.vac-progress-wrapper .vac-progress-content .vac-progress-text .vac-progress-pourcent{font-size:9px;font-weight:400}
`;const b0={name:"ChatContainer",components:{RoomsList:Sh,Room:n0,MediaPreview:f0},props:{height:{type:String,default:"600px"},theme:{type:String,default:"light"},styles:{type:[Object,String],default:()=>({})},responsiveBreakpoint:{type:Number,default:900},singleRoom:{type:[Boolean,String],default:!1},roomsListOpened:{type:[Boolean,String],default:!0},textMessages:{type:[Object,String],default:()=>({})},currentUserId:{type:String,default:""},rooms:{type:[Array,String],default:()=>[]},roomsOrder:{type:String,default:"desc"},loadingRooms:{type:[Boolean,String],default:!1},roomsLoaded:{type:[Boolean,String],default:!1},roomId:{type:String,default:null},loadFirstRoom:{type:[Boolean,String],default:!0},messages:{type:[Array,String],default:()=>[]},messagesLoaded:{type:[Boolean,String],default:!1},roomActions:{type:[Array,String],default:()=>[]},menuActions:{type:[Array,String],default:()=>[]},messageActions:{type:[Array,String],default:()=>[{name:"replyMessage",title:"Reply"},{name:"editMessage",title:"Edit Message",onlyMe:!0},{name:"deleteMessage",title:"Delete Message",onlyMe:!0},{name:"selectMessages",title:"Select"}]},messageSelectionActions:{type:[Array,String],default:()=>[]},autoScroll:{type:[Object,String],default:()=>({send:{new:!0,newAfterScrollUp:!0},receive:{new:!0,newAfterScrollUp:!1}})},customSearchRoomEnabled:{type:[Boolean,String],default:!1},showSearch:{type:[Boolean,String],default:!0},showAddRoom:{type:[Boolean,String],default:!0},showSendIcon:{type:[Boolean,String],default:!0},showFiles:{type:[Boolean,String],default:!0},showAudio:{type:[Boolean,String],default:!0},audioBitRate:{type:Number,default:128},audioSampleRate:{type:Number,default:44100},showEmojis:{type:[Boolean,String],default:!0},showReactionEmojis:{type:[Boolean,String],default:!0},showNewMessagesDivider:{type:[Boolean,String],default:!0},showFooter:{type:[Boolean,String],default:!0},textFormatting:{type:[Object,String],default:()=>({disabled:!1,italic:"_",bold:"*",strike:"~",underline:"\xB0",multilineCode:"```",inlineCode:"`"})},linkOptions:{type:[Object,String],default:()=>({disabled:!1,target:"_blank",rel:null})},roomInfoEnabled:{type:[Boolean,String],default:!1},textareaActionEnabled:{type:[Boolean,String],default:!1},textareaAutoFocus:{type:[Boolean,String],default:!0},userTagsEnabled:{type:[Boolean,String],default:!0},emojisSuggestionEnabled:{type:[Boolean,String],default:!0},roomMessage:{type:String,default:""},scrollDistance:{type:Number,default:60},acceptedFiles:{type:String,default:"*"},templatesText:{type:[Array,String],default:()=>[]},mediaPreviewEnabled:{type:[Boolean,String],default:!0},usernameOptions:{type:[Object,String],default:()=>({minUsers:3,currentUser:!1})}},emits:["toggle-rooms-list","room-info","fetch-messages","send-message","edit-message","delete-message","open-file","open-user-tag","open-failed-message","menu-action-handler","message-action-handler","send-message-reaction","typing-message","textarea-action-handler","fetch-more-rooms","add-room","search-room","room-action-handler","message-selection-action-handler"],data(){return{slots:[],room:{},loadingMoreRooms:!1,showRoomsList:!0,isMobile:!1,showMediaPreview:!1,previewFile:{}}},computed:{t(){return{...h0,...this.textMessagesCasted}},cssVars(){const e=g0[this.theme],t={};return Object.keys(e).map(o=>{t[o]={...e[o],...this.stylesCasted[o]||{}}}),p0(t)},orderedRooms(){return this.roomsCasted.slice().sort((e,t)=>{const o=e.index||0,s=t.index||0;return this.roomsOrder==="asc"?o<s?-1:s<o?1:0:o>s?-1:s>o?1:0})},singleRoomCasted(){return this.castBoolean(this.singleRoom)},roomsListOpenedCasted(){return this.castBoolean(this.roomsListOpened)},loadingRoomsCasted(){return this.castBoolean(this.loadingRooms)},roomsLoadedCasted(){return this.castBoolean(this.roomsLoaded)},loadFirstRoomCasted(){return this.castBoolean(this.loadFirstRoom)},messagesLoadedCasted(){return this.castBoolean(this.messagesLoaded)},showSearchCasted(){return this.castBoolean(this.showSearch)},showAddRoomCasted(){return this.castBoolean(this.showAddRoom)},showSendIconCasted(){return this.castBoolean(this.showSendIcon)},showFilesCasted(){return this.castBoolean(this.showFiles)},showAudioCasted(){return this.castBoolean(this.showAudio)},showEmojisCasted(){return this.castBoolean(this.showEmojis)},showReactionEmojisCasted(){return this.castBoolean(this.showReactionEmojis)},showNewMessagesDividerCasted(){return this.castBoolean(this.showNewMessagesDivider)},showFooterCasted(){return this.castBoolean(this.showFooter)},roomInfoEnabledCasted(){return this.castBoolean(this.roomInfoEnabled)},textareaActionEnabledCasted(){return this.castBoolean(this.textareaActionEnabled)},textareaAutoFocusCasted(){return this.castBoolean(this.textareaAutoFocus)},userTagsEnabledCasted(){return this.castBoolean(this.userTagsEnabled)},emojisSuggestionEnabledCasted(){return this.castBoolean(this.emojisSuggestionEnabled)},mediaPreviewEnabledCasted(){return this.castBoolean(this.mediaPreviewEnabled)},roomsCasted(){return this.castArray(this.rooms)},messagesCasted(){return this.castArray(this.messages)},roomActionsCasted(){return this.castArray(this.roomActions)},menuActionsCasted(){return this.castArray(this.menuActions)},messageActionsCasted(){return this.castArray(this.messageActions)},messageSelectionActionsCasted(){return this.castArray(this.messageSelectionActions)},templatesTextCasted(){return this.castArray(this.templatesText)},stylesCasted(){return this.castObject(this.styles)},textMessagesCasted(){return this.castObject(this.textMessages)},autoScrollCasted(){return this.castObject(this.autoScroll)},textFormattingCasted(){return this.castObject(this.textFormatting)},linkOptionsCasted(){return this.castObject(this.linkOptions)},usernameOptionsCasted(){return this.castObject(this.usernameOptions)}},watch:{roomsCasted:{immediate:!0,deep:!0,handler(e,t){if((!e[0]||!e.find(o=>o.roomId===this.room.roomId))&&(this.showRoomsList=!0),!this.loadingMoreRooms&&this.loadFirstRoomCasted&&e[0]&&(!t||e.length!==t.length))if(this.roomId){const o=e.find(s=>s.roomId===this.roomId)||{};this.fetchRoom({room:o})}else!this.isMobile||this.singleRoomCasted?this.fetchRoom({room:this.orderedRooms[0]}):this.showRoomsList=!0}},loadingRoomsCasted(e){e&&(this.room={})},roomId:{immediate:!0,handler(e,t){if(e&&!this.loadingRoomsCasted&&this.roomsCasted.length){const o=this.roomsCasted.find(s=>s.roomId===e);this.fetchRoom({room:o})}else t&&!e&&(this.room={})}},room(e){!e||Object.entries(e).length===0||(Ib(e),e.users.forEach(t=>{jb(t)}))},roomsListOpenedCasted:{immediate:!0,handler(e){this.showRoomsList=e}}},created(){this.updateResponsive(),window.addEventListener("resize",e=>{e.isTrusted&&this.updateResponsive()})},updated(){const e=document.querySelectorAll("[slot]");this.slots.length!==e.length&&(this.slots=e)},methods:{castBoolean(e){return e==="true"||e===!0},castArray(e){return e?Array.isArray(e)?e:JSON.parse(e):[]},castObject(e){return e?typeof e=="object"?e:JSON.parse(e):{}},updateResponsive(){this.isMobile=window.innerWidth<Number(this.responsiveBreakpoint)},toggleRoomsList(){this.showRoomsList=!this.showRoomsList,this.isMobile&&(this.room={}),this.$emit("toggle-rooms-list",{opened:this.showRoomsList})},fetchRoom({room:e}){this.room=e,this.fetchMessages({reset:!0}),this.isMobile&&(this.showRoomsList=!1)},fetchMoreRooms(){this.$emit("fetch-more-rooms")},roomInfo(){this.$emit("room-info",this.room)},addRoom(){this.$emit("add-room")},searchRoom(e){this.$emit("search-room",{value:e,roomId:this.room.roomId})},fetchMessages(e){this.$emit("fetch-messages",{room:this.room,options:e})},sendMessage(e){this.$emit("send-message",{...e,roomId:this.room.roomId})},editMessage(e){this.$emit("edit-message",{...e,roomId:this.room.roomId})},deleteMessage(e){this.$emit("delete-message",{message:e,roomId:this.room.roomId})},openFile({message:e,file:t}){this.mediaPreviewEnabledCasted&&t.action==="preview"?(this.previewFile=t.file,this.showMediaPreview=!0):this.$emit("open-file",{message:e,file:t})},openUserTag({user:e}){this.$emit("open-user-tag",{user:e})},openFailedMessage({message:e}){this.$emit("open-failed-message",{message:e,roomId:this.room.roomId})},menuActionHandler(e){this.$emit("menu-action-handler",{action:e,roomId:this.room.roomId})},roomActionHandler({action:e,roomId:t}){this.$emit("room-action-handler",{action:e,roomId:t})},messageActionHandler(e){this.$emit("message-action-handler",{...e,roomId:this.room.roomId})},messageSelectionActionHandler(e){this.$emit("message-selection-action-handler",{...e,roomId:this.room.roomId})},sendMessageReaction(e){this.$emit("send-message-reaction",{...e,roomId:this.room.roomId})},typingMessage(e){this.$emit("typing-message",{message:e,roomId:this.room.roomId})},textareaActionHandler(e){this.$emit("textarea-action-handler",{message:e,roomId:this.room.roomId})}}},y0={class:"vac-chat-container"};function w0(e,t,o,s,n,r){const i=$("rooms-list"),a=$("room"),c=$("media-preview");return p(),w("div",{class:"vac-card-window",style:Me([{height:o.height},r.cssVars])},[T("div",y0,[r.singleRoomCasted?B("",!0):(p(),Oe(i,{key:0,"current-user-id":o.currentUserId,rooms:r.orderedRooms,"loading-rooms":r.loadingRoomsCasted,"rooms-loaded":r.roomsLoadedCasted,room:n.room,"room-actions":r.roomActionsCasted,"custom-search-room-enabled":o.customSearchRoomEnabled,"text-messages":r.t,"show-search":r.showSearchCasted,"show-add-room":r.showAddRoomCasted,"show-rooms-list":n.showRoomsList&&r.roomsListOpenedCasted,"text-formatting":r.textFormattingCasted,"link-options":r.linkOptionsCasted,"is-mobile":n.isMobile,"scroll-distance":o.scrollDistance,onFetchRoom:r.fetchRoom,onFetchMoreRooms:r.fetchMoreRooms,onLoadingMoreRooms:t[0]||(t[0]=l=>n.loadingMoreRooms=l),onAddRoom:r.addRoom,onSearchRoom:r.searchRoom,onRoomActionHandler:r.roomActionHandler},Ie({_:2},[ue(n.slots,l=>({name:l.slot,fn:Q(u=>[U(e.$slots,l.slot,Le(Ae(u)))])}))]),1032,["current-user-id","rooms","loading-rooms","rooms-loaded","room","room-actions","custom-search-room-enabled","text-messages","show-search","show-add-room","show-rooms-list","text-formatting","link-options","is-mobile","scroll-distance","onFetchRoom","onFetchMoreRooms","onAddRoom","onSearchRoom","onRoomActionHandler"])),F(a,{"current-user-id":o.currentUserId,rooms:r.roomsCasted,"room-id":n.room.roomId||"","load-first-room":r.loadFirstRoomCasted,messages:r.messagesCasted,"room-message":o.roomMessage,"messages-loaded":r.messagesLoadedCasted,"menu-actions":r.menuActionsCasted,"message-actions":r.messageActionsCasted,"message-selection-actions":r.messageSelectionActionsCasted,"auto-scroll":r.autoScrollCasted,"show-send-icon":r.showSendIconCasted,"show-files":r.showFilesCasted,"show-audio":r.showAudioCasted,"audio-bit-rate":o.audioBitRate,"audio-sample-rate":o.audioSampleRate,"show-emojis":r.showEmojisCasted,"show-reaction-emojis":r.showReactionEmojisCasted,"show-new-messages-divider":r.showNewMessagesDividerCasted,"show-footer":r.showFooterCasted,"text-messages":r.t,"single-room":r.singleRoomCasted,"show-rooms-list":n.showRoomsList&&r.roomsListOpenedCasted,"text-formatting":r.textFormattingCasted,"link-options":r.linkOptionsCasted,"is-mobile":n.isMobile,"loading-rooms":r.loadingRoomsCasted,"room-info-enabled":r.roomInfoEnabledCasted,"textarea-action-enabled":r.textareaActionEnabledCasted,"textarea-auto-focus":r.textareaAutoFocusCasted,"user-tags-enabled":r.userTagsEnabledCasted,"emojis-suggestion-enabled":r.emojisSuggestionEnabledCasted,"scroll-distance":o.scrollDistance,"accepted-files":o.acceptedFiles,"templates-text":r.templatesTextCasted,"username-options":r.usernameOptionsCasted,onToggleRoomsList:r.toggleRoomsList,onRoomInfo:r.roomInfo,onFetchMessages:r.fetchMessages,onSendMessage:r.sendMessage,onEditMessage:r.editMessage,onDeleteMessage:r.deleteMessage,onOpenFile:r.openFile,onOpenUserTag:r.openUserTag,onOpenFailedMessage:r.openFailedMessage,onMenuActionHandler:r.menuActionHandler,onMessageActionHandler:r.messageActionHandler,onMessageSelectionActionHandler:r.messageSelectionActionHandler,onSendMessageReaction:r.sendMessageReaction,onTypingMessage:r.typingMessage,onTextareaActionHandler:r.textareaActionHandler},Ie({_:2},[ue(n.slots,l=>({name:l.slot,fn:Q(u=>[U(e.$slots,l.slot,Le(Ae(u)))])}))]),1032,["current-user-id","rooms","room-id","load-first-room","messages","room-message","messages-loaded","menu-actions","message-actions","message-selection-actions","auto-scroll","show-send-icon","show-files","show-audio","audio-bit-rate","audio-sample-rate","show-emojis","show-reaction-emojis","show-new-messages-divider","show-footer","text-messages","single-room","show-rooms-list","text-formatting","link-options","is-mobile","loading-rooms","room-info-enabled","textarea-action-enabled","textarea-auto-focus","user-tags-enabled","emojis-suggestion-enabled","scroll-distance","accepted-files","templates-text","username-options","onToggleRoomsList","onRoomInfo","onFetchMessages","onSendMessage","onEditMessage","onDeleteMessage","onOpenFile","onOpenUserTag","onOpenFailedMessage","onMenuActionHandler","onMessageActionHandler","onMessageSelectionActionHandler","onSendMessageReaction","onTypingMessage","onTextareaActionHandler"])]),F(Ge,{name:"vac-fade-preview",appear:""},{default:Q(()=>[n.showMediaPreview?(p(),Oe(c,{key:0,file:n.previewFile,onCloseMediaPreview:t[1]||(t[1]=l=>n.showMediaPreview=!1)},Ie({_:2},[ue(n.slots,l=>({name:l.slot,fn:Q(u=>[U(e.$slots,l.slot,Le(Ae(u)))])}))]),1032,["file"])):B("",!0)]),_:3})],4)}var x0=Fe(b0,[["render",w0],["styles",[v0]]]);const Ol=Qu(x0),Al="vue-advanced-chat";function _0(){customElements.get(Al)||customElements.define(Al,Ol)}var Ll={};function k0(e){return e&&e.__esModule?e:{default:e}}var E0=k0,Il={exports:{}};(function(e){var t=function(o){var s=Object.prototype,n=s.hasOwnProperty,r=Object.defineProperty||function(E,x,O){E[x]=O.value},i,a=typeof Symbol=="function"?Symbol:{},c=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function d(E,x,O){return Object.defineProperty(E,x,{value:O,enumerable:!0,configurable:!0,writable:!0}),E[x]}try{d({},"")}catch{d=function(x,O,W){return x[O]=W}}function f(E,x,O,W){var N=x&&x.prototype instanceof se?x:se,ae=Object.create(N.prototype),be=new Ce(W||[]);return r(ae,"_invoke",{value:K(E,O,be)}),ae}o.wrap=f;function g(E,x,O){try{return{type:"normal",arg:E.call(x,O)}}catch(W){return{type:"throw",arg:W}}}var y="suspendedStart",L="suspendedYield",A="executing",G="completed",le={};function se(){}function ie(){}function ve(){}var re={};d(re,c,function(){return this});var V=Object.getPrototypeOf,D=V&&V(V(he([])));D&&D!==s&&n.call(D,c)&&(re=D);var ee=ve.prototype=se.prototype=Object.create(re);ie.prototype=ve,r(ee,"constructor",{value:ve,configurable:!0}),r(ve,"constructor",{value:ie,configurable:!0}),ie.displayName=d(ve,u,"GeneratorFunction");function me(E){["next","throw","return"].forEach(function(x){d(E,x,function(O){return this._invoke(x,O)})})}o.isGeneratorFunction=function(E){var x=typeof E=="function"&&E.constructor;return x?x===ie||(x.displayName||x.name)==="GeneratorFunction":!1},o.mark=function(E){return Object.setPrototypeOf?Object.setPrototypeOf(E,ve):(E.__proto__=ve,d(E,u,"GeneratorFunction")),E.prototype=Object.create(ee),E},o.awrap=function(E){return{__await:E}};function fe(E,x){function O(ae,be,ze,Ee){var qe=g(E[ae],E,be);if(qe.type==="throw")Ee(qe.arg);else{var gt=qe.arg,Ye=gt.value;return Ye&&typeof Ye=="object"&&n.call(Ye,"__await")?x.resolve(Ye.__await).then(function(Ne){O("next",Ne,ze,Ee)},function(Ne){O("throw",Ne,ze,Ee)}):x.resolve(Ye).then(function(Ne){gt.value=Ne,ze(gt)},function(Ne){return O("throw",Ne,ze,Ee)})}}var W;function N(ae,be){function ze(){return new x(function(Ee,qe){O(ae,be,Ee,qe)})}return W=W?W.then(ze,ze):ze()}r(this,"_invoke",{value:N})}me(fe.prototype),d(fe.prototype,l,function(){return this}),o.AsyncIterator=fe,o.async=function(E,x,O,W,N){N===void 0&&(N=Promise);var ae=new fe(f(E,x,O,W),N);return o.isGeneratorFunction(x)?ae:ae.next().then(function(be){return be.done?be.value:ae.next()})};function K(E,x,O){var W=y;return function(ae,be){if(W===A)throw new Error("Generator is already running");if(W===G){if(ae==="throw")throw be;return de()}for(O.method=ae,O.arg=be;;){var ze=O.delegate;if(ze){var Ee=we(ze,O);if(Ee){if(Ee===le)continue;return Ee}}if(O.method==="next")O.sent=O._sent=O.arg;else if(O.method==="throw"){if(W===y)throw W=G,O.arg;O.dispatchException(O.arg)}else O.method==="return"&&O.abrupt("return",O.arg);W=A;var qe=g(E,x,O);if(qe.type==="normal"){if(W=O.done?G:L,qe.arg===le)continue;return{value:qe.arg,done:O.done}}else qe.type==="throw"&&(W=G,O.method="throw",O.arg=qe.arg)}}}function we(E,x){var O=E.iterator[x.method];if(O===i){if(x.delegate=null,x.method==="throw"){if(E.iterator.return&&(x.method="return",x.arg=i,we(E,x),x.method==="throw"))return le;x.method="throw",x.arg=new TypeError("The iterator does not provide a 'throw' method")}return le}var W=g(O,E.iterator,x.arg);if(W.type==="throw")return x.method="throw",x.arg=W.arg,x.delegate=null,le;var N=W.arg;if(!N)return x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,le;if(N.done)x[E.resultName]=N.value,x.next=E.nextLoc,x.method!=="return"&&(x.method="next",x.arg=i);else return N;return x.delegate=null,le}me(ee),d(ee,u,"Generator"),d(ee,c,function(){return this}),d(ee,"toString",function(){return"[object Generator]"});function Se(E){var x={tryLoc:E[0]};1 in E&&(x.catchLoc=E[1]),2 in E&&(x.finallyLoc=E[2],x.afterLoc=E[3]),this.tryEntries.push(x)}function He(E){var x=E.completion||{};x.type="normal",delete x.arg,E.completion=x}function Ce(E){this.tryEntries=[{tryLoc:"root"}],E.forEach(Se,this),this.reset(!0)}o.keys=function(E){var x=Object(E),O=[];for(var W in x)O.push(W);return O.reverse(),function N(){for(;O.length;){var ae=O.pop();if(ae in x)return N.value=ae,N.done=!1,N}return N.done=!0,N}};function he(E){if(E){var x=E[c];if(x)return x.call(E);if(typeof E.next=="function")return E;if(!isNaN(E.length)){var O=-1,W=function N(){for(;++O<E.length;)if(n.call(E,O))return N.value=E[O],N.done=!1,N;return N.value=i,N.done=!0,N};return W.next=W}}return{next:de}}o.values=he;function de(){return{value:i,done:!0}}return Ce.prototype={constructor:Ce,reset:function(E){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(He),!E)for(var x in this)x.charAt(0)==="t"&&n.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=i)},stop:function(){this.done=!0;var E=this.tryEntries[0],x=E.completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(E){if(this.done)throw E;var x=this;function O(Ee,qe){return ae.type="throw",ae.arg=E,x.next=Ee,qe&&(x.method="next",x.arg=i),!!qe}for(var W=this.tryEntries.length-1;W>=0;--W){var N=this.tryEntries[W],ae=N.completion;if(N.tryLoc==="root")return O("end");if(N.tryLoc<=this.prev){var be=n.call(N,"catchLoc"),ze=n.call(N,"finallyLoc");if(be&&ze){if(this.prev<N.catchLoc)return O(N.catchLoc,!0);if(this.prev<N.finallyLoc)return O(N.finallyLoc)}else if(be){if(this.prev<N.catchLoc)return O(N.catchLoc,!0)}else if(ze){if(this.prev<N.finallyLoc)return O(N.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(E,x){for(var O=this.tryEntries.length-1;O>=0;--O){var W=this.tryEntries[O];if(W.tryLoc<=this.prev&&n.call(W,"finallyLoc")&&this.prev<W.finallyLoc){var N=W;break}}N&&(E==="break"||E==="continue")&&N.tryLoc<=x&&x<=N.finallyLoc&&(N=null);var ae=N?N.completion:{};return ae.type=E,ae.arg=x,N?(this.method="next",this.next=N.finallyLoc,le):this.complete(ae)},complete:function(E,x){if(E.type==="throw")throw E.arg;return E.type==="break"||E.type==="continue"?this.next=E.arg:E.type==="return"?(this.rval=this.arg=E.arg,this.method="return",this.next="end"):E.type==="normal"&&x&&(this.next=x),le},finish:function(E){for(var x=this.tryEntries.length-1;x>=0;--x){var O=this.tryEntries[x];if(O.finallyLoc===E)return this.complete(O.completion,O.afterLoc),He(O),le}},catch:function(E){for(var x=this.tryEntries.length-1;x>=0;--x){var O=this.tryEntries[x];if(O.tryLoc===E){var W=O.completion;if(W.type==="throw"){var N=W.arg;He(O)}return N}}throw new Error("illegal catch attempt")},delegateYield:function(E,x,O){return this.delegate={iterator:he(E),resultName:x,nextLoc:O},this.method==="next"&&(this.arg=i),le}},o}(e.exports);try{regeneratorRuntime=t}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}})(Il);var T0=Il.exports;function jl(e,t,o,s,n,r,i){try{var a=e[r](i),c=a.value}catch(l){o(l);return}a.done?t(c):Promise.resolve(c).then(s,n)}function S0(e){return function(){var t=this,o=arguments;return new Promise(function(s,n){var r=e.apply(t,o);function i(c){jl(r,s,n,i,a,"next",c)}function a(c){jl(r,s,n,i,a,"throw",c)}i(void 0)})}}var M0=S0;(function(e){var t=E0;Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=t(T0),s=t(M0);function n(i){return r.apply(this,arguments)}function r(){return(r=(0,s.default)(o.default.mark(function i(a){var c,l;return o.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c=document.createElement("video"),l=new Promise(function(d,f){c.addEventListener("loadedmetadata",function(){c.duration===1/0?(c.currentTime=Number.MAX_SAFE_INTEGER,c.ontimeupdate=function(){c.ontimeupdate=null,d(c.duration),c.currentTime=0}):d(c.duration)}),c.onerror=function(g){return f(g.target.error)}}),c.src=typeof a=="string"||a instanceof String?a:window.URL.createObjectURL(a),u.abrupt("return",l);case 4:case"end":return u.stop()}},i)}))).apply(this,arguments)}})(Ll);var R0=Om(Ll);const Mo=()=>({value:!0}),Is=()=>({value:!1}),C0=()=>new Error("MISSING_PERMISSION"),O0=()=>new Error("ALREADY_RECORDING"),A0=()=>new Error("DEVICE_CANNOT_VOICE_RECORD"),Pl=()=>new Error("FAILED_TO_RECORD"),mi=()=>new Error("RECORDING_HAS_NOT_STARTED"),Nl=()=>new Error("FAILED_TO_FETCH_RECORDING"),L0=()=>new Error("COULD_NOT_QUERY_PERMISSION_STATUS"),I0=["audio/aac","audio/webm;codecs=opus","audio/mp4","audio/webm","audio/ogg;codecs=opus"],Ul=()=>new Promise(()=>{});class Rt{constructor(){this.mediaRecorder=null,this.chunks=[],this.pendingResult=Ul()}static async canDeviceVoiceRecord(){var t;return((t=navigator==null?void 0:navigator.mediaDevices)===null||t===void 0?void 0:t.getUserMedia)==null||Rt.getSupportedMimeType()==null?Is():Mo()}async startRecording(){if(this.mediaRecorder!=null)throw O0();if(!(await Rt.canDeviceVoiceRecord()).value)throw A0();if(!(await Rt.hasAudioRecordingPermission().catch(()=>Mo())).value)throw C0();return navigator.mediaDevices.getUserMedia({audio:!0}).then(this.onSuccessfullyStartedRecording.bind(this)).catch(this.onFailedToStartRecording.bind(this)),Mo()}async stopRecording(){if(this.mediaRecorder==null)throw mi();try{return this.mediaRecorder.stop(),this.mediaRecorder.stream.getTracks().forEach(t=>t.stop()),this.pendingResult}catch{throw Nl()}finally{this.prepareInstanceForNextOperation()}}static async hasAudioRecordingPermission(){return navigator.permissions.query({name:"microphone"}).then(t=>({value:t.state==="granted"})).catch(()=>{throw L0()})}static async requestAudioRecordingPermission(){return(await Rt.hasAudioRecordingPermission().catch(()=>Is())).value?Mo():navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>Mo()).catch(()=>Is())}pauseRecording(){if(this.mediaRecorder==null)throw mi();return this.mediaRecorder.state==="recording"?(this.mediaRecorder.pause(),Promise.resolve(Mo())):Promise.resolve(Is())}resumeRecording(){if(this.mediaRecorder==null)throw mi();return this.mediaRecorder.state==="paused"?(this.mediaRecorder.resume(),Promise.resolve(Mo())):Promise.resolve(Is())}getCurrentStatus(){return this.mediaRecorder==null?Promise.resolve({status:"NONE"}):this.mediaRecorder.state==="recording"?Promise.resolve({status:"RECORDING"}):this.mediaRecorder.state==="paused"?Promise.resolve({status:"PAUSED"}):Promise.resolve({status:"NONE"})}static getSupportedMimeType(){if((MediaRecorder==null?void 0:MediaRecorder.isTypeSupported)==null)return null;const t=I0.find(o=>MediaRecorder.isTypeSupported(o));return t!=null?t:null}onSuccessfullyStartedRecording(t){this.pendingResult=new Promise((o,s)=>{this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onerror=()=>{s(Pl()),this.prepareInstanceForNextOperation()},this.mediaRecorder.onstop=async()=>{const n=Rt.getSupportedMimeType();if(n==null)s(Nl());else{const r=new Blob(this.chunks,{type:n}),i=await Rt.blobToBase64(r),a=await R0(r);this.prepareInstanceForNextOperation(),o({value:{recordDataBase64:i,mimeType:n,msDuration:a*1e3}})}},this.mediaRecorder.ondataavailable=n=>this.chunks.push(n.data),this.mediaRecorder.start()})}onFailedToStartRecording(){throw this.prepareInstanceForNextOperation(),Pl()}static blobToBase64(t){return new Promise(o=>{const s=new FileReader;s.onloadend=()=>{const n=String(s.result),r=n.split("base64,"),i=r.length>1?r[1]:n;o(i.trim())},s.readAsDataURL(t)})}prepareInstanceForNextOperation(){if(this.mediaRecorder!=null&&this.mediaRecorder.state==="recording")try{this.mediaRecorder.stop()}catch{}this.pendingResult=Ul(),this.mediaRecorder=null,this.chunks=[]}}class j0 extends di{constructor(){super(...arguments),this.voiceRecorderInstance=new Rt}canDeviceVoiceRecord(){return Rt.canDeviceVoiceRecord()}hasAudioRecordingPermission(){return Rt.hasAudioRecordingPermission()}requestAudioRecordingPermission(){return Rt.requestAudioRecordingPermission()}startRecording(){return this.voiceRecorderInstance.startRecording()}stopRecording(){return this.voiceRecorderInstance.stopRecording()}pauseRecording(){return this.voiceRecorderInstance.pauseRecording()}resumeRecording(){return this.voiceRecorderInstance.resumeRecording()}getCurrentStatus(){return this.voiceRecorderInstance.getCurrentStatus()}}var P0=Object.freeze(Object.defineProperty({__proto__:null,VoiceRecorderWeb:j0},Symbol.toStringTag,{value:"Module"}));io.VueAdvancedChat=Ol,io.register=_0,Object.defineProperties(io,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
